{"chunk_id":"ef271786e21c8c993d08c19a3f927b32","source_id":"4a72807680ed448b","text":"<p align=\"center\">\n  <img src=\"static/logo.png\" width=\"200px\" align=\"center\" alt=\"Open5e logo\" />\n  <h1 align=\"center\">Open5e API</h1>\n  <p align=\"center\">\n    <a href=\"https://open5e.com\">https://open5e.com</a>\n    <br/>\n    A JSON API for the D&D 5e gamesystem\n  </p>\n</p>\n<br />\n\n<p align=\"center\">\n<a href=\"https://api.open5e.com\" rel=\"nofollow\"><img src=\"https://img.shields.io/website?down_message=Down&label=Open5e%20API&up_message=Up&url=https%3A%2F%2Fapi.open5e.com\" alt=\"API\"></a>\n<a href=\"https://open5e.com\" rel=\"nofollow\"><img src=\"https://img.shields.io/website?down_message=Down&label=Open5e&up_message=Up&url=https%3A%2F%2Fopen5e.com\" alt=\"homepage\"></a>\n</p>\n\n<div align=\"center\">\n    <a href=\"https://api.open5e.com\">API</a>\n    <span>&nbsp;&nbsp;•&nbsp;&nbsp;</span>\n    <a href=\"https://discord.gg/9RNE2rY\">Discord</a>\n    <span>&nbsp;&nbsp;•&nbsp;&nbsp;</span>\n    <a href=\"https://www.patreon.com/open5e\">Patreon</a>\n</div>\n\n<br/>\n\n# Table of contents\n\n- [Table of contents](#table-of-contents)\n- [Introduction](#introduction)\n- [Installation](#installation)\n  * [Requirements](#requirements)\n  * [Modules](#modules)\n- [Development](#development)\n  * [Build](#build)\n    + [Search Indexing](#search-indexing)\n  * [Run](#run)\n  * [Building the OAS file](#building-the-oas-file)\n- [Contributing](#contributing)\n  * [Editing existing sources](#editing-existing-sources)\n  * [Adding a new source](#adding-a-new-source)\n  * [Change existing models](#change-existing-models)\n- [Tests]","position":{"index":0,"start_char":0,"end_char":1500},"metadata":{"content_hash":"4943f5f93fbd82e6"},"created_at":"2026-01-14T02:18:36.196Z"}
{"chunk_id":"9407ce0b79082f5efa13af656c030a21","source_id":"4a72807680ed448b","text":"ng sources](#editing-existing-sources)\n  * [Adding a new source](#adding-a-new-source)\n  * [Change existing models](#change-existing-models)\n- [Tests](#tests)\n- [Deployment](#deployment)\n  * [DigitalOcean](#digitalocean)\n  * [Railway.app](#railwayapp)\n  * [Docker](#docker)\n\n<small><i><a href='http://ecotrust-canada.github.io/markdown-toc/'>Table of contents generated with markdown-toc</a></i></small>\n\n# Introduction\n\nOpen5e is a community project driven by a small number of volunteers in their spare time. We welcome any and all contributions! Please join our Discord to help out: https://discord.gg/9RNE2rY or check out the issue board if you'd like to see what's being worked on!\n\nThe API uses the Django REST Framework for it's browsability and ease of use when developing CRUD endpoints. It uses django's default SQLite database, and pulls the data from the `/data` directory.\n\n# Installation\n\n## Requirements\n\n- [Python 3.11](https://www.python.org/downloads/)\n\n- [Pipenv](https://pipenv.pypa.io/en/latest/installation.html)\n\n## Dependencies\n\nPipenv is used to install all required packages from the `Pipfile` at the project root. Use the following command after cloning the project or switching branches.\n\n```bash\npipenv install --dev\n```\n\n# Development\n\n## Build\n\nCrate a local database and import game content. \n```bash\npipenv run python manage.py quicksetup --noindex\n```\n\nTo make sure the API is always using your updated code, this command must be run again if:\n- You add/remove/edit ","position":{"index":1,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"b7590ded5ce83fd4"},"created_at":"2026-01-14T02:18:36.196Z"}
{"chunk_id":"b15877b5e01b2c44190ef7d614ce03d6","source_id":"4a72807680ed448b","text":" manage.py quicksetup --noindex\n```\n\nTo make sure the API is always using your updated code, this command must be run again if:\n- You add/remove/edit Game Content\n- You edit Python code\n- You switch git branches\n\n\n### Search Indexing\n\nTo use the search function, you must build the search index by running the above command without the `--noindex` flag.\n```bash\npipenv run python manage.py quicksetup\n```\n\n## Run\n\nRun the server locally. This server is only for development and shall __not__ be used in production. The server will be available at `http://localhost:8000`.\n\n```bash\npipenv run python manage.py runserver\n```\n\n### Self-hosting\nIf you would like to host the API yourself locally, we suggest using gunicorn as your wsgi server. Below is an equivalent command to what we use in production, which makes the server available at `http://localhost:8888`.\n\n```bash\ngunicorn -b :8888 server.wsgi:application\n```\n\nYou can use our Dockerfile as inspiration, but it likely will not work without significant edits to your operating environment. We have customized our production environment to use it.\n\n## Building the OAS file\n\nAfter completing a build, you can generate an OAS file to be used by another application.\n```bash\npipenv run python manage.py spectacular --color --file openapi-schema.yml` to build the OAS file.\n```\n\n# Contributing\nSee [contribution guide](CONTRIBUTING.md).\n# Tests\n\nTests are located in the `api/tests` directory. These should be run before pushing new changes to the ","position":{"index":2,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"483a809c0a84f466"},"created_at":"2026-01-14T02:18:36.196Z"}
{"chunk_id":"e21306c1c74c5457d6b2ec2e6c79af7a","source_id":"4a72807680ed448b","text":"[contribution guide](CONTRIBUTING.md).\n# Tests\n\nTests are located in the `api/tests` directory. These should be run before pushing new changes to the main repository. These tests require that the api is [running](##run) at `http://localhost:8000`.\n\n```bash\npipenv run pytest\n```\n\n## Approval tests\nApproval tests are run against the approved files in `api/tests/approved_files` as `*.approved.*` . If a test fails then the recieved input will be stored in a `*.recieved.*` file. If you wish to approve the changes, replace the old approved file with the recieved file.\n\nRecieved files shall not be included in the git repo.\n\n# Deployment\n\n## DigitalOcean\n\nThis deployment has been tested using [DigitalOcean Apps](https://www.digitalocean.com/go/cloud-hosting) with Docker Hub.\n\nTo start up the server from scratch on a droplet:\n\n```bash\ngit pull https://github.com/open5e/open5e-api\nexport SECRET_KEY=a_new_secret_key\nexport SERVER_NAME=whatever.yourdomain.com\ncd open5e-api/\ndocker-compose up\n```\n\n## Railway.app\n1. Create a fork on Github. This is used to automatically deploy whenever you make a change.\n2. Login with your Github account on [Railway.app](https://railway.app) and give it access to manage your forked repository.\n3. Create a new Project and choose 'Deploy from GitHub repo'. Select your fork in the list.\n4. Keep all settings default and deploy. Accept when Railway asks to copy variables existing variables from the repository.\n5. Add the variable `PORT` with the value `8888`.\n6","position":{"index":3,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"b51e2c18949eefa8"},"created_at":"2026-01-14T02:18:36.196Z"}
{"chunk_id":"882fa9fb49044fa8c65568f5f8776e37","source_id":"4a72807680ed448b","text":"ult and deploy. Accept when Railway asks to copy variables existing variables from the repository.\n5. Add the variable `PORT` with the value `8888`.\n6. Add the variable `SERVER_NAME` with the [Railway-provided domain](https://docs.railway.app/deploy/exposing-your-app#railway-provided-domain) or add your own. \n7. Push a commit to Github and watch your open5e-api redeploy in minutes!\n\n\n## Docker\n\nWith docker installed, you can build the project with provided Dockerfile\n\n```bash\ndocker build\n```\n\nThis docker app can then be deployed with any provider.","position":{"index":4,"start_char":5400,"end_char":5954},"metadata":{"content_hash":"e4dd4bd724afaba6"},"created_at":"2026-01-14T02:18:36.196Z"}
{"chunk_id":"770eb6bff22a145f5826e597e8773319","source_id":"242c19059bf8ca4c","text":"This is a project that encodes 5th Edition Dungeons and Dragons rules into an API.\n\nTo ingest data, it is best to run `manage.py quicksetup` from within the pipenv environment. You can check the readme.md for additional instructions about using this repo.\n\nBefore calling a task finished, always run scripts like `quicksetup` and tests, plus any other reasonable checks, to ensure that data can correctly be ingested and your changes work.\n\nAll data is populated by ingesting .json files from the /data/v1 or /data/v2 directory using Django fixtures, it does not have a persistent database.\n\nThe current main project on this repo is converting data from the v1 format to the much more structured v2 format. This requires a lot of interpretation and parsing of old data, and the new endpoints for v2 are still being developed. Where possible, we want to create re-runnable scripts and use them to populate the new structure, but it may be more efficient for you to simply parse the data re-write it yourself, so to speak.\n\nThere is also an ongoing project to convert new unstructured pdf text material into the structured v2 format. This is due to new material being published. Each PDF tends to be unique so must be handled differently.","position":{"index":5,"start_char":0,"end_char":1236},"metadata":{"content_hash":"7dd292d7b2a375e5"},"created_at":"2026-01-14T02:18:37.728Z"}
{"chunk_id":"6e6688be605d67167b3c6d7d797e1aa7","source_id":"37d6c6361d0115c8","text":"# Contributing\n\nThis project is open to contributions from anyone. If you have a suggestion, a bug fix, a new feature, expanded content, or anything else, feel free to open an issue or a pull request. This\ndocument will guide you through the process of contributing to the project.\n\n## Table of Contents\n- [Overall Process](#overall-process)\n- [Data Contributions](#data-contributions)\n- [Code Contributions](#code-contributions)\n\n## Overall Process\nTo ensure that your contribution can be accepted and merged we recommend the following process. Many of these steps can\nbe done in parallel, and some may not be necessary depending on the size of the contribution.\n\n### Talk to Us\nThe project is currently undergoing many changes, and we want to make sure that your contribution can be accepted and \ndoes not conflict with any ongoing work. This can be done via an \n[issue](https://github.com/open5e/open5e-api/issues/new) on this repository or by joining our \n[Discord](https://discord.gg/QXqF6gSVqB) and talking to us there. Good and clear communication throughout the process will help \nensure that your contribution can be accepted.\n\nIt is also a good idea to check the [issues](https://github.com/open5e/open5e-api/issues) and \n[pull requests](https://github.com/open5e/open5e-api/pulls) to see if anyone else is working on something similar.\n\n### Set Up Your Environment\nIn order to be able to contribute you will need to set up your local development environment. Follow the instructions in\nthe","position":{"index":6,"start_char":0,"end_char":1500},"metadata":{"content_hash":"bc8d461fdadc2a8a"},"created_at":"2026-01-14T02:18:38.542Z"}
{"chunk_id":"de6347bbe2a8071b1a90e395f10aeae7","source_id":"37d6c6361d0115c8","text":"# Set Up Your Environment\nIn order to be able to contribute you will need to set up your local development environment. Follow the instructions in\nthe [README](./README.md) to get started.\n\n### Contribute Changes\nIn order to make your changes follow the steps below:\n\n1. [Fork the repository](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/fork-a-repo)\n2. Create a new branch for your changes\n3. Make your changes\n4. Test your changes\n5. Commit your changes\n6. Push your changes to your fork\n7. [Open a pull request](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request)\n8. Respond to any feedback. This is crucial to ensure that your changes can be merged.\n9. Wait for your changes to be merged. This may take some time, so be patient. If you have not heard back in a few days, feel free to ask for an update.\n10. Celebrate!\n11. Update your fork\n12. Delete your branch\n\nIf you have no experience working with Git or GitHub, you can find a guide on GitHub [here](https://guides.github.com/activities/hello-world/)\nand on Git [here](https://docs.github.com/en/get-started/using-git/about-git).\n\n## Data Contributions\nData contributions are a great way to help expand the content available in the API. This can be anything from adding new\nsources, fixing errors, or expanding existing content.\n\n### Version `v1` vs `v2`\nThe API has two distinct versions, `v1` a","position":{"index":7,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"5ae850cd0d4f1993"},"created_at":"2026-01-14T02:18:38.542Z"}
{"chunk_id":"c0e8ff0bd761f2263592ce50e183a3c7","source_id":"37d6c6361d0115c8","text":"be anything from adding new\nsources, fixing errors, or expanding existing content.\n\n### Version `v1` vs `v2`\nThe API has two distinct versions, `v1` and `v2`. As of 2024-04-08, `v1` is the dataset exclusively used in production,\nso contributing data to `v1` can get your changes live faster and for some resources is the only option at the moment. \nHowever, the migration to `v2` is ongoing, and for some resources `v2` is the better option. If you are unsure which\nversion to contribute to, feel free to ask us.\n\nThe process of editing and adding data is different for each version, so make sure to follow the correct instructions.\n\n### Adding a new source\nA new source is a new book or other publication which contains content published with an Open License. Adding new sources\nhave to be registered first in the data set and then the content can be added. Furthermore, it is important to link\nthe source to the license it was published under where possible. Otherwise, link to a page that shows the license.\n#### Version `v1`\nTo add a new source, create a new directory inside `data/v1` and a `Document.json` file that credits the source and\nlinks to the license it was published under. An example of this can be found [here](./data/v1/wotc-srd/Document.json).\nMake sure that the folder name matches up with the value of the `slug` field in the `Document.json` file. The \nslug needs to be unique across all source. Best to ask us before setting this.\n\n#### Version `v2`\nIn `v2` a new source can be","position":{"index":8,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"26c3c67f2075ab96"},"created_at":"2026-01-14T02:18:38.542Z"}
{"chunk_id":"f17c2b00830ee78f9add34ab0394f4a2","source_id":"37d6c6361d0115c8","text":"ocument.json` file. The \nslug needs to be unique across all source. Best to ask us before setting this.\n\n#### Version `v2`\nIn `v2` a new source can be added via the [admin interface](./docs/v2/admin_interface.md). Create a new document\nand fill out all the fields with the appropriate information. Once the document is created, you can associate\nit with the content you add.\n\n- `Name`: The name of the source. Use the full name of the published document.\n- `Desc`: A description of the source. Use the blurb on the sources website or give a brief overview of what it is.\n- `Key`: A unique key for the source. Make sure to talk to us before setting this. It should be a short, unique identifier.\n- `License`: The license the source was published under. Select one of the available licenses. If the license is not available, \n  create a new one.\n- `Publisher`: The publisher of the source. Select one of the available publishers. If the publisher is not available, \n  create a new one.\n- `GameSystem`: The gamesystem the source is associated with. Select one of the available gamesystems. If the gamesystem is not available, \n  create a new one.\n- `Author`: The author of the source. This can be a single author or a list of authors. List them in the format `Author 1, Author 2, Author 3`.\n- `Published at`: The Date and Time the source was published. Select the date it was published on. The time can be set to 00:00:00.\n- `Permalink`: A link to the source. This can be a link to the publishers websit","position":{"index":9,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"d92fbf505a532bf8"},"created_at":"2026-01-14T02:18:38.542Z"}
{"chunk_id":"23a565c71482493f19b24396ad62263c","source_id":"37d6c6361d0115c8","text":"Select the date it was published on. The time can be set to 00:00:00.\n- `Permalink`: A link to the source. This can be a link to the publishers website, a page on the publishers website, or a page that \n  contains the license information. Make sure to choose a link that is unlikely to change.\n\nOnce you've created the document (and publisher if it did not exist yet), export the data. This will create a new directory\nin the `data/v2` folder with the source information. You can then add the content to the source.\n\n\n### Adding / Editing Content\nAdding or editing content is the process of adding or changing the actual game content.\n\nWe recommend using an editor like [VS Code](https://code.visualstudio.com/) to make changes to the files. \nThis will help you catch any syntax errors and make it easier to navigate the data.\n\nAdditionally, make sure to check your data by running the API locally and see if there are any issues with the display.\n\nAnd finally, make sure to commit your changes in small, logical steps. \nThis will make it easier for us to review your changes.\n\n#### Version `v1`\nIn `v1` all changes are made directly in the JSON files. Each resource type has its own file in the \n`data/v1/{document-slug}` directory.\n\nWhen editing content, make sure to follow the structure of the existing content. This includes the fields that are\navailable and the format of the data. If you are adding new content, make sure to add it to the correct file and\nfollow the structure of the existing ","position":{"index":10,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"61d6d953fa4506f0"},"created_at":"2026-01-14T02:18:38.542Z"}
{"chunk_id":"a09f61d08ba5044d06f5ddfbf6fc8534","source_id":"37d6c6361d0115c8","text":"available and the format of the data. If you are adding new content, make sure to add it to the correct file and\nfollow the structure of the existing content.\n\nThe following resource types are available in `v1`:\n\n- `Archetype`\n- `Armor`\n- `Background`\n- `CharClass`\n- `Condition`\n- `Feat`\n- `MagicItem`\n- `Monster`\n- `MonsterSpell`\n- `Race`\n- `Section`\n- `Spell`\n- `SpellList`\n- `Subrace`\n- `Weapon`\n\nIf you are unsure where to add your content or how to structure it, feel free to ask us.\n\n#### Version `v2`\nIn `v2` changes can also be made via the [admin interface](./docs/v2/admin_interface.md) or by editing the exported \nJSON files. In the admin interface just navigate to the resource you want to edit and make your changes or add a new\nresource of a specific type.\n\nCurrently, the following resources are available via the admin interface:\n\n- `Alignment`\n- `Armor`\n- `Background`\n- `Character class`\n- `Condition`\n- `Creature set`\n- `Creature type`\n- `Creature`\n- `Damage type`\n- `Feat`\n- `Feature item`\n- `Feature`\n- `Item category`\n- `Item rarity`\n- `Item set`\n- `Item`\n- `Language`\n- `Race`\n- `Size`\n- `Spell school`\n- `Weapon`\n\nIf you are unsure where to add your content or how to structure it, feel free to ask us. Other resources cannot \ncurrently be added to the API in `v2`. This list will be expanded as the migration progresses.\n\n## Code Contributions\nCode contributions are welcome, but a bit more complex. The project is built using Django and Django Rest Framework, so you will n","position":{"index":11,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"9479d42e29eca193"},"created_at":"2026-01-14T02:18:38.542Z"}
{"chunk_id":"67df909a719bb9ef5c652eb6b28e718e","source_id":"37d6c6361d0115c8","text":" Code Contributions\nCode contributions are welcome, but a bit more complex. The project is built using Django and Django Rest Framework, so you will need to have some experience with these technologies. \nIf you are new to Django, you can find a tutorial [here](https://docs.djangoproject.com/en/5.0/).\n\nWith code changes it is very important to talk to us first. We want to make sure that your changes are in line with the \nproject goals and that they do not conflict with any ongoing work.\n\n### Changing Models\nModels such as Monsters and Classes are stored in the [api/models](/api/models) directory. \nThese define fields (hp, str, speed) and how they are output. The import of Game Content from `data` \nis handled by django's built-in [loaddata](https://docs.djangoproject.com/en/4.2/ref/django-admin/#django-admin-loaddata).","position":{"index":12,"start_char":8100,"end_char":8928},"metadata":{"content_hash":"34318a7f4e589538"},"created_at":"2026-01-14T02:18:38.542Z"}
{"chunk_id":"0df08804c4ff4f1bd85af979411c38a7","source_id":"04c88507668f0b44","text":"FROM python:3.11-slim\n\nRUN mkdir -p /opt/services/open5e-api\nWORKDIR /opt/services/open5e-api\n# copy our project code\n\n# install our dependencies\nRUN pip install pipenv gunicorn\nCOPY . /opt/services/open5e-api\n\nRUN pipenv install\n\n# migrate the db, load content, and index it\nRUN pipenv run python manage.py quicksetup\n\n# remove .env file (set your env vars via docker-compose.yml or your hosting provider)\nRUN rm .env\n\n#run gunicorn.\nCMD [\"pipenv\", \"run\", \"gunicorn\",\"-b\", \":8888\", \"server.wsgi:application\"]","position":{"index":13,"start_char":0,"end_char":509},"metadata":{"content_hash":"6c232c08e0dcb368"},"created_at":"2026-01-14T02:18:39.976Z"}
{"chunk_id":"7c6cc9a4c8ed62090d905b0b7387e3f9","source_id":"a9574d9fa87dc782","text":"[[source]]\nurl = \"https://pypi.org/simple\"\nverify_ssl = true\nname = \"pypi\"\n\n[packages]\ndjango = \"5.*\"\ndjangorestframework = \"*\"\ndjango-filter = \"*\"\ndjango-cors-headers = \"*\"\nnewrelic = \"*\"\nrequests = \"*\"\nwhitenoise = \"*\"\ngunicorn = \"*\"\ndrf-spectacular = {extras = [\"sidecar\"], version = \"*\"}\nnumpy = \"*\"\nrapidfuzz = \"*\"\nscikit-learn = \"*\"\n\n[dev-packages]\npytest = \"*\"\npytest-django = \"*\"\napprovaltests = \"*\"\npytest-approvaltests = \"*\"\n\n[requires]\npython_version = \"3.11\"","position":{"index":14,"start_char":0,"end_char":470},"metadata":{"content_hash":"840eac0ca522bcb2"},"created_at":"2026-01-14T02:18:41.213Z"}
{"chunk_id":"8da109a0f216183a23fa7d3cc4dd4a72","source_id":"d409a4c03c2b3a35","text":"from django.contrib import admin\n\n# Register your models here.","position":{"index":15,"start_char":0,"end_char":62},"metadata":{"content_hash":"9c5539688aefcc77"},"created_at":"2026-01-14T02:18:42.194Z"}
{"chunk_id":"f7e06def4d4d4a5297cd1cb97cfa4295","source_id":"3d35960df1b2e3cf","text":"from django.apps import AppConfig\n\n\nclass ApiConfig(AppConfig):\n    name = 'api'","position":{"index":16,"start_char":0,"end_char":80},"metadata":{"content_hash":"6b4d0ee59161cf44"},"created_at":"2026-01-14T02:18:42.393Z"}
{"chunk_id":"d5690e14b1260e04cf0fb6eb228b72d0","source_id":"61465257cf2f2f90","text":"import django_filters\nfrom api import models\n\n\nclass CommonFilterSet(django_filters.FilterSet):\n    document__slug__not_in = django_filters.BaseInFilter(\n        field_name=\"document__slug\", exclude=True\n    )\n\n\nclass SpellFilter(CommonFilterSet):\n    level_int = django_filters.NumberFilter(field_name=\"spell_level\")\n    concentration = django_filters.CharFilter(field_name=\"concentration\")\n    components = django_filters.CharFilter(field_name=\"components\")\n    spell_lists_not = django_filters.CharFilter(field_name=\"spell_lists\", exclude=True)\n\n    class Meta:\n        model = models.Spell\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"spell_level\": [\"exact\", \"range\", \"gt\", \"gte\", \"lt\", \"lte\"],\n            \"target_range_sort\": [\"exact\", \"range\", \"gt\", \"gte\", \"lt\", \"lte\"],\n            \"school\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"duration\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"requires_concentration\": [\"exact\"],\n            \"requires_verbal_components\": [\"exact\"],\n            \"requires_somatic_components\": [\"exact\"],\n            \"requires_material_components\": [\"exact\"],\n            \"casting_time\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n         ","position":{"index":17,"start_char":0,"end_char":1500},"metadata":{"content_hash":"4e7a3d6094fe1efd"},"created_at":"2026-01-14T02:18:43.383Z"}
{"chunk_id":"56ddbbbf67820e3c70adf9357c334a02","source_id":"61465257cf2f2f90","text":"ires_material_components\": [\"exact\"],\n            \"casting_time\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"dnd_class\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"spell_lists\": [\"exact\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass SpellListFilter(CommonFilterSet):\n    class Meta:\n        model = models.SpellList\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass MonsterFilter(CommonFilterSet):\n    class Meta:\n        model = models.Monster\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"cr\": [\"exact\", \"range\", \"gt\", \"gte\", \"lt\", \"lte\"],\n            \"hit_points\": [\"exact\", \"range\", \"gt\", \"gte\", \"lt\", \"lte\"],\n            \"armor_class\": [\"exact\", \"range\", \"gt\", \"gte\", \"lt\", \"lte\"],\n            \"type\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n    ","position":{"index":18,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"c321012fb6259486"},"created_at":"2026-01-14T02:18:43.383Z"}
{"chunk_id":"fcb812d1cfdc89495d13ecf487188031","source_id":"61465257cf2f2f90","text":"lt\", \"lte\"],\n            \"armor_class\": [\"exact\", \"range\", \"gt\", \"gte\", \"lt\", \"lte\"],\n            \"type\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"size\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"page_no\": [\"exact\", \"range\", \"gt\", \"gte\", \"lt\", \"lte\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass BackgroundFilter(CommonFilterSet):\n    class Meta:\n        model = models.Background\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"skill_proficiencies\": [\"iexact\", \"exact\", \"icontains\"],\n            \"tool_proficiencies\": [\"iexact\", \"exact\", \"icontains\"],\n            \"languages\": [\"iexact\", \"exact\", \"icontains\"],\n            \"feature\": [\"iexact\", \"exact\", \"icontains\"],\n            \"feature_desc\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass PlaneFilter(CommonFilterSet):\n    class Meta:\n        model = models.Plane\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n    ","position":{"index":19,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"93b540d320ec5975"},"created_at":"2026-01-14T02:18:43.383Z"}
{"chunk_id":"5af5b847d8584976de40a31d4db4c231","source_id":"61465257cf2f2f90","text":"n\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass SectionFilter(CommonFilterSet):\n    class Meta:\n        model = models.Section\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"parent\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass FeatFilter(CommonFilterSet):\n    class Meta:\n        model = models.Feat\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"document__slug\": [\"iexact\", \"exact\", \"in\"],\n        }\n\n\nclass ConditionFilter(CommonFilterSet):\n    class Meta:\n        model = models.Condition\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n  ","position":{"index":20,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"304fc103e6906437"},"created_at":"2026-01-14T02:18:43.383Z"}
{"chunk_id":"5a4adbb111db60373510bfa67850566f","source_id":"61465257cf2f2f90","text":"\n        model = models.Condition\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass RaceFilter(CommonFilterSet):\n    class Meta:\n        model = models.Race\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"document__slug\": [\"iexact\", \"exact\", \"in\"],\n            \"asi_desc\": [\"iexact\", \"exact\", \"icontains\"],\n            \"age\": [\"iexact\", \"exact\", \"icontains\"],\n            \"alignment\": [\"iexact\", \"exact\", \"icontains\"],\n            \"size\": [\"iexact\", \"exact\", \"icontains\"],\n            \"speed_desc\": [\"iexact\", \"exact\", \"icontains\"],\n            \"languages\": [\"iexact\", \"exact\", \"icontains\"],\n            \"vision\": [\"iexact\", \"exact\", \"icontains\"],\n            \"traits\": [\"iexact\", \"exact\", \"icontains\"],\n        }\n\n\nclass SubraceFilter(CommonFilterSet):\n    # Unused, but could be implemented later.\n    class Meta:\n        model = models.Subrace\n        fields = {\n            \"slug\": [\n                \"in\",\n       ","position":{"index":21,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"302e08185a4cffcf"},"created_at":"2026-01-14T02:18:43.383Z"}
{"chunk_id":"00a1f6b63e4b1fb78f453592240eb9b1","source_id":"61465257cf2f2f90","text":" but could be implemented later.\n    class Meta:\n        model = models.Subrace\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass CharClassFilter(CommonFilterSet):\n    class Meta:\n        model = models.CharClass\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"hit_dice\": [\"iexact\", \"exact\", \"in\"],\n            \"hp_at_1st_level\": [\"iexact\", \"exact\", \"icontains\"],\n            \"hp_at_higher_levels\": [\"iexact\", \"exact\", \"icontains\"],\n            \"prof_armor\": [\"iexact\", \"exact\", \"icontains\"],\n            \"prof_weapons\": [\"iexact\", \"exact\", \"icontains\"],\n            \"prof_tools\": [\"iexact\", \"exact\", \"icontains\"],\n            \"prof_skills\": [\"iexact\", \"exact\", \"icontains\"],\n            \"equipment\": [\"iexact\", \"exact\", \"icontains\"],\n            \"spellcasting_ability\": [\"iexact\", \"exact\", \"icontains\"],\n            \"subtypes_name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"document__slug\": [\n                \"","position":{"index":22,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"848ef99a99a82a69"},"created_at":"2026-01-14T02:18:43.383Z"}
{"chunk_id":"23fb61fac2c2a71553cc43cbbc0b5a58","source_id":"61465257cf2f2f90","text":"y\": [\"iexact\", \"exact\", \"icontains\"],\n            \"subtypes_name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass ArchetypeFilter(CommonFilterSet):\n    # Unused but could be implemented later.\n    class Meta:\n        model = models.Archetype\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass MagicItemFilter(CommonFilterSet):\n    class Meta:\n        model = models.MagicItem\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"type\": [\"iexact\", \"exact\", \"icontains\"],\n            \"rarity\": [\"iexact\", \"exact\", \"icontains\"],\n            \"requires_attunement\": [\"iexact\", \"exact\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass WeaponFilter(CommonFilterSet):\n    class Meta:\n        model = models.Weapon\n ","position":{"index":23,"start_char":8100,"end_char":9600},"metadata":{"content_hash":"4c673fc5017ada9f"},"created_at":"2026-01-14T02:18:43.383Z"}
{"chunk_id":"0a9df3efd4ef6d4070e87aa2995d451a","source_id":"61465257cf2f2f90","text":"        \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass WeaponFilter(CommonFilterSet):\n    class Meta:\n        model = models.Weapon\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"cost\": [\"iexact\", \"exact\", \"icontains\"],\n            \"damage_dice\": [\"iexact\", \"exact\", \"icontains\"],\n            \"damage_type\": [\"iexact\", \"exact\", \"icontains\"],\n            \"weight\": [\"iexact\", \"exact\", \"icontains\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }\n\n\nclass ArmorFilter(CommonFilterSet):\n    class Meta:\n        model = models.Armor\n        fields = {\n            \"slug\": [\n                \"in\",\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n            \"name\": [\"iexact\", \"exact\", \"icontains\"],\n            \"desc\": [\"iexact\", \"exact\", \"in\", \"icontains\"],\n            \"cost\": [\"iexact\", \"exact\", \"icontains\"],\n            \"weight\": [\"iexact\", \"exact\", \"icontains\"],\n            \"document__slug\": [\n                \"iexact\",\n                \"exact\",\n                \"in\",\n            ],\n        }","position":{"index":24,"start_char":9450,"end_char":10813},"metadata":{"content_hash":"6b67bcb080a4eb31"},"created_at":"2026-01-14T02:18:43.383Z"}
{"chunk_id":"975326bda0e1883a0c2cbaa289fe6abf","source_id":"8fde9d7732030dac","text":"\"\"\"\nThe initialization for models for open5e's api.\n\"\"\"\nfrom .models import Manifest\nfrom .models import Document\nfrom .models import GameContent\nfrom .models import CharClass\nfrom .models import Archetype\nfrom .models import Race\nfrom .models import Subrace\nfrom .models import Plane\nfrom .models import Section\nfrom .models import Feat\nfrom .models import Condition\nfrom .models import Background\nfrom .models import MagicItem\nfrom .models import Weapon\nfrom .models import Armor\nfrom .spell import Spell\nfrom .spell import SpellList\nfrom .monster import Monster\nfrom .monster import MonsterSpell","position":{"index":25,"start_char":0,"end_char":598},"metadata":{"content_hash":"73df7e4a1c0b40f2"},"created_at":"2026-01-14T02:18:44.410Z"}
{"chunk_id":"59e608483e4f2cd4caed6c647c4370fc","source_id":"2229bcb214b52efb","text":"import json\nimport uuid\n\nfrom django.db import models\nfrom django.urls import reverse\nfrom django.shortcuts import redirect\nfrom django.template.defaultfilters import slugify\n#from api_v2 import urls as urls_v2\n\nclass Manifest(models.Model):\n    \"\"\"A Manifest contains a hash based on the contents of a file.\n\n    This is intended for folks who process and store content from our API.\n    When they download content, they also download the corresponding manifest.\n    Periodically, they check back in to see whether any manifests have changed.\n    If so, then they know to re-download that source.\n    \"\"\"\n    \n    filename = models.CharField(\n        max_length=255,\n        unique=True,\n        help_text='Input file name.')\n    type = models.CharField(\n        max_length=25,\n        help_text='Type of file (maps to a model).')\n    hash = models.CharField(max_length=255,\n                            help_text='md5 hash of the file contents.')\n    created_at = models.DateTimeField(\n        auto_now_add=True,\n        help_text='Date that this object was added to the database.')\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Manifests\"\n\n\nclass Document(models.Model):\n    slug = models.CharField(max_length=255, unique=True, default=uuid.uuid1)\n    # System Reference Document\n    title = models.TextField(help_text='Title of the document.')\n    desc = models.TextField(help_text='Description of the docum","position":{"index":26,"start_char":0,"end_char":1500},"metadata":{"content_hash":"543074d2968765aa"},"created_at":"2026-01-14T02:18:44.786Z"}
{"chunk_id":"043e2120d38dcb4b5683ad8226db3e07","source_id":"2229bcb214b52efb","text":"em Reference Document\n    title = models.TextField(help_text='Title of the document.')\n    desc = models.TextField(help_text='Description of the document.')\n    license = models.TextField(\n        help_text='The license of the content within the document.')  # Open Gaming License\n    # Mike Mearls, Jeremy Crawford, Chris Perkins, Rodney Thompson, Peter Lee,\n    # James Wyatt, Robert J. Schwalb, Bruce R. Cordell, Chris Sims, and Steve\n    # Townshend, based on original material by E. Gary Gygax and Dave Arneson.\n    author = models.TextField(help_text='Author or authors.')\n    organization = models.TextField(\n        help_text='Publishing organization.')  # Wizards of the Coast\n    version = models.TextField(help_text='Document version.')  # 5.1\n    # http://dnd.wizards.com/articles/features/systems-reference-document-srd\n    url = models.URLField(help_text='URL reference to get the document.')\n    copyright = models.TextField(\n        null=True, help_text='Copyright statement.')  # Copyright 2025 open5e\n    #created_at = models.DateTimeField(\n    #    auto_now_add=True,\n    #    help_text='Date that this object was added to the database.')\n    license_url = models.TextField(\n        default=\"http://open5e.com/legal\",\n        help_text='URL reference for the license.')\n\n    v2_related_key = models.TextField(\n        null=True,\n        help_text='Key mapping for v2 document.'\n    )\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural ","position":{"index":27,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"0b521ad8603b7711"},"created_at":"2026-01-14T02:18:44.786Z"}
{"chunk_id":"8f2f7686f658ba203148c50be46c57aa","source_id":"2229bcb214b52efb","text":"      help_text='Key mapping for v2 document.'\n    )\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Documents\"\n\n\nclass GameContent(models.Model):\n    slug = models.CharField(\n        max_length=255,\n        unique=True,\n        default=uuid.uuid1,\n        primary_key=True,\n        help_text='Short name for the game content item.')  # dispel-evil-and-good\n    name = models.TextField(help_text='Name of the game content item.')\n    desc = models.TextField(\n        help_text='Description of the game content item. Markdown.')\n    # Like the System Reference Document\n    document = models.ForeignKey(Document, on_delete=models.CASCADE)\n    #created_at = models.DateTimeField(auto_now_add=True, editable=False)\n\n    # If the source is a physical book (possibly with a digital version),\n    # then page_no is the page number in the physical book, even if the PDF\n    # page number is different due to additional cover pages.\n    # If the source is only digital, then of course just the PDF page number.\n    # This field may be hard to populate across-the-board, so leave as None\n    # unless explicitly populated.\n    page_no = models.IntegerField(null=True)\n\n    def document__slug(self):\n        return self.document.slug\n\n    def document__title(self):\n        return self.document.title\n\n    def document__license_url(self):\n        return self.document.license_url\n\n    def document__url(self):\n        retu","position":{"index":28,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"ecd6814bafa60919"},"created_at":"2026-01-14T02:18:44.786Z"}
{"chunk_id":"0de49469f76aed4e920e003a16fd522f","source_id":"2229bcb214b52efb","text":"  return self.document.title\n\n    def document__license_url(self):\n        return self.document.license_url\n\n    def document__url(self):\n        return self.document.url\n\n    def v2_converted_path(self):\n        # Returns a text string that is the theoretical v2 object url related\n        # to a given object. Does not guarantee that an object exists at that\n        # url.\n\n        url_lookup = { #Looks up v1 object type to relevant v2 url.\n            \"Spell\":\"spell\",\n            \"Monster\":\"creature\",\n            \"Background\":\"background\",\n            \"Plane\":\"environments\",\n            \"Section\":\"rule\",\n            \"Feat\":\"feat\",\n            \"Condition\":\"condition\",\n            \"Race\":\"race\",\n            \"CharClass\":\"class\",\n            \"MagicItem\":\"item\",\n            \"Weapon\":\"item\",\n            \"Armor\":\"item\"\n        }\n\n        exclude_doc_key = ['Condition']\n\n        a5e_doc_lookup = {\n            \"Monster\":\"a5e-mm\",\n            \"MagicItem\":\"a5e-ddg\",\n            \"Spell\":\"a5e-ag\",\n            \"Background\":\"a5e-ag\",\n            \"Plane\":\"a5e-ag\",\n            \"Section\":\"a5e-ag\",\n            \"Feat\":\"a5e-ag\",\n            \"Condition\":\"a5e-ag\",\n            \"Race\":\"a5e-ag\",\n            \"CharClass\":\"a5e-ag\",\n            \"Weapon\":\"a5e-ag\",\n            \"Armor\":\"a5e-ag\"\n        }\n\n        resource = url_lookup[self.__class__.__name__]+\"-detail\"\n        v2_document = self.document.v2_related_key\n        if v2_document==\"a5e\":\n            v2_document = a5e_doc_lookup[self.__class__.__","position":{"index":29,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"3b9cd335ce91925d"},"created_at":"2026-01-14T02:18:44.786Z"}
{"chunk_id":"315299903fdfa3829a4b5a973ea2d97a","source_id":"2229bcb214b52efb","text":"\"-detail\"\n        v2_document = self.document.v2_related_key\n        if v2_document==\"a5e\":\n            v2_document = a5e_doc_lookup[self.__class__.__name__]\n        converted_name=slugify(self.name)\n\n        if self.__class__.__name__ in exclude_doc_key:\n            return reverse(resource,kwargs={'pk':f\"{converted_name}\"})\n        return redirect(reverse(resource,kwargs={'pk':f\"{v2_document}_{converted_name}\"})).url\n\n\n    class Meta:\n        abstract = True\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"GameContents\"\n\n\nclass CharClass(GameContent):\n    hit_dice = models.TextField(\n        help_text='Description of dice for each level such as \"1d12 per barbarian level\"')\n    hp_at_1st_level = models.TextField(\n        help_text='Description of the Hit Points at level 1, such as \"12 + your Constitution modifier\"')\n    hp_at_higher_levels = models.TextField(\n        help_text='Desciption of increases in Hit Points per level.')\n    prof_armor = models.TextField(\n        help_text='Comma-separated list of armor types that the class is proficient with.')\n    prof_weapons = models.TextField(\n        help_text='Comma-separated list of weapons that the class is proficient with.')\n    prof_tools = models.TextField(\n        help_text='Description of tools the class is proficient with.')\n    prof_saving_throws = models.TextField(\n        help_text='Comma separated list of saving throw abilities tha","position":{"index":30,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"b6826c17de114a78"},"created_at":"2026-01-14T02:18:44.786Z"}
{"chunk_id":"c89d93a8d1aa130a7a79b6ab7c0f8d40","source_id":"2229bcb214b52efb","text":"tools the class is proficient with.')\n    prof_saving_throws = models.TextField(\n        help_text='Comma separated list of saving throw abilities that the class is proficient with.')\n    prof_skills = models.TextField(\n        help_text='Description of the skills that the class is proficient with.')\n    equipment = models.TextField(\n        help_text='Markdown description of starting equipment.')\n    table = models.TextField(\n        help_text='Table describing class growth by level.')\n    spellcasting_ability = models.TextField(\n        help_text='Ability used for casting spells.')\n    subtypes_name = models.TextField(\n        help_text='Preferred name for class subtypes, such as \"Domains\" (for Cleric).')\n    route = models.TextField(default=\"classes/\")\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"CharClasses\"\n\n\nclass Archetype(GameContent):\n    char_class = models.ForeignKey(\n        CharClass,\n        related_name='archetypes',\n        on_delete=models.CASCADE,\n        null=True)\n    route = models.TextField(default=\"archetypes/\")\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Archetypes\"\n\n\nclass Race(GameContent):\n    asi_desc = models.TextField(\n        help_text='Markdown description of ability score changes for this race.')\n    asi_json = models.TextField()\n\n    def asi(self):\n        return","position":{"index":31,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"0d4a136854294b4f"},"created_at":"2026-01-14T02:18:44.786Z"}
{"chunk_id":"1e33da56b3c46310058d2700a9d251b6","source_id":"2229bcb214b52efb","text":"        help_text='Markdown description of ability score changes for this race.')\n    asi_json = models.TextField()\n\n    def asi(self):\n        return json.loads(self.asi_json)\n    age = models.TextField(\n        help_text='Markdown description of how this race ages.')\n    alignment = models.TextField(\n        help_text='Markdown description of the alignment tendencies of the race.')\n    size = models.TextField(\n        help_text='Markdown description of the size category of the race.')\n    size_raw = models.TextField(\n        help_text='Size Category.', default=\"Medium\")\n    speed_json = models.TextField()\n\n    def speed(self):\n        return json.loads(self.speed_json)\n    speed_desc = models.TextField(\n        help_text='Markdown description of the speed of the race.')\n    languages = models.TextField(\n        help_text='Markdown description of the languages known by the race.')\n    vision = models.TextField(\n        help_text='Markdown description of any vision features the race has.')\n    traits = models.TextField(\n        help_text='Markdown description of special traits thr race has.')\n    route = models.TextField(default=\"races/\")\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Races\"\n\n\nclass Subrace(GameContent):\n    asi_desc = models.TextField(\n        help_text='Markdown description of ability score changes for this subrace.')\n    asi_json = models.TextField()\n\n    def asi(self)","position":{"index":32,"start_char":8100,"end_char":9600},"metadata":{"content_hash":"4f3e2aed30f51cc9"},"created_at":"2026-01-14T02:18:44.786Z"}
{"chunk_id":"ac90d9f8f9780e9650489006b1cebfa5","source_id":"2229bcb214b52efb","text":"s.TextField(\n        help_text='Markdown description of ability score changes for this subrace.')\n    asi_json = models.TextField()\n\n    def asi(self):\n        return json.loads(self.asi_json)\n    traits = models.TextField(\n        help_text='Markdown description of special traits thr race has.')\n    parent_race = models.ForeignKey(\n        Race,\n        related_name='subraces',\n        on_delete=models.CASCADE,\n        null=True)\n    route = models.TextField(default=\"subraces/\")\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Subraces\"\n\n\nclass Plane(GameContent):\n    parent = models.TextField(null=True)\n    route = models.TextField(default=\"planes/\")\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Planes\"\n\n\nclass Section(GameContent):\n    parent = models.TextField(null=True)\n    route = models.TextField(default=\"sections/\")\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Sections\"\n\n    def search_result_extra_fields(self):\n        return {\n            \"parent\":self.parent}\n\n\n\n\nclass Feat(GameContent):\n    prerequisite = models.TextField(\n        null=True, help_text='Description of a prerequisite for the character.')\n    # desc\n    route = models.TextField(default=\"feats/\")\n    effects_desc_json = models.TextField()","position":{"index":33,"start_char":9450,"end_char":10950},"metadata":{"content_hash":"7646e4ff2d692e2a"},"created_at":"2026-01-14T02:18:44.786Z"}
{"chunk_id":"a289d945b414cb9b159858edb181d33f","source_id":"2229bcb214b52efb","text":"escription of a prerequisite for the character.')\n    # desc\n    route = models.TextField(default=\"feats/\")\n    effects_desc_json = models.TextField()\n\n    def effects_desc(self):\n        if self.effects_desc_json:\n            return json.loads(self.effects_desc_json)\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Feats\"\n\n\nclass Condition(GameContent):\n    pass\n    route = models.TextField(default=\"conditions/\")\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Conditions\"\n\n\nclass Background(GameContent):\n    skill_proficiencies = models.TextField(\n        null=True,\n        help_text='Description of the skills that the background provides proficiency with.')\n    tool_proficiencies = models.TextField(\n        null=True,\n        help_text='Description of the tools that the background provides is proficiency with.')\n    languages = models.TextField(\n        null=True,\n        help_text='Description of the languages that the background provides knowledge of.')\n    equipment = models.TextField(\n        help_text='Markdown description of equipment held by characters with this background.')\n    feature = models.TextField(\n        help_text='Title of a feature this background grants.')\n    feature_desc = models.TextField(\n        help_text='Description of the related background feature.')\n    suggested_characte","position":{"index":34,"start_char":10800,"end_char":12300},"metadata":{"content_hash":"eec9a899a34929c4"},"created_at":"2026-01-14T02:18:44.786Z"}
{"chunk_id":"7197283e1173cd9cc4be57e15154a716","source_id":"2229bcb214b52efb","text":"s background grants.')\n    feature_desc = models.TextField(\n        help_text='Description of the related background feature.')\n    suggested_characteristics = models.TextField(\n        help_text='Currently not implemented.')\n    route = models.TextField(default=\"backgrounds/\")\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Backgrounds\"\n\n\nclass MagicItem(GameContent):\n    type = models.TextField(\n        help_text='Description of the item type, such as \"Armor (light)\".')\n    rarity = models.TextField(\n        help_text='Description of the rarity, such as \"rare\".')\n    requires_attunement = models.TextField(\n        'The word \"requires attunement\" or blank.')\n    route = models.TextField(default=\"magicitems/\")\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"MagicItems\"\n    \n    def search_result_extra_fields(self):\n        return {\n            \"type\":self.type,\n            \"rarity\":self.rarity,\n            \"requires_attunement\":self.requires_attunement}\n\n\n\nclass Weapon(GameContent):\n    category = models.TextField(\n        help_text='Category of the weapon, such as \"Martial Melee Weapons\"')\n    cost = models.TextField(\n        help_text='Suggested cost of the weapon, such as \"100 gp\"')\n    damage_dice = models.TextField(\n        help_text='Dice string of the weapon damage, such as \"1d8\".')\n    damage_ty","position":{"index":35,"start_char":12150,"end_char":13650},"metadata":{"content_hash":"82e12c5a56906519"},"created_at":"2026-01-14T02:18:44.786Z"}
{"chunk_id":"12f6268fedc15e85c48da260621674c4","source_id":"2229bcb214b52efb","text":"the weapon, such as \"100 gp\"')\n    damage_dice = models.TextField(\n        help_text='Dice string of the weapon damage, such as \"1d8\".')\n    damage_type = models.TextField(\n        help_text='Damage type of the weapon, such as \"bludgeoning\".')\n    weight = models.TextField(help_text='Weight of the item, such as \"1 lb.\".')\n    properties_json = models.TextField(\n        help_text='List of properties that the weapon has.')\n\n    def properties(self):\n        if self.properties_json:\n            return json.loads(self.properties_json)\n    route = models.TextField(default=\"weapons/\")\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Weapons\"\n\n\nclass Armor(GameContent):\n    category = models.TextField(\n        help_text='Category of the armor, such as \"Heavy Armor\"')\n    cost = models.TextField(\n        help_text='Suggested cost of the weapon, such as \"100 gp\"')\n    weight = models.TextField(help_text='Apparently an empty string.')\n    stealth_disadvantage = models.BooleanField(\n        'Boolean representing whether wearing the armor results in stealth disadvantage for the wearer.')\n    base_ac = models.IntegerField()\n    plus_dex_mod = models.BooleanField(default=False)\n    plus_con_mod = models.BooleanField(default=False)\n    plus_wis_mod = models.BooleanField(default=False)\n    plus_flat_mod = models.IntegerField(default=False)  # Build a shield this way.\n    plus_max = models.IntegerField(defa","position":{"index":36,"start_char":13500,"end_char":15000},"metadata":{"content_hash":"3386123baf8af668"},"created_at":"2026-01-14T02:18:44.786Z"}
{"chunk_id":"f21583b76d16dbaaf363f81f51b81a3b","source_id":"2229bcb214b52efb","text":"BooleanField(default=False)\n    plus_flat_mod = models.IntegerField(default=False)  # Build a shield this way.\n    plus_max = models.IntegerField(default=0)\n\n    def ac_string(self):\n        ac = str(self.base_ac)\n        if self.plus_dex_mod:\n            ac += (\" + Dex modifier\")\n        if self.plus_con_mod:\n            ac += (\" + Con modifier\")\n        if self.plus_wis_mod:\n            ac += (\" + Wis modifier\")\n        if self.plus_flat_mod:\n            ac += (\" +\" + str(self.plus_flat_mod))\n        if self.plus_max:\n            ac += (\" (max 2)\")\n        return ac.strip()\n\n    strength_requirement = models.IntegerField(null=True)\n\n    route = models.TextField(default=\"armor/\")\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Armors\"","position":{"index":37,"start_char":14850,"end_char":15683},"metadata":{"content_hash":"556edbf870114cee"},"created_at":"2026-01-14T02:18:44.786Z"}
{"chunk_id":"410074988758d796c7ce8142907eb589","source_id":"ef918f8d631bb964","text":"import json\n\nfrom django.db import models\n\nfrom .models import GameContent\nfrom .spell import Spell\n\n\nclass Monster(GameContent):\n    size = models.TextField(help_text='Monster size category.')\n    type = models.TextField(\n        help_text='The type of the monster, such as \"aberration\"')\n    subtype = models.TextField(\n        help_text='If applicable, the subtype of the monster, such as \"shapechanger\"')\n    group = models.TextField(\n        null=True,\n        help_text='Used to group similar creatures at different stages. \"Green Dragon\"')\n    alignment = models.TextField(\n        help_text='Short description of the creature alignment, such as \"lawful good\"')\n    armor_class = models.IntegerField(\n        default=12, help_text='Integer representing the armor class.')\n    armor_desc = models.TextField(\n        null=True, help_text='Description of the armor or armor type.')\n    hit_points = models.IntegerField(\n        null=True, help_text='Integer of the hit points.')\n    hit_dice = models.TextField(\n        help_text='Dice string representing a way to calculate hit points.')\n    speed_json = models.TextField()\n\n    def speed(self):\n        return json.loads(self.speed_json)\n\n    environments_json = models.TextField(\n        null=True,\n        help_text='String list of environments that the monster can be found in.')\n\n    def environments(self):\n        return json.loads(self.environments_json or \"[]\")\n\n    strength = models.IntegerField(\n        null=True, help_text='Integer","position":{"index":38,"start_char":0,"end_char":1500},"metadata":{"content_hash":"91afe11fb4840150"},"created_at":"2026-01-14T02:18:45.449Z"}
{"chunk_id":"989f61ea4da733ca651b101ee8024208","source_id":"ef918f8d631bb964","text":"vironments(self):\n        return json.loads(self.environments_json or \"[]\")\n\n    strength = models.IntegerField(\n        null=True, help_text='Integer representing the strength score.')\n    dexterity = models.IntegerField(\n        null=True, help_text='Integer represeting the dexterity score.')\n    constitution = models.IntegerField(\n        null=True, help_text='Integer representing the constitution score.')\n    intelligence = models.IntegerField(\n        null=True, help_text='Integer representing the intelligence score.')\n    wisdom = models.IntegerField(\n        null=True, help_text='Integer representing the wisdom score.')\n    charisma = models.IntegerField(\n        null=True, help_text='Integer representing the charisma score.')\n    strength_save = models.IntegerField(\n        null=True, help_text='Integer representing the strength save.')\n    dexterity_save = models.IntegerField(\n        null=True, help_text='Integer representing the dexterity save.')\n    constitution_save = models.IntegerField(\n        null=True, help_text='Integer representing the constitution save.')\n    intelligence_save = models.IntegerField(\n        null=True, help_text='Integer representing the intelligence save')\n    wisdom_save = models.IntegerField(\n        null=True, help_text='Integer representing the wisdom save.')\n    charisma_save = models.IntegerField(\n        null=True, help_text='Integer representing the charisma save.')\n    perception = models.IntegerField(\n        null=True, help_tex","position":{"index":39,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"8831b6bd830850a2"},"created_at":"2026-01-14T02:18:45.449Z"}
{"chunk_id":"bcf59a0d5c4a12e939f39565a0957b01","source_id":"ef918f8d631bb964","text":"ntegerField(\n        null=True, help_text='Integer representing the charisma save.')\n    perception = models.IntegerField(\n        null=True, help_text='Integer representing the passive perception score.')\n    skills_json = models.TextField()\n\n    def skills(self):\n        return json.loads(self.skills_json or \"{}\")\n    damage_vulnerabilities = models.TextField(\n        help_text='Comma separated list of damage types the monster is vulnerable to.')\n    damage_resistances = models.TextField(\n        help_text='Comma separated list of damage types the monster is resistant to.')\n    damage_immunities = models.TextField(\n        help_text='Comma separated list of damage types the monster is immune to.')\n    condition_immunities = models.TextField(\n        help_text='Comma separated list of conditions the monster is immune to.')\n    senses = models.TextField(\n        'Comma separated list of senses, such as \"blindsight 60ft.\"')\n    languages = models.TextField(\n        'Comma separated list of languages that the monster speaks.')\n    challenge_rating = models.TextField(help_text='Monster challenge rating.')\n    cr = models.FloatField(\n        null=True,\n        help_text='Monster challenge rating as a float.')\n    actions_json = models.TextField()  # a list of actions in json text.\n\n    def actions(self):\n        return json.loads(self.actions_json or \"[]\")\n    \n    bonus_actions_json = models.TextField(default=None, null=True)\n    \n    def bonus_actions(self):\n        return json","position":{"index":40,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"b4c611be93dfbaf6"},"created_at":"2026-01-14T02:18:45.449Z"}
{"chunk_id":"3cf23a3969d7a7118541d181d8db506a","source_id":"ef918f8d631bb964","text":"lf.actions_json or \"[]\")\n    \n    bonus_actions_json = models.TextField(default=None, null=True)\n    \n    def bonus_actions(self):\n        return json.loads(self.bonus_actions_json or \"[]\")\n    \n    # A list of special abilities in json text.\n    special_abilities_json = models.TextField()\n\n    def special_abilities(self):\n        return json.loads(self.special_abilities_json or \"[]\")\n    reactions_json = models.TextField(null=True)  # A list of reactions in json text.\n\n    def reactions(self):\n        return json.loads(self.reactions_json or \"[]\")\n    legendary_desc = models.TextField(null=True)\n    # a list of legendary actions in json.\n    legendary_actions_json = models.TextField(null=True)\n\n    def legendary_actions(self):\n        return json.loads(self.legendary_actions_json or \"[]\")\n    spells_json = models.TextField()\n    spell_list = models.ManyToManyField(\n        Spell,\n        symmetrical=True,\n        through=\"monsterSpell\")\n    route = models.TextField(default=\"monsters/\")\n    img_main = models.URLField(null=True)\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Monsters\"\n\n    def search_result_extra_fields(self):\n        return {\n            \"armor_class\":self.armor_class,\n            \"hit_points\":self.hit_points,\n            \"hit_dice\":self.hit_dice,\n            \"strength\":self.strength,\n            \"dexterity\":self.dexterity,\n            \"constitution\":self.constitution,\n  ","position":{"index":41,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"e67c746ec1ad76d2"},"created_at":"2026-01-14T02:18:45.449Z"}
{"chunk_id":"79f0d92ec6482387130a7fd8939afbe9","source_id":"ef918f8d631bb964","text":"it_dice\":self.hit_dice,\n            \"strength\":self.strength,\n            \"dexterity\":self.dexterity,\n            \"constitution\":self.constitution,\n            \"intelligence\":self.intelligence,\n            \"wisdom\":self.wisdom,\n            \"charisma\":self.charisma,\n            \"challenge_rating\":self.challenge_rating,\n            \"cr\":self.cr\n              }\n\n    def as_v2_creature(self):\n        from api_v2.models import Creature, Document, DamageType\n        from scripts.data_manipulation import v1_to_v2_data\n        creature = Creature()\n        creature.key = v1_to_v2_data.get_v2_key_from_v1_obj(self)\n        creature.document = Document.objects.get(key=v1_to_v2_data.get_v2_doc_from_v1_obj(v1_obj=self))\n        creature.name = self.name\n        creature.size = v1_to_v2_data.get_v2_size_from_v1_obj(self)\n        creature.type = v1_to_v2_data.get_v2_type_from_v1_obj(self)\n        creature.alignment = v1_to_v2_data.get_alignment(self)\n        creature.category = \"Monsters\"\n        creature.armor_class = self.armor_class\n        creature.hit_points = self.hit_points\n        creature.passive_perception = v1_to_v2_data.get_passive_perception(self)\n        creature.hit_dice = self.hit_dice\n        creature.normal_sight_range = v1_to_v2_data.get_senses(self)['normal']\n        creature.darkvision_range = v1_to_v2_data.get_senses(self)['darkvision']\n        creature.truesight_range = v1_to_v2_data.get_senses(self)['truesight']\n        creature.blindsight_range = v1_to_v2_data.get_s","position":{"index":42,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"0d112a520db9776b"},"created_at":"2026-01-14T02:18:45.449Z"}
{"chunk_id":"9ac3375c8d77d1864540dec1864a5796","source_id":"ef918f8d631bb964","text":")['darkvision']\n        creature.truesight_range = v1_to_v2_data.get_senses(self)['truesight']\n        creature.blindsight_range = v1_to_v2_data.get_senses(self)['blindsight']\n        creature.tremorsense_range = v1_to_v2_data.get_senses(self)['tremorsense']\n        # Languages\n\n\n        v1_to_v2_data.copy_v2_speed_from_v1_creature(v1_obj=self, v2_obj=creature)\n\n        v1_to_v2_data.copy_v2_scores_from_v1_creature(self, creature)\n\n        v1_to_v2_data.copy_v2_throws_from_v1_creature(self, creature)\n\n        v1_to_v2_data.copy_v2_skills_from_v1_creature(self, creature)\n\n\n\n        return creature\n\n\nclass MonsterSpell(models.Model):\n    spell = models.ForeignKey(Spell, on_delete=models.CASCADE)\n    monster = models.ForeignKey(Monster, on_delete=models.CASCADE)\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"MonsterSpells\"","position":{"index":43,"start_char":6750,"end_char":7670},"metadata":{"content_hash":"d303886678064053"},"created_at":"2026-01-14T02:18:45.449Z"}
{"chunk_id":"d7b07070a57b39fa0274adecf476b7de","source_id":"e359ab098c2b0eaa","text":"\"\"\"\nThe model for a spell.\n\nAlso includes importing and some presentation logic.\n\"\"\"\n\nfrom django.db import models\nfrom django.template.defaultfilters import slugify\nfrom django.core.validators import MinValueValidator\nfrom django.core.validators import MaxValueValidator\n\nfrom .models import GameContent\nfrom ..validators import spell_school_validator\n\n\nclass Spell(GameContent):\n    \"\"\"The model for a spell.\"\"\"\n\n    # Stored metadata about the spell\n    page = models.TextField(\n        help_text='Page number reference for the document.')\n\n    spell_level = models.IntegerField(\n        validators=[MinValueValidator(0), MaxValueValidator(9)],\n        help_text='Integer representing the level of the spell. Cantrip is 0.')\n\n    dnd_class = models.TextField(\n        help_text='List of classes (comma separated) that can learn this spell.')\n\n    school = models.TextField(\n        validators = [spell_school_validator],\n        help_text='Representation of the school of magic, such as \"illusion\" or \"evocation\".')\n\n    # Computed metadata about the spell\n    def v1_level(self):\n        \"\"\"Presents the spell level in a friendly format.\"\"\"\n        spell_level_name_lookup = [\n            'Cantrip',\n            '1st-level',\n            '2nd-level',\n            '3rd-level',\n            '4th-level',\n            '5th-level',\n            '6th-level',\n            '7th-level',\n            '8th-level',\n            '9th-level'\n        ]\n        return spell_level_name_lookup[self.spell_level]\n\n    ","position":{"index":44,"start_char":0,"end_char":1500},"metadata":{"content_hash":"74e4993964b75107"},"created_at":"2026-01-14T02:18:45.924Z"}
{"chunk_id":"f3b974c74f46b636339be0c1716b0827","source_id":"e359ab098c2b0eaa","text":"l',\n            '7th-level',\n            '8th-level',\n            '9th-level'\n        ]\n        return spell_level_name_lookup[self.spell_level]\n\n    # Stored data about casting the spell\n    casting_time = models.TextField(\n        help_text='Amount of time it takes to cast the spell, such as \"1 bonus action\" or \"4 hours\".')\n\n    range = models.TextField(help_text='Text description of the target range.')\n\n    target_range_sort = models.IntegerField(\n        validators=[MinValueValidator(0)],\n        help_text='Sortable distance ranking to the target. 0 for self, 1 for touch, sight is 9999, unlimited (same plane) is 99990, unlimited any plane is 99999. All other values in feet.')\n\n    requires_verbal_components = models.BooleanField(\n        help_text='Casting this spell requires verbal components.',\n        default=False)\n    requires_somatic_components = models.BooleanField(\n        help_text='Casting this spell requires somatic components.',\n        default=False)\n    requires_material_components = models.BooleanField(\n        help_text='Casting this spell requires material components.',\n        default=False)\n\n    material = models.TextField(\n        help_text='Description of the material required.')\n\n    higher_level = models.TextField(\n        help_text='What happens if you cast this at a higher level.')\n\n    can_be_cast_as_ritual = models.BooleanField(\n        help_text='Whether or not the spell can be cast as a ritual.',\n        default=False)\n\n    # Computed data abo","position":{"index":45,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"be39ac5fb4859183"},"created_at":"2026-01-14T02:18:45.924Z"}
{"chunk_id":"b04a02b34021a5ff3ca112a7c430a1d4","source_id":"e359ab098c2b0eaa","text":"s_ritual = models.BooleanField(\n        help_text='Whether or not the spell can be cast as a ritual.',\n        default=False)\n\n    # Computed data about casting the spell\n    def v1_components(self):\n        \"\"\"Presents the components in a standard list like \"V, S, M\" \"\"\"\n        components_list = []\n        if self.requires_verbal_components:\n            components_list.append(\"V\")\n        if self.requires_somatic_components:\n            components_list.append(\"S\")\n        if self.requires_material_components:\n            components_list.append(\"M\")\n\n        return ', '.join(components_list)\n\n    def v1_ritual(self):\n        \"\"\"Field calculated and presented to maintain compatibility with original API.\"\"\"\n        if self.can_be_cast_as_ritual:\n            return \"yes\"\n        else:\n            return \"no\"\n\n    # Stored data about the spell's effect\n    duration = models.TextField(\n        help_text='Description of the duration such as \"instantaneous\" or \"Up to 1 minute\"')\n\n    requires_concentration = models.BooleanField(\n        help_text='Whether the spell requires concentration',\n        default=False)\n\n    def v1_concentration(self):\n        \"\"\"Field calculated and presented to maintain compatibility with original API.\"\"\"\n        if self.requires_concentration:\n            return \"yes\"\n        else:\n            return \"no\"\n\n    archetype = models.TextField(\n        help_text='Archetype that can learn this spell. If empty, assume all archetypes.')\n    circles = models.Tex","position":{"index":46,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"5c8599b1f2d89f1f"},"created_at":"2026-01-14T02:18:45.924Z"}
{"chunk_id":"569bc3c69be5c0d0bf3adc381781d430","source_id":"e359ab098c2b0eaa","text":"\n    archetype = models.TextField(\n        help_text='Archetype that can learn this spell. If empty, assume all archetypes.')\n    circles = models.TextField(\n        help_text='Druid Archetypes that can learn this spell.')\n    route = models.TextField(default=\"spells/\")\n\n    def import_from_json_v1(self, json):\n        \"\"\"Logic to import from the v1 file spec.\"\"\"\n        self.name = json[\"name\"]\n        self.slug = json.get(\"slug\", slugify(json[\"name\"]))\n        if \"desc\" in json:\n            self.desc = json[\"desc\"]\n        if \"higher_level\" in json:\n            self.higher_level = json[\"higher_level\"]\n        if \"page\" in json:\n            self.page = json[\"page\"]\n        # Logic to set an integer based on v1 file import spec (a string).\n        if \"range\" in json:\n            # If the spell range includes an effect description like \"(10 ft\n            # cube)\", remove.\n            range_trimmed = str(json['range'].split(\" (\")[0]).lower()\n\n            # Set target range sort based on the following rules:\n            # Self = 0\n            # Touch = 1\n            # Any other distance is recorded in feet.\n            # \"Sight\" is recorded as 9999\n            # Unlimited (same-plane) is recorded as 99990\n            # Unlimited (multi-plane) is recorded as 99999\n\n            if 'self' in range_trimmed:\n                # Various spells in deep magic include effect shape.\n                self.target_range_sort = 0\n            if range_trimmed == 'touch':\n                self.tar","position":{"index":47,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"56d82f054491c4dd"},"created_at":"2026-01-14T02:18:45.924Z"}
{"chunk_id":"f099f6d8be65b5bfbd681edd20e7657c","source_id":"e359ab098c2b0eaa","text":"pells in deep magic include effect shape.\n                self.target_range_sort = 0\n            if range_trimmed == 'touch':\n                self.target_range_sort = 1\n\n            if range_trimmed == 'sight':\n                self.target_range_sort = 9999\n\n            if range_trimmed == 'unlimited':\n                self.target_range_sort = 99999\n\n            if range_trimmed == 'special':\n                # For now, assume it's single plane\n                self.target_range_sort = 99990\n\n            if range_trimmed.endswith(\n                    'miles') or range_trimmed.endswith('mile'):\n                # Assume it's in the format \"xx Miles\"\n                miles = int(json['range'].split(\" \")[0])\n                self.target_range_sort = miles * 5280\n\n            if range_trimmed.endswith('feet') or range_trimmed.endswith('ft.'):\n                # Assume it's in the format \"xx Miles\"\n                feet = int(range_trimmed.split(\" \")[0])\n                self.target_range_sort = feet\n\n            self.range = json[\"range\"]\n        if \"components\" in json:\n            # These fields default to False, and then set to true based on string of\n            # \"V, S, M\"\n            if 'v' in json['components'].lower():\n                self.requires_verbal_components = True\n            if 's' in json['components'].lower():\n                self.requires_somatic_components = True\n            if 'm' in json['components'].lower():\n                self.requires_material_components = True","position":{"index":48,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"b78f36700f00797d"},"created_at":"2026-01-14T02:18:45.924Z"}
{"chunk_id":"0058f5141067690d9cdc753c89427d16","source_id":"e359ab098c2b0eaa","text":"    self.requires_somatic_components = True\n            if 'm' in json['components'].lower():\n                self.requires_material_components = True\n\n        if \"material\" in json:\n            self.material = json[\"material\"]\n\n        # Logic to set boolean based on v1 file import spec (a string).\n        if \"ritual\" in json:\n            # Default is false\n            if str(json[\"ritual\"]).lower() == 'yes':\n                self.can_be_cast_as_ritual = True\n\n            if str(json[\"ritual\"]).lower() == 'no':\n                pass  # Already set as False through default.\n\n        if \"duration\" in json:\n            self.duration = json[\"duration\"]\n\n        # Logic to set a boolean based on v1 file import spec (a string).\n        if \"concentration\" in json:\n            if str(json[\"concentration\"]).lower() == 'yes':\n                self.requires_concentration = True\n\n        if \"casting_time\" in json:\n            self.casting_time = json[\"casting_time\"]\n        if \"level\" in json:\n            self.level = json[\"level\"]\n\n        # Model field is renamed to spell_level\n        if \"level_int\" in json:\n            self.spell_level = json[\"level_int\"]\n\n        if \"school\" in json:\n            self.school = json[\"school\"]\n        if \"class\" in json:\n            self.dnd_class = json[\"class\"]\n        if \"archetype\" in json:\n            self.archetype = json[\"archetype\"]\n        if \"circles\" in json:\n            self.circles = json[\"circles\"]\n\n    @staticmethod\n    def plural_str() ->","position":{"index":49,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"77042b2d68f719ea"},"created_at":"2026-01-14T02:18:45.924Z"}
{"chunk_id":"ef400609a5561bdf3411a59d954c0e68","source_id":"e359ab098c2b0eaa","text":"self.archetype = json[\"archetype\"]\n        if \"circles\" in json:\n            self.circles = json[\"circles\"]\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"Spells\"\n\n    def search_result_extra_fields(self):\n        return {\n            \"school\":self.school,\n            \"dnd_class\":self.dnd_class}\n\n\n\nclass SpellList(GameContent):\n    \"\"\" A list of spells to be referenced by classes and subclasses\"\"\"\n    \n    spells = models.ManyToManyField(Spell,\n        related_name=\"spell_lists\",\n        help_text='The set of spells.')\n\n    def import_from_json_v1(self, json):\n        \"\"\"Log to import a single object from a standard json structure.\"\"\"\n        self.name = json[\"name\"]\n        self.slug = slugify(json[\"name\"])\n        if \"desc\" in json:\n            self.desc = json[\"desc\"]\n\n        for spell_slug in json[\"spell_list\"]:\n            #spell_obj = Spell.objects.filter(slug=spell_slug)\n            self.spells.add(spell_slug)\n\n\n    @staticmethod\n    def plural_str() -> str:\n        \"\"\"Return a string specifying the plural name of this model.\"\"\"\n        return \"SpellLists\"","position":{"index":50,"start_char":8100,"end_char":9269},"metadata":{"content_hash":"194054511191f843"},"created_at":"2026-01-14T02:18:45.924Z"}
{"chunk_id":"2807ef8be276d2e3b13eac5d7fd91bb0","source_id":"8799bee2b286a3c8","text":"'''from rest_framework.schemas.openapi import SchemaGenerator\nfrom rest_framework.schemas.openapi import AutoSchema\n\n# Adds additional metadata onto an OAS operation. Attach this to your view and provide the necessary constructor args.\nclass CustomSchema(AutoSchema):\n    def __init__(self, **kwargs):\n        self.extra_info = {}\n\n        if 'query' in kwargs:\n            self.extra_info['query'] = kwargs.pop(\"query\")\n\n        if 'summary' in kwargs:\n            self.extra_info['summary'] = kwargs.pop(\"summary\")\n\n        if 'tags' in kwargs:\n            self.extra_info['tags'] = kwargs.pop(\"tags\")\n\n        super().__init__(**kwargs)\n\n    def get_operation(self, path, method):\n        oldOperation = super().get_operation(path, method)\n\n        # I can't find a version of DRF that support summaries\n        if path.startswith('/v1/'): return oldOperation\n        oldOperation['summary'] = self.extra_info['summary'][path]\n\n        # Future versions of DRF support tags\n        oldOperation['tags'] = self.extra_info['tags']\n\n        # I can't find any way to improve the documentation of query params, so we do it here.\n        if 'query' in self.extra_info:\n            fix_query_params(oldOperation, self.extra_info['query'])\n\n        return oldOperation\n\n# Iterates over the operations query params and adds the description as defined in the schema view\ndef fix_query_params(operation, query_params):\n    if not query_params:\n        return\n\n    for param in operation['parameters']:\n     ","position":{"index":51,"start_char":0,"end_char":1500},"metadata":{"content_hash":"9f545072f5f48c26"},"created_at":"2026-01-14T02:18:46.369Z"}
{"chunk_id":"992af34f92ab06f04baf64436523d3b3","source_id":"8799bee2b286a3c8","text":"he schema view\ndef fix_query_params(operation, query_params):\n    if not query_params:\n        return\n\n    for param in operation['parameters']:\n        if param['in'] == 'query' and param['name'] in query_params:\n            param['description'] = query_params[param['name']]\n\n# Adds additional metadata onto the OAS schema. If you need to manipulate any OAS fields that exist outside of a single operation, this is where you do it.\nclass Open5eSchemaGenerator(SchemaGenerator):\n    def __init__(self, **kwargs):\n        super().__init__(\n            'Open5e',\n            None,\n            'The Open5e API includes all monsters and spells from the SRD and other OGL sources as well as a search API, so you can access any part of the SRD from your app or website.'\n        )\n\n    def get_schema(self, *args, **kwargs):\n        schema = super().get_schema(*args, **kwargs)\n        schema['servers'] =[\n            {\n            \"url\": \"https://api.open5e.com/\",\n            \"description\": \"Open5e\"\n            }\n        ]\n        # This isn't a real endpoint, so we remove it from the schema\n        schema['paths'].pop('/search/{id}/')\n        return schema\n'''","position":{"index":52,"start_char":1350,"end_char":2512},"metadata":{"content_hash":"0434ab2e89ddbf4a"},"created_at":"2026-01-14T02:18:46.369Z"}
{"chunk_id":"b4166fa39382bac65ef66b8c70c06876","source_id":"10a0d929b7240674","text":"import datetime\n# DEPRECATING Because it's no longer used.\n'''\nfrom haystack import indexes\n\nfrom api import models\n\n\nclass MonsterIndex(indexes.SearchIndex, indexes.Indexable):\n  text = indexes.CharField(document=True, use_template=True)\n  name = indexes.EdgeNgramField(model_attr='name', )\n  route = indexes.CharField(model_attr='route', indexed=False)\n  slug = indexes.CharField(model_attr='slug', indexed=False)\n  armor_class = indexes.CharField(model_attr='armor_class', indexed=False)\n  hit_points = indexes.CharField(model_attr='hit_points', indexed=False)\n  hit_dice = indexes.CharField(model_attr='hit_dice', indexed=False)\n  strength = indexes.CharField(model_attr='strength', indexed=False)\n  dexterity = indexes.CharField(model_attr='dexterity', indexed=False)\n  constitution = indexes.CharField(model_attr='constitution', indexed=False)\n  intelligence = indexes.CharField(model_attr='intelligence', indexed=False)\n  wisdom = indexes.CharField(model_attr='wisdom', indexed=False)\n  charisma = indexes.CharField(model_attr='charisma', indexed=False)\n  challenge_rating = indexes.CharField(model_attr='challenge_rating', indexed=False)\n  cr = indexes.CharField(model_attr='cr', indexed=False)\n  document_slug = indexes.CharField(model_attr='document__slug', indexed=False)\n  document_title = indexes.CharField(model_attr='document__title', indexed=False)\n\n  def get_model(self):\n    return models.Monster\n\n  def index_queryset(self, using=None):\n    \"\"\"Used when the entire index for model ","position":{"index":53,"start_char":0,"end_char":1500},"metadata":{"content_hash":"5ef09959699fee2c"},"created_at":"2026-01-14T02:18:47.913Z"}
{"chunk_id":"0f17b5b17b8aeb63f347551423b77969","source_id":"10a0d929b7240674","text":"indexed=False)\n\n  def get_model(self):\n    return models.Monster\n\n  def index_queryset(self, using=None):\n    \"\"\"Used when the entire index for model is updated.\"\"\"\n    return self.get_model().objects.all()\n\nclass SpellIndex(indexes.SearchIndex, indexes.Indexable):\n  document_slug = indexes.CharField(model_attr='document__slug', indexed=False)\n  document_title = indexes.CharField(model_attr='document__title', indexed=False)\n  text = indexes.CharField(document=True, use_template=True)\n  name = indexes.EdgeNgramField(model_attr='name', )\n  route = indexes.CharField(model_attr='route', indexed=False)\n  slug = indexes.CharField(model_attr='slug', indexed=False)\n  school = indexes.CharField(model_attr='school', indexed=False)\n  dnd_class = indexes.CharField(model_attr='dnd_class', indexed=False)\n\n\n  def get_model(self):\n    return models.Spell\n\n  def index_queryset(self, using=None):\n    \"\"\"Used when the entire index for model is updated.\"\"\"\n    return self.get_model().objects.all()\n\nclass SectionIndex(indexes.SearchIndex, indexes.Indexable):\n  document_slug = indexes.CharField(model_attr='document__slug', indexed=False)\n  document_title = indexes.CharField(model_attr='document__title', indexed=False)\n  text = indexes.CharField(document=True, use_template=True)\n  name = indexes.EdgeNgramField(model_attr='name', )\n  route = indexes.CharField(model_attr='route', indexed=False)\n  slug = indexes.CharField(model_attr='slug', indexed=False)\n  parent = indexes.CharField(model_attr='paren","position":{"index":54,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"a8d08d582400d4f9"},"created_at":"2026-01-14T02:18:47.913Z"}
{"chunk_id":"5eb1e26352fc3cb4b642b5b83d00e85a","source_id":"10a0d929b7240674","text":"arField(model_attr='route', indexed=False)\n  slug = indexes.CharField(model_attr='slug', indexed=False)\n  parent = indexes.CharField(model_attr='parent', indexed=False)\n\n\n  def get_model(self):\n    return models.Section\n\n  def index_queryset(self, using=None):\n    \"\"\"Used when the entire index for model is updated.\"\"\"\n    return self.get_model().objects.all()\n\nclass ConditionIndex(indexes.SearchIndex, indexes.Indexable):\n  document_slug = indexes.CharField(model_attr='document__slug', indexed=False)\n  document_title = indexes.CharField(model_attr='document__title', indexed=False)\n  text = indexes.CharField(document=True, use_template=True)\n  name = indexes.EdgeNgramField(model_attr='name', )\n  route = indexes.CharField(model_attr='route', indexed=False)\n  slug = indexes.CharField(model_attr='slug', indexed=False)\n\n\n  def get_model(self):\n    return models.Condition\n\n  def index_queryset(self, using=None):\n    \"\"\"Used when the entire index for model is updated.\"\"\"\n    return self.get_model().objects.all()\n\nclass CharClassIndex(indexes.SearchIndex, indexes.Indexable):\n  document_slug = indexes.CharField(model_attr='document__slug', indexed=False)\n  document_title = indexes.CharField(model_attr='document__title', indexed=False)\n  text = indexes.CharField(document=True, use_template=True)\n  name = indexes.EdgeNgramField(model_attr='name', )\n  route = indexes.CharField(model_attr='route', indexed=False)\n  slug = indexes.CharField(model_attr='slug', indexed=False)\n\n  def get_model(","position":{"index":55,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"4027a10cad367b6a"},"created_at":"2026-01-14T02:18:47.913Z"}
{"chunk_id":"3c080cb4f6d099841f386c41fcc9c840","source_id":"10a0d929b7240674","text":"name', )\n  route = indexes.CharField(model_attr='route', indexed=False)\n  slug = indexes.CharField(model_attr='slug', indexed=False)\n\n  def get_model(self):\n    return models.CharClass\n\n  def index_queryset(self, using=None):\n    \"\"\"Used when the entire index for model is updated.\"\"\"\n    return self.get_model().objects.all()\n\nclass RaceIndex(indexes.SearchIndex, indexes.Indexable):\n  document_slug = indexes.CharField(model_attr='document__slug', indexed=False)\n  document_title = indexes.CharField(model_attr='document__title', indexed=False)\n  text = indexes.CharField(document=True, use_template=True)\n  name = indexes.EdgeNgramField(model_attr='name')\n  route = indexes.CharField(model_attr='route', indexed=False)\n  slug = indexes.CharField(model_attr='slug', indexed=False)\n\n  def get_model(self):\n    return models.Race\n\n  def index_queryset(self, using=None):\n    \"\"\"Used when the entire index for model is updated.\"\"\"\n    return self.get_model().objects.all()\n\nclass MagicItemIndex(indexes.SearchIndex, indexes.Indexable):\n  document_slug = indexes.CharField(model_attr='document__slug', indexed=False)\n  document_title = indexes.CharField(model_attr='document__title', indexed=False)\n  text = indexes.CharField(document=True, use_template=True)\n  name = indexes.EdgeNgramField(model_attr='name')\n  route = indexes.CharField(model_attr='route', indexed=False)\n  slug = indexes.CharField(model_attr='slug', indexed=False)\n  type = indexes.CharField(model_attr='type')\n  rarity = indexes.Ch","position":{"index":56,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"04378525b884d9a8"},"created_at":"2026-01-14T02:18:47.913Z"}
{"chunk_id":"e1d49de6c178fa1ad62720734c8186a1","source_id":"10a0d929b7240674","text":"oute', indexed=False)\n  slug = indexes.CharField(model_attr='slug', indexed=False)\n  type = indexes.CharField(model_attr='type')\n  rarity = indexes.CharField(model_attr='rarity')\n  requires_attunement = indexes.CharField(model_attr='requires_attunement', indexed=False)\n\n  def get_model(self):\n    return models.MagicItem\n\n  def index_queryset(self, using=None):\n    \"\"\"Used when the entire index for model is updated.\"\"\"\n    return self.get_model().objects.all()\n'''","position":{"index":57,"start_char":5400,"end_char":5867},"metadata":{"content_hash":"658d247467c82ce3"},"created_at":"2026-01-14T02:18:47.913Z"}
{"chunk_id":"b7ef7bc8255437808e4e25f04a97db8c","source_id":"8fedfdc896216285","text":"from django.contrib.auth.models import User, Group\nfrom rest_framework import serializers\n\nfrom api import models\nfrom api import search_indexes\n\n\nclass ManifestSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = models.Manifest\n        fields = ('filename', 'type', 'hash', 'created_at')\n\nclass DynamicFieldsModelSerializer(serializers.ModelSerializer):\n\n    def __init__(self, *args, **kwargs):\n        # Instantiate the superclass normally\n        super(DynamicFieldsModelSerializer, self).__init__(*args, **kwargs)\n\n        # The request doesn't exist when generating an OAS file, so we have to check that first\n        if 'request' in self.context:\n            if self.context['request'] is not None:\n                fields = self.context['request'].query_params.get('fields')\n                if fields:\n                    fields = fields.split(',')\n                    # Drop any fields that are not specified in the `fields` argument.\n                    allowed = set(fields)\n                    existing = set(self.fields.keys())\n                    for field_name in existing - allowed:\n                        self.fields.pop(field_name)\n\nclass DynamicFieldsHyperlinkedModelSerializer(\n    DynamicFieldsModelSerializer, serializers.HyperlinkedModelSerializer\n    ):\n    \"\"\"Abstract base class to be inherited by Serializers that both use\n    dynamic fields as well as hyperlinked relationships.\"\"\"\n    pass\n\nclass UserSerializer(serializers.HyperlinkedModelSerializer","position":{"index":58,"start_char":0,"end_char":1500},"metadata":{"content_hash":"cf34c88df78bff8f"},"created_at":"2026-01-14T02:18:48.174Z"}
{"chunk_id":"b93e24e88f2b84e71884eccc75068719","source_id":"8fedfdc896216285","text":"lizers that both use\n    dynamic fields as well as hyperlinked relationships.\"\"\"\n    pass\n\nclass UserSerializer(serializers.HyperlinkedModelSerializer):\n    class Meta:\n        model = User\n        fields = ('url', 'username', 'email', 'groups')\n\nclass DocumentSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    class Meta:\n            model = models.Document\n            fields = (\n                'title',\n                'slug',\n                'url',\n                'license',\n                'desc',\n                'license',\n                'author',\n                'organization',\n                'version',\n                'copyright',\n                'license_url',\n                'v2_related_key')\n\nclass GroupSerializer(serializers.HyperlinkedModelSerializer):\n    class Meta:\n        model = Group\n        fields = ('url', 'name')\n\nclass MonsterSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    \n    speed = serializers.SerializerMethodField()\n    environments = serializers.SerializerMethodField()\n    skills = serializers.SerializerMethodField()\n    actions = serializers.SerializerMethodField()\n    bonus_actions = serializers.SerializerMethodField()\n    reactions = serializers.SerializerMethodField()\n    legendary_actions = serializers.SerializerMethodField()\n    special_abilities = serializers.SerializerMethodField()\n    img_main = serializers.SerializerMethodField()\n    v2_converted_path = serializers.SerializerMethodField()\n\n    def get_img_main(self, monste","position":{"index":59,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"facb9841dac61ed5"},"created_at":"2026-01-14T02:18:48.174Z"}
{"chunk_id":"9efbece48558f0a229150c216b7698e9","source_id":"8fedfdc896216285","text":"ld()\n    img_main = serializers.SerializerMethodField()\n    v2_converted_path = serializers.SerializerMethodField()\n\n    def get_img_main(self, monster):\n        request = self.context.get('request')\n        domain = str(request.get_host())\n        img_url = monster.img_main\n        if img_url != None:\n            return ('http://{domain}/{path}'.format(domain=domain, path=img_url))\n        else:\n             return None\n\n    def get_speed(self, monster):\n        return monster.speed()\n\n    def get_environments(self, monster):\n        return monster.environments()\n\n    def get_skills(self, monster):\n        return monster.skills()\n\n    def get_actions(self, monster):\n        return monster.actions()\n    \n    def get_bonus_actions(self, monster):\n        return monster.bonus_actions()\n\n    def get_reactions(self, monster):\n        return monster.reactions()\n\n    def get_legendary_actions(self, monster):\n        return monster.legendary_actions()\n\n    def get_special_abilities(self, monster):\n        return monster.special_abilities()\n\n    def get_v2_converted_path(self, monster):\n        return monster.v2_converted_path()\n\n\n    class Meta:\n        model = models.Monster\n        fields = (\n            'slug',\n            'desc',\n            'name',\n            'size',\n            'type',\n            'subtype',\n            'group',\n            'alignment',\n            'armor_class',\n            'armor_desc',\n            'hit_points',\n            'hit_dice',\n            'speed',\n","position":{"index":60,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"559226abc644266e"},"created_at":"2026-01-14T02:18:48.174Z"}
{"chunk_id":"dab2f1ff90d1c0d7b3b16907b6eba4d2","source_id":"8fedfdc896216285","text":"\n            'alignment',\n            'armor_class',\n            'armor_desc',\n            'hit_points',\n            'hit_dice',\n            'speed',\n            'strength',\n            'dexterity',\n            'constitution',\n            'intelligence',\n            'wisdom',\n            'charisma',\n            'strength_save',\n            'dexterity_save',\n            'constitution_save',\n            'intelligence_save',\n            'wisdom_save',\n            'charisma_save',\n            'perception',\n            'skills',\n            'damage_vulnerabilities',\n            'damage_resistances',\n            'damage_immunities',\n            'condition_immunities',\n            'senses',\n            'languages',\n            'challenge_rating',\n            'cr',\n            'actions',\n            'bonus_actions',\n            'reactions',\n            'legendary_desc',\n            'legendary_actions',\n            'special_abilities',\n            'spell_list',\n            'page_no',\n            'environments',\n            'img_main',\n            'document__slug',\n            'document__title',\n            'document__license_url',\n            'document__url',\n            'v2_converted_path'\n        )\n\nclass SpellSerializer(DynamicFieldsModelSerializer):\n\n    ritual = serializers.CharField(source='v1_ritual')\n    level_int = serializers.IntegerField(source='spell_level')\n    level = serializers.CharField(source='v1_level')\n    concentration = serializers.CharField(source='v1_concentrat","position":{"index":61,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"7714f035f4af9d5c"},"created_at":"2026-01-14T02:18:48.174Z"}
{"chunk_id":"05a7097be0a2634a2ffe092279c760e4","source_id":"8fedfdc896216285","text":"ntegerField(source='spell_level')\n    level = serializers.CharField(source='v1_level')\n    concentration = serializers.CharField(source='v1_concentration')\n    components = serializers.CharField(source='v1_components')\n\n    class Meta:\n        model = models.Spell\n        fields = (\n            'slug',\n            'name',\n            'desc',\n            'higher_level',\n            'page',\n            'range',\n            'target_range_sort',\n            'components',\n            'requires_verbal_components',\n            'requires_somatic_components',\n            'requires_material_components',\n            'material',\n            'can_be_cast_as_ritual',\n            'ritual',\n            'duration',\n            'concentration',\n            'requires_concentration',\n            'casting_time',\n            'level',\n            'level_int',\n            'spell_level',\n            'school',\n            'dnd_class',\n            'spell_lists',\n            'archetype',\n            'circles',\n            'document__slug',\n            'document__title',\n            'document__license_url',\n            'document__url'\n        )\n\nclass SpellListSerializer(DynamicFieldsModelSerializer):\n    #spells = SpellSerializer(many=True, read_only=True, context={'request': ''}) #Passing a blank request.\n    class Meta:\n        model = models.SpellList\n        fields = (\n            'slug',\n            'name',\n            'desc',\n            'spells',\n            'document__slug',\n            'documen","position":{"index":62,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"612f0b6e3181108a"},"created_at":"2026-01-14T02:18:48.174Z"}
{"chunk_id":"4a256c353cbdc24a63c74c3d8e9eb076","source_id":"8fedfdc896216285","text":"       fields = (\n            'slug',\n            'name',\n            'desc',\n            'spells',\n            'document__slug',\n            'document__title',\n            'document__license_url',\n            'document__url'\n        )\n\nclass BackgroundSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    class Meta:\n        model = models.Background\n        fields = (\n            'name',\n            'desc',\n            'slug',\n            'skill_proficiencies',\n            'tool_proficiencies',\n            'languages',\n            'equipment',\n            'feature',\n            'feature_desc',\n            'suggested_characteristics',\n            'document__slug',\n            'document__title',\n            'document__license_url',\n            'document__url'\n        )\n\nclass PlaneSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    class Meta:\n        model = models.Plane\n        fields = ('slug','name','desc','document__slug', 'document__title', 'document__url','parent')\n\nclass SectionSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    class Meta:\n        model = models.Section\n        fields = (\n            'slug',\n            'name',\n            'desc',\n            'document__slug',\n            'document__title',\n            'document__license_url',\n            'document__url',\n            'parent'\n        )\n\nclass FeatSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    class Meta:\n        model = models.Feat\n        fields = (\n            'slug',\n        ","position":{"index":63,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"2beb59ef271b2d14"},"created_at":"2026-01-14T02:18:48.174Z"}
{"chunk_id":"36ea197a9a0a0aa9a290a96a0b1d016c","source_id":"8fedfdc896216285","text":"s FeatSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    class Meta:\n        model = models.Feat\n        fields = (\n            'slug',\n            'name',\n            'desc',\n            'prerequisite',\n            'effects_desc',\n            'document__slug',\n            'document__title',\n            'document__url'\n        )\n\nclass ConditionSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    class Meta:\n        model = models.Condition\n        fields = (\n            'slug',\n            'name',\n            'desc',\n            'document__slug',\n            'document__title',\n            'document__url'\n        )\n\nclass SubraceSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    class Meta:\n        model = models.Subrace\n        fields = ('name',\n        'slug',\n        'desc',\n        'asi',\n        'traits',\n        'asi_desc',\n        'document__slug',\n        'document__title',\n        'document__url'\n    )\n\nclass RaceSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    subraces = SubraceSerializer(many=True,read_only=True)\n    class Meta:\n        model = models.Race\n        fields = (\n            'name',\n            'slug',\n            'desc',\n            'asi_desc',\n            'asi',\n            'age',\n            'alignment',\n            'size',\n            'size_raw',\n            'speed',\n            'speed_desc',\n            'languages',\n            'vision',\n            'traits',\n            'subraces',\n            'document__slug',\n            ","position":{"index":64,"start_char":8100,"end_char":9600},"metadata":{"content_hash":"a48e6de2be57b5cc"},"created_at":"2026-01-14T02:18:48.174Z"}
{"chunk_id":"deb8c995ad423d79fa22e6ef00d16c48","source_id":"8fedfdc896216285","text":" 'speed_desc',\n            'languages',\n            'vision',\n            'traits',\n            'subraces',\n            'document__slug',\n            'document__title',\n            'document__license_url',\n            'document__url'\n        )\n\nclass ArchetypeSerializer(serializers.HyperlinkedModelSerializer):\n    class Meta:\n        model = models.Archetype\n        fields = (\n            'name',\n            'slug',\n            'desc',\n            'document__slug',\n            'document__title',\n            'document__license_url',\n            'document__url'\n        )\n\nclass CharClassSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    archetypes = ArchetypeSerializer(many=True,read_only=True)\n    class Meta:\n        model = models.CharClass\n        fields = (\n            'name',\n            'slug',\n            'desc',\n            'hit_dice',\n            'hp_at_1st_level',\n            'hp_at_higher_levels',\n            'prof_armor',\n            'prof_weapons',\n            'prof_tools',\n            'prof_saving_throws',\n            'prof_skills',\n            'equipment',\n            'table',\n            'spellcasting_ability',\n            'subtypes_name',\n            'archetypes',\n            'document__slug',\n            'document__title',\n            'document__license_url',\n            'document__url'\n        )\n\nclass MagicItemSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    class Meta:\n        model = models.MagicItem\n        fields = (\n            'slug',\n   ","position":{"index":65,"start_char":9450,"end_char":10950},"metadata":{"content_hash":"cff3835440a83103"},"created_at":"2026-01-14T02:18:48.174Z"}
{"chunk_id":"6553f5fc9637cf8f3c5585e03c566a14","source_id":"8fedfdc896216285","text":"icItemSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    class Meta:\n        model = models.MagicItem\n        fields = (\n            'slug',\n            'name',\n            'type',\n            'desc',\n            'rarity',\n            'requires_attunement',\n            'document__slug',\n            'document__title',\n            'document__url'\n        )\n\nclass WeaponSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    class Meta:\n        model = models.Weapon\n        fields = (\n            'name',\n            'slug',\n            'category',\n            'document__slug',\n            'document__title',\n            'document__license_url',\n            'document__url',\n            'cost',\n            'damage_dice',\n            'damage_type',\n            'weight',\n            'properties')\n\nclass ArmorSerializer(DynamicFieldsHyperlinkedModelSerializer):\n    class Meta:\n        model = models.Armor\n        fields = (\n            'name',\n            'slug',\n            'category',\n            'document__slug',\n            'document__title',\n            'document__license_url',\n            'document__url',\n            'base_ac',\n            'plus_dex_mod',\n            'plus_con_mod',\n            'plus_wis_mod',\n            'plus_flat_mod',\n            'plus_max',\n            'ac_string',\n            'strength_requirement',\n            'cost',\n            'weight',\n            'stealth_disadvantage')\n\n# Deprecating because it's unused.\n'''class AggregateSerializer(Highlight","position":{"index":66,"start_char":10800,"end_char":12300},"metadata":{"content_hash":"dbfecb2006c3d24e"},"created_at":"2026-01-14T02:18:48.174Z"}
{"chunk_id":"72092f676de56fb6a085217af4b6fb7a","source_id":"8fedfdc896216285","text":"          'cost',\n            'weight',\n            'stealth_disadvantage')\n\n# Deprecating because it's unused.\n'''class AggregateSerializer(HighlighterMixin, HaystackSerializer):\n\n    class Meta:\n        index_classes = [search_indexes.MonsterIndex, \n            search_indexes.SpellIndex, \n            search_indexes.SectionIndex, \n            search_indexes.ConditionIndex, \n            search_indexes.CharClassIndex, \n            search_indexes.RaceIndex,\n            search_indexes.MagicItemIndex,]\n        fields = ['name',\n            'text',\n            'route',\n            'slug',\n            'level',\n            'school',\n            'dnd_class',\n            'ritual',\n            'armor_class',\n            'hit_points',\n            'hit_dice',\n            'challenge_rating',\n            'strength',\n            'dexterity',\n            'constitution',\n            'intelligence',\n            'wisdom',\n            'charisma',\n            'rarity',\n            'type',\n            'source',\n            'requires_attunement',\n            'document_slug',\n            'document_title',\n            'parent',\n        ]\n'''","position":{"index":67,"start_char":12150,"end_char":13284},"metadata":{"content_hash":"4ff4b71fb5b4ee57"},"created_at":"2026-01-14T02:18:48.175Z"}
{"chunk_id":"bc39f27794fb40391d3a5e57c529e334","source_id":"1fec01fdf374bfdf","text":"from rest_framework import routers\nfrom django.conf.urls import include\nfrom django.urls import path\n\nfrom api import views\nfrom server.routers import DocumentedDefaultRouter\n\nrouter = DocumentedDefaultRouter()\nrouter.register(r'manifest', views.ManifestViewSet)\nrouter.register(r'spells', views.SpellViewSet)\nrouter.register(r'spelllist',views.SpellListViewSet)\nrouter.register(r'monsters', views.MonsterViewSet)\nrouter.register(r'documents', views.DocumentViewSet)\nrouter.register(r'backgrounds', views.BackgroundViewSet)\nrouter.register(r'planes', views.PlaneViewSet)\nrouter.register(r'sections', views.SectionViewSet)\nrouter.register(r'feats', views.FeatViewSet)\nrouter.register(r'conditions', views.ConditionViewSet)\nrouter.register(r'races',views.RaceViewSet)\nrouter.register(r'classes',views.CharClassViewSet)\nrouter.register(r'magicitems',views.MagicItemViewSet)\nrouter.register(r'weapons',views.WeaponViewSet)\nrouter.register(r'armor',views.ArmorViewSet)\n\nurlpatterns = [\n    path('', include(router.urls)), #Consider removing this after a while.\n    path('version/', views.get_version, name=\"version\"),\n    path('v1/', include(router.urls))\n    ]","position":{"index":68,"start_char":0,"end_char":1156},"metadata":{"content_hash":"643bd6ad560a50ef"},"created_at":"2026-01-14T02:18:48.943Z"}
{"chunk_id":"3b42e7050779056daec564ced8dae133","source_id":"f8e9ad78d383df8f","text":"from rest_framework.pagination import PageNumberPagination\n\nclass StandardResultsSetPagination(PageNumberPagination):\n    page_size = 50\n    page_size_query_param = 'limit'","position":{"index":69,"start_char":0,"end_char":172},"metadata":{"content_hash":"6243e1350202f04d"},"created_at":"2026-01-14T02:18:49.173Z"}
{"chunk_id":"c062cf337b91a823eb18d24e1dda7e89","source_id":"ccdde745d5d2efe0","text":"from django.core.exceptions import ValidationError\n\n\ndef spell_school_validator(value):\n    '''A validator for spell schools strings. Input must be lowercase.'''\n    options = [\n        'abjuration',\n        'conjuration',\n        'divination',\n        'enchantment',\n        'evocation',\n        'illusion',\n        'necromancy',\n        'transmutation'\n    ]\n    if value not in options:\n        raise ValidationError('Spell school {} not in valid school options. Value must be lowercase.'.format(value))\n\n\ndef damage_type_validator(value):\n    '''A validator for damage types for spells. Input must be lowercase.'''\n    options = [\n        'acid',\n        'cold',\n        'fire',\n        'force',\n        'lightning',\n        'necrotic',\n        'poison',\n        'psychic',\n        'radiant',\n        'thunder'\n    ]\n    if value not in options:\n        raise ValidationError('Spell damage type {} not in valid options. Value must be lowercase.'.format(value))\n\n\ndef area_of_effect_shape_validator(value):\n    '''A validator for spell area of effects. Input must be lowercase.'''\n    options = [\n        'cone',\n        'cube',\n        'cylinder',\n        'line',\n        'sphere'\n    ]\n    if value not in options:\n        raise ValidationError('Spell area of effect {} not in valid options. Value must be lowercase.'.format(value))","position":{"index":70,"start_char":0,"end_char":1337},"metadata":{"content_hash":"2aa7b461a7fa0eda"},"created_at":"2026-01-14T02:18:49.517Z"}
{"chunk_id":"021d1053d628d4a74a9b55e979a01d9f","source_id":"f74981e0d17c9639","text":"from django.contrib.auth.models import User, Group\n\nfrom rest_framework import viewsets\nfrom rest_framework.decorators import api_view\nfrom rest_framework.response import Response\n\nfrom api import models\nfrom api import serializers\nfrom api import filters\n\n\n\nclass ManifestViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of of manifests.\n\n    For each data source file, there is a corresponding manifest containing an\n    MD5 hash of the data inside that file. When we update our data files, the\n    corresponding manifest's hash changes. If you host a service that\n    automatically downloads data from Open5e, you can periodically check\n    the manifests to determine whether your data is out of date.\n\n    retrieve: API endpoint for returning a particular manifest.\n\n    For each data source file, there is a corresponding manifest containing an\n    MD5 hash of the data inside that file. When we update our data files, the\n    corresponding manifest's hash changes. If you host a service that\n    automatically downloads data from Open5e, you can periodically check\n    the manifests to determine whether your data is out of date.\n    \"\"\"\n    queryset = models.Manifest.objects.all().order_by(\"pk\")\n    serializer_class = serializers.ManifestSerializer\n\n\n@api_view()\ndef get_version(_):\n    \"\"\"\n    API endpoint for data and api versions.\n    \"\"\"\n    import server.version as version\n\n    return Response({\n        \"DATA_V1\":version.DATA_V1_HASH,\n     ","position":{"index":71,"start_char":0,"end_char":1500},"metadata":{"content_hash":"75b1814e973faab8"},"created_at":"2026-01-14T02:18:49.812Z"}
{"chunk_id":"9fe235046b4d72b71abb5f9eee0b8884","source_id":"f74981e0d17c9639","text":" endpoint for data and api versions.\n    \"\"\"\n    import server.version as version\n\n    return Response({\n        \"DATA_V1\":version.DATA_V1_HASH,\n        \"DATA_V2\":version.DATA_V2_HASH,\n        \"API_V1\":version.API_V1_HASH,\n        \"API_V2\":version.API_V2_HASH\n    })\n\n\n# Deprecating because it's unused.\n'''class SearchView(HaystackViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of search results from the Open5e database.\n    \"\"\"\n    schema = CustomSchema(\n        summary={\n            '/search/': 'Search'\n        },\n        tags=['Search']\n    )\n    # `index_models` is an optional list of which models you would like to include\n    # in the search result. You might have several models indexed, and this provides\n    # a way to filter out those of no interest for this particular view.\n    # (Translates to `SearchQuerySet().models(*index_models)` behind the scenes.\n\n    serializer_class = serializers.AggregateSerializer\n    \n    def get_queryset(self, *args, **kwargs):\n        queryset = super().get_queryset(*args, **kwargs)\n        if not self.request.GET.get('text'):\n            # Blank text should return results. Improbable query below.\n            return queryset.filter(wisdom=\"99999\")\n        return queryset\n'''\n\n\nclass UserViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    API endpoint that allows users to be viewed or edited.\n    \"\"\"\n    queryset = User.objects.all().order_by('-date_joined')\n    serializer_class = serializers.UserSerializer\n\n\nclass GroupViewS","position":{"index":72,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"870aa37f4f626ced"},"created_at":"2026-01-14T02:18:49.812Z"}
{"chunk_id":"72a5d87bfa07777621680dc2dcb978cc","source_id":"f74981e0d17c9639","text":"wed or edited.\n    \"\"\"\n    queryset = User.objects.all().order_by('-date_joined')\n    serializer_class = serializers.UserSerializer\n\n\nclass GroupViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    API endpoint that allows groups to be viewed or edited.\n    \"\"\"\n    queryset = Group.objects.all()\n    serializer_class = serializers.GroupSerializer\n\n\nclass DocumentViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of documents.\n    retrieve: API endpoint for returning a particular document.\n    \"\"\"\n    queryset = models.Document.objects.all().order_by(\"pk\")\n    serializer_class = serializers.DocumentSerializer\n    search_fields = ['title', 'desc']\n    filterset_fields = (\n        'slug',\n        'title',\n        'organization',\n        'license',\n        )\n\n\nclass SpellViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of spells.\n    retrieve: API endpoint for returning a particular spell.\n    \"\"\"\n    queryset = models.Spell.objects.all().order_by(\"pk\")\n    filterset_class=filters.SpellFilter\n    serializer_class = serializers.SpellSerializer\n    search_fields = ['dnd_class', 'name', 'desc']\n    ordering_fields = '__all__'\n    ordering=['name']\n    filterset_fields = (\n        'slug',\n        'name',\n        'level',\n        'level_int',\n        'school',\n        'duration',\n        'components',\n        'concentration',\n        'casting_time',\n        'dnd_class',\n        'document__slug',\n    )\n\n\n","position":{"index":73,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"fe6cb1b67343f30a"},"created_at":"2026-01-14T02:18:49.812Z"}
{"chunk_id":"73bba67ce21e177cc22cbaf9bdef79f1","source_id":"f74981e0d17c9639","text":"l',\n        'duration',\n        'components',\n        'concentration',\n        'casting_time',\n        'dnd_class',\n        'document__slug',\n    )\n\n\nclass SpellListViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of spell lists.\n    retrieve: API endpoint for returning a particular spell list.\n    \"\"\"\n    queryset = models.SpellList.objects.all().order_by(\"pk\")\n    serializer_class = serializers.SpellListSerializer\n    filterset_class = filters.SpellListFilter\n    search_fields = ['name', 'desc']\n\n\nclass MonsterViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of monsters.\n    retrieve: API endpoint for returning a particular monster.\n    \"\"\"\n    queryset = models.Monster.objects.all().order_by(\"pk\")\n    filterset_class = filters.MonsterFilter\n    \n    serializer_class = serializers.MonsterSerializer\n    search_fields = ['name', 'desc']\n\nclass BackgroundViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of backgrounds.\n    retrieve: API endpoint for returning a particular background.\n    \"\"\"\n    queryset = models.Background.objects.all().order_by(\"pk\")\n    serializer_class = serializers.BackgroundSerializer\n    ordering_fields = '__all__'\n    ordering = ['name']\n    filterset_class = filters.BackgroundFilter\n    search_fields = ['name', 'desc']\n\n\nclass PlaneViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of ","position":{"index":74,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"48d9aedc448451fb"},"created_at":"2026-01-14T02:18:49.812Z"}
{"chunk_id":"0f120e6c1788c7d6897c9ee35e97c529","source_id":"f74981e0d17c9639","text":"lter\n    search_fields = ['name', 'desc']\n\n\nclass PlaneViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of planes.\n    retrieve: API endpoint for returning a particular plane.\n    \"\"\"\n    queryset = models.Plane.objects.all().order_by(\"pk\")\n    serializer_class = serializers.PlaneSerializer\n    filterset_class = filters.PlaneFilter\n    search_fields = ['name', 'desc']\n\n\nclass SectionViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of sections.\n    retrieve: API endpoint for returning a particular section.\n    \"\"\"\n    queryset = models.Section.objects.all().order_by(\"pk\")\n    serializer_class = serializers.SectionSerializer\n    ordering_fields = '__all__'\n    ordering=['name']\n    filterset_class = filters.SectionFilter\n    search_fields = ['name', 'desc']\n\n\nclass FeatViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of feats.\n    retrieve: API endpoint for returning a particular feat.\n    \"\"\"\n    queryset = models.Feat.objects.all().order_by(\"pk\")\n    serializer_class = serializers.FeatSerializer\n    filterset_class = filters.FeatFilter\n    search_fields = ['name', 'desc']\n\n\nclass ConditionViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of conditions.\n    retrieve: API endpoint for returning a particular condition.\n    \"\"\"\n    queryset = models.Condition.objects.all().order_by(\"pk\")\n    serializer_class = s","position":{"index":75,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"bc8f74a7a1f4f65e"},"created_at":"2026-01-14T02:18:49.812Z"}
{"chunk_id":"1051c184d3faeca1afff1bc30e32a627","source_id":"f74981e0d17c9639","text":"ieve: API endpoint for returning a particular condition.\n    \"\"\"\n    queryset = models.Condition.objects.all().order_by(\"pk\")\n    serializer_class = serializers.ConditionSerializer\n    search_fields = ['name', 'desc']\n    filterset_class = filters.ConditionFilter\n\n\nclass RaceViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of races.\n    retrieve: API endpoint for returning a particular race.\n    \"\"\"\n    queryset = models.Race.objects.all().order_by(\"pk\")\n    serializer_class = serializers.RaceSerializer\n    filterset_class = filters.RaceFilter\n    search_fields = ['name', 'desc']\n\n\nclass SubraceViewSet(viewsets.ReadOnlyModelViewSet):\n    # Unused, but could be implemented later.\n    \"\"\"\n    list: API endpoint that allows viewing of Subraces.\n    retrieve: API endpoint for returning a particular subrace.\n    \"\"\"\n    queryset = models.Subrace.objects.all().order_by(\"pk\")\n    serializer_class = serializers.SubraceSerializer\n    search_fields = ['name', 'desc']\n    filterset_fields=(\n        'name',\n        'document__slug',\n    )\n\n\nclass CharClassViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of classes and archetypes.\n    retrieve: API endpoint for returning a particular class or archetype.\n    \"\"\"\n    queryset = models.CharClass.objects.all().order_by(\"pk\")\n    serializer_class = serializers.CharClassSerializer\n    filterset_class = filters.CharClassFilter\n    search_fields = ['name', 'desc","position":{"index":76,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"683cec9868818d55"},"created_at":"2026-01-14T02:18:49.812Z"}
{"chunk_id":"626896e39a0d1a1b2098a7044b378d5f","source_id":"f74981e0d17c9639","text":"order_by(\"pk\")\n    serializer_class = serializers.CharClassSerializer\n    filterset_class = filters.CharClassFilter\n    search_fields = ['name', 'desc']\n\n\nclass ArchetypeViewSet(viewsets.ReadOnlyModelViewSet):\n    # Unused but could be implemented later.\n    \"\"\"\n    list: API endpoint that allows viewing of Archetypes.\n    retrieve: API endpoint for returning a particular archetype.\n    \"\"\"\n    queryset = models.Archetype.objects.all().order_by(\"pk\")\n    serializer_class = serializers.ArchetypeSerializer\n    search_fields = ['name', 'desc']\n    filterset_fields=(\n        'name',\n        'document__slug',\n    )\n\n\nclass MagicItemViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of magic items.\n    retrieve: API endpoint for returning a particular magic item.\n    \"\"\"\n    queryset = models.MagicItem.objects.all().order_by(\"pk\")\n    serializer_class = serializers.MagicItemSerializer\n    filterset_class = filters.MagicItemFilter\n    search_fields = ['name', 'desc']\n\n\nclass WeaponViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of weapons.\n    retrieve: API endpoint for returning a particular weapon.\n    \"\"\"\n    queryset = models.Weapon.objects.all().order_by(\"pk\")\n    serializer_class = serializers.WeaponSerializer\n    filterset_class = filters.WeaponFilter\n    search_fields = ['name', 'desc']\n\n\nclass ArmorViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list o","position":{"index":77,"start_char":8100,"end_char":9600},"metadata":{"content_hash":"1c5d976d0b13edee"},"created_at":"2026-01-14T02:18:49.812Z"}
{"chunk_id":"d1cb49462c021a818e14eda004789a55","source_id":"f74981e0d17c9639","text":"Filter\n    search_fields = ['name', 'desc']\n\n\nclass ArmorViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of armor.\n    retrieve: API endpoint for returning a particular armor.\n    \"\"\"\n    queryset = models.Armor.objects.all().order_by(\"pk\")\n    serializer_class = serializers.ArmorSerializer\n    filterset_class = filters.ArmorFilter\n    search_fields = ['name', 'desc']","position":{"index":78,"start_char":9450,"end_char":9864},"metadata":{"content_hash":"7032694107efbf36"},"created_at":"2026-01-14T02:18:49.812Z"}
{"chunk_id":"c7c647c12f0c7bd96915f8dda1ac854a","source_id":"50e370a227598ebd","text":"import requests\n\nfrom approvaltests import verify_as_json, Options,  DiffReporter\nfrom typing import Callable\n\nAPI_BASE = f\"http://localhost:8000\"\n\n\ndef scrub_img_url(data):\n    \"\"\"img url is inconsistent across platforms. needs to fixed in the api at a later date.\"\"\"\n    monsters: list[dict] = data[\"results\"]\n    for mon in monsters:\n        if mon.get(\"img_main\"):\n            mon[\"img_main\"] = mon[\"img_main\"].replace(\"\\\\\", \"/\")\n\nclass TestAPIRoot:\n\n    def _verify(self, endpoint: str, transformer: Callable[[dict], None] = None):\n        response = requests.get(API_BASE + endpoint, allow_redirects=True, headers = {'Accept': 'application/json'}).json()\n        if transformer:\n            transformer(response)\n        verify_as_json(response, options=Options().with_reporter(DiffReporter()))\n\n    def test_root(self):\n        self._verify(f\"/\")\n\n    # Specific tests like these should be aimed at spots where there have been bugs before, to prevent regression.\n    def test_magic_missile(self):\n        self._verify(f\"/spells/magic-missile/\")\n\n    # Endpoint tests ensure that the basic structure and count of the objects does not change by accident. It's not a comprehensive test of all items.\n\n    def test_armor(self):\n        self._verify(\"/armor\")\n\n    def test_backgrounds(self):\n        # This test is flaky, and fails on one machine, but passes on another.\n        pass\n        #self._verify(\"/backgrounds\")\n        \n\n    def test_classes(self):\n        # This test is flaky, and fai","position":{"index":79,"start_char":0,"end_char":1500},"metadata":{"content_hash":"53e13fe44693f83c"},"created_at":"2026-01-14T02:18:50.517Z"}
{"chunk_id":"d3d1c85a9e572ee3053e8fc1a7b8c423","source_id":"50e370a227598ebd","text":" but passes on another.\n        pass\n        #self._verify(\"/backgrounds\")\n        \n\n    def test_classes(self):\n        # This test is flaky, and fails on one machine, but passes on another.\n        pass\n        #self._verify(\"/classes\")\n\n    def test_conditions(self):\n        self._verify(\"/conditions\")\n\n    def test_documents(self):\n        self._verify(\"/documents\")\n\n    def test_feats(self):\n        self._verify(\"/feats\")\n\n    def test_magicitems(self):\n        self._verify(\"/magicitems\")\n\n    # /manifest is excluded because it's too volatile\n\n    def test_monsters(self):\n        pass\n    # This test is flaky, and fails on one machine, but passes on another.\n        #self._verify(\"/monsters\", scrub_img_url)\n\n    def test_planes(self):\n        self._verify(\"/planes\")\n\n    def test_races(self):\n        # This test is flaky, and fails on one machine, but passes on another.\n        pass\n        #self._verify(\"/races\")\n\n    def test_sections(self):\n        self._verify(\"/sections\")\n\n    def test_spelllist(self):\n        self._verify(\"/spelllist\")\n\n    def test_spells(self):\n        # This test is flaky, and fails on one machine, but passes on another.\n        pass\n        #self._verify(\"/spells\")\n\n    def test_weapons(self):\n        self._verify(\"/weapons\")","position":{"index":80,"start_char":1350,"end_char":2627},"metadata":{"content_hash":"fe01b2c39bef7d58"},"created_at":"2026-01-14T02:18:50.517Z"}
{"chunk_id":"d732df777244c68f23850e29443a4fca","source_id":"d69d5756bb1758f0","text":"from django.contrib import admin\n\nfrom api_v2.models import *\n\n\n# Register your models here.\n\nclass FromDocumentModelAdmin(admin.ModelAdmin):\n    list_display = ['key', '__str__']\n\n\nclass ItemModelAdmin(admin.ModelAdmin):\n    list_display = ['key', 'name']\n\n\nclass FeatBenefitInline(admin.TabularInline):\n    model = FeatBenefit\n    exclude = ('name',)\n\n\nclass FeatAdmin(admin.ModelAdmin):\n    inlines = [\n        FeatBenefitInline\n    ]\n    list_display = ['key', 'name']\n\n\nclass SpeciesTraitInline(admin.TabularInline):\n    model = SpeciesTrait\n\n\nclass SpeciesAdmin(admin.ModelAdmin):\n    inlines = [\n        SpeciesTraitInline,\n    ]\n\nclass ClassFeatureItemInline(admin.TabularInline):\n    model = ClassFeatureItem\n\nclass ClassFeatureAdmin(admin.ModelAdmin):\n    inlines = [\n        ClassFeatureItemInline\n    ]\n\n\nclass BackgroundBenefitInline(admin.TabularInline):\n    model = BackgroundBenefit\n\n\nclass BackgroundAdmin(admin.ModelAdmin):\n    model = Background\n    inlines = [\n        BackgroundBenefitInline\n    ]\n\nclass DamageTypeAdmin(admin.ModelAdmin):\n    model = DamageType\n\n\nclass LanguageAdmin(admin.ModelAdmin):\n    model = Language\n\n\nadmin.site.register(Weapon, admin_class=FromDocumentModelAdmin)\nadmin.site.register(Armor, admin_class=FromDocumentModelAdmin)\n\nadmin.site.register(Size)\n\nadmin.site.register(ItemCategory)\nadmin.site.register(ItemRarity)\nadmin.site.register(Item, admin_class=ItemModelAdmin)\nadmin.site.register(ItemSet, admin_class=FromDocumentModelAdmin)\n\nadmin.site.","position":{"index":81,"start_char":0,"end_char":1500},"metadata":{"content_hash":"903409714daf9c49"},"created_at":"2026-01-14T02:18:52.418Z"}
{"chunk_id":"87cdc533ce8505e60f72006abe6c6827","source_id":"d69d5756bb1758f0","text":"gister(ItemRarity)\nadmin.site.register(Item, admin_class=ItemModelAdmin)\nadmin.site.register(ItemSet, admin_class=FromDocumentModelAdmin)\n\nadmin.site.register(SpellSchool)\nadmin.site.register(Spell)\n\nadmin.site.register(Species, admin_class=SpeciesAdmin)\n\nadmin.site.register(Feat, admin_class=FeatAdmin)\n\nadmin.site.register(Creature)\nadmin.site.register(CreatureType)\nadmin.site.register(CreatureSet)\n\nadmin.site.register(Background, admin_class=BackgroundAdmin)\n\nadmin.site.register(Document)\nadmin.site.register(License)\nadmin.site.register(Publisher)\nadmin.site.register(GameSystem)\n\nadmin.site.register(DamageType)\nadmin.site.register(DamageTypeDescription)\n\nadmin.site.register(Language)\n\nadmin.site.register(Ability)\nadmin.site.register(Skill)\n\nadmin.site.register(Alignment)\n\nadmin.site.register(Condition)\n\nadmin.site.register(ClassFeatureItem)\nadmin.site.register(ClassFeature, admin_class=ClassFeatureAdmin)\nadmin.site.register(CharacterClass)\n\nadmin.site.register(Environment)\n\nadmin.site.register(Rule)\nadmin.site.register(RuleSet)\n\nadmin.site.register(Image)\n\nadmin.site.register(Service)","position":{"index":82,"start_char":1350,"end_char":2453},"metadata":{"content_hash":"2834d0261125569b"},"created_at":"2026-01-14T02:18:52.418Z"}
{"chunk_id":"7f4638197adc471ed0fe1254a08cf15b","source_id":"6d38b2890bcba1d7","text":"from django.apps import AppConfig\n\n\nclass ApiV2Config(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'api_v2'","position":{"index":83,"start_char":0,"end_char":142},"metadata":{"content_hash":"af9ddb19b482346a"},"created_at":"2026-01-14T02:18:52.969Z"}
{"chunk_id":"b0bb0b3c35b11173acc664980af9ddee","source_id":"c5426ef1ca6106bb","text":"from django.conf.urls import include\nfrom django.urls import path\nfrom rest_framework import routers\n\nfrom api_v2 import views\n\nrouter = routers.DefaultRouter()\nrouter.register(r'items',views.ItemViewSet)\nrouter.register(r'magicitems', views.MagicItemViewSet, basename=\"magicitems\")\nrouter.register(r'itemsets',views.ItemSetViewSet)\nrouter.register(r'itemcategories',views.ItemCategoryViewSet)\nrouter.register(r'documents',views.DocumentViewSet)\nrouter.register(r'licenses',views.LicenseViewSet)\nrouter.register(r'publishers',views.PublisherViewSet)\nrouter.register(r'weapons',views.WeaponViewSet)\nrouter.register(r'armor',views.ArmorViewSet)\nrouter.register(r'gamesystems',views.GameSystemViewSet)\nrouter.register(r'backgrounds',views.BackgroundViewSet)\nrouter.register(r'feats',views.FeatViewSet)\nrouter.register(r'species',views.SpeciesViewSet)\nrouter.register(r'creatures',views.CreatureViewSet)\nrouter.register(r'creaturetypes',views.CreatureTypeViewSet)\nrouter.register(r'creaturesets',views.CreatureSetViewSet)\nrouter.register(r'damagetypes',views.DamageTypeViewSet)\nrouter.register(r'languages',views.LanguageViewSet)\nrouter.register(r'alignments',views.AlignmentViewSet)\nrouter.register(r'conditions',views.ConditionViewSet)\nrouter.register(r'spells',views.SpellViewSet)\nrouter.register(r'spellschools', views.SpellSchoolViewSet)\nrouter.register(r'classes',views.CharacterClassViewSet)\nrouter.register(r'sizes',views.SizeViewSet)\nrouter.register(r'itemrarities',views.ItemRarityViewSet)\nrout","position":{"index":84,"start_char":0,"end_char":1500},"metadata":{"content_hash":"1b31fa969e9c10de"},"created_at":"2026-01-14T02:18:53.472Z"}
{"chunk_id":"762696a82391a4c3ed60bd9e0f224641","source_id":"c5426ef1ca6106bb","text":"ster(r'classes',views.CharacterClassViewSet)\nrouter.register(r'sizes',views.SizeViewSet)\nrouter.register(r'itemrarities',views.ItemRarityViewSet)\nrouter.register(r'environments',views.EnvironmentViewSet)\nrouter.register(r'abilities',views.AbilityViewSet)\nrouter.register(r'skills',views.SkillViewSet)\nrouter.register(r'rules', views.RuleViewSet)\nrouter.register(r'rulesets', views.RuleSetViewSet)\nrouter.register(r'images', views.ImageViewSet)\nrouter.register(r'weaponproperties', views.WeaponPropertyViewSet)\nrouter.register(r'services', views.ServiceViewSet)\nurlpatterns = [\n    path('v2/', include(router.urls)),\n    path('v2/enums/', views.get_enums, name=\"enums\")\n]","position":{"index":85,"start_char":1350,"end_char":2020},"metadata":{"content_hash":"d502b6638d78723a"},"created_at":"2026-01-14T02:18:53.472Z"}
{"chunk_id":"3af092288df59c67a56906f12b60c9a8","source_id":"2c2afbab9b7bfd1b","text":"\"\"\"The initialization for models for open5e's api v2.\"\"\"\n\nfrom .item import ItemCategory\nfrom .item import Item\nfrom .item import ItemSet\nfrom .item import ItemRarity\n\nfrom .abilities import Ability\nfrom .abilities import AbilityDescription\nfrom .abilities import Skill\nfrom .abilities import SkillDescription\n\nfrom .armor import Armor\n\nfrom .weapon import Weapon\nfrom .weapon import WeaponProperty\nfrom .weapon import WeaponPropertyAssignment\n\nfrom .species import SpeciesTrait\nfrom .species import Species\n\nfrom .feat import FeatBenefit\nfrom .feat import Feat\n\nfrom .background import BackgroundBenefit\nfrom .background import Background\n\nfrom .creature import Creature\nfrom .creature import CreatureTrait\nfrom .creature import CreatureAction\nfrom .creature import CreatureActionAttack\nfrom .creature import CreatureType\nfrom .creature import CreatureTypeDescription\nfrom .creature import CreatureSet\n\nfrom .document import Document\nfrom .document import License\nfrom .document import Publisher\nfrom .document import GameSystem\nfrom .document import FromDocument\n\nfrom .damagetype import DamageType\nfrom .damagetype import DamageTypeDescription\n\nfrom .language import Language\n\nfrom .alignment import Alignment\nfrom .alignment import AlignmentDescription\n\nfrom .condition import Condition\nfrom .condition import ConditionDescription\n\nfrom .spell import Spell\nfrom .spell import SpellCastingOption\nfrom .spell import SpellSchool\n\nfrom .characterclass import ClassFeatureItem\nfrom .characterclass imp","position":{"index":86,"start_char":0,"end_char":1500},"metadata":{"content_hash":"9bfef64c3fbf61f7"},"created_at":"2026-01-14T02:18:58.571Z"}
{"chunk_id":"c7f68b4bf8db86ebfd4dbb984ca66973","source_id":"2c2afbab9b7bfd1b","text":"port Spell\nfrom .spell import SpellCastingOption\nfrom .spell import SpellSchool\n\nfrom .characterclass import ClassFeatureItem\nfrom .characterclass import ClassFeature\nfrom .characterclass import CharacterClass\n\nfrom .size import Size\n\nfrom .environment import Environment\n\nfrom .speed import HasSpeed\n\nfrom .rule import Rule, RuleSet\n\nfrom .image import Image, HasIcon, HasIllustration\n\nfrom .service import Service","position":{"index":87,"start_char":1350,"end_char":1765},"metadata":{"content_hash":"2d0acc9b9467b983"},"created_at":"2026-01-14T02:18:58.571Z"}
{"chunk_id":"96b2829e48c85360f4f9a40045a07edd","source_id":"97c1d21b43cf4d36","text":"\"\"\"\nThe model for abilities.\n\nIncludes descriptions for each ability type.\n\"\"\"\n\nfrom django.db import models\nfrom django.core.validators import MinValueValidator\n\nfrom .abstracts import HasName, HasDescription\nfrom .document import FromDocument\n\nclass Ability(HasName, FromDocument):\n    \"\"\"\n    This is the definition of the Ability class.\n    \"\"\"\n\n    short_desc = models.CharField(\n        max_length=100,\n        help_text='Short description of the ability.')\n\n    @property\n    def skills(self):\n        return self.skill_set.all()\n\n    class Meta:\n        \"\"\"To assist with the UI layer.\"\"\"\n\n        verbose_name_plural = \"abilities\"\n\n    @property\n    def descriptions(self):\n        \"\"\" Gets the description based on parameter, and then if none, global priority\"\"\"\n        return AbilityDescription.objects.filter(describes=self).all().order_by(\"pk\")\n\n\nclass AbilityDescription(HasDescription, FromDocument):\n    \"\"\"A description of the ability\"\"\"\n    describes = models.ForeignKey(Ability, on_delete=models.CASCADE)\n\n\nclass Skill(HasName, FromDocument):\n    \"\"\"\n    This is the definition of the skill class.\n    \"\"\"\n\n    ability = models.ForeignKey(\n        Ability,\n        on_delete=models.CASCADE,\n        help_text='The ability referenced by this skill.'\n    )\n\n    class Meta:\n        \"\"\"To assist with the UI layer.\"\"\"\n\n        verbose_name_plural = \"skills\"\n\n    @property\n    def descriptions(self):\n        \"\"\" Gets the description based on parameter, and then if none, global prio","position":{"index":88,"start_char":0,"end_char":1500},"metadata":{"content_hash":"14891b7ab539a6ba"},"created_at":"2026-01-14T02:18:59.772Z"}
{"chunk_id":"51e6d871033bf9a4bd05f25148eb0640","source_id":"97c1d21b43cf4d36","text":"e_name_plural = \"skills\"\n\n    @property\n    def descriptions(self):\n        \"\"\" Gets the description based on parameter, and then if none, global priority\"\"\"\n        return SkillDescription.objects.filter(describes=self).all().order_by(\"pk\")\n\n\nclass SkillDescription(HasDescription, FromDocument):\n    \"\"\"A description of the skill\"\"\"\n    describes = models.ForeignKey(Skill, on_delete=models.CASCADE)","position":{"index":89,"start_char":1350,"end_char":1751},"metadata":{"content_hash":"9b4fa7c311ba8ef7"},"created_at":"2026-01-14T02:18:59.772Z"}
{"chunk_id":"0bc6ac40313f63ea1879268981cecba7","source_id":"03d29b88db785e77","text":"\"\"\"Abstract models to be used in Game Content items.\"\"\"\nfrom math import floor\n\nfrom django.db import models\nfrom django.core.validators import MaxValueValidator, MinValueValidator\n\nfrom .enums import MODIFICATION_TYPES, DIE_TYPES\nfrom .enums import DISTANCE_UNIT_TYPES, WEIGHT_UNIT_TYPES\nfrom .enums import ABILITY_SCORE_MAXIMUM\nfrom .enums import SAVING_THROW_MAXIMUM, SAVING_THROW_MINIMUM\nfrom .enums import SKILL_BONUS_MINIMUM, SKILL_BONUS_MAXIMUM\nfrom .enums import PASSIVE_SCORE_MAXIMUM\nfrom drf_spectacular.utils import extend_schema_field, inline_serializer\nfrom drf_spectacular.types import OpenApiTypes\nfrom rest_framework import serializers\nimport decimal\n\n# FIELDS USED ACROSS MULTIPLE MODELS\n\ndef damage_die_count_field():\n    return models.SmallIntegerField(\n        blank=True,\n        null=True,\n        validators=[MinValueValidator(0)],\n        help_text='The number of dice to roll for damage.'\n    )\n\ndef damage_die_type_field():\n    return models.CharField(\n        blank=True,\n        null=True,\n        max_length=20,\n        choices=DIE_TYPES,\n        help_text='What kind of die to roll for damage.'\n    )\n\ndef damage_bonus_field():\n    return models.SmallIntegerField(\n        null=True,\n        blank=True,\n        validators=[MinValueValidator(-5), MaxValueValidator(20)],\n        help_text='Damage roll modifier.'\n    )\n\ndef key_field():\n    return models.CharField(\n        primary_key=True,\n        max_length=100,\n        help_text=\"Unique key for the Document.\"\n    )","position":{"index":90,"start_char":0,"end_char":1500},"metadata":{"content_hash":"bbcc7931c01dd3e6"},"created_at":"2026-01-14T02:19:00.285Z"}
{"chunk_id":"013e457cf80cf450ecf4a1ea69d5b7fd","source_id":"03d29b88db785e77","text":"def key_field():\n    return models.CharField(\n        primary_key=True,\n        max_length=100,\n        help_text=\"Unique key for the Document.\"\n    )\n\ndef distance_field(null=True):\n    return models.FloatField(\n        null=null,\n        blank=True,\n        validators=[MinValueValidator(decimal.Decimal(0.0))],\n        help_text=\"Used to measure distance.\"\n    )\n\ndef distance_unit_field():\n    return models.CharField(\n        null=True,\n        blank=True,\n        max_length=20,\n        choices=DISTANCE_UNIT_TYPES,\n        help_text='What distance unit the relevant field uses.'\n    )\n\ndef weight_unit_field():\n    return models.CharField(\n        null=True,\n        blank=True,\n        max_length=20,\n        choices=WEIGHT_UNIT_TYPES,\n        help_text='What weight unit the relevant field uses.'\n    )\n\n# Define a field representing an ability score\ndef ability_score_field(help_text):\n    return models.SmallIntegerField(\n        default=0,\n        validators=[\n            MinValueValidator(0),\n            MaxValueValidator(ABILITY_SCORE_MAXIMUM)],\n        help_text=help_text)\n\n# Calculate the modifier corresponding to a given ability score\ndef ability_modifier(score):\n  return floor(0.5 * (score - 10))\n\n# Define a field representing a saving throw\ndef saving_throw_field(help_text):\n    return models.SmallIntegerField(\n        blank=True,\n        null=True,\n        validators=[\n            MinValueValidator(SAVING_THROW_MINIMUM),\n            MaxValueValidator(SAVING_THROW_MAXIMU","position":{"index":91,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"18ce3bc829851809"},"created_at":"2026-01-14T02:19:00.285Z"}
{"chunk_id":"06fff0e817cc67c448fb3ae809fca993","source_id":"03d29b88db785e77","text":"k=True,\n        null=True,\n        validators=[\n            MinValueValidator(SAVING_THROW_MINIMUM),\n            MaxValueValidator(SAVING_THROW_MAXIMUM)],\n        help_text=help_text)\n\n# Define a field representing a skill bonus\ndef skill_bonus_field(help_text):\n    return models.SmallIntegerField(\n        blank=True,\n        null=True,\n        validators=[\n            MinValueValidator(SKILL_BONUS_MINIMUM),\n            MaxValueValidator(SKILL_BONUS_MAXIMUM)],\n        help_text=help_text)\n\n# Define a field representing a passive score\ndef passive_score_field(help_text):\n    return models.SmallIntegerField(\n        default=0,\n        validators=[\n            MinValueValidator(0),\n            MaxValueValidator(PASSIVE_SCORE_MAXIMUM)],\n        help_text=help_text)\n\n\n# CLASSES INHERITED BY MULTIPLE MODELS\n\nclass HasName(models.Model):\n    \"\"\"This is the definition of a name.\"\"\"\n\n    name = models.CharField(\n        max_length=100,\n        help_text='Name of the item.')\n\n    def __str__(self):\n        return self.name\n\n    class Meta:\n        abstract = True\n\n\nclass HasDescription(models.Model):\n    \"\"\"This is the definition of a description.\"\"\"\n\n    desc = models.TextField(\n        blank=True,\n        help_text='Description of the game content item. Markdown.')\n\n    class Meta:\n        abstract = True\n\n\nclass HasPrerequisite(models.Model):\n    \"\"\"This is the definition of a prerequisite.\"\"\"\n\n    prerequisite = models.CharField(\n        max_length=200,\n        blank=True,\n        ","position":{"index":92,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"6d9dbc4b0362447c"},"created_at":"2026-01-14T02:19:00.285Z"}
{"chunk_id":"68d31d57514f398fbdebe3d96db548eb","source_id":"03d29b88db785e77","text":"Model):\n    \"\"\"This is the definition of a prerequisite.\"\"\"\n\n    prerequisite = models.CharField(\n        max_length=200,\n        blank=True,\n        help_text='Prerequisite for the game content item.')\n\n    @property\n    @extend_schema_field(OpenApiTypes.BOOL)\n    def has_prerequisite(self):\n        return self.prerequisite not in (\"\", None)\n\n    class Meta:\n        abstract = True\n\n\nclass Modification(HasName, HasDescription):\n    \"\"\"\n    This is the definition of a modification abstract base class.\n\n    A modification class will be reimplemented from Feat, Species, Background, etc.\n    Basically it describes any sort of modification to a character in 5e.\n    \"\"\"\n\n    type = models.CharField(\n        max_length=200,\n        blank=True,\n        null=True,\n        choices=MODIFICATION_TYPES,\n        help_text='Modification type.')\n\n    class Meta:\n        abstract = True\n        ordering = ['pk']\n\n\nclass Benefit(HasName, HasDescription):\n    class Meta:\n        abstract = True\n        ordering = ['pk']\n\n\nclass HasAbilities(models.Model):\n    \"\"\"\n    This is the definition of the Abilities abstract base class.\n\n    The Abilities class defines the standard six ability scores plus related\n    features and will be inherited by Creature.\n    \"\"\"\n\n\n    # Ability scores\n\n    ability_score_strength = ability_score_field(\n        'Integer representing the strength ability.')\n\n    ability_score_dexterity = ability_score_field(\n        'Integer representing the dexterity ability.')\n\n   ","position":{"index":93,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"8c322b8d0285b5b9"},"created_at":"2026-01-14T02:19:00.285Z"}
{"chunk_id":"f654446464569a5e106a001cb8fbcc92","source_id":"03d29b88db785e77","text":"r representing the strength ability.')\n\n    ability_score_dexterity = ability_score_field(\n        'Integer representing the dexterity ability.')\n\n    ability_score_constitution = ability_score_field(\n        'Integer representing the constitution ability.')\n\n    ability_score_intelligence = ability_score_field(\n        'Integer representing the intelligence ability.')\n\n    ability_score_wisdom = ability_score_field(\n        'Integer representing the wisdom ability.')\n\n    ability_score_charisma = ability_score_field(\n        'Integer representing the charisma ability.')\n\n    @extend_schema_field(inline_serializer(\n        name=\"ability_scores\",\n        fields={\n            \"strength\": serializers.IntegerField(),\n            \"dexterity\": serializers.IntegerField(),\n            \"constitution\": serializers.IntegerField(),\n            \"intelligence\": serializers.IntegerField(),\n            \"wisdom\": serializers.IntegerField(),\n            \"charisma\": serializers.IntegerField(),\n        })\n    )\n    def get_ability_scores(self):\n        return {\n            'strength': self.ability_score_strength,\n            'dexterity': self.ability_score_dexterity,\n            'constitution': self.ability_score_constitution,\n            'intelligence': self.ability_score_intelligence,\n            'wisdom': self.ability_score_wisdom,\n            'charisma': self.ability_score_charisma,\n        }\n\n\n    # Ability modifiers\n\n    @property\n    def modifier_strength(self):\n        return ability_mod","position":{"index":94,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"06cd94deec853de9"},"created_at":"2026-01-14T02:19:00.285Z"}
{"chunk_id":"084ebb091d9e78a8177c99326f8002a8","source_id":"03d29b88db785e77","text":"charisma': self.ability_score_charisma,\n        }\n\n\n    # Ability modifiers\n\n    @property\n    def modifier_strength(self):\n        return ability_modifier(self.ability_score_strength)\n\n    @property\n    def modifier_dexterity(self):\n        return ability_modifier(self.ability_score_dexterity)\n\n    @property\n    def modifier_constitution(self):\n        return ability_modifier(self.ability_score_constitution)\n\n    @property\n    def modifier_intelligence(self):\n        return ability_modifier(self.ability_score_intelligence)\n\n    @property\n    def modifier_wisdom(self):\n        return ability_modifier(self.ability_score_wisdom)\n\n    @property\n    def modifier_charisma(self):\n        return ability_modifier(self.ability_score_charisma)\n\n    @extend_schema_field(inline_serializer(\n        name=\"ability_modifiers\",\n        fields={\n            # todo: technically they're all typed as any, but they're `floor`'d, so they should come out as integers\n            \"strength\": serializers.IntegerField(),\n            \"dexterity\": serializers.IntegerField(),\n            \"constitution\": serializers.IntegerField(),\n            \"intelligence\": serializers.IntegerField(),\n            \"wisdom\": serializers.IntegerField(),\n            \"charisma\": serializers.IntegerField(),\n        })\n    )\n    def get_modifiers(self):\n        return {\n            'strength': self.modifier_strength,\n            'dexterity': self.modifier_dexterity,\n            'constitution': self.modifier_constitution,\n       ","position":{"index":95,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"fbe3b2ff967cefab"},"created_at":"2026-01-14T02:19:00.285Z"}
{"chunk_id":"750afbf340b440a703acb7865066987a","source_id":"03d29b88db785e77","text":" 'strength': self.modifier_strength,\n            'dexterity': self.modifier_dexterity,\n            'constitution': self.modifier_constitution,\n            'intelligence': self.modifier_intelligence,\n            'wisdom': self.modifier_wisdom,\n            'charisma': self.modifier_charisma,\n        }\n\n\n    # Saving throws\n\n    # These fields may be null, indicating the default value should be used.\n\n    saving_throw_strength = saving_throw_field(\n        'Signed integer added to strength saving throws.')\n\n    saving_throw_dexterity = saving_throw_field(\n        'Signed integer added to dexterity saving throws.')\n\n    saving_throw_constitution = saving_throw_field(\n        'Signed integer added to constitution saving throws.')\n\n    saving_throw_intelligence = saving_throw_field(\n        'Signed integer added to intelligence saving throws.')\n\n    saving_throw_wisdom = saving_throw_field(\n        'Signed integer added to wisdom saving throws.')\n\n    saving_throw_charisma = saving_throw_field(\n        'Signed integer added to charisma saving throws.')\n\n\n    @extend_schema_field(inline_serializer(\n        name=\"saving_throws\",\n        fields={\n            # todo: all of these are \"or none\"\n            \"strength\": serializers.IntegerField(),\n            \"dexterity\": serializers.IntegerField(),\n            \"constitution\": serializers.IntegerField(),\n            \"intelligence\": serializers.IntegerField(),\n            \"wisdom\": serializers.IntegerField(),\n            \"charisma\": serial","position":{"index":96,"start_char":8100,"end_char":9600},"metadata":{"content_hash":"444fd8486b4d65f1"},"created_at":"2026-01-14T02:19:00.285Z"}
{"chunk_id":"f4fa742680df12210f6e1947dea07579","source_id":"03d29b88db785e77","text":"tegerField(),\n            \"intelligence\": serializers.IntegerField(),\n            \"wisdom\": serializers.IntegerField(),\n            \"charisma\": serializers.IntegerField(),\n        })\n    )\n    def get_saving_throws(self):\n        return {\n            'strength': self.saving_throw_strength,\n            'dexterity': self.saving_throw_dexterity,\n            'constitution': self.saving_throw_constitution,\n            'intelligence': self.saving_throw_intelligence,\n            'wisdom': self.saving_throw_wisdom,\n            'charisma': self.saving_throw_charisma,\n        }\n\n\n    # Skill bonuses\n\n    # These fields may be null, indicating the default value should be used.\n\n    skill_bonus_acrobatics = skill_bonus_field(\n        'Signed integer added to acrobatics skill checks.')\n\n    skill_bonus_animal_handling = skill_bonus_field(\n        'Signed integer added to animal handling skill checks.')\n\n    skill_bonus_arcana = skill_bonus_field(\n        'Signed integer added to arcana skill checks.')\n\n    skill_bonus_athletics = skill_bonus_field(\n        'Signed integer added to athletics skill checks.')\n\n    skill_bonus_deception = skill_bonus_field(\n        'Signed integer added to deception skill checks.')\n\n    skill_bonus_history = skill_bonus_field(\n        'Signed integer added to history skill checks.')\n\n    skill_bonus_insight = skill_bonus_field(\n        'Signed integer added to insight skill checks.')\n\n    skill_bonus_intimidation = skill_bonus_field(\n        'Signed integer a","position":{"index":97,"start_char":9450,"end_char":10950},"metadata":{"content_hash":"dd99b7152960c14a"},"created_at":"2026-01-14T02:19:00.285Z"}
{"chunk_id":"19c9115ba56937966719f808598acd83","source_id":"03d29b88db785e77","text":"ill_bonus_field(\n        'Signed integer added to insight skill checks.')\n\n    skill_bonus_intimidation = skill_bonus_field(\n        'Signed integer added to intimidation skill checks.')\n\n    skill_bonus_investigation = skill_bonus_field(\n        'Signed integer added to investigation skill checks.')\n\n    skill_bonus_medicine = skill_bonus_field(\n        'Signed integer added to medicine skill checks.')\n\n    skill_bonus_nature = skill_bonus_field(\n        'Signed integer added to nature skill checks.')\n\n    skill_bonus_perception = skill_bonus_field(\n        'Signed integer added to perception skill checks.')\n\n    skill_bonus_performance = skill_bonus_field(\n        'Signed integer added to performance skill checks.')\n\n    skill_bonus_persuasion = skill_bonus_field(\n        'Signed integer added to persuasion skill checks.')\n\n    skill_bonus_religion = skill_bonus_field(\n        'Signed integer added to religion skill checks.')\n\n    skill_bonus_sleight_of_hand = skill_bonus_field(\n        'Signed integer added to sleight of hand skill checks.')\n\n    skill_bonus_stealth = skill_bonus_field(\n        'Signed integer added to stealth skill checks.')\n\n    skill_bonus_survival = skill_bonus_field(\n        'Signed integer added to survival skill checks.')\n\n    @extend_schema_field(inline_serializer(\n        name=\"skill_bonuses\",\n        fields={\n            # todo: all of these are typed as also none\n            'acrobatics': serializers.IntegerField(),\n            'animal_handling'","position":{"index":98,"start_char":10800,"end_char":12300},"metadata":{"content_hash":"f642a37829402dfb"},"created_at":"2026-01-14T02:19:00.285Z"}
{"chunk_id":"6437c63b5acf2838c261bfbb8fce5a4b","source_id":"03d29b88db785e77","text":"  fields={\n            # todo: all of these are typed as also none\n            'acrobatics': serializers.IntegerField(),\n            'animal_handling': serializers.IntegerField(),\n            'arcana': serializers.IntegerField(),\n            'athletics': serializers.IntegerField(),\n            'deception': serializers.IntegerField(),\n            'history': serializers.IntegerField(),\n            'insight': serializers.IntegerField(),\n            'intimidation': serializers.IntegerField(),\n            'investigation': serializers.IntegerField(),\n            'medicine': serializers.IntegerField(),\n            'nature': serializers.IntegerField(),\n            'perception': serializers.IntegerField(),\n            'performance': serializers.IntegerField(),\n            'persuasion': serializers.IntegerField(),\n            'religion': serializers.IntegerField(),\n            'sleight_of_hand': serializers.IntegerField(),\n            'stealth': serializers.IntegerField(),\n            'survival': serializers.IntegerField(),\n        }\n    ))\n    def get_skill_bonuses(self):\n        return {\n            'acrobatics': self.skill_bonus_acrobatics,\n            'animal_handling': self.skill_bonus_animal_handling,\n            'arcana': self.skill_bonus_arcana,\n            'athletics': self.skill_bonus_athletics,\n            'deception': self.skill_bonus_deception,\n            'history': self.skill_bonus_history,\n            'insight': self.skill_bonus_insight,\n            'intimidation': self","position":{"index":99,"start_char":12150,"end_char":13650},"metadata":{"content_hash":"305e657a82ea5bf3"},"created_at":"2026-01-14T02:19:00.285Z"}
{"chunk_id":"dbe53d6ba57cfe08a66fe1f208244cf5","source_id":"03d29b88db785e77","text":"ll_bonus_deception,\n            'history': self.skill_bonus_history,\n            'insight': self.skill_bonus_insight,\n            'intimidation': self.skill_bonus_intimidation,\n            'investigation': self.skill_bonus_investigation,\n            'medicine': self.skill_bonus_medicine,\n            'nature': self.skill_bonus_nature,\n            'perception': self.skill_bonus_perception,\n            'performance': self.skill_bonus_performance,\n            'persuasion': self.skill_bonus_persuasion,\n            'religion': self.skill_bonus_religion,\n            'sleight_of_hand': self.skill_bonus_sleight_of_hand,\n            'stealth': self.skill_bonus_stealth,\n            'survival': self.skill_bonus_survival,\n        }\n\n\n    # Passive scores\n\n    passive_perception = passive_score_field(\n        'Integer representing the passive perception ability.')\n\n    class Meta:\n        abstract = True\n\n\nclass HasSenses(models.Model):\n    \"\"\"\n    This is the definition of the Senses abstract base class.\n\n    The Senses class defines the senses used by a creature are inherited by\n    the Creature model.\n    \"\"\"\n\n    normal_sight_range = distance_field()\n    darkvision_range = distance_field()\n    blindsight_range = distance_field()\n    tremorsense_range = distance_field()\n    truesight_range = distance_field()\n\n    class Meta:\n        abstract = True\n\n\nclass HasPrice(models.Model):\n    \"\"\"\n    The HasPrice abstract class is inherited by other models that have a price;\n    items, services,","position":{"index":100,"start_char":13500,"end_char":15000},"metadata":{"content_hash":"ca955769547d5d98"},"created_at":"2026-01-14T02:19:00.285Z"}
{"chunk_id":"d60659da9ba1e8d53bf6726685d0853e","source_id":"03d29b88db785e77","text":"ct = True\n\n\nclass HasPrice(models.Model):\n    \"\"\"\n    The HasPrice abstract class is inherited by other models that have a price;\n    items, services, etc.\n\n    When inherited, it add the 'cost' field to the derived model\n    \"\"\"\n    \n    cost = models.DecimalField(\n        null=True,  # Allow an unspecified cost.\n        default=None,\n        max_digits=10,\n        decimal_places=2,  # Only track down to 2 decimal places.\n        validators=[MinValueValidator(decimal.Decimal(0.0))],\n        help_text='Number representing the cost of the object.'\n    )\n\n    class Meta:\n        abstract = True","position":{"index":101,"start_char":14850,"end_char":15449},"metadata":{"content_hash":"90b0ecea0fa3b323"},"created_at":"2026-01-14T02:19:00.285Z"}
{"chunk_id":"57b7b7d0fc1b9ed702135399792d21e3","source_id":"1b2624b79c115be9","text":"\"\"\"The model for an alignment.\"\"\"\n\nfrom django.db import models\n\nfrom .abstracts import HasName, HasDescription\nfrom .document import FromDocument\nfrom drf_spectacular.utils import extend_schema_field\nfrom drf_spectacular.types import OpenApiTypes\n\nclass Alignment(HasName, FromDocument):\n    \"\"\"This is the model for an alignment, which is way to describe the \n    moral and personal attitudes of a creature.\"\"\"\n\n    @property\n    @extend_schema_field(OpenApiTypes.STR)\n    def short_name(self):\n        short_name = \"\"\n        for word in self.name.split(\" \"):\n            short_name += word[0].upper()\n        return short_name\n\n    @property\n    @extend_schema_field(OpenApiTypes.STR)\n    def morality(self):\n        return self.name.split(\" \")[-1].lower()\n\n    @property\n    @extend_schema_field(OpenApiTypes.STR)\n    def societal_attitude(self):\n        return self.name.split(\" \")[0].lower()\n\n    @property\n    def descriptions(self):\n        \"\"\" Gets the description based on parameter, and then if none, global priority\"\"\"\n        return AlignmentDescription.objects.filter(describes=self).all().order_by('pk')\n\n\nclass AlignmentDescription(HasDescription, FromDocument):\n    describes = models.ForeignKey(Alignment, on_delete=models.CASCADE)","position":{"index":102,"start_char":0,"end_char":1250},"metadata":{"content_hash":"39a0ac4d1ee57b92"},"created_at":"2026-01-14T02:19:01.058Z"}
{"chunk_id":"3ba71f47c309ad0f6b7eb9bd6e238a1c","source_id":"06a9f632dd485d1e","text":"\"\"\"The model for a type of armor.\"\"\"\n\n\nfrom django.db import models\nfrom .abstracts import HasName\nfrom .document import FromDocument\nfrom drf_spectacular.utils import extend_schema_field\nfrom drf_spectacular.types import OpenApiTypes\n\n\nclass Armor(HasName, FromDocument):\n    \"\"\"\n    This is the model for an armor.\n\n    This does not represent the armor set itself, because that would be an\n    item. Only the unique attributes of a type of armor are here. An item\n    that is armor would link to this model instance.\n    \"\"\"\n\n    grants_stealth_disadvantage = models.BooleanField(\n        null=False,\n        default=False,\n        help_text='If the armor results in disadvantage on stealth checks.')\n\n    strength_score_required = models.IntegerField(\n        blank=True,\n        null=True,\n        help_text='Strength score required to wear the armor without penalty.')\n\n    ac_base = models.IntegerField(\n        null=False,\n        help_text='Integer representing the armor class without modifiers.')\n\n    ac_add_dexmod = models.BooleanField(\n        null=False,\n        default=False,\n        help_text='If the final armor class includes dexterity modifier.')\n\n    ac_cap_dexmod = models.IntegerField(\n        blank=True,\n        null=True,\n        help_text='Integer representing the dexterity modifier cap.')\n\n    @property\n    @extend_schema_field(OpenApiTypes.STR)\n    def category(self):\n        category = 'heavy'\n        if self.ac_add_dexmod:\n            category= 'light'\n        if ","position":{"index":103,"start_char":0,"end_char":1500},"metadata":{"content_hash":"50166c072afdc0e4"},"created_at":"2026-01-14T02:19:01.853Z"}
{"chunk_id":"0d17515f5dce925d9217656883c00eba","source_id":"06a9f632dd485d1e","text":"ma_field(OpenApiTypes.STR)\n    def category(self):\n        category = 'heavy'\n        if self.ac_add_dexmod:\n            category= 'light'\n        if self.ac_cap_dexmod:\n            category= 'medium'\n        return category\n\n\n    @property\n    @extend_schema_field(OpenApiTypes.STR)\n    def ac_display(self):\n        \"\"\"Display text for armor class.\"\"\"\n        ac_string = str(self.ac_base)\n\n        if self.ac_add_dexmod:\n            ac_string += \" + Dex modifier\"\n\n        if self.ac_cap_dexmod is not None:\n            ac_string += \" (max {})\".format(self.ac_cap_dexmod)\n\n        return ac_string\n\n    class Meta:\n        \"\"\"To assist with the UI layer.\"\"\"\n\n        verbose_name_plural = \"armor\"","position":{"index":104,"start_char":1350,"end_char":2049},"metadata":{"content_hash":"05fa346ca974167c"},"created_at":"2026-01-14T02:19:01.853Z"}
{"chunk_id":"dd0d86ff815aca7654853779e44a12ab","source_id":"6c3929afd7f50d1e","text":"\"\"\"The model for a feat.\"\"\"\nfrom django.db import models\nfrom .abstracts import HasName, HasDescription, Modification\nfrom .abstracts import key_field\nfrom .document import FromDocument\n\n\nclass BackgroundBenefit(Modification):\n    \"\"\"This is the model for an individual benefit of a background.\"\"\"\n\n    key = key_field()\n    parent = models.ForeignKey('Background', on_delete=models.CASCADE)\n\n\nclass Background(HasName, HasDescription, FromDocument):\n    \"\"\"\n    This is the model for a character background.\n\n    Your character's background reveals where you came from, how you became\n    an adventurer, and your place in the world.\n    \"\"\"\n\n    @property\n    def benefits(self):\n        \"\"\"Returns the set of benefits that are related to this feat.\"\"\"\n        return self.backgroundbenefit_set\n\n    class Meta:\n        \"\"\"To assist with the UI layer.\"\"\"\n\n        verbose_name_plural = \"backgrounds\"","position":{"index":105,"start_char":0,"end_char":900},"metadata":{"content_hash":"3be29d01d8b0c959"},"created_at":"2026-01-14T02:19:02.405Z"}
{"chunk_id":"0137d3bb7935444eb31518b8ca5412d5","source_id":"6bf493086763b1bf","text":"\"\"\"The model for a feat.\"\"\"\nfrom django.db import models\nfrom django.core.validators import MaxValueValidator, MinValueValidator\nfrom rest_framework import serializers\n\nfrom .abstracts import HasName, HasDescription, Modification\nfrom .abstracts import key_field\nfrom .abilities import Ability\nfrom .document import FromDocument\nfrom .enums import DIE_TYPES, CASTER_TYPES\nfrom drf_spectacular.utils import extend_schema_field, inline_serializer\nfrom drf_spectacular.types import OpenApiTypes\nfrom rest_framework import serializers\n\n\n\nclass ClassFeatureItem(models.Model):\n    \"\"\"This is the class for an individual class feature item, a subset of a class\n    feature.\"\"\"\n\n    key = key_field()\n\n    # Somewhere in here is where you'd define a field that would eventually display as \"Rage Damage +2\"\n    # Also spell slots...?\n\n    parent = models.ForeignKey('ClassFeature', on_delete=models.CASCADE, related_name=\"feature_items\")\n    level = models.IntegerField(validators=[MinValueValidator(0),MaxValueValidator(20)])\n    detail = models.CharField(\n        null=True,\n        max_length = 100\n    )\n    column_value = models.CharField(\n        # The value displayed in a column, or null if no value.\n        null=True,\n        blank=True,\n        max_length=20,\n        help_text='The value that should be displayed in the table column (where applicable).'\n    )\n\n    def __str__(self):\n        return \"{} {} ({})\".format(\n                                 self.parent.parent.name,\n                  ","position":{"index":106,"start_char":0,"end_char":1500},"metadata":{"content_hash":"2eaeb19c1152acaf"},"created_at":"2026-01-14T02:19:02.860Z"}
{"chunk_id":"bd1c29f24bb55324d0d1e34832297094","source_id":"6bf493086763b1bf","text":"able).'\n    )\n\n    def __str__(self):\n        return \"{} {} ({})\".format(\n                                 self.parent.parent.name,\n                                 str(self.level),\n                                 self.parent.name)\n\n\nclass ClassFeature(HasName, HasDescription, FromDocument):\n    \"\"\"This class represents an individual class feature, such as Rage, or Extra\n    Attack.\"\"\"\n\n    parent = models.ForeignKey('CharacterClass', on_delete=models.CASCADE, related_name=\"features\")\n\n    FEATURE_TYPES = [\n        ('CORE_TRAITS_TABLE', 'CORE_TRAITS_TABLE'),\n        ('CLASS_LEVEL_FEATURE', 'CLASS_LEVEL_FEATURE'),\n        ('CLASS_FEATURE_OPTION_LIST', 'CLASS_FEATURE_OPTION_LIST'),\n        ('CLASS_TABLE_DATA', 'CLASS_TABLE_DATA'),\n        ('PROFICIENCIES', 'PROFICIENCIES'),\n        ('PROFICIENCY_BONUS', 'PROFICIENCY_BONUS'),\n        ('STARTING_EQUIPMENT', 'STARTING_EQUIPMENT'),\n        ('SPELL_SLOTS', 'SPELL_SLOTS'),\n    ]\n\n    feature_type = models.CharField(\n        default='CLASS_LEVEL_FEATURE',\n        choices=FEATURE_TYPES,\n        max_length=32,\n        help_text=\"The type that best represents this Class Feature\",\n    )\n\n    def __str__(self):\n        return \"{} ({})\".format(self.name,self.parent.name)\n\n\nclass CharacterClass(HasName, FromDocument, HasDescription):\n    \"\"\"The model for a character class or subclass.\"\"\"\n\n    subclass_of = models.ForeignKey('self',\n                                   default=None,\n                                   blank=True,\n              ","position":{"index":107,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"c1f155bddfcc5d5d"},"created_at":"2026-01-14T02:19:02.861Z"}
{"chunk_id":"e3642815fe5eaf2879eb8d4255bc274a","source_id":"6bf493086763b1bf","text":"subclass_of = models.ForeignKey('self',\n                                   default=None,\n                                   blank=True,\n                                   null=True,\n                                   on_delete=models.CASCADE)\n\n    hit_dice = models.CharField(\n        max_length=100,\n        default=None,\n        blank=True,\n        null=True,\n        choices=DIE_TYPES,\n        help_text='Dice notation hit dice option.')\n\n    saving_throws = models.ManyToManyField(Ability,\n        related_name=\"characterclass_saving_throws\",\n        help_text='Saving throw proficiencies for this class.')\n\n    primary_abilities = models.ManyToManyField(\n        Ability,\n        help_text='Primary abilities for thie class'\n    )\n\n    caster_type = models.CharField(\n        max_length=100,\n        default=None,\n        blank=True,\n        null=True,\n        choices=CASTER_TYPES,\n        help_text='Type of caster. Options are full, half, none.')\n\n    @property\n    @extend_schema_field(inline_serializer(\n        name=\"hit_points\",\n        fields={\n            # todo: also none\n            \"hit_dice\": serializers.IntegerField(),\n            \"hit_dice_name\": serializers.StringRelatedField(),\n            \"hit_points_at_1st_level\": serializers.IntegerField(),\n            \"hit_points_at_higher_levels\": serializers.IntegerField()\n        }\n    ))\n    def hit_points(self):\n        hit_dice_name = \"1{} per {} level\".format(self.hit_dice, self.name)\n        split_dice = self.hit_dice.lower(","position":{"index":108,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"29058110125b1019"},"created_at":"2026-01-14T02:19:02.861Z"}
{"chunk_id":"eee6b099ac2d546b8e7da0193cddfe61","source_id":"6bf493086763b1bf","text":"    ))\n    def hit_points(self):\n        hit_dice_name = \"1{} per {} level\".format(self.hit_dice, self.name)\n        split_dice = self.hit_dice.lower().split(\"d\")[1]\n        hit_points_at_1st_level = \"{} + your Constitution modifier\".format(split_dice)\n        half_plus_one = str(int(split_dice)//2 + 1)\n        hit_points_at_higher_levels = \"1{} (or {}) + your Constitution modifier per {} level after 1st\".format(self.hit_dice, half_plus_one, self.name.lower())\n\n        return {\n            \"hit_dice\":self.hit_dice,\n            \"hit_dice_name\":hit_dice_name,\n            \"hit_points_at_1st_level\":hit_points_at_1st_level,\n            \"hit_points_at_higher_levels\":hit_points_at_higher_levels}\n\n\n    @property\n    def is_subclass(self):\n        \"\"\"Returns whether the object is a subclass.\"\"\"\n        return self.subclass_of is not None\n\n    @extend_schema_field(serializers.DictField(\n        child=inline_serializer(\n            name=\"levels\",\n            fields={\n                \"features\": serializers.ListSerializer(\n                    child=serializers.CharField()\n                ),\n                \"proficiency-bonus\": serializers.IntegerField(),\n                \"level\": serializers.IntegerField\n            }\n        )\n    ))\n\n\n    def get_slots_by_player_level(self,level,caster_type):\n        # full is for a full caster, not including cantrips.\n        # full=False is for a half caster.\n        if level<0: # Invalid player level.\n            return None\n        if level>20: # In","position":{"index":109,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"212867235f1da3cb"},"created_at":"2026-01-14T02:19:02.861Z"}
{"chunk_id":"311defeceb138296ba1460d63f4eec98","source_id":"6bf493086763b1bf","text":"ing cantrips.\n        # full=False is for a half caster.\n        if level<0: # Invalid player level.\n            return None\n        if level>20: # Invalid player level.\n            return None\n\n        full = [[],\n        [0,2,0,0,0,0,0,0,0,0],\n        [0,3,0,0,0,0,0,0,0,0],\n        [0,4,2,0,0,0,0,0,0,0],\n        [0,4,3,0,0,0,0,0,0,0],\n        [0,4,3,2,0,0,0,0,0,0],\n        [0,4,3,3,0,0,0,0,0,0],\n        [0,4,3,3,1,0,0,0,0,0],\n        [0,4,3,3,2,0,0,0,0,0],\n        [0,4,3,3,3,1,0,0,0,0],\n        [0,4,3,3,3,2,0,0,0,0],\n        [0,4,3,3,3,2,1,0,0,0],\n        [0,4,3,3,3,2,1,0,0,0],\n        [0,4,3,3,3,2,1,1,0,0],\n        [0,4,3,3,3,2,1,1,0,0],\n        [0,4,3,3,3,2,1,1,1,0],\n        [0,4,3,3,3,2,1,1,1,0],\n        [0,4,3,3,3,2,1,1,1,1],\n        [0,4,3,3,3,3,1,1,1,1],\n        [0,4,3,3,3,3,2,1,1,1],\n        [0,4,3,3,3,3,2,2,1,1]\n        ]\n\n        half = [[],\n        [0,0,0,0,0,0],\n        [0,2,0,0,0,0],\n        [0,3,0,0,0,0],\n        [0,3,0,0,0,0],\n        [0,4,2,0,0,0],\n        [0,4,2,0,0,0],\n        [0,4,3,0,0,0],\n        [0,4,3,0,0,0],\n        [0,4,3,2,0,0],\n        [0,4,3,2,0,0],\n        [0,4,3,3,0,0],\n        [0,4,3,3,0,0],\n        [0,4,3,3,1,0],\n        [0,4,3,3,1,0],\n        [0,4,3,3,2,0],\n        [0,4,3,3,2,0],\n        [0,4,3,3,3,1],\n        [0,4,3,3,3,1],\n        [0,4,3,3,3,2],\n        [0,4,3,3,3,2]\n        ]\n\n        if caster_type=='FULL':\n            return full[level]\n        if caster_type=='HALF':\n            return half[level]\n        else:\n            return []\n\n  ","position":{"index":110,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"519f5bb6592087d6"},"created_at":"2026-01-14T02:19:02.861Z"}
{"chunk_id":"50bd472df48eb5f9d1ccb26fb7564b4f","source_id":"6bf493086763b1bf","text":"er_type=='FULL':\n            return full[level]\n        if caster_type=='HALF':\n            return half[level]\n        else:\n            return []\n\n    def proficiency_bonus(self, player_level):\n        # Consider as part of enums\n        p = [0,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6]\n        return p[player_level]\n    \n    def __str__(self):\n        if self.is_subclass:\n            return \"{} [{}]\".format(self.subclass_of.name, self.name)\n        else:\n            return self.name\n\n    def as_text(self):\n        text = self.name + '\\n'\n        \n        for feature in self.features.all():\n            text+='\\n' + feature.as_text()\n\n        return text\n\n    def search_result_extra_fields(self):\n        return {\n            \"subclass_of\": { \n                \"name\": self.subclass_of.name,\n                \"key\": self.subclass_of.key\n            } if self.subclass_of else None\n        }","position":{"index":111,"start_char":6750,"end_char":7645},"metadata":{"content_hash":"bf257c53bd928907"},"created_at":"2026-01-14T02:19:02.861Z"}
{"chunk_id":"6774b8f719e3f46cd2550def738cc549","source_id":"5456b7bb3d4bfba5","text":"\"\"\"The model for a condition.\"\"\"\nfrom django.db import models\n\nfrom .abstracts import HasName, HasDescription\nfrom .document import FromDocument\nfrom .image import HasIcon\n\nclass Condition(HasName, HasIcon, FromDocument):\n    \"\"\"\n    This is the model for a condition.\n    \"\"\"\n\n    @property\n    def descriptions(self):\n        \"\"\" Gets the description based on parameter, and then if none, global priority\"\"\"\n        return ConditionDescription.objects.filter(describes=self).all().order_by(\"pk\")\n\n    class Meta:\n        \"\"\"To assist with the UI layer.\"\"\"\n\n        verbose_name_plural = \"conditions\"\n\n\nclass ConditionDescription(HasDescription, FromDocument):\n    \"\"\"A description of the condition.\"\"\"\n    describes = models.ForeignKey(Condition, on_delete=models.CASCADE)","position":{"index":112,"start_char":0,"end_char":774},"metadata":{"content_hash":"5f80578c0294d66f"},"created_at":"2026-01-14T02:19:03.432Z"}
{"chunk_id":"948b13a3dc2150af5fff4545ae348846","source_id":"125f82d2ab5f869a","text":"\"\"\"The model for a creature.\"\"\"\nimport decimal\n\nfrom fractions import Fraction\n\nfrom django.db import models\nfrom django.core.validators import MaxValueValidator, MinValueValidator\nfrom .abstracts import HasAbilities, HasSenses\nfrom .language import HasLanguage\nfrom .abstracts import HasDescription, HasName, Modification\nfrom .abstracts import damage_die_count_field, damage_die_type_field\nfrom .abstracts import damage_bonus_field, key_field\nfrom .abstracts import distance_field, distance_unit_field\nfrom .image import HasIllustration\nfrom .object import Object\nfrom .condition import Condition\nfrom .damagetype import DamageType\nfrom .document import FromDocument\nfrom .environment import Environment\nfrom .speed import HasSpeed\nfrom .enums import CREATURE_ATTACK_TYPES, CREATURE_USES_TYPES, ACTION_TYPES\n\n\nclass CreatureType(HasName, FromDocument):\n    \"\"\"The Type of creature, such as Aberration.\"\"\"\n\n    @property\n    def descriptions(self):\n        \"\"\" Gets the description based on parameter, and then if none, global priority\"\"\"\n        return CreatureTypeDescription.objects.filter(describes=self).all().order_by('pk')\n\n\nclass CreatureTypeDescription(HasDescription, FromDocument):\n    describes = models.ForeignKey(CreatureType, on_delete=models.CASCADE)\n\n\n\nclass Creature(Object, HasAbilities, HasSenses, HasLanguage, HasSpeed, HasIllustration, FromDocument):\n    \"\"\"\n    This is the model for a Creature, per the 5e gamesystem.\n\n    This extends the object and abilities models.\n    \"\"","position":{"index":113,"start_char":0,"end_char":1500},"metadata":{"content_hash":"65bf2008d0eb314b"},"created_at":"2026-01-14T02:19:03.892Z"}
{"chunk_id":"7fa4cce3afe74a9a144e7781f0639d4f","source_id":"125f82d2ab5f869a","text":"tration, FromDocument):\n    \"\"\"\n    This is the model for a Creature, per the 5e gamesystem.\n\n    This extends the object and abilities models.\n    \"\"\"\n\n    type = models.ForeignKey(\n        CreatureType,\n        on_delete=models.CASCADE,\n        help_text=\"Type of creature, such as Aberration.\"\n    )\n\n    category = models.CharField(\n        max_length=100,\n        help_text='What category this creature belongs to.'\n    )\n\n    subcategory = models.CharField(\n        max_length=100,\n        blank=True,\n        null=True,\n        help_text='What subcategory this creature belongs to.'\n    )\n\n    alignment = models.CharField(\n        max_length=100,\n        help_text='The creature\\'s allowed alignments.'\n    )\n\n\n    damage_vulnerabilities_display = models.CharField(\n        max_length=128,\n        blank=True,\n        null=True,\n        help_text='The Creature\\'s damage vulnerabilities, formatted as a human-readable string',\n        default=''\n    )\n\n    damage_vulnerabilities = models.ManyToManyField(DamageType,\n        related_name=\"creature_damage_vulnerabilities\")\n\n    damage_immunities_display = models.CharField(\n        max_length=128,\n        blank=True,\n        null=True,\n        help_text='The Creature\\'s damage immunities, formatted as a human-readable string',\n        default=''\n    )\n\n    damage_immunities = models.ManyToManyField(DamageType,\n        related_name=\"creature_damage_immunities\")\n\n\n    damage_resistances_display = models.CharField(\n        max_length=128,","position":{"index":114,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"76fa4c9cf349dfbb"},"created_at":"2026-01-14T02:19:03.892Z"}
{"chunk_id":"c0c803a74d374015c9637d7a9a6c6ddd","source_id":"125f82d2ab5f869a","text":"oManyField(DamageType,\n        related_name=\"creature_damage_immunities\")\n\n\n    damage_resistances_display = models.CharField(\n        max_length=128,\n        blank=True,\n        null=True,\n        help_text='The Creature\\'s damage resistances, formatted as a human-readable string',\n        default=''\n    )\n\n    damage_resistances = models.ManyToManyField(DamageType,\n        related_name=\"creature_damage_resistances\")\n\n    condition_immunities_display = models.CharField(\n        max_length=128,\n        blank=True,\n        null=True,\n        help_text='The Creature\\'s condition immunities, formatted as a human-readable string',\n        default=''\n    )\n    condition_immunities = models.ManyToManyField(\n        Condition,\n        help_text=\"Conditions that this creature is immune to.\"\n        )\n\n    challenge_rating_decimal = models.DecimalField(\n        null=False,\n        max_digits=10,\n        decimal_places=3,\n        validators=[MinValueValidator(decimal.Decimal(0.0)),MaxValueValidator(decimal.Decimal(30.0))],\n        help_text=\"Challenge Rating field as a decimal number.\"\n    )\n\n    proficiency_bonus = models.SmallIntegerField(\n        null=True,\n        help_text='The Creauture\\'s Proficiency Bonus'\n    )\n\n    experience_points_integer = models.IntegerField(\n        null=True,\n        blank=True,\n        validators=[MinValueValidator(0)],\n        help_text=\"Optional override for calculated XP based on CR.\"\n    )\n\n    environments = models.ManyToManyField(Environment,\n   ","position":{"index":115,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"855387013b0bb477"},"created_at":"2026-01-14T02:19:03.892Z"}
{"chunk_id":"dec43b9a640540b223adad84cb63f344","source_id":"125f82d2ab5f869a","text":"eValidator(0)],\n        help_text=\"Optional override for calculated XP based on CR.\"\n    )\n\n    environments = models.ManyToManyField(Environment,\n        related_name=\"creature_environments\")\n\n    initiative_bonus = models.SmallIntegerField(\n        null=True,\n        blank=True,\n        help_text=\"Initiative bonus. If not set, defaults to dexterity modifier.\"\n    )\n\n    def get_initiative_bonus(self):\n        \"\"\"\n        Returns the creature's initiative bonus. If no explicit bonus is set,\n        returns the dexterity modifier.\n        \"\"\"\n        if self.initiative_bonus is not None:\n            return self.initiative_bonus\n        return self.modifier_dexterity\n\n    def as_text(self):\n        text = self.name + '\\n'\n        for action in self.actions.all():\n            text+='\\n' + action.as_text()\n\n        return text\n\n    def search_result_extra_fields(self):\n        return {\n            \"cr\": self.challenge_rating_text,\n            \"type\": self.type.name,\n            \"size\": self.size.name,   \n        }\n\n    @property\n    def challenge_rating_text(self):\n        '''Challenge rating as text string representation of a fraction or integer. '''\n        return str(Fraction(self.challenge_rating_decimal))\n\n    @property\n    def experience_points(self):\n        if self.experience_points_integer is not None:\n            return self.experience_points_integer\n        else:\n            xp_by_cr_lookup = {\n                \"0\":0,\n                \"1/8\":25,\n                \"1/4\":50,","position":{"index":116,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"8e729ef28d6986e2"},"created_at":"2026-01-14T02:19:03.892Z"}
{"chunk_id":"6897621799d30b199c76033e8c48c449","source_id":"125f82d2ab5f869a","text":"elf.experience_points_integer\n        else:\n            xp_by_cr_lookup = {\n                \"0\":0,\n                \"1/8\":25,\n                \"1/4\":50,\n                \"1/2\":100,\n                \"1\":200,\n                \"2\":450,\n                \"3\":700,\n                \"4\":1100,\n                \"5\":1800,\n                \"6\":2300,\n                \"7\":2900,\n                \"8\":3900,\n                \"9\":5000,\n                \"10\":5900,\n                \"11\":7200,\n                \"12\":8400,\n                \"13\":10000,\n                \"14\":11500,\n                \"15\":13000,\n                \"16\":15000,\n                \"17\":18000,\n                \"18\":20000,\n                \"19\":22000,\n                \"20\":25000,\n                \"21\":33000,\n                \"22\":41000,\n                \"23\":50000,\n                \"24\":62000,\n                \"25\":75000,\n                \"26\":90000,\n                \"27\":105000,\n                \"28\":120000,\n                \"29\":135000,\n                \"30\":155000,\n            }\n\n            try:\n                return xp_by_cr_lookup[str(Fraction(self.challenge_rating_decimal))]\n            except:\n                return None\n\n\nclass CreatureAction(HasName, HasDescription):\n    \"\"\"Describes an action available to a creature.\"\"\"\n    key = key_field()\n\n    parent = models.ForeignKey(\n        Creature,\n        on_delete=models.CASCADE,\n        related_name='actions',\n        help_text='The creature to which this action belongs.'\n    )\n\n    uses_type = models.C","position":{"index":117,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"e11d3f5c8007e45a"},"created_at":"2026-01-14T02:19:03.892Z"}
{"chunk_id":"53a2fd8091eab77bf0322b6e029e2bb1","source_id":"125f82d2ab5f869a","text":"_delete=models.CASCADE,\n        related_name='actions',\n        help_text='The creature to which this action belongs.'\n    )\n\n    uses_type = models.CharField(\n        blank=True,\n        null=True,\n        max_length=20,\n        choices=CREATURE_USES_TYPES,\n        help_text='How use of the action is limited, if at all.'\n    )\n\n    uses_param = models.SmallIntegerField(\n        blank=True,\n        null=True,\n        help_text='The parameter X for if the action is limited.'\n    )\n\n    action_type = models.CharField(\n        blank=True,\n        null=True,\n        max_length=20,\n        default=\"ACTION\",\n        choices=ACTION_TYPES,\n        help_text='The type of action used.'\n    )\n\n    order = models.SmallIntegerField(\n        blank=True,\n        null=True,\n        help_text='The position in the list of features that a feature appears in its source statblock'\n    )\n\n    form_condition = models.CharField(\n        blank=True,\n        null=True,\n        default=None,\n        max_length=100,\n        help_text='Description of form-based conditions for this action.'\n    )\n\n    legendary_cost = models.SmallIntegerField(\n        blank=True,\n        null=True,\n        default=None,\n        help_text='null if not legendary, else, the number of legendary actions this costs.'\n    )\n\n\n    def as_text(self):\n        '''Text representation of creature is name/desc.'''\n        text = self.name + '\\n' + self.desc\n\n        return text\n\n\nclass CreatureActionAttack(HasName):\n    \"\"\"Describes an","position":{"index":118,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"fb5c9fdf4042dec0"},"created_at":"2026-01-14T02:19:03.892Z"}
{"chunk_id":"2703afbebdc4fcbf7234d5efbe3caab3","source_id":"125f82d2ab5f869a","text":" creature is name/desc.'''\n        text = self.name + '\\n' + self.desc\n\n        return text\n\n\nclass CreatureActionAttack(HasName):\n    \"\"\"Describes an attack action used by a creature.\"\"\"\n    key = key_field()\n\n    parent = models.ForeignKey(\n        CreatureAction,\n        related_name=\"attacks\",\n        on_delete=models.CASCADE,\n        help_text='The creature action to which this attack belongs.'\n    )\n\n    attack_type = models.CharField(\n        max_length=20,\n        choices=CREATURE_ATTACK_TYPES,\n        help_text='Whether this is a Weapon or Spell attack.'\n    )\n\n    to_hit_mod = models.SmallIntegerField(\n        validators=[MinValueValidator(-5), MaxValueValidator(20)],\n        help_text='Attack roll modifier.'\n    )\n\n    reach = distance_field()\n    range = distance_field()\n    long_range = distance_field()\n    distance_unit = distance_unit_field()\n\n    @property\n    def get_distance_unit(self):\n        if self.distance_unit is None:\n            return self.parent.parent.document.distance_unit\n        return self.distance_unit\n\n    target_creature_only = models.BooleanField(\n        help_text='If an attack can target creatures only and not objects.'\n    )\n\n    # Base damage fields\n    damage_die_count = damage_die_count_field()\n    damage_die_type = damage_die_type_field()\n    damage_bonus = damage_bonus_field()\n\n    damage_type = models.ForeignKey(\n        \"DamageType\",\n        blank=True,\n        null=True,\n        related_name=\"+\", # No backwards relation.\n       ","position":{"index":119,"start_char":8100,"end_char":9600},"metadata":{"content_hash":"ccc9c5d18f4dec56"},"created_at":"2026-01-14T02:19:03.892Z"}
{"chunk_id":"7b3e616f4e9f5bad8853182742d7a21e","source_id":"125f82d2ab5f869a","text":"mage_type = models.ForeignKey(\n        \"DamageType\",\n        blank=True,\n        null=True,\n        related_name=\"+\", # No backwards relation.\n        on_delete=models.CASCADE,\n        help_text='What kind of damage this attack deals')\n\n    # Additional damage fields\n    extra_damage_die_count = damage_die_count_field()\n    extra_damage_die_type = damage_die_type_field()\n    extra_damage_bonus = damage_bonus_field()\n\n    extra_damage_type = models.ForeignKey(\n        \"DamageType\",\n        blank=True,\n        null=True,\n        on_delete=models.CASCADE,\n        related_name=\"+\", # No backwards relation.\n        help_text='What kind of extra damage this attack deals')\n\n\nclass CreatureTrait(Modification):\n    \"\"\"This is the model for a creature special trait.\n\n    It inherits from modification, which is an abstract concept.\n    \"\"\"\n    key = key_field()\n    parent = models.ForeignKey(Creature, on_delete=models.CASCADE, related_name=\"traits\")\n\n\nclass CreatureSet(HasName, FromDocument):\n    \"\"\"Set that the creature belongs to.\"\"\"\n\n    creatures = models.ManyToManyField(Creature, related_name=\"creaturesets\",\n                                       help_text=\"The set of creatures.\")","position":{"index":120,"start_char":9450,"end_char":10643},"metadata":{"content_hash":"4ec0fc6e98504023"},"created_at":"2026-01-14T02:19:03.892Z"}
{"chunk_id":"8c36c707146e585a59955945e1c477f8","source_id":"5dfbd88a0a19dd79","text":"\"\"\"The model for a damage type.\"\"\"\nfrom django.db import models\nfrom .abstracts import HasName, HasDescription\nfrom .document import FromDocument\n\nclass DamageType(HasName, FromDocument):\n    \"\"\"\n    This is the model for a damage type.\n\n    Different attacks, damaging spells, and other harmful\n    effects deal different types of damage. Damage types\n    have no rules of their own, but other rules, such as\n    damage resistance, rely on the types.\n    \"\"\"\n    @property\n    def descriptions(self):\n        \"\"\" Gets the description based on parameter, and then if none, global priority\"\"\"\n        return DamageTypeDescription.objects.filter(describes=self).all().order_by('pk')\n\n    class Meta:\n        \"\"\"To assist with the UI layer.\"\"\"\n\n        verbose_name_plural = \"damage types\"\n\n\nclass DamageTypeDescription(HasDescription, FromDocument):\n    describes = models.ForeignKey(DamageType, on_delete=models.CASCADE)","position":{"index":121,"start_char":0,"end_char":919},"metadata":{"content_hash":"2ab157215df89a9e"},"created_at":"2026-01-14T02:19:04.488Z"}
{"chunk_id":"f78a9c680f00f5841838e2c8ed0bb732","source_id":"5f6776fd1467b95a","text":"from django.db import models\nfrom django.urls import reverse\nfrom django.apps import apps\n\n\nfrom .abstracts import HasName, HasDescription\nfrom .abstracts import key_field, distance_unit_field\n\nfrom api_v2 import models as v2_models\n\nclass Document(HasName, HasDescription):\n\n    key = key_field()\n\n    type = models.TextField(\n        choices=[\n            (\"SOURCE\", \"Source\"),\n            (\"MISC\", \"Miscellaneous\")\n        ],\n        help_text='Whether this Document is a published data source, or general resources',\n        default=\"SOURCE\",\n    )\n\n    licenses = models.ManyToManyField(\n        \"License\",\n        help_text=\"Licenses that the content has been released under.\")\n\n    publisher = models.ForeignKey(\n        \"Publisher\",\n        on_delete=models.CASCADE,\n        help_text=\"Publisher which has written the game content document.\")\n\n    gamesystem = models.ForeignKey(\n        \"GameSystem\",\n        on_delete=models.CASCADE,\n        help_text=\"The document's game system that it was published for.\"\n    )\n\n    author = models.TextField(\n        help_text='Author or authors.')\n\n    display_name = models.CharField(\n        max_length=255,\n        blank=True,\n        null=True,\n        help_text=\"Display name for the document, used for presentation purposes.\")\n\n    publication_date = models.DateTimeField(\n        help_text=\"Date of publication, or null if unknown.\"\n    )\n\n    permalink = models.URLField(\n        help_text=\"Link to the document.\"\n    )\n\n    distance_unit = dis","position":{"index":122,"start_char":0,"end_char":1500},"metadata":{"content_hash":"34acdec4a6b9c556"},"created_at":"2026-01-14T02:19:04.845Z"}
{"chunk_id":"c107f56084c6e8988fed3fdb2a47bbde","source_id":"5f6776fd1467b95a","text":" of publication, or null if unknown.\"\n    )\n\n    permalink = models.URLField(\n        help_text=\"Link to the document.\"\n    )\n\n    distance_unit = distance_unit_field()\n    weight_unit = distance_unit_field()\n\n    @property\n    def display_name_or_name(self):\n        \"\"\"Returns display_name if it exists and is not blank, otherwise returns name.\"\"\"\n        if self.display_name and self.display_name.strip():\n            return self.display_name\n        return self.name\n\n    @property\n    def stats(self):\n        stats = []\n        for model in apps.get_models():\n            # Filter out api_v1.\n            if model._meta.app_label != 'api_v2': continue\n\n            SKIPPED_MODEL_NAMES = [\n                'Document',\n                'GameSystem',\n                'License',\n                'Publisher',\n                'SearchResult']\n            if model.__name__ in SKIPPED_MODEL_NAMES: continue\n\n            CHILD_MODEL_NAMES = [\n                'SpeciesTrait',\n                'ClassFeatureItem',\n                'FeatBenefit', \n                'BackgroundBenefit',\n                'CreatureAction',\n                'CreatureActionAttack',\n                'CreatureTrait',\n                'SpellCastingOption',\n                'ItemRarity']\n            if model.__name__ in CHILD_MODEL_NAMES: continue\n\n            actual_object_count = model.objects.filter(document=self.key).count()\n\n            stat = {}\n            stat['name'] = model.__name__.lower()\n            stat['actual_count'","position":{"index":123,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"741fa25d400b9567"},"created_at":"2026-01-14T02:19:04.845Z"}
{"chunk_id":"d16d892bd1d606b1d50dd183000abf9a","source_id":"5f6776fd1467b95a","text":"del.objects.filter(document=self.key).count()\n\n            stat = {}\n            stat['name'] = model.__name__.lower()\n            stat['actual_count'] = actual_object_count\n            stats.append(stat)\n\n        return stats\n\n\nclass License(HasName, HasDescription):\n    key = models.CharField(\n        primary_key=True,\n        max_length=100,\n        help_text=\"Unique key for the License.\"\n    )\n\n\nclass Publisher(HasName):\n    key = models.CharField(\n        primary_key=True,\n        max_length=100,\n        help_text=\"Unique key for the publishing organization.\"\n    )\n\n\nclass GameSystem(HasName, HasDescription):\n    key = models.CharField(\n        primary_key=True,\n        max_length=100,\n        help_text=\"Unique key for the gamesystem the document was published for.\"\n    )\n\n    content_prefix = models.CharField(\n        max_length=10,\n        blank=True,\n        help_text=\"Short code prepended to content keys.\"\n    )\n\n\nclass FromDocument(models.Model):\n    document = models.ForeignKey(Document, on_delete=models.CASCADE)\n\n    key = models.CharField(\n        primary_key=True,\n        max_length=100,\n        help_text=\"Unique key for the Item.\")\n    \n    def as_text(self):\n        return \"{}\\n\\n{}\".format(self.name, self.desc)\n\n    def get_absolute_url(self):\n        return reverse(self.__name__, kwargs={\"pk\": self.pk})\n\n    def search_result_extra_fields(self):\n        return {\n            \"school\":self.school.key,\n        }\n\n    class Meta:\n        abstract = True","position":{"index":124,"start_char":2700,"end_char":4191},"metadata":{"content_hash":"944cd97c52688b8b"},"created_at":"2026-01-14T02:19:04.845Z"}
{"chunk_id":"a9acde08d61fd0332860a483d18b3982","source_id":"91901ff5df31ca05","text":"# Standard set of dice used in 5e.\nDIE_TYPES = [\n    (\"D4\", \"d4\"),\n    (\"D6\", \"d6\"),\n    (\"D8\", \"d8\"),\n    (\"D10\", \"d10\"),\n    (\"D12\", \"d12\"),\n    (\"D20\", \"d20\"),\n]\n\nDISTANCE_UNIT_TYPES = [\n    (\"feet\",\"feet\"),\n    (\"miles\",\"miles\"),\n]\n\nWEIGHT_UNIT_TYPES = [\n    (\"lb\",\"lb\"),\n    (\"kg\",\"kg\")\n]\n\nABILITY_SCORE_MAXIMUM = 50\nSAVING_THROW_MINIMUM = -5\nSAVING_THROW_MAXIMUM = +20\nSKILL_BONUS_MINIMUM = -5\nSKILL_BONUS_MAXIMUM = +20\nPASSIVE_SCORE_MAXIMUM = 40\n\n# Setting a reasonable maximum for AC.\nOBJECT_ARMOR_CLASS_MAXIMUM = 100\n\n# Setting a reasonable maximum for HP.\nOBJECT_HIT_POINT_MAXIMUM = 10000\n\n# Senses available to a creature.\nCREATURE_SENSES = [\n    'blindsight',\n    'truesight',\n    'darkvision',\n    'tremorsense'\n]\n\n# Type of creature attacks.\nCREATURE_ATTACK_TYPES = [\n    (\"SPELL\", \"Spell\"),\n    (\"WEAPON\", \"Weapon\"),\n]\n\nCASTER_TYPES = [\n    (\"FULL\",\"Full\"),\n    (\"HALF\",\"Half\"),\n    (\"NONE\",\"None\")\n]\n\nACTION_TYPES = [\n    (\"ACTION\", \"Action\"),\n    (\"REACTION\",\"Reaction\"),\n    (\"BONUS_ACTION\",\"Bonus Action\"),\n    (\"LEGENDARY_ACTION\",\"Legendary Action\"),\n    (\"LAIR_ACTION\",\"Lair Action\")\n]\n\n# Monster action uses description.\nCREATURE_USES_TYPES = [\n    (\"PER_DAY\", \"X/Day\"),\n    (\"RECHARGE_ON_ROLL\", \"Recharge X-6\"),\n    (\"RECHARGE_AFTER_REST\", \"Recharge after a Short or Long rest\"),\n]\n\n# Spell options\nSPELL_TARGET_TYPE_CHOICES = [\n    ('creature',\"Creature\"),\n    ('object',\"Object\"),\n    ('point',\"Point\"),\n    ('area',\"Area\")\n]\n\nMODIFICATION_TYPES = [\n    (\"ability_score\", \"Ab","position":{"index":125,"start_char":0,"end_char":1500},"metadata":{"content_hash":"7e1d5cb406017948"},"created_at":"2026-01-14T02:19:05.438Z"}
{"chunk_id":"cf5e411eba9121b92cbb743ab7e6ee20","source_id":"91901ff5df31ca05","text":"[\n    ('creature',\"Creature\"),\n    ('object',\"Object\"),\n    ('point',\"Point\"),\n    ('area',\"Area\")\n]\n\nMODIFICATION_TYPES = [\n    (\"ability_score\", \"Ability Score Increase or Decrease\"),\n    (\"skill_proficiency\", \"Skill Proficiency\"),\n    (\"tool_proficiency\", \"Tool Proficiency\"),\n    (\"language\", \"Language\"),\n    (\"equipment\", \"Equipment\"),\n    (\"feature\", \"Feature\"),  # Used in Backgrounds\n    (\"feat\", \"Feat\"), # Used in D&D 2024 Backgrounds\n    (\"suggested_characteristics\", \"Suggested Characteristics\"),  # Used in Backgrounds\n    (\"adventures_and_advancement\", \"Adventures and Advancement\"),  # Used in A5e Backgrounds\n    (\"connection_and_memento\", \"Connection and Memento\")]  # Used in A5e Backgrounds\n\nSPELL_TARGET_RANGE_CHOICES = [\n    ('Self',\"Self\"),\n    ('Touch',\"Touch\"),\n    ('Special',\"Special\"),\n    ('5 feet',\"5 feet\"),\n    ('10 feet',\"10 feet\"),\n    ('15 feet',\"15 feet\"),\n    ('20 feet',\"20 feet\"),\n    ('25 feet',\"25 feet\"),\n    ('30 feet',\"30 feet\"),\n    ('40 feet',\"40 feet\"),\n    ('50 feet',\"50 feet\"),\n    ('60 feet',\"60 feet\"),\n    ('90 feet',\"90 feet\"),\n    ('100 feet',\"100 feet\"),\n    ('120 feet',\"120 feet\"),\n    ('150 feet',\"150 feet\"),\n    ('180 feet',\"180 feet\"),\n    ('200 feet',\"200 feet\"),\n    ('300 feet',\"300 feet\"),\n    ('400 feet',\"400 feet\"),\n    ('500 feet',\"500 feet\"),\n    ('1000 feet',\"1000 feet\"),\n    ('Sight',\"Sight\"),\n    ('1 mile',\"1 mile\"),\n    ('5 miles',\"5 miles\"),\n    ('10 miles',\"10 miles\"),\n    ('100 miles',\"100 miles\"),\n    ('150 miles',\"15","position":{"index":126,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"c640556abcb30ec9"},"created_at":"2026-01-14T02:19:05.438Z"}
{"chunk_id":"8f734a672a430dcabb4cf27fe556a19e","source_id":"91901ff5df31ca05","text":"'Sight',\"Sight\"),\n    ('1 mile',\"1 mile\"),\n    ('5 miles',\"5 miles\"),\n    ('10 miles',\"10 miles\"),\n    ('100 miles',\"100 miles\"),\n    ('150 miles',\"150 miles\"),\n    ('500 miles',\"500 miles\"),\n    ('Unlimited',\"Unlimited\"),\n]\n\nSPELL_EFFECT_SHAPE_CHOICES = [\n    ('cone',\"Cone\"),\n    ('cube',\"Cube\"),\n    ('cylinder',\"Cylinder\"),\n    ('line',\"Line\"),\n    ('sphere',\"sphere\"),\n]\n\nSPELL_EFFECT_DURATIONS = [\n    (\"instantaneous\",\"instantaneous\"),\n    (\"instantaneous or special\",\"instantaneous or special\"),\n    (\"1 turn\",\"1 turn\"),\n    (\"1 round\",\"1 round\"),\n    (\"concentration + 1 round\",\"concentration + 1 round\"),\n    (\"2 rounds\",\"2 rounds\"),\n    (\"3 rounds\",\"3 rounds\"),\n    (\"4 rounds\",\"4 rounds\"),\n    (\"1d4+2 rounds\",\"1d4+2 rounds\"),\n    (\"5 rounds\",\"5 rounds\"),\n    (\"6 rounds\",\"6 rounds\"),\n    (\"10 rounds\",\"10 rounds\"),\n    (\"up to 1 minute\",\"up to 1 minute\"),\n    (\"1 minute\",\"1 minute\"),\n    (\"1 minute, or until expended\",\"1 minute, or until expended\"),\n    (\"1 minute, until expended\",\"1 minute, until expended\"),\n    (\"1 minute\",\"1 minute\"),\n    (\"5 minutes\",\"5 minutes\"),    \n    (\"10 minutes\",\"10 minutes\"),\n    (\"1 minute or 1 hour\",\"1 minute or 1 hour\"),\n    (\"up to 1 hour\",\"up to 1 hour\"),\n    (\"1 hour\",\"1 hour\"),\n    (\"1 hour or until triggered\",\"1 hour or until triggered\"),\n    (\"2 hours\",\"2 hours\"),\n    (\"3 hours\",\"3 hours\"),\n    (\"1d10 hours\",\"1d10 hours\"),\n    (\"6 hours\",\"6 hours\"),\n    (\"2-12 hours\",\"2-12 hours\"),\n    (\"up to 8 hours\",\"up to 8 hours\"),\n    (\"8 hours\",\"8","position":{"index":127,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"3b30475d5898aa8d"},"created_at":"2026-01-14T02:19:05.438Z"}
{"chunk_id":"92081272042758614860ae423e7a00f3","source_id":"91901ff5df31ca05","text":"\n    (\"1d10 hours\",\"1d10 hours\"),\n    (\"6 hours\",\"6 hours\"),\n    (\"2-12 hours\",\"2-12 hours\"),\n    (\"up to 8 hours\",\"up to 8 hours\"),\n    (\"8 hours\",\"8 hours\"),\n    (\"1 hour/caster level\",\"1 hour/caster level\"),\n    (\"10 hours\",\"10 hours\"),\n    (\"12 hours\",\"12 hours\"),\n    (\"24 hours or until the target attempts a third death saving throw\",\"24 hours or until the target attempts a third death saving throw\"),\n    (\"24 hours\",\"24 hours\"),\n    (\"1 day\",\"1 day\"),\n    (\"3 days\",\"3 days\"),\n    (\"5 days\",\"5 days\"),\n    (\"7 days\",\"7 days\"),\n    (\"10 days\",\"10 days\"),\n    (\"13 days\",\"13 days\"),\n    (\"30 days\",\"30 days\"),\n    (\"1 year\",\"1 year\"),\n    (\"special\",\"special\"),\n    (\"until dispelled or destroyed\",\"until dispelled or destroyed\"),\n    (\"until destroyed\",\"until destroyed\"),\n    (\"until dispelled\",\"until dispelled\"),\n    (\"until cured or dispelled\",\"until cured or dispelled\"),\n    (\"until dispelled or triggered\",\"until dispelled or triggered\"),\n    (\"permanent until discharged\",\"permanent until discharged\"),\n    (\"permanent; one generation\",\"permanent; one generation\"),\n    (\"permanent\",\"permanent\"),\n]\n\nSPELL_CASTING_TIME_CHOICES = [\n    ('reaction',\"Reaction\"),\n    ('bonus-action',\"1 Bonus Action\"),\n    ('action',\"1 Action\"),\n    ('turn',\"1 Turn\"),\n    ('round',\"1 Round\"),\n    ('1minute',\"1 Minute\"),\n    ('5minutes',\"5 Minutes\"),\n    ('10minutes',\"10 Minutes\"),\n    ('1hour',\"1 Hour\"),\n    ('4hours',\"4 Hours\"),\n    ('7hours',\"7 Hours\"),\n    ('8hours',\"8 Hours\"),\n    ('9hours',\"9 ","position":{"index":128,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"e299f23fba79bc30"},"created_at":"2026-01-14T02:19:05.438Z"}
{"chunk_id":"a478805fc67a44591974db8f71364e59","source_id":"91901ff5df31ca05","text":"   ('10minutes',\"10 Minutes\"),\n    ('1hour',\"1 Hour\"),\n    ('4hours',\"4 Hours\"),\n    ('7hours',\"7 Hours\"),\n    ('8hours',\"8 Hours\"),\n    ('9hours',\"9 Hours\"),\n    ('12hours',\"12 Hours\"),\n    ('24hours',\"24 Hours\"),\n    ('1week',\"1 Week\")\n]\n\nCASTING_OPTION_TYPES = [\n    ('default',\"Default\"),\n    ('ritual','Ritual'),\n    ('player_level_1','Player Level 1'),\n    ('player_level_2','Player Level 2'),\n    ('player_level_3','Player Level 3'),\n    ('player_level_4','Player Level 4'),\n    ('player_level_5','Player Level 5'),\n    ('player_level_6','Player Level 6'),\n    ('player_level_7','Player Level 7'),\n    ('player_level_8','Player Level 8'),\n    ('player_level_9','Player Level 9'),\n    ('player_level_10','Player Level 10'),\n    ('player_level_11','Player Level 11'),\n    ('player_level_12','Player Level 12'),\n    ('player_level_13','Player Level 13'),\n    ('player_level_14','Player Level 14'),\n    ('player_level_15','Player Level 15'),\n    ('player_level_16','Player Level 16'),\n    ('player_level_17','Player Level 17'),\n    ('player_level_18','Player Level 18'),\n    ('player_level_19','Player Level 19'),\n    ('player_level_20','Player Level 20'),\n    ('slot_level_1','Spell Slot Level 1'),\n    ('slot_level_2','Spell SlotLevel 2'),\n    ('slot_level_3','Spell Slot Level 3'),\n    ('slot_level_4','Spell Slot Level 4'),\n    ('slot_level_5','Spell Slot Level 5'),\n    ('slot_level_6','Spell Slot Level 6'),\n    ('slot_level_7','Spell Slot Level 7'),\n    ('slot_level_8','Spell Slot Level 8'","position":{"index":129,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"86205a4de712f49b"},"created_at":"2026-01-14T02:19:05.438Z"}
{"chunk_id":"c2d69ab8e3c3cc679ff804eea42c762a","source_id":"91901ff5df31ca05","text":",'Spell Slot Level 5'),\n    ('slot_level_6','Spell Slot Level 6'),\n    ('slot_level_7','Spell Slot Level 7'),\n    ('slot_level_8','Spell Slot Level 8'),\n    ('slot_level_9','Spell Slot Level 9')\n]\n\nIMAGE_TYPES = [\n    ('icon','Icon'),\n    ('illustration','Illustration')\n]","position":{"index":130,"start_char":6750,"end_char":7022},"metadata":{"content_hash":"f46aafbd40c7c40f"},"created_at":"2026-01-14T02:19:05.438Z"}
{"chunk_id":"8e9f5003c8d337889d6641b8e505394b","source_id":"db388a084a70250c","text":"\"\"\"The model for an environment.\"\"\"\nfrom django.db import models\nfrom .abstracts import HasName, HasDescription\nfrom .document import FromDocument\n\nclass Environment(HasName, HasDescription, FromDocument):\n    \"\"\"\n    This is the model for an environment.\n\n    An environment represents the description of a type of place within\n    the 5e universe.\n    \"\"\"\n    aquatic = models.BooleanField(\n        help_text='Whether or not aquatic environment rules apply to this environment.',\n        default=False)\n\n    planar = models.BooleanField(\n        help_text='Whether or not this environment is a plane of existence.',\n        default=False)\n\n    interior = models.BooleanField(\n        help_text='Whether or not this environment is an interior space.',\n        default=False)\n\n    class Meta:\n        \"\"\"To assist with the UI layer.\"\"\"\n\n        verbose_name_plural = \"environments\"","position":{"index":131,"start_char":0,"end_char":881},"metadata":{"content_hash":"70a3b771185830da"},"created_at":"2026-01-14T02:19:05.786Z"}
{"chunk_id":"664d9bf63855adc01a345dc7b10d50a9","source_id":"67ca98523d0a7ff3","text":"\"\"\"The model for a feat.\"\"\"\nfrom django.db import models\nfrom .abstracts import HasName, HasDescription, HasPrerequisite, Modification, key_field\nfrom .document import FromDocument\n\nFEAT_TYPES = [\n    ('GENERAL', 'General'),\n    ('ORIGIN', 'Origin'),\n    ('FIGHTING_STYLE', 'Fighting Style'),\n    ('EPIC_BOON', 'Epic Boon')\n]\n\nclass FeatBenefit(Modification):\n    \"\"\"This is the model for an individual benefit of a feat.\"\"\"\n    key = key_field()\n    parent = models.ForeignKey('Feat', on_delete=models.CASCADE)\n    order = models.SmallIntegerField(\n        blank=True,\n        null=True,\n        help_text='The position in the list of features that this feature appears in its source statblock'\n    )\n\n    class Meta:\n        ordering = ['parent', 'order']\n\n\nclass Feat(HasName, HasDescription, HasPrerequisite, FromDocument):\n    \"\"\"\n    This is the model for a feat.\n\n    A feat represents a talent or an area of expertise that\n    gives a character special capabilities. It embodies\n    training, experience, and abilities beyond what a\n    class provides.\n    \"\"\"\n\n    type = models.CharField(\n        max_length=32,\n        choices=FEAT_TYPES,\n        default='GENERAL'\n    )\n\n    @property\n    def benefits(self):\n        \"\"\"Returns the set of benefits that are related to this feat.\"\"\"\n        return self.featbenefit_set\n\n    class Meta:\n        \"\"\"To assist with the UI layer.\"\"\"\n\n        verbose_name_plural = \"feats\"","position":{"index":132,"start_char":0,"end_char":1428},"metadata":{"content_hash":"2b459eb486d12d57"},"created_at":"2026-01-14T02:19:06.044Z"}
{"chunk_id":"a6c4b720c783ba3b649a579a1025cc6d","source_id":"cf57bef66d7f5a12","text":"\"\"\"The model for an image with metadata. Includes abstracts.\"\"\"\n\n\nfrom django.db import models\nfrom django.templatetags.static import static\n\nfrom .abstracts import HasName\nfrom .document import FromDocument\nfrom .enums import IMAGE_TYPES\n\nclass Image(HasName, FromDocument):\n    \"\"\"This is the model related to image metadata.\"\"\"\n\n    file_path = models.TextField(\n        help_text='Relative path of the file, to be used in static file resolution.'\n    )\n\n    alt_text = models.TextField(\n        help_text='A short textual description of the image. Important for accessibility',\n    )\n\n    attribution = models.TextField(\n        help_text='Attribution information for this image. Who drew it and where we can find more of thier work?',\n    )\n\n    type = models.CharField(\n        blank=True,\n        null=True,\n        max_length=20,\n        choices=IMAGE_TYPES,\n        help_text='What type image this is, such as icon or illustration.'\n    )\n\n    def __str__(self):\n        return self.document.name + \" - \" + self.name\n\n    @property\n    def file_url(self)->str:\n        \"\"\"Returns a relative path to the related file.\"\"\"\n        return static(self.file_path)\n\n    class Meta:\n        ordering = ['key']\n\n\nclass HasIcon(models.Model):\n    \"\"\"The model inherited for defining an icon for another object type.\"\"\"\n    icon = models.ForeignKey(Image,\n                            blank=True,\n                            null=True,\n                            on_delete=models.CASCADE)\n\n    class Me","position":{"index":133,"start_char":0,"end_char":1500},"metadata":{"content_hash":"55d9a2c42bfd0d8b"},"created_at":"2026-01-14T02:19:06.452Z"}
{"chunk_id":"0591be07a01deacf9a77d007971aaf00","source_id":"cf57bef66d7f5a12","text":"ge,\n                            blank=True,\n                            null=True,\n                            on_delete=models.CASCADE)\n\n    class Meta:\n        abstract = True\n\n\nclass HasIllustration(models.Model):\n    \"\"\"The model inherited for defining an illustration for another object type.\"\"\"\n    illustration = models.ForeignKey(Image,\n                            blank=True,\n                            null=True,\n                            on_delete=models.CASCADE)\n\n    class Meta:\n        abstract = True","position":{"index":134,"start_char":1350,"end_char":1868},"metadata":{"content_hash":"64236d8ed25d2e6b"},"created_at":"2026-01-14T02:19:06.452Z"}
{"chunk_id":"6051ab6d812be139e31a48b71af27dd5","source_id":"05faa6e79d21d28f","text":"\"\"\"The model for an item.\"\"\"\n\nfrom django.db import models\nfrom django.core.validators import MinValueValidator, MaxValueValidator\n\nfrom .weapon import Weapon\nfrom .armor import Armor\nfrom .abstracts import HasName, HasDescription, HasPrice\nfrom .object import Object\nfrom .damagetype import DamageType\nfrom .document import FromDocument\nfrom drf_spectacular.utils import extend_schema_field\nfrom drf_spectacular.types import OpenApiTypes\nimport decimal\n\nclass ItemRarity(HasName, FromDocument):\n    \"\"\"A class describing the rarity of items.\"\"\"\n    rank = models.IntegerField(\n        unique=True,\n        help_text='Ranking of the rarity, most common has the lowest values.')\n\n\nclass ItemCategory(HasName, FromDocument):\n    \"\"\"A class describing categories of items.\"\"\"\n\n\nclass Item(Object, HasDescription, FromDocument, HasPrice):\n    \"\"\"\n    This is the model for an Item, which is an object that can be used.\n\n    This extends the object model, but adds cost, and is_magical.\n    \"\"\"\n\n    weapon = models.ForeignKey(\n        Weapon,\n        on_delete=models.CASCADE,\n        default=None,\n        blank=True,\n        null=True)\n\n    armor = models.ForeignKey(\n        Armor,\n        on_delete=models.CASCADE,\n        default=None,\n        blank=True,\n        null=True)\n\n    category = models.ForeignKey(\n        ItemCategory,\n        on_delete=models.CASCADE,\n        null=False)\n\n    requires_attunement = models.BooleanField(\n        null=False,\n        default=False,  # An item is not magi","position":{"index":135,"start_char":0,"end_char":1500},"metadata":{"content_hash":"07c728794a76129f"},"created_at":"2026-01-14T02:19:06.813Z"}
{"chunk_id":"2a5192babc34df9748ac9f5ddfc85660","source_id":"05faa6e79d21d28f","text":"=models.CASCADE,\n        null=False)\n\n    requires_attunement = models.BooleanField(\n        null=False,\n        default=False,  # An item is not magical unless specified.\n        help_text='If the item requires attunement.')\n\n    attunement_detail = models.CharField(\n        null=True,\n        blank=True,\n        max_length=128,\n    )\n\n    rarity = models.ForeignKey(\n        \"ItemRarity\",\n        null=True,\n        on_delete=models.CASCADE,\n        help_text=\"Rarity object.\")\n\n    damage_vulnerabilities = models.ManyToManyField(DamageType,\n        related_name=\"item_damage_vulnerabilities\")\n\n    damage_immunities = models.ManyToManyField(DamageType,\n        related_name=\"item_damage_immunities\")\n\n    damage_resistances = models.ManyToManyField(DamageType,\n        related_name=\"item_damage_resistances\")\n\n    @property \n    @extend_schema_field(OpenApiTypes.BOOL)\n    def is_magic_item(self):\n        return self.rarity is not None\n\n    def search_result_extra_fields(self):\n        return {\n            \"is_magic_item\": self.is_magic_item,\n            \"type\": self.category.name if self.is_magic_item else None,\n            \"rarity\": self.rarity.name if self.is_magic_item else None,\n        }\n\n\nclass ItemSet(HasName, HasDescription, FromDocument):\n    \"\"\"A set of items to be referenced.\"\"\"\n\n    items = models.ManyToManyField(Item, related_name=\"itemsets\",help_text=\"The set of items.\")","position":{"index":136,"start_char":1350,"end_char":2751},"metadata":{"content_hash":"592ba51bdce97be5"},"created_at":"2026-01-14T02:19:06.813Z"}
{"chunk_id":"cd25bc4868ae260be17a50dc033270e1","source_id":"ee9e00d522696f9f","text":"\"\"\"The model for a language.\"\"\"\n\nfrom django.db import models\n\nfrom .abstracts import HasName, HasDescription\nfrom .abstracts import distance_field\nfrom .document import FromDocument\n\n\nclass Language(HasName, HasDescription, FromDocument):\n    \"\"\"This is the model for a language, which is a form of communication.\"\"\"\n\n    script_language = models.ForeignKey('self',\n                                        null=True,\n                                        blank=True,\n                                        on_delete=models.CASCADE)\n\n    # TODO typical_speakers will be a FK out to a Creature Types table.\n\n    is_exotic = models.BooleanField(\n        help_text='Whether or not the language is exotic.',\n        default=False)\n\n    is_secret = models.BooleanField(\n        help_text='Whether or not the language is secret.',\n        default=False)\n\nclass HasLanguage(models.Model):\n    \"\"\"The abstract class used by Creature to describe what a creature's language.\"\"\"\n    languages_desc = models.TextField(\n        blank=True,\n        default=\"[None provided]\",\n        help_text='Description of the languages item.')\n\n    languages = models.ManyToManyField(Language)\n    telepathy_range = distance_field()\n    class Meta:\n        abstract = True","position":{"index":137,"start_char":0,"end_char":1249},"metadata":{"content_hash":"ac68052ad8a5e8ed"},"created_at":"2026-01-14T02:19:07.274Z"}
{"chunk_id":"c7515f760db8807cb21f2e2089e11ff9","source_id":"45e40b77932dde4a","text":"\"\"\"The abstract model for an object.\"\"\"\n\nfrom django.db import models\nfrom django.core.validators import MaxValueValidator, MinValueValidator\n\nfrom .abstracts import HasName\nfrom .size import Size\nfrom .damagetype import DamageType\nfrom .enums import  OBJECT_ARMOR_CLASS_MAXIMUM, OBJECT_HIT_POINT_MAXIMUM\nimport decimal\n\nclass Object(HasName):\n    \"\"\"\n    This is the definition of the Object abstract base class.\n\n    The Object class will be inherited from by Item, and Creature.\n    Basically it describes any sort of matter in the 5e world.\n    \"\"\"\n\n    size = models.ForeignKey(\n        Size,\n        on_delete=models.CASCADE)\n\n    weight = models.DecimalField(\n        default=0,\n        null=False,  # Allow an unspecified weight.\n        max_digits=10,\n        decimal_places=3,\n        validators=[MinValueValidator(decimal.Decimal(0.0))],\n        help_text='Number representing the weight of the object.')\n\n    armor_class = models.IntegerField(\n        default=0,\n        null=False,  # Allow an unspecified armor_class.\n        validators=[\n            MinValueValidator(0),\n            MaxValueValidator(OBJECT_ARMOR_CLASS_MAXIMUM)],\n        help_text='Integer representing the armor class of the object.')\n\n    armor_detail = models.CharField(\n        default=\"\",\n        null=True,\n        help_text='Represents parathetical text that follows an objects AC',\n        max_length=64,\n    )\n\n    hit_points = models.IntegerField(\n        default=0,\n        null=False,  # Allow an unspeci","position":{"index":138,"start_char":0,"end_char":1500},"metadata":{"content_hash":"9f50c3dcb096affc"},"created_at":"2026-01-14T02:19:07.677Z"}
{"chunk_id":"3aad3ff2ae7659b80f6ea6cf9766cff6","source_id":"45e40b77932dde4a","text":"follows an objects AC',\n        max_length=64,\n    )\n\n    hit_points = models.IntegerField(\n        default=0,\n        null=False,  # Allow an unspecified hit point value.\n        validators=[\n            MinValueValidator(0),\n            MaxValueValidator(OBJECT_HIT_POINT_MAXIMUM)],\n        help_text='Integer representing the hit points of the object.')\n\n    hit_dice = models.TextField(\n        null=True,\n        blank=True,\n        help_text='Dice string representing a way to calculate hit points.')\n\n    damage_vulnerabilities = models.ManyToManyField(\n        DamageType,\n        help_text=\"List of damage types that this {} is vulnerable to.\".format(__name__)\n    )\n    \n    damage_resistances = models.ManyToManyField(\n        DamageType,\n        help_text=\"List of damage types that this {} is resistant to.\".format(__name__)\n    )\n    damage_immunities = models.ManyToManyField(\n        DamageType,\n        help_text=\"List of damage types that this {} is immune to.\".format(__name__)\n    )\n    nonmagical_attack_resistance = models.BooleanField(\n        null=False,\n        default=False,\n        help_text='If {} is resistant to nonmagical attacks.'.format(__name__)\n    )\n    nonmagical_attack_immunity = models.BooleanField(\n        null=False,\n        default=False,\n        help_text='If the {} is immune to nonmagical attacks.'.format(__name__)\n    )\n\n    def get_weight_unit(self):\n        '''Returns document level weight unit.'''\n        return self.document.weight_unit\n\n    cl","position":{"index":139,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"28de9cf9fc56cc18"},"created_at":"2026-01-14T02:19:07.677Z"}
{"chunk_id":"17d742a299c452d1bf103b8695a9fb5f","source_id":"45e40b77932dde4a","text":"mat(__name__)\n    )\n\n    def get_weight_unit(self):\n        '''Returns document level weight unit.'''\n        return self.document.weight_unit\n\n    class Meta:\n        abstract = True\n        ordering = ['pk']","position":{"index":140,"start_char":2700,"end_char":2909},"metadata":{"content_hash":"7363a60c75c446d9"},"created_at":"2026-01-14T02:19:07.677Z"}
{"chunk_id":"351ef39022b5096e5ff353573be73838","source_id":"7aed1c35d99331f5","text":"from django.db import models\nfrom .abstracts import HasName, HasDescription, key_field\nfrom .document import FromDocument\n\nclass RuleSet(HasName, HasDescription, FromDocument):\n  \"\"\"\n  The RuleSet model contains a set of Rules as part of a larger article, or \n  as a chapter of a book.\n  \"\"\"\n  key = key_field()\n\n  class Meta:\n    ordering = ['key']\n\nclass Rule(HasName, HasDescription, FromDocument):\n  \"\"\"\"\n  The Rule model contains information about a single rule from a larger RuleSet.\n  Each Rule is typically a paragraph or two long and might contain tables.\n  \"\"\"\n\n  key = key_field()\n  \n  index = models.IntegerField(\n    default=1,\n    help_text=\"A rule's position in the list of rules of the parent RuleSet\"\n  )\n  \n  ruleset = models.ForeignKey(\n    RuleSet,\n    on_delete=models.CASCADE,\n    related_name='rules',\n    help_text=\"The RuleSet which this Rule belongs to\"\n  )\n  \n  initialHeaderLevel = models.IntegerField(\n    default=1,\n    choices=((i, i) for i in range(1,6)),\n    help_text=\"The header level to set rule title to\"\n  )\n\n  class Meta:\n    ordering = ['index']","position":{"index":141,"start_char":0,"end_char":1085},"metadata":{"content_hash":"46eef136c7d2bbab"},"created_at":"2026-01-14T02:19:08.009Z"}
{"chunk_id":"aaf764324c62718bfd285e13191a589c","source_id":"fa85535c8c4fc101","text":"from django.db import models\nfrom .abstracts import HasName, HasDescription, HasPrice\nfrom .document import FromDocument\n\n\nclass Service(HasName, HasDescription, FromDocument, HasPrice):\n  \"\"\"\n  \n  This is the Model for a purchasable Service\n\n  This is a companion model to Item for those purchasable services that aren't\n  actually Items; life style expenses, hireling, etc.\n\n  \"\"\"\n  # 'name', 'document', 'cost' fields inherited from abstract classes\n\n  detail = models.TextField(\n    null=True,\n    blank=True,\n    help_text=\"Additional contextual infomation about the service. ie. For 'Squalid Living' the detail would be '1 day'\"\n  )","position":{"index":142,"start_char":0,"end_char":638},"metadata":{"content_hash":"08e57ca4806a1f1f"},"created_at":"2026-01-14T02:19:08.424Z"}
{"chunk_id":"e032d06b47e951368e5a02f56fcaa4d6","source_id":"e5e3f505de61d112","text":"from django.db import models\n\nfrom .abstracts import HasName\nfrom .abstracts import distance_field, distance_unit_field, damage_die_type_field\nfrom .document import FromDocument\n\nclass Size(HasName, FromDocument):\n    \"\"\"\n    This is the definition of the Size class.\n\n    The Size class will be used by Objects (and all children classes).\n    Basically it describes the size.\n    \"\"\"\n\n    rank = models.IntegerField(\n        unique=True,\n        help_text='Ranking of the size, smallest has the lowest values.')\n\n    space_diameter = distance_field()\n    distance_unit = distance_unit_field()\n\n    suggested_hit_dice = damage_die_type_field()\n\n    @property\n    def get_distance_unit(self):\n        if self.distance_unit is None:\n            return self.document.distance_unit\n        return self.distance_unit","position":{"index":143,"start_char":0,"end_char":811},"metadata":{"content_hash":"e6dabb8a6709ca34"},"created_at":"2026-01-14T02:19:09.209Z"}
{"chunk_id":"4dee6a4c9f26fd0974694da246cac756","source_id":"2013904518206345","text":"\"\"\"The model for a species, sub-species, and it's traits.\"\"\"\n\nfrom django.db import models\nfrom .abstracts import HasName, HasDescription, HasPrerequisite, Modification, key_field\nfrom .document import FromDocument\nfrom drf_spectacular.utils import extend_schema_field\nfrom drf_spectacular.types import OpenApiTypes\n\nclass SpeciesTrait(Modification):\n    \"\"\"This is the model for a species or sub-species trait.\n\n    It inherits from modification, which is an abstract concept.\n    \"\"\"\n    key = key_field()\n    parent = models.ForeignKey('Species', on_delete=models.CASCADE)\n\n    SPECIES_FEATURE_TYPES = [\n        ('ABILITY_MODS', 'ABILITY_MODS'),\n        ('SIZE', 'SIZE'),\n        ('SPEED', 'SPEED'),\n    ]\n\n    type = models.CharField(\n        blank=True,\n        null=True,\n        max_length=16,\n        choices=SPECIES_FEATURE_TYPES,\n    )\n\n    order = models.SmallIntegerField(\n        blank=True,\n        null=True,\n        help_text='The position in the list of features that a feature appears in its source statblock'\n    )\n\n    class Meta:\n        ordering = ['parent', 'order']\n\nclass Species(HasName, HasDescription, FromDocument):\n    \"\"\"\n    This is the model for a species or sub-species.\n\n    This model can be used to represent species and sub-species. Sub-species are\n    represented by using a self-relation to the parent species.\n    \"\"\"\n\n    subspecies_of = models.ForeignKey('self',\n                                   default=None,\n                                   blank=True","position":{"index":144,"start_char":0,"end_char":1500},"metadata":{"content_hash":"04b9eced882c494b"},"created_at":"2026-01-14T02:19:09.743Z"}
{"chunk_id":"b584aef323455439dc20c8ce6db2ec2f","source_id":"2013904518206345","text":"\n    \"\"\"\n\n    subspecies_of = models.ForeignKey('self',\n                                   default=None,\n                                   blank=True,\n                                   null=True,\n                                   on_delete=models.CASCADE)\n\n    @property\n    @extend_schema_field(OpenApiTypes.BOOL)\n    def is_subspecies(self):\n        \"\"\"Returns whether the object is a subspecies.\"\"\"\n        return self.subspecies_of is not None\n\n    @property\n    def traits(self):\n        \"\"\"Returns the set of traits that are related to this species.\"\"\"\n        return self.speciestrait_set\n\n    def search_result_extra_fields(self):\n        return {\n            \"subspecies_of\": { \n                \"name\": self.subspecies_of.name,\n                \"key\": self.subspecies_of.key\n            } if self.subspecies_of else None\n        }\n    class Meta:\n        \"\"\"To assist with the UI layer.\"\"\"\n\n        verbose_name_plural = \"species\"","position":{"index":145,"start_char":1350,"end_char":2291},"metadata":{"content_hash":"c954fff12923a279"},"created_at":"2026-01-14T02:19:09.743Z"}
{"chunk_id":"6e051dfaea0f949152f6922ec40bd63b","source_id":"99bcb26b8c70179f","text":"'''The abstract model related to the Speed concept in 5e.'''\n\nfrom django.db import models\nfrom .abstracts import distance_field, distance_unit_field\nfrom drf_spectacular.utils import extend_schema_field, inline_serializer\nfrom drf_spectacular.types import OpenApiTypes\nfrom rest_framework import serializers\n\nclass HasSpeed(models.Model):\n    '''This object represents a creature's speed.'''\n\n    walk = distance_field(null=False)\n    unit = distance_unit_field()\n    hover = models.BooleanField(\n        default=False,\n        null=False,\n        help_text=\"Whether or not the walk movement is hovering.\"\n    )\n    fly = distance_field(null=True)\n    burrow = distance_field(null=True)\n    climb = distance_field(null=True)\n    swim = distance_field(null=True)\n\n    def get_fly(self):\n        if self.fly is None:\n            return 0.0\n        return self.fly\n\n    def get_burrow(self):\n        if self.burrow is None:\n            return 0.0\n        return self.burrow\n    \n    def get_climb(self):\n        if self.climb is None:\n            return self.walk / 2 # Climb speed is half of walk speed.\n        return self.climb\n\n    def get_crawl(self):\n        return self.walk / 2\n\n    def get_swim(self):\n        if self.swim is None:\n            return self.walk / 2 # Swim speed is half of walk speed.\n        return self.swim\n\n    def get_unit(self):\n        if self.unit is None:\n            return self.document.distance_unit\n        return self.unit\n\n    @extend_schema_field(inline_seriali","position":{"index":146,"start_char":0,"end_char":1500},"metadata":{"content_hash":"8e5266386c849148"},"created_at":"2026-01-14T02:19:10.101Z"}
{"chunk_id":"27b95d2971b872a787102eb4002f1067","source_id":"99bcb26b8c70179f","text":"(self):\n        if self.unit is None:\n            return self.document.distance_unit\n        return self.unit\n\n    @extend_schema_field(inline_serializer(\n        name=\"speed\",\n        fields={\n            # todo: model typed as any\n            \"walk\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"fly\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"swim\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"climb\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"burrow\": serializers.StringRelatedField(),\n            # todo: and none\n            \"hover\": serializers.BooleanField(),\n        }\n    ))\n    def get_speed(self):\n        speed={\n            \"walk\":self.walk,\n            \"unit\":self.get_unit(),\n            \"fly\":self.fly,\n            \"burrow\":self.burrow,\n            \"climb\":self.climb,\n            \"swim\":self.swim,\n        }\n        if self.hover:\n            speed['hover']=True # Hover field not present unless true.\n        \n        return speed\n\n    @extend_schema_field(inline_serializer(\n        name=\"speed_all\",\n        fields={\n            # todo: model typed as any\n            \"unit\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"walk\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"crawl\": serializers.StringRelatedField(),\n           ","position":{"index":147,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"cd9bdae143ebef56"},"created_at":"2026-01-14T02:19:10.101Z"}
{"chunk_id":"165f23d2a3c6d6aa7f0569c9065eb5dd","source_id":"99bcb26b8c70179f","text":"   \"walk\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"crawl\": serializers.StringRelatedField(),\n            \"hover\": serializers.BooleanField(),\n            \"fly\": serializers.FloatField(),\n            \"burrow\": serializers.FloatField(),\n            # todo: model typed as any\n            \"climb\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"swim\": serializers.StringRelatedField(),  \n        }\n    ))\n    def get_speed_all(self):\n        return {\n            \"unit\": self.get_unit(),\n            \"walk\": self.walk,\n            \"crawl\": self.get_crawl(),\n            \"hover\": self.hover,\n            \"fly\": self.get_fly(),\n            \"burrow\": self.get_burrow(),\n            \"climb\": self.get_climb(),\n            \"swim\": self.get_swim()\n        }\n        \n\n    class Meta:\n        abstract = True","position":{"index":148,"start_char":2700,"end_char":3583},"metadata":{"content_hash":"482b57317d71e9ff"},"created_at":"2026-01-14T02:19:10.101Z"}
{"chunk_id":"ca04f90b4efd563f2ee1b43a59a928aa","source_id":"edfc8bceff277a19","text":"\"\"\"\nThe model for a spell, and supporting objects.\n\"\"\"\n\nfrom django.db import models\nfrom django.core.validators import MinValueValidator, MaxValueValidator\n\n\nfrom .abstracts import HasName, HasDescription\nfrom .abstracts import distance_field, distance_unit_field\nfrom .document import FromDocument\nfrom .characterclass import CharacterClass\n\n\nfrom .enums import SPELL_TARGET_TYPE_CHOICES\nfrom .enums import SPELL_TARGET_RANGE_CHOICES, SPELL_CASTING_TIME_CHOICES\nfrom .enums import SPELL_EFFECT_SHAPE_CHOICES, SPELL_EFFECT_DURATIONS\nfrom .enums import CASTING_OPTION_TYPES\nimport decimal\n\nclass SpellSchool(HasName, HasDescription, FromDocument):\n    \"\"\"The model for a spell school object.\"\"\"\n\n\nclass Spell(HasName, HasDescription, FromDocument):\n    \"\"\"The model for a spell object.\"\"\"\n\n   # Casting options and requirements of a spell instance\n    level = models.IntegerField(\n        validators=[MinValueValidator(0), MaxValueValidator(9)],\n        help_text='Integer representing the default slot level required by the spell.')\n\n    school = models.ForeignKey(\n        \"SpellSchool\",\n        on_delete=models.CASCADE,\n        help_text=\"Spell school, such as 'evocation'\")\n\n    higher_level = models.TextField(\n        blank=True,\n        help_text = \"Description of casting the spell at a different level.\")\n\n    # Casting target requirements of the spell instance SHOULD BE A LIST\n    target_type = models.TextField(\n        choices = SPELL_TARGET_TYPE_CHOICES,\n        help_text='Spell targe","position":{"index":149,"start_char":0,"end_char":1500},"metadata":{"content_hash":"f5d89e98e1a3e432"},"created_at":"2026-01-14T02:19:10.615Z"}
{"chunk_id":"3409d583c75633721e9bc56b505ec34b","source_id":"edfc8bceff277a19","text":"of the spell instance SHOULD BE A LIST\n    target_type = models.TextField(\n        choices = SPELL_TARGET_TYPE_CHOICES,\n        help_text='Spell target type key.')\n\n    range_text = models.TextField( # SWAP TO DISTANCE FIELD\n        choices = SPELL_TARGET_RANGE_CHOICES,\n        help_text='Spell target range.')\n\n    range = distance_field()\n    range_unit = distance_unit_field()\n\n    ritual = models.BooleanField(\n        help_text='Whether or not the spell can be cast as a ritual.',\n        default=False)\n\n    casting_time = models.TextField(\n        choices = SPELL_CASTING_TIME_CHOICES,\n        help_text = \"Casting time key, such as 'action'\")\n    \n    reaction_condition = models.TextField(\n        blank=True,\n        null=True,\n        help_text='The conditions describing when a reaction spell can be cast')\n\n    verbal = models.BooleanField(\n        help_text='Whether or not casting the spell requires a verbal component.',\n        default=False)\n\n    somatic = models.BooleanField(\n        help_text='Whether or not casting the spell requires a verbal component.',\n        default=False)\n\n    material = models.BooleanField(\n        help_text='Whether or not casting the spell requires a verbal component.',\n        default=False)\n\n    material_specified = models.TextField(\n        blank=True,\n        help_text ='Description of the material specified for the spell.')\n\n    material_cost = models.DecimalField(\n        null=True,  # Allow an unspecified cost.\n        blank=True,\n    ","position":{"index":150,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"1de2c4f8a6fbc7f4"},"created_at":"2026-01-14T02:19:10.615Z"}
{"chunk_id":"ab65c37e92e18a1d1be7a52a51efbb61","source_id":"edfc8bceff277a19","text":"aterial specified for the spell.')\n\n    material_cost = models.DecimalField(\n        null=True,  # Allow an unspecified cost.\n        blank=True,\n        default=None,\n        max_digits=10,\n        decimal_places=2,  # Only track down to 2 decimal places.\n        validators=[MinValueValidator(decimal.Decimal(0.0))],\n        help_text='Number representing the cost of the materials of the spell.')\n\n    material_consumed = models.BooleanField(\n        help_text='Whether or the material component is consumed during the casting.',\n        default=False)\n\n    target_count = models.IntegerField(\n        null=True,  # Allow an unspecified count of targets.\n        validators=[MinValueValidator(0)],\n        help_text='Integer representing the count of targets.')\n\n    saving_throw_ability = models.TextField(\n        blank=True,\n        help_text = 'Given the spell requires a saving throw, which ability is targeted. Empty string if no saving throw.')\n\n    attack_roll = models.BooleanField(\n        default=False,\n        help_text='Whether or not the spell effect requires an attack roll.')\n\n    damage_roll = models.TextField(\n        blank=True,\n        help_text=\"The damage roll for the field in dice notation. Empty string if no roll.\")\n\n    damage_types = models.JSONField(\n        default=list,\n        blank=True,\n        help_text=\"The types of damage done by the spell in a list.\")\n\n    duration = models.TextField(\n        choices = SPELL_EFFECT_DURATIONS,\n        help_text='Descript","position":{"index":151,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"323a09802baaf49c"},"created_at":"2026-01-14T02:19:10.615Z"}
{"chunk_id":"5e007240bac013dc4ee916c37d770aea","source_id":"edfc8bceff277a19","text":"types of damage done by the spell in a list.\")\n\n    duration = models.TextField(\n        choices = SPELL_EFFECT_DURATIONS,\n        help_text='Description of the duration of the effect such as \"instantaneous\" or \"1 minute\"')\n\n    shape_type = models.TextField(\n        null=True,\n        blank=True,\n        choices = SPELL_EFFECT_SHAPE_CHOICES,\n        help_text = 'The shape of the area of effect.')\n\n    shape_size = distance_field()\n    shape_size_unit = distance_unit_field()\n\n    concentration = models.BooleanField(\n        help_text='Whether the effect requires concentration to be maintained.',\n        default=False)\n\n    classes = models.ManyToManyField(CharacterClass)\n\n    def casting_options(self):\n        \"\"\"Options for casting the spell.\"\"\"\n        return self.spellcastingoption_set\n    \n    def get_shape_size_unit(self):\n        if self.shape_size_unit is None:\n            return self.document.distance_unit\n        return self.shape_size_unit\n\n    def get_range_unit(self):\n        if self.range_unit is None:\n            return self.document.distance_unit\n        return self.range_unit\n\n    def search_result_extra_fields(self):\n        return {\n            \"school\": self.school.name,\n            \"level\": self.level,\n        }\n\n\nclass SpellCastingOption(models.Model):\n    \"\"\"An object representing an alternative way to cast a spell.\"\"\"\n\n    parent = models.ForeignKey(\"Spell\",on_delete=models.CASCADE)\n\n    type = models.TextField(\n        choices=CASTING_OPTION_TYPES,\n   ","position":{"index":152,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"390896310b1c9850"},"created_at":"2026-01-14T02:19:10.615Z"}
{"chunk_id":"f8d2e800e9e6a91f7e918dcf222a8df7","source_id":"edfc8bceff277a19","text":" a spell.\"\"\"\n\n    parent = models.ForeignKey(\"Spell\",on_delete=models.CASCADE)\n\n    type = models.TextField(\n        choices=CASTING_OPTION_TYPES,\n        help_text=\"\")\n\n    damage_roll = models.TextField(\n        null=True,\n        blank=True,\n        help_text=\"The damage roll for the field in dice notation. Empty string if no roll.\")\n\n    target_count = models.IntegerField(\n        null=True,  # Null values mean this value is unchanged from the default casting option.\n        validators=[MinValueValidator(0)],\n        help_text='Integer representing the count of targets.')\n\n    duration = models.TextField(\n        null=True, # Null values mean this value is unchanged from the default casting option.\n        help_text='Description of the duration of the effect such as \"instantaneous\" or \"Up to 1 minute\"')\n\n    range = models.TextField(\n        null=True, # Null values mean this value is unchanged from the default casting option.\n        help_text='Description of the range of the spell.')\n\n    concentration = models.BooleanField(\n        null=True, # Null values mean this value is unchanged from the default casting option.\n        blank=True,\n        help_text='Whether the effect requires concentration to be maintained.')\n    \n    shape_size = distance_field()\n    # Null values mean this value is unchanged from the default casting option.\n    \n    desc = models.TextField(\n        null=True,\n        blank=True,\n        help_text='Description of complex casting option effects ","position":{"index":153,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"a8ee6426e0f7e05c"},"created_at":"2026-01-14T02:19:10.616Z"}
{"chunk_id":"117c1241f0933ddb7259f7a7deb29c3a","source_id":"edfc8bceff277a19","text":"ing option.\n    \n    desc = models.TextField(\n        null=True,\n        blank=True,\n        help_text='Description of complex casting option effects that cannot be captured in other fields.')","position":{"index":154,"start_char":6750,"end_char":6942},"metadata":{"content_hash":"9dcc529593f673e7"},"created_at":"2026-01-14T02:19:10.616Z"}
{"chunk_id":"691d39cc4b8e2360bc419a4f6358374f","source_id":"936c493bc08c7f36","text":"\"\"\"The model for a type of weapon.\"\"\"\n\nfrom django.db import models\nfrom django.core.validators import MinValueValidator\n\nfrom .abstracts import HasName, HasDescription\nfrom .abstracts import distance_field, distance_unit_field\nfrom .document import FromDocument\nfrom drf_spectacular.utils import extend_schema_field\nfrom drf_spectacular.types import OpenApiTypes\nfrom rest_framework import serializers\n\nclass WeaponProperty(HasName, HasDescription, FromDocument):  \n  type = models.CharField(\n    null=True,\n    blank=True,\n    max_length=32,\n    help_text='Weapon property type: ie. Weapon Mastery, etc.',\n  )\n  class Meta:\n    verbose_name_plural = 'Weapon Properties'\n    ordering = ['pk']\n  \n  def __str__(self):\n    return self.name\n\n\nclass WeaponPropertyAssignment(FromDocument):\n  \"\"\"\n  This is an intermediate model that is used to assign WeaponProperties to\n  Weapons while bundling in any extra contextual data in the `detail` field\n  \"\"\"\n  weapon = models.ForeignKey(\n    'Weapon',\n    related_name='properties',\n    on_delete=models.CASCADE\n  )\n  property = models.ForeignKey(\n    'WeaponProperty',\n    related_name='weapons',\n    on_delete=models.CASCADE,\n  )\n  detail = models.CharField(null=True, blank=True, max_length=32)\n  \nclass Weapon(HasName, FromDocument):\n    \"\"\"\n    This model represents types of weapons.\n\n    This does not represent a weapon itself, because that would be an item.\n    Only the unique attributes of a weapon are here. An item that is a weapon\n    would lin","position":{"index":155,"start_char":0,"end_char":1500},"metadata":{"content_hash":"7e80c47e421bbea7"},"created_at":"2026-01-14T02:19:11.312Z"}
{"chunk_id":"7d6e7dc471609c27b2ea9acfc357d670","source_id":"936c493bc08c7f36","text":" represent a weapon itself, because that would be an item.\n    Only the unique attributes of a weapon are here. An item that is a weapon\n    would link to this model instance.\n    \"\"\"\n\n    damage_type = models.ForeignKey(\n        \"DamageType\",\n        null=True,\n        related_name=\"+\", # No backwards relation.\n        on_delete=models.CASCADE,\n        help_text='What kind of damage this weapon deals')\n\n    damage_dice = models.CharField(\n        null=False,\n        max_length=100,\n        help_text='The damage dice when used making an attack.')\n\n    range = distance_field()\n\n    long_range = distance_field()\n    \n    distance_unit = distance_unit_field()\n\n    @property\n    # or none\n    @extend_schema_field(OpenApiTypes.STR)\n    def get_distance_unit(self):\n        if self.distance_unit is None:\n            return self.document.distance_unit\n        return self.distance_unit\n\n    is_simple = models.BooleanField(\n        null=False,\n        default=False,\n        help_text='If the weapon category is simple.')\n\n    is_improvised = models.BooleanField(\n        null=False,\n        default=False,\n        help_text='If the weapon is improvised.')\n\n    @property\n    @extend_schema_field(OpenApiTypes.BOOL)\n    def is_martial(self):\n        return not self.is_simple","position":{"index":156,"start_char":1350,"end_char":2629},"metadata":{"content_hash":"42e1fadac466b839"},"created_at":"2026-01-14T02:19:11.312Z"}
{"chunk_id":"0639845bc7d063ac671cc083c283ca92","source_id":"54515614a4b7feb2","text":"\"\"\"The initialization for serializers for open5e's api v2.\"\"\"\n\nfrom .item import ArmorSerializer\nfrom .item import WeaponSerializer\nfrom .item import ItemSerializer\nfrom .item import ItemRaritySerializer\nfrom .item import ItemSetSerializer\nfrom .item import ItemCategorySerializer\nfrom .item import WeaponPropertySerializer\n\nfrom .background import BackgroundBenefitSerializer\nfrom .background import BackgroundSerializer\n\nfrom .document import GameSystemSerializer\nfrom .document import LicenseSerializer\nfrom .document import PublisherSerializer\nfrom .document import DocumentSerializer\n\nfrom .feat import FeatBenefitSerializer\nfrom .feat import FeatSerializer\n\nfrom .species import SpeciesTraitSerializer\nfrom .species import SpeciesSerializer\n\nfrom .creature import CreatureSerializer\nfrom .creature import CreatureTypeSerializer\nfrom .creature import CreatureSetSerializer\nfrom .creature import CreatureTraitSerializer\n\nfrom .damagetype import DamageTypeSerializer\n\nfrom .language import LanguageSerializer\n\nfrom .alignment import AlignmentSerializer\n\nfrom .condition import ConditionSerializer\n\nfrom .spell import SpellSerializer, SpellSchoolSerializer\n\nfrom .characterclass import CharacterClassSerializer\nfrom .characterclass import ClassFeatureSerializer\nfrom .characterclass import ClassFeatureItemSerializer\n\nfrom .size import SizeSerializer\n\nfrom .environment import EnvironmentSerializer\n\nfrom .ability import AbilitySerializer\nfrom .ability import SkillSerializer\n\nfrom .rule import Rul","position":{"index":157,"start_char":0,"end_char":1500},"metadata":{"content_hash":"fba0f49010673018"},"created_at":"2026-01-14T02:19:11.816Z"}
{"chunk_id":"b0a7b58bcf2183dabaea5b30246a1400","source_id":"54515614a4b7feb2","text":"er\n\nfrom .environment import EnvironmentSerializer\n\nfrom .ability import AbilitySerializer\nfrom .ability import SkillSerializer\n\nfrom .rule import RuleSerializer, RuleSetSerializer\n\nfrom .image import ImageSerializer\n\nfrom .service import ServiceSerializer","position":{"index":158,"start_char":1350,"end_char":1606},"metadata":{"content_hash":"8f334eae7cf5f155"},"created_at":"2026-01-14T02:19:11.816Z"}
{"chunk_id":"934ce0b4dde944d4883c93e08e6b5421","source_id":"4fc216ecf885aa7d","text":"\"\"\"Serializer for the DamageType model.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .abstracts import DescriptionSerializer\n\n\nclass SkillDescriptionSerializer(DescriptionSerializer):\n    class Meta:\n        model=models.SkillDescription\n        fields=['desc','document','gamesystem']\n\n\nclass SkillSerializer(serializers.ModelSerializer):\n    descriptions = SkillDescriptionSerializer(many=True)\n\n    class Meta:\n        model = models.Skill\n        fields = '__all__'\n\n\nclass AbilityDescriptionSerializer(DescriptionSerializer):\n    class Meta:\n        model=models.AbilityDescription\n        fields=['desc','document','gamesystem']\n\n\nclass AbilitySerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    descriptions = AbilityDescriptionSerializer(many=True)\n\n    skills = SkillSerializer(\n        many=True\n    )\n\n    class Meta:\n        model = models.Ability\n        fields = '__all__'\n\n\n\nclass AbilitySummarySerializer(GameContentSerializer):\n    '''\n    A slimmer AbilitySerializer, designed to serialize Ability FKs on other \n    serializers. ie. The `saving_throws` field on CharacterClassSerializer. Not\n    intended to be used directly with in a ModelViewset.\n    '''\n    class Meta:\n        model = models.Ability\n        fields = ['name', 'url']","position":{"index":159,"start_char":0,"end_char":1355},"metadata":{"content_hash":"91182440a5ef7643"},"created_at":"2026-01-14T02:19:12.229Z"}
{"chunk_id":"50528fd8ee2af939d4c843f88d782965","source_id":"338d6cb41236c174","text":"\"\"\"Abstract serializers.\"\"\"\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nclass GameContentSerializer(serializers.HyperlinkedModelSerializer):  \n\n    \"\"\"\n    Much of the logic included in the GameContentSerializer is intended to \n    support manipulating data returned by the serializer via query parameters.\n    \"\"\"\n    \n    def remove_unwanted_fields(self, dynamic_params):\n        \"\"\"\n        Takes the value of the 'fields', a string of comma-separated values, \n        and removes all fields not in this list from the serializer\n        \"\"\"\n        if fields_to_keep := dynamic_params.pop(\"fields\", None):\n            fields_to_keep = set(fields_to_keep.split(\",\"))\n            all_fields = set(self.fields.keys())\n            for field in all_fields - fields_to_keep:\n                self.fields.pop(field, None)\n\n    def get_or_create_dynamic_params(self, child):\n        \"\"\"\n        Creates dynamic params on the serializer context if it doesn't already\n        exist, then returns the dynamic parameters\n        \"\"\"\n        if \"dynamic_params\" not in self.fields[child]._context:\n            self.fields[child]._context.update({\"dynamic_params\": {}})\n        return self.fields[child]._context[\"dynamic_params\"]\n\n    @staticmethod\n    def split_param(dynamic_param):\n        \"\"\"\n        Splits a dynamic parameter into its target child serializer and value.\n        Returns the values as a tuple.\n        eg. \n            'document__fields=name' -> ('document', 'fields=","position":{"index":160,"start_char":0,"end_char":1500},"metadata":{"content_hash":"ed2f1e009317bf4c"},"created_at":"2026-01-14T02:19:12.587Z"}
{"chunk_id":"727b5407577366ac915f1725a4ca0a0e","source_id":"338d6cb41236c174","text":"ts target child serializer and value.\n        Returns the values as a tuple.\n        eg. \n            'document__fields=name' -> ('document', 'fields=name')\n            'document__gamesystem__fields=name' -> ('document', 'gamesystem__fields=name')\n        \"\"\"\n        crumbs = dynamic_param.split(\"__\")\n        return crumbs[0], \"__\".join(crumbs[1:]) if len(crumbs) > 1 else None\n\n    def set_dynamic_params_for_children(self, dynamic_params):\n        \"\"\"\n        Passes nested dynamic params to child serializer.\n        eg. the param 'document__fields=name'\n        \"\"\"\n        for param, fields in dynamic_params.items():\n            child, child_dynamic_param = self.split_param(param)\n            if child in self.fields.keys():\n                # Get dynamic parameters for child serializer and update\n                child_dynamic_params = self.get_or_create_dynamic_params(child)\n                child_dynamic_params.update({child_dynamic_param: fields})\n\n                # Overwrite existing params to remove 'fields' inherited from parent serializer\n                self.fields[child]._context['dynamic_params'] = {\n                    **child_dynamic_params,\n                }\n\n    @staticmethod\n    def is_param_dynamic(p):\n        \"\"\"\n        Returns true if parameter 'p' is a dynamic parameter. Currently the \n        only dynamic param supported is 'fields', so we check for that\n        \"\"\"\n        return p.endswith(\"fields\")\n\n    def get_dynamic_params_for_root(self, request):\n    ","position":{"index":161,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"75992e012e3e987e"},"created_at":"2026-01-14T02:19:12.587Z"}
{"chunk_id":"147627fa6e80b3eb86023acca1ad7d82","source_id":"338d6cb41236c174","text":" supported is 'fields', so we check for that\n        \"\"\"\n        return p.endswith(\"fields\")\n\n    def get_dynamic_params_for_root(self, request):\n        \"\"\"\n        Returns a dict of dynamic query parameters extracted from the 'request'\n        object. Only works on the root serializer (child serializers do no \n        include a 'request' field)\n        \"\"\"\n        query_params = request.query_params.items()\n        return {k: v for k, v in query_params if self.is_param_dynamic(k)}\n\n    def get_dynamic_params(self):\n        \"\"\"\n        Returns dynamic parameters stored on the serializer context\n        \"\"\"\n        # The context for ListSerializers is stored on the parent\n        if isinstance(self.parent, serializers.ListSerializer):\n            return self.parent._context.get(\"dynamic_params\", {})\n        return self._context.get(\"dynamic_params\", {})\n\n    def __init__(self, *args, **kwargs):\n        request = kwargs.get(\"context\", {}).get(\"request\")\n        super().__init__(*args, **kwargs)\n\n        # Request is only present on root serializer\n        if request:\n            dynamic_params = self.get_dynamic_params_for_root(request)\n            self._context.update({\"dynamic_params\": dynamic_params})\n\n    def to_representation(self, instance):\n        # if dynamic params are present, rmv requested fields and pass params \n        # to child serializers\n        if dynamic_params := self.get_dynamic_params().copy():\n            self.remove_unwanted_fields(dynamic_params)\n    ","position":{"index":162,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"467c68e2351c71f9"},"created_at":"2026-01-14T02:19:12.587Z"}
{"chunk_id":"28510ab25a132374db73a84aa43fe03c","source_id":"338d6cb41236c174","text":"    # to child serializers\n        if dynamic_params := self.get_dynamic_params().copy():\n            self.remove_unwanted_fields(dynamic_params)\n            self.set_dynamic_params_for_children(dynamic_params)\n        return super().to_representation(instance)\n\n    class Meta:\n        abstract = True\n\n\nclass DescriptionSerializer(serializers.ModelSerializer):\n    gamesystem = serializers.SerializerMethodField()\n    class Meta:\n        model = None\n        abstract = True\n\n    def get_gamesystem(self,obj):\n        return obj.document.gamesystem.key","position":{"index":163,"start_char":4050,"end_char":4604},"metadata":{"content_hash":"569464ec5e69c2ce"},"created_at":"2026-01-14T02:19:12.587Z"}
{"chunk_id":"51eb70493c50bbfb07e7d460585ee362","source_id":"79032a0f8a2ed293","text":"\"\"\"Serializer for the DamageType model.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .abstracts import DescriptionSerializer\nfrom .document import DocumentSummarySerializer\n\nclass AlignmentDescriptionSerializer(DescriptionSerializer):\n    class Meta:\n        model=models.AlignmentDescription\n        fields=['desc','document','gamesystem']\n\n\nclass AlignmentSerializer(GameContentSerializer):\n\n    key = serializers.ReadOnlyField()\n    morality = serializers.ReadOnlyField()\n    societal_attitude = serializers.ReadOnlyField()\n    short_name = serializers.ReadOnlyField()\n    descriptions = AlignmentDescriptionSerializer(many=True)\n    document = DocumentSummarySerializer()\n\n    class Meta:\n        model = models.Alignment\n        fields = [\n            'key',\n            'morality',\n            'societal_attitude',\n            'short_name',\n            'descriptions',\n            'document'\n        ]","position":{"index":164,"start_char":0,"end_char":983},"metadata":{"content_hash":"abe74b049483127d"},"created_at":"2026-01-14T02:19:13.355Z"}
{"chunk_id":"8c6321b2604e384526fbc294a215c785","source_id":"5d81421b38c2cf25","text":"\"\"\"Serializer for the BackgroundBenefit and Background models.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .document import DocumentSummarySerializer\n\nclass BackgroundBenefitSerializer(GameContentSerializer):\n    class Meta:\n        model = models.BackgroundBenefit\n        fields = ['name','desc','type']\n\n\nclass BackgroundSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    benefits = BackgroundBenefitSerializer(many=True)\n    document = DocumentSummarySerializer()\n\n    class Meta:\n        model = models.Background\n        fields = '__all__'","position":{"index":165,"start_char":0,"end_char":648},"metadata":{"content_hash":"753b636b29872415"},"created_at":"2026-01-14T02:19:14.105Z"}
{"chunk_id":"6d94af40ac7d3bf6382d4cba7a35abe0","source_id":"e8c488b6edbcbaa9","text":"\"\"\"Serializer for the CharacterClass and Feature, and FeatureItem models.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .document import DocumentSummarySerializer\nfrom .ability import AbilitySummarySerializer\n\nclass ClassFeatureItemSerializer(GameContentSerializer):\n    class Meta:\n        model = models.ClassFeatureItem\n        fields = ['level', 'detail']\n\nclass ClassFeatureColumnItemSerializer(GameContentSerializer):\n    class Meta:\n        model = models.ClassFeatureItem\n        fields = ['level', 'column_value']\n\nclass ClassFeaturePrefetchSerializer(GameContentSerializer):\n    class Meta:\n        model = models.ClassFeatureItem\n        fields = ['level', 'detail', 'column_value']\n\nclass ClassFeatureSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    feature_items = ClassFeaturePrefetchSerializer(many=True, read_only=True)\n\n    def to_representation(self, instance):\n        \"\"\"\n        'feature_items' field contains tabulated and non-tabulated data. These\n        have different uses and must be split into the 'gained_at' and \n        'table_data' fields before being returned by the serializer\n        \"\"\"\n        # run 'to_representation' on super-class (GameContentSerializer)\n        representation = super().to_representation(instance)\n        \n        # Split FeatureItems into tabulated and non-tabulated data arrays\n        table_data = []\n        non_table_data = []\n     ","position":{"index":166,"start_char":0,"end_char":1500},"metadata":{"content_hash":"23ecb90262b9c4b4"},"created_at":"2026-01-14T02:19:14.617Z"}
{"chunk_id":"20626583d37d745bd4577bf4c62c03ea","source_id":"e8c488b6edbcbaa9","text":"instance)\n        \n        # Split FeatureItems into tabulated and non-tabulated data arrays\n        table_data = []\n        non_table_data = []\n        for item in instance.feature_items.all():\n            if item.column_value is None:\n                non_table_data.append(item)\n            else:\n                table_data.append(item)\n\n        # If a feature has tabulated data AND a description, take its lowest \n        # level FeatureItem and add it to the non-tabulated data.\n        if len(table_data) > 0 and instance.desc != '[Column data]':\n            first_level_gained = min(table_data, key=lambda x: x.level)\n            non_table_data.append(first_level_gained)\n\n        # serialize data and add it to representation\n        representation['gained_at'] = [ClassFeatureItemSerializer(item).data for item in non_table_data]\n        representation['data_for_class_table'] = [ClassFeatureColumnItemSerializer(item).data for item in table_data]\n\n        # remove feature_items field to avoid data duplication\n        del representation['feature_items']\n        return representation\n\n    class Meta:\n        model = models.ClassFeature\n        fields = [\n            'key',\n            'name',\n            'desc',\n            'feature_type',\n            'feature_items'\n        ]\n\nclass CharacterClassSummarySerializer(GameContentSerializer):\n    '''\n    A slimmer CharacterClassSerializer, designed to serialize Class FKs on\n    other serializers. ie. The `subclass_of` field on the \n   ","position":{"index":167,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"a08df7f23ec3d502"},"created_at":"2026-01-14T02:19:14.617Z"}
{"chunk_id":"9edffa1028d221cbe15e784a14df86fa","source_id":"e8c488b6edbcbaa9","text":"er):\n    '''\n    A slimmer CharacterClassSerializer, designed to serialize Class FKs on\n    other serializers. ie. The `subclass_of` field on the \n    CharacterClassSerializer serializer. Not intended to be used directly in a\n    ModelViewset.\n    '''\n    class Meta:\n        model = models.CharacterClass\n        fields = ['name', 'key', 'url']\n\nclass CharacterClassSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    features = ClassFeatureSerializer(many=True, read_only=True)\n    hit_points = serializers.ReadOnlyField()\n    document = DocumentSummarySerializer()\n    saving_throws = AbilitySummarySerializer(many=True)\n    subclass_of = CharacterClassSummarySerializer()\n    \n    class Meta:\n        model = models.CharacterClass\n        fields = '__all__'","position":{"index":168,"start_char":2700,"end_char":3486},"metadata":{"content_hash":"12053c6095181100"},"created_at":"2026-01-14T02:19:14.617Z"}
{"chunk_id":"c27cb4b3d5c37fefa26da8369330eb47","source_id":"6aa13cd83ffd8bf0","text":"\"\"\"Serializer for the Condition model.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .abstracts import DescriptionSerializer\nfrom .document import DocumentSummarySerializer, GameSystemSummarySerializer\nfrom .image import ImageSummarySerializer\n\n\nclass ConditionDescriptionSerializer(DescriptionSerializer):\n    class Meta:\n        model=models.ConditionDescription\n        fields=['desc','document','gamesystem']\n\n\nclass ConditionSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    document = DocumentSummarySerializer()\n    icon = ImageSummarySerializer()\n    descriptions = ConditionDescriptionSerializer(many=True)\n\n    class Meta:\n        model = models.Condition\n        fields = '__all__'\n\nclass ConditionSummarySerializer(GameContentSerializer):\n    '''\n    A slimmer ConditionSerializer, designed to serialize Condition FKs on\n    other serializers. ie. The `condition_immunities` field on the Creature\n    serializer. Not intended to be used directly with in a ModelViewset.\n    '''\n    class Meta:\n        model = models.Condition\n        fields = ['name', 'key', 'url']\n\n\nclass ConditionDetailSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    document = DocumentSummarySerializer()\n    icon = ImageSummarySerializer()\n    gamesystem_key = serializers.SerializerMethodField()\n    descriptions = ConditionDescriptionSerializer(many=True)\n\n\n    def get_gamesystem_k","position":{"index":169,"start_char":0,"end_char":1500},"metadata":{"content_hash":"413af4d74a391a7a"},"created_at":"2026-01-14T02:19:15.280Z"}
{"chunk_id":"b2105ed563381ada96d4463495e739a1","source_id":"6aa13cd83ffd8bf0","text":"zer()\n    gamesystem_key = serializers.SerializerMethodField()\n    descriptions = ConditionDescriptionSerializer(many=True)\n\n\n    def get_gamesystem_key(self, obj):\n        return obj.document.gamesystem.key\n\n    class Meta:\n        model = models.Condition\n        fields = ['name', 'key', 'url',  'document', 'gamesystem_key', 'icon']","position":{"index":170,"start_char":1350,"end_char":1686},"metadata":{"content_hash":"d3c7d4827dea42fd"},"created_at":"2026-01-14T02:19:15.280Z"}
{"chunk_id":"69a8796d7c8e88806cb1e28ed02e3053","source_id":"d5407d31cfcb7c3d","text":"\"\"\"Serializers and helper methods for the Creature model.\"\"\"\n\nfrom math import floor\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .abstracts import DescriptionSerializer\nfrom .damagetype import DamageTypeSummarySerializer\nfrom .condition import ConditionSummarySerializer\nfrom .document import DocumentSummarySerializer\nfrom .language import LanguageSummarySerializer\nfrom .environment import EnvironmentSummarySerializer\nfrom .size import SizeSummarySerializer\nfrom .image import ImageSummarySerializer\nfrom drf_spectacular.utils import extend_schema_field, inline_serializer\nfrom drf_spectacular.types import OpenApiTypes\n\nclass CreatureActionAttackSerializer(GameContentSerializer):\n    distance_unit = serializers.SerializerMethodField()\n    damage_type = DamageTypeSummarySerializer()\n    extra_damage_type = DamageTypeSummarySerializer()\n\n    class Meta:\n        model = models.CreatureActionAttack\n        fields = [\n            'name',\n            'attack_type',\n            'to_hit_mod',\n            'reach',\n            'range',\n            'long_range',\n            'target_creature_only',\n            'damage_die_count',\n            'damage_die_type',\n            'damage_bonus',\n            'damage_type',\n            'extra_damage_die_count',\n            'extra_damage_die_type',\n            'extra_damage_bonus',\n            'extra_damage_type',\n            'distance_unit',\n        ]\n\n    # todo: type is any\n  ","position":{"index":171,"start_char":0,"end_char":1500},"metadata":{"content_hash":"acfb9088ccd0b562"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"b167ade28a8d5c76893ac8748300ec01","source_id":"d5407d31cfcb7c3d","text":"amage_die_type',\n            'extra_damage_bonus',\n            'extra_damage_type',\n            'distance_unit',\n        ]\n\n    # todo: type is any\n    @extend_schema_field(OpenApiTypes.STR)\n    def get_distance_unit(self, CreatureActionAttack):\n        return CreatureActionAttack.get_distance_unit\n\n\nclass CreatureActionSerializer(GameContentSerializer):\n    attacks = CreatureActionAttackSerializer(many=True, read_only=True)\n    usage_limits = serializers.SerializerMethodField()\n    \n    # rename model fields to improve readibility of JSON\n    order_in_statblock = serializers.IntegerField(source='order')\n    limited_to_form = serializers.CharField(source='form_condition')\n    legendary_action_cost = serializers.IntegerField(source='legendary_cost')\n\n    class Meta:\n        model = models.CreatureAction\n        fields = [\n            'name',\n            'desc',\n            'attacks',\n            'action_type',\n            'order_in_statblock',\n            'legendary_action_cost',\n            'limited_to_form',\n            'usage_limits'\n        ]\n\n    # Gathers 'uses_type' and 'uses_param' into a single 'usage_limits' obj.\n    def get_usage_limits(self, obj)->dict:\n        if obj.uses_type and obj.uses_param: \n            return {\n                'type': obj.uses_type,\n                'param': obj.uses_param\n            }\n\n\nclass CreatureTypeDescriptionSerializer(DescriptionSerializer):\n    class Meta:\n        model=models.CreatureTypeDescription\n        fields=['desc','docume","position":{"index":172,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"18947644f7df937b"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"0210c959cbd27086fe954722039596b9","source_id":"d5407d31cfcb7c3d","text":" CreatureTypeDescriptionSerializer(DescriptionSerializer):\n    class Meta:\n        model=models.CreatureTypeDescription\n        fields=['desc','document','gamesystem']\n\n\nclass CreatureTypeSerializer(GameContentSerializer):\n    '''Serializer for the Creature Type object'''\n    key = serializers.ReadOnlyField()\n    descriptions = CreatureTypeDescriptionSerializer(many=True)\n\n    class Meta:\n        '''Meta options for serializer.'''\n        model = models.CreatureType\n        fields = '__all__'\n\n\nclass CreatureTypeSummarySerializer(GameContentSerializer):\n    '''\n    A slimmer CreatureTypeSerializer, designed to serialize CreatureType FKs on\n    other serializers . Not intended to be used directly with in a ModelViewset.\n    '''\n    class Meta:\n        model = models.CreatureType\n        fields = ['name', 'key', 'url']\n\n\nclass CreatureTraitSerializer(GameContentSerializer):\n    '''Serializer for the Creature Trait object'''\n    class Meta:\n        model = models.CreatureTrait\n        fields = ['name', 'desc']\n\n\nclass CreatureLanguageSerializer(GameContentSerializer):\n    as_string = serializers.CharField(source=\"languages_desc\")\n    data = LanguageSummarySerializer(source=\"languages\", many=True)\n\n    class Meta:\n        model = models.Creature\n        fields = ['as_string', 'data']\n\n\nclass CreatureResistancesAndImmunitiesSerializer(GameContentSerializer):\n    '''This serializer formats a Creature's damage modifier as a single obj '''\n    damage_immunities_display = serializers.","position":{"index":173,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"393110a6924dfa04"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"db2b45a66833f259cb0ff0abf07d1417","source_id":"d5407d31cfcb7c3d","text":"r(GameContentSerializer):\n    '''This serializer formats a Creature's damage modifier as a single obj '''\n    damage_immunities_display = serializers.CharField()\n    damage_immunities = DamageTypeSummarySerializer(many=True)\n    damage_resistances_display = serializers.CharField()\n    damage_resistances = DamageTypeSummarySerializer(many=True)\n    damage_vulnerabilities_display = serializers.CharField()\n    damage_vulnerabilities = DamageTypeSummarySerializer(many=True)\n    condition_immunities_display = serializers.CharField()\n    condition_immunities = ConditionSummarySerializer(many=True)\n\n    class Meta:\n        model = models.Creature\n        fields = [\n            'damage_immunities_display',\n            'damage_immunities',\n            'damage_resistances_display',\n            'damage_resistances',\n            'damage_vulnerabilities_display',\n            'damage_vulnerabilities',\n            'condition_immunities_display',\n            'condition_immunities',\n        ]\n\n\nclass CreatureSerializer(GameContentSerializer):\n    '''The serializer for the Creature object.'''\n\n    key = serializers.ReadOnlyField()\n    ability_scores = serializers.SerializerMethodField()\n    modifiers = serializers.SerializerMethodField()\n    saving_throws = serializers.SerializerMethodField()\n    saving_throws_all = serializers.SerializerMethodField()\n    skill_bonuses = serializers.SerializerMethodField()\n    skill_bonuses_all = serializers.SerializerMethodField()\n    resistances_and_immuniti","position":{"index":174,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"ba484c60294e147e"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"9c4b5dbc3c8e51eba114be1ea40493f7","source_id":"d5407d31cfcb7c3d","text":"eld()\n    skill_bonuses = serializers.SerializerMethodField()\n    skill_bonuses_all = serializers.SerializerMethodField()\n    resistances_and_immunities = CreatureResistancesAndImmunitiesSerializer(source='*')\n    actions = CreatureActionSerializer(many=True)\n    traits = CreatureTraitSerializer(many=True, read_only=True)\n    speed = serializers.SerializerMethodField()\n    speed_all = serializers.SerializerMethodField()\n    challenge_rating_text = serializers.SerializerMethodField()\n    experience_points = serializers.SerializerMethodField()\n    document = DocumentSummarySerializer()\n    type = CreatureTypeSummarySerializer()\n    size = SizeSummarySerializer()\n    languages = CreatureLanguageSerializer(source='*')\n    environments = EnvironmentSummarySerializer(many=True)\n    initiative_bonus = serializers.SerializerMethodField()\n    illustration = ImageSummarySerializer()\n\n\n    class Meta:\n        '''Serializer meta options.'''\n        model = models.Creature\n        fields = [\n            'url',\n            'key',\n            'name',\n            'document',\n            'type',\n            'size',\n            'challenge_rating_decimal',\n            'challenge_rating_text',\n            'proficiency_bonus',\n            'speed',\n            'speed_all',\n            'category',\n            'subcategory',\n            'alignment',\n            'languages',\n            'armor_class',\n            'armor_detail',\n            'hit_points',\n            'hit_dice',\n            'experienc","position":{"index":175,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"579a6d7c23d5e1ad"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"b7ece1859d5ac679d15684981c3bb36f","source_id":"d5407d31cfcb7c3d","text":"          'languages',\n            'armor_class',\n            'armor_detail',\n            'hit_points',\n            'hit_dice',\n            'experience_points',\n            'ability_scores',\n            'modifiers',\n            'initiative_bonus',\n            'saving_throws',\n            'saving_throws_all',\n            'skill_bonuses',\n            'skill_bonuses_all',\n            'passive_perception',\n            'resistances_and_immunities',\n            'normal_sight_range',\n            'darkvision_range',\n            'blindsight_range',\n            'tremorsense_range',\n            'truesight_range',\n            'actions',\n            'traits',\n            'creaturesets',\n            'environments',\n            'illustration'\n        ]\n\n    @extend_schema_field(inline_serializer(\n        name=\"ability_scores\",\n        fields={\n            \"strength\": serializers.IntegerField(),\n            \"dexterity\": serializers.IntegerField(),\n            \"constitution\": serializers.IntegerField(),\n            \"intelligence\": serializers.IntegerField(),\n            \"wisdom\": serializers.IntegerField(),\n            \"charisma\": serializers.IntegerField(),\n        })\n    )\n    def get_ability_scores(self, creature):\n        '''Ability scores helper method.'''\n        return creature.get_ability_scores()\n\n    @extend_schema_field(inline_serializer(\n        name=\"ability_modifiers\",\n        fields={\n            # todo: technically they're all typed as any, but they're `floor`'d, so they shoul","position":{"index":176,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"58965c5511f97f29"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"09f7a39b5c9d38dda54a39daaa779894","source_id":"d5407d31cfcb7c3d","text":"zer(\n        name=\"ability_modifiers\",\n        fields={\n            # todo: technically they're all typed as any, but they're `floor`'d, so they should come out as integers\n            \"strength\": serializers.IntegerField(),\n            \"dexterity\": serializers.IntegerField(),\n            \"constitution\": serializers.IntegerField(),\n            \"intelligence\": serializers.IntegerField(),\n            \"wisdom\": serializers.IntegerField(),\n            \"charisma\": serializers.IntegerField(),\n        })\n    )\n    def get_modifiers(self, creature):\n        '''Modifiers helper method.'''\n        return creature.get_modifiers()\n\n    @extend_schema_field(inline_serializer(\n        name=\"saving_throws\",\n        fields={\n            # todo: all of these are \"or none\"\n            \"strength\": serializers.IntegerField(),\n            \"dexterity\": serializers.IntegerField(),\n            \"constitution\": serializers.IntegerField(),\n            \"intelligence\": serializers.IntegerField(),\n            \"wisdom\": serializers.IntegerField(),\n            \"charisma\": serializers.IntegerField(),\n        })\n    )\n    def get_saving_throws(self, creature):\n        '''Explicit saving throws helper method.'''\n        entries = creature.get_saving_throws().items()\n        return { key: value for key, value in entries if value is not None }\n\n    @extend_schema_field(inline_serializer(\n        name=\"saving_throws_all\",\n        fields={\n            # todo: all of these are \"or none\"\n            \"strength\": seri","position":{"index":177,"start_char":8100,"end_char":9600},"metadata":{"content_hash":"e5678c7f254703f6"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"e71fc9124c6b22c162bd380cda451e00","source_id":"d5407d31cfcb7c3d","text":"ield(inline_serializer(\n        name=\"saving_throws_all\",\n        fields={\n            # todo: all of these are \"or none\"\n            \"strength\": serializers.IntegerField(),\n            \"dexterity\": serializers.IntegerField(),\n            \"constitution\": serializers.IntegerField(),\n            \"intelligence\": serializers.IntegerField(),\n            \"wisdom\": serializers.IntegerField(),\n            \"charisma\": serializers.IntegerField(),\n        })\n    )\n    def get_saving_throws_all(self, creature):\n        '''Implicit saving throws helper method.'''\n        defaults = creature.get_modifiers()\n        entries = creature.get_saving_throws().items()\n        return { key: (defaults[key] if value is None else value) for key, value in entries }\n\n    @extend_schema_field(inline_serializer(\n        name=\"skill_bonuses\",\n        fields={\n            # todo: all of these are typed as also none\n            'acrobatics': serializers.IntegerField(),\n            'animal_handling': serializers.IntegerField(),\n            'arcana': serializers.IntegerField(),\n            'athletics': serializers.IntegerField(),\n            'deception': serializers.IntegerField(),\n            'history': serializers.IntegerField(),\n            'insight': serializers.IntegerField(),\n            'intimidation': serializers.IntegerField(),\n            'investigation': serializers.IntegerField(),\n            'medicine': serializers.IntegerField(),\n            'nature': serializers.IntegerField(),\n            'per","position":{"index":178,"start_char":9450,"end_char":10950},"metadata":{"content_hash":"661a040f3198bfc3"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"9696f8aaea74eecc140eac49ce4745ed","source_id":"d5407d31cfcb7c3d","text":"n': serializers.IntegerField(),\n            'medicine': serializers.IntegerField(),\n            'nature': serializers.IntegerField(),\n            'perception': serializers.IntegerField(),\n            'performance': serializers.IntegerField(),\n            'persuasion': serializers.IntegerField(),\n            'religion': serializers.IntegerField(),\n            'sleight_of_hand': serializers.IntegerField(),\n            'stealth': serializers.IntegerField(),\n            'survival': serializers.IntegerField(),\n        }\n    ))\n    def get_skill_bonuses(self, creature):\n        '''Explicit skill bonuses helper method.'''\n        entries = creature.get_skill_bonuses().items()\n        return { key: value for key, value in entries if value is not None }\n\n    @extend_schema_field(inline_serializer(\n        name=\"skill_bonuses_all\",\n        fields={\n            # todo: all of these are typed as any\n            'acrobatics': serializers.IntegerField(),\n            'animal_handling': serializers.IntegerField(),\n            'arcana': serializers.IntegerField(),\n            'athletics': serializers.IntegerField(),\n            'deception': serializers.IntegerField(),\n            'history': serializers.IntegerField(),\n            'insight': serializers.IntegerField(),\n            'intimidation': serializers.IntegerField(),\n            'investigation': serializers.IntegerField(),\n            'medicine': serializers.IntegerField(),\n            'nature': serializers.IntegerField(),\n            '","position":{"index":179,"start_char":10800,"end_char":12300},"metadata":{"content_hash":"4fd4af47b189d933"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"253b80a5b910eb512951852ae7d01956","source_id":"d5407d31cfcb7c3d","text":"tion': serializers.IntegerField(),\n            'medicine': serializers.IntegerField(),\n            'nature': serializers.IntegerField(),\n            'perception': serializers.IntegerField(),\n            'performance': serializers.IntegerField(),\n            'persuasion': serializers.IntegerField(),\n            'religion': serializers.IntegerField(),\n            'sleight_of_hand': serializers.IntegerField(),\n            'stealth': serializers.IntegerField(),\n            'survival': serializers.IntegerField(),\n        }\n    ))\n    def get_skill_bonuses_all(self, creature):\n        '''Implicit skill bonuses helper method.'''\n        defaults = {\n            'acrobatics': creature.modifier_dexterity,\n            'animal_handling': creature.modifier_wisdom,\n            'arcana': creature.modifier_intelligence,\n            'athletics': creature.modifier_strength,\n            'deception': creature.modifier_charisma,\n            'history': creature.modifier_intelligence,\n            'insight': creature.modifier_wisdom,\n            'intimidation': creature.modifier_charisma,\n            'investigation': creature.modifier_intelligence,\n            'medicine': creature.modifier_wisdom,\n            'nature': creature.modifier_intelligence,\n            'perception': creature.modifier_wisdom,\n            'performance': creature.modifier_charisma,\n            'persuasion': creature.modifier_charisma,\n            'religion': creature.modifier_intelligence,\n            'sleight_of_hand': crea","position":{"index":180,"start_char":12150,"end_char":13650},"metadata":{"content_hash":"3429cbf24ee3c7c1"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"5aee7cd5ddc9a9c16ec3c8098d7838ad","source_id":"d5407d31cfcb7c3d","text":"sma,\n            'persuasion': creature.modifier_charisma,\n            'religion': creature.modifier_intelligence,\n            'sleight_of_hand': creature.modifier_dexterity,\n            'stealth': creature.modifier_dexterity,\n            'survival': creature.modifier_wisdom,\n        }\n        entries = creature.get_skill_bonuses().items()\n        return { key: (defaults[key] if value is None else value) for key, value in entries }\n\n    @extend_schema_field(inline_serializer(\n        name=\"speed\",\n        fields={\n            # todo: model typed as any\n            \"walk\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"fly\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"swim\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"climb\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"burrow\": serializers.StringRelatedField(),\n            # todo: and none\n            \"hover\": serializers.BooleanField(),\n        }\n    ))\n    def get_speed(self, creature):\n        '''Explicit speed helper method.'''\n        entries = creature.get_speed().items()\n        return { key: value for key, value in entries if value is not None }\n\n    @extend_schema_field(inline_serializer(\n        name=\"speed_all\",\n        fields={\n            # todo: model typed as any\n            \"unit\": serializers.StringRelatedField(),\n            # todo: model typed as","position":{"index":181,"start_char":13500,"end_char":15000},"metadata":{"content_hash":"2f0ba185bbb9be8d"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"8458545fe79afa0bb4360b844b780305","source_id":"d5407d31cfcb7c3d","text":"all\",\n        fields={\n            # todo: model typed as any\n            \"unit\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"walk\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"crawl\": serializers.StringRelatedField(),\n            \"hover\": serializers.BooleanField(),\n            \"fly\": serializers.FloatField(),\n            \"burrow\": serializers.FloatField(),\n            # todo: model typed as any\n            \"climb\": serializers.StringRelatedField(),\n            # todo: model typed as any\n            \"swim\": serializers.StringRelatedField(),  \n        }\n    ))\n    def get_speed_all(self, creature):\n        '''Implicit speed helper method.'''\n        return creature.get_speed_all()\n\n    # todo: model typed as any\n    @extend_schema_field(OpenApiTypes.STR)\n    def get_challenge_rating_text(self, creature):\n        return creature.challenge_rating_text\n\n    # todo: model typed as any\n    @extend_schema_field(OpenApiTypes.INT)\n    def get_experience_points(self, creature):\n        return creature.experience_points\n    \n    @extend_schema_field(OpenApiTypes.INT)\n    def get_initiative_bonus(self, creature):\n        return creature.get_initiative_bonus()\n\n\nclass CreatureSetSerializer(GameContentSerializer):\n    '''Serializer for the Creature Set object'''\n    \n    key = serializers.ReadOnlyField()\n    creatures = CreatureSerializer(many=True, read_only=True, context={'request':{}})\n\n    class Meta:\n","position":{"index":182,"start_char":14850,"end_char":16350},"metadata":{"content_hash":"dcf32229f70d9499"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"3c619df84c7d7c3608ea91e5b3c5a575","source_id":"d5407d31cfcb7c3d","text":"'''\n    \n    key = serializers.ReadOnlyField()\n    creatures = CreatureSerializer(many=True, read_only=True, context={'request':{}})\n\n    class Meta:\n        '''Meta options for serializer.'''\n        model = models.CreatureSet\n        fields = '__all__'","position":{"index":183,"start_char":16200,"end_char":16454},"metadata":{"content_hash":"1027f9d8562aa29a"},"created_at":"2026-01-14T02:19:15.720Z"}
{"chunk_id":"6a2992f5a2e8020120b82b3d687da3da","source_id":"ccf9d986b2d61058","text":"\"\"\"Serializer for the DamageType model.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .abstracts import DescriptionSerializer\n\nclass DamageTypeDescriptionSerializer(DescriptionSerializer):\n    class Meta:\n        model = models.DamageTypeDescription\n        fields = ['desc','document','gamesystem']\n\n\nclass DamageTypeSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    descriptions = DamageTypeDescriptionSerializer(many=True)\n\n    class Meta:\n        model = models.DamageType\n        fields = '__all__'\n\nclass DamageTypeSummarySerializer(GameContentSerializer):\n    '''\n    A slimmer DamageTypeSerializer, designed to serialize DamageType FKs on\n    other serializers. Not intended to be used directly with in a ModelViewset.\n    '''\n    class Meta:\n        model = models.DamageType\n        fields = ['name', 'key', 'url']","position":{"index":184,"start_char":0,"end_char":926},"metadata":{"content_hash":"31e295fc2ebb3f4f"},"created_at":"2026-01-14T02:19:16.189Z"}
{"chunk_id":"eb03196f93335c7926a0fa1429a5ab2f","source_id":"2543b2e25e747162","text":"\"\"\"Serializers for GameSystem, License, Publisher, and Document models.\"\"\"\nfrom rest_framework import serializers\nfrom .abstracts import GameContentSerializer\n\nfrom api_v2 import models\n\nclass GameSystemSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n\n    class Meta:\n        model = models.GameSystem\n        fields = '__all__'\n\nclass GameSystemSummarySerializer(serializers.ModelSerializer):\n    '''\n    A slimmer GameSystemSerializer, designed to serialize GameSystem FKs on \n    other serializers. Not intended to be used directly with in a ModelViewset.\n    '''\n    class Meta:\n        model = models.GameSystem\n        fields = ['name', 'key', 'url']\n\n\nclass LicenseSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n\n    class Meta:\n        model = models.License\n        fields = '__all__'\n\nclass LicenseSummarySerializer(GameContentSerializer):\n    '''\n    A slimmer LicenseSerializer, designed to serialize License FKs on other \n    serializers. Not intended to be used directly with in a ModelViewset.\n    '''\n    class Meta:\n        model = models.License\n        fields = ['name', 'key', 'url']\n\nclass PublisherSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n\n    class Meta:\n        model = models.Publisher\n        fields = '__all__'\n\nclass PublisherSummarySerializer(GameContentSerializer):\n    '''\n    A slimmer PublisherSerializer, designed to serialize Publisher FKs on other\n    serializers. Not intended to ","position":{"index":185,"start_char":0,"end_char":1500},"metadata":{"content_hash":"a089c821d02057c2"},"created_at":"2026-01-14T02:19:16.896Z"}
{"chunk_id":"e402241adbe2eb193403a5ec18414bda","source_id":"2543b2e25e747162","text":"izer(GameContentSerializer):\n    '''\n    A slimmer PublisherSerializer, designed to serialize Publisher FKs on other\n    serializers. Not intended to be used directly with in a ModelViewset.\n    '''\n    class Meta:\n        model = models.Publisher\n        fields = ['name', 'key', 'url']\n\nclass DocumentSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    licenses = LicenseSummarySerializer(read_only=True, many=True)\n    publisher = PublisherSummarySerializer(read_only=True)\n    gamesystem = GameSystemSummarySerializer(read_only=True)\n    display_name = serializers.SerializerMethodField()\n\n    def get_display_name(self, obj):\n        return obj.display_name_or_name\n\n    class Meta:\n        model = models.Document\n        fields = '__all__'\n\nclass DocumentSummarySerializer(GameContentSerializer):\n    '''\n    A slimmer DocumentSerializer, designed to serialize Documents FKs on other\n    serializers. Not intended to be used directly with in a ModelViewset.\n    '''\n    publisher = PublisherSummarySerializer()\n    gamesystem = GameSystemSummarySerializer()\n    display_name = serializers.SerializerMethodField()\n\n    def get_display_name(self, obj):\n        return obj.display_name_or_name\n\n    class Meta:\n        model = models.Document\n        fields = ['name', 'key', 'type', 'display_name', 'publisher', 'gamesystem', 'permalink']","position":{"index":186,"start_char":1350,"end_char":2718},"metadata":{"content_hash":"002b143a843f430b"},"created_at":"2026-01-14T02:19:16.896Z"}
{"chunk_id":"717ea9f009f4c9a702d5675abf5af066","source_id":"8be953efb8a6abc3","text":"\"\"\"Serializer for the Environment model.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\n\nclass EnvironmentSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n\n    class Meta:\n        model = models.Environment\n        fields = '__all__'\n\nclass EnvironmentSummarySerializer(GameContentSerializer):\n    '''\n    A slimmer EnvironmentSerializer, designed to serialize Enviroment FKs on\n    other serializers. ie. The `environments` field on the CreatureSerializer.\n    Not intended to be used directly in a ModelViewset.\n    '''\n    class Meta:\n        model = models.Environment\n        fields = ['name', 'key', 'url']","position":{"index":187,"start_char":0,"end_char":705},"metadata":{"content_hash":"ad0fe71a43f236a5"},"created_at":"2026-01-14T02:19:17.515Z"}
{"chunk_id":"e2bd22ff7c340eb7c7af6c36d4d15435","source_id":"3d3d832405df89b0","text":"\"\"\"Serializer for the FeatBenefitSerializer and FeatSerializer models.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .document import DocumentSummarySerializer\n\nclass FeatBenefitSerializer(GameContentSerializer):\n    class Meta:\n        model = models.FeatBenefit\n        fields = ['desc']\n\nclass FeatSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    has_prerequisite = serializers.ReadOnlyField()\n    benefits = FeatBenefitSerializer(many=True)\n    document = DocumentSummarySerializer()\n\n    class Meta:\n        model = models.Feat\n        fields = '__all__'","position":{"index":188,"start_char":0,"end_char":662},"metadata":{"content_hash":"27b255d8b5a73914"},"created_at":"2026-01-14T02:19:17.903Z"}
{"chunk_id":"1a218d4a98d6f0819ab6c7a4f9dea562","source_id":"c64dd18dd7f72131","text":"\"\"\"Serializer for the Image model.\"\"\"\n\nfrom rest_framework import serializers\nfrom .abstracts import GameContentSerializer\nfrom .document import DocumentSummarySerializer\n\nfrom api_v2 import models\n\nclass ImageSummarySerializer(GameContentSerializer):\n    class Meta:\n        model = models.Image\n        fields = ['name', 'key', 'url', 'file_url', 'alt_text', 'attribution']\n\nclass ImageSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    file_url = serializers.ReadOnlyField()\n    document = DocumentSummarySerializer()\n\n    class Meta:\n        model = models.Image\n        fields = ['name', 'key', 'file_url', 'alt_text', 'attribution', 'document']","position":{"index":189,"start_char":0,"end_char":676},"metadata":{"content_hash":"74501347c723a99f"},"created_at":"2026-01-14T02:19:18.280Z"}
{"chunk_id":"b1a1acdca73890c6fc0ef57d5fafa20a","source_id":"eafc791729cec9b9","text":"\"\"\"Serializer for the Item, Itemset, armor, and weapon models\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .damagetype import DamageTypeSummarySerializer\nfrom .document import DocumentSummarySerializer\nfrom .size import SizeSummarySerializer\nfrom drf_spectacular.utils import extend_schema_field\nfrom drf_spectacular.types import OpenApiTypes\n\n\nclass ArmorSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    ac_display = serializers.ReadOnlyField()\n    category = serializers.ReadOnlyField()\n    document = DocumentSummarySerializer()\n\n    class Meta:\n        model = models.Armor\n        fields = '__all__'\n\nclass ArmorSummarySerializer(GameContentSerializer):\n    '''\n    A slightly slimmer ArmorSerializer, designed to serialize Armor FKs on\n    other serializers. ie. The `armor` field on the ItemSerializer. Not \n    intended to be used directly in a ModelViewset.\n    '''\n    class Meta:\n        model = models.Armor\n        fields = [\n            'name',\n            'key',\n            'url',\n            'category',\n            'ac_base',\n            'ac_display',\n            'ac_add_dexmod',\n            'ac_cap_dexmod',\n            'grants_stealth_disadvantage',\n            'strength_score_required',\n        ]\n\nclass WeaponPropertySerializer(GameContentSerializer):\n    class Meta:\n        model = models.WeaponProperty\n        fields = ['key', 'name', 'desc', 'document', 'url', 'type'","position":{"index":190,"start_char":0,"end_char":1500},"metadata":{"content_hash":"5aaabae2095c1156"},"created_at":"2026-01-14T02:19:18.916Z"}
{"chunk_id":"34a181f09af1fdb880a5a98750390b26","source_id":"eafc791729cec9b9","text":"lizer(GameContentSerializer):\n    class Meta:\n        model = models.WeaponProperty\n        fields = ['key', 'name', 'desc', 'document', 'url', 'type']\n\nclass WeaponPropertySummarySerializer(GameContentSerializer):\n    class Meta:\n        model = models.WeaponProperty\n        fields = ['name', 'type', 'url', 'desc']\n\nclass WeaponPropertyAssignmentSerializer(GameContentSerializer):\n    property = WeaponPropertySummarySerializer()\n\n    class Meta:\n        model = models.WeaponPropertyAssignment\n        fields = ['property', 'detail']\n\nclass WeaponSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    document = DocumentSummarySerializer()\n    properties = serializers.SerializerMethodField()\n    damage_type = DamageTypeSummarySerializer()\n    ranged_attack_possible = serializers.ReadOnlyField()\n    range_melee = serializers.ReadOnlyField()\n    distance_unit = serializers.SerializerMethodField()\n\n    class Meta:\n        model = models.Weapon\n        fields = '__all__'\n\n    # todo: type is any\n    @extend_schema_field(OpenApiTypes.STR)\n    def get_distance_unit(self, Weapon):\n        return Weapon.get_distance_unit\n\n    def get_properties(self, instance):\n        properties = instance.properties.all().order_by(\"pk\")\n        return WeaponPropertyAssignmentSerializer(properties, context={'request': None}, many=True).data\n\nclass WeaponSummarySerializer(GameContentSerializer):\n    '''\n    A (slightly) more slender version of the WeaponSerializer. Designed for \n  ","position":{"index":191,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"70f70120f206bdbc"},"created_at":"2026-01-14T02:19:18.916Z"}
{"chunk_id":"7a7610ddbeec82bf45bbc7e2d7f1cfec","source_id":"eafc791729cec9b9","text":"e).data\n\nclass WeaponSummarySerializer(GameContentSerializer):\n    '''\n    A (slightly) more slender version of the WeaponSerializer. Designed for \n    serializing FKs to the Weapons table in other serializers – ie. the \n    `\"weapon\"` field on the ItemSerializer\n    '''\n    damage_type = DamageTypeSummarySerializer()\n    is_martial = serializers.ReadOnlyField()\n    is_melee = serializers.ReadOnlyField()\n    distance_unit = serializers.SerializerMethodField()\n    properties = WeaponPropertyAssignmentSerializer(many=True, read_only=True)\n\n    class Meta:\n        model = models.Weapon\n        fields = [\n            'name',\n            'key',\n            'url',\n            'damage_type',\n            'damage_dice',\n            'properties',\n            'is_melee',\n            'is_simple',\n            'is_martial',\n            'is_improvised',\n            'distance_unit',\n        ]\n    \n    @extend_schema_field(OpenApiTypes.STR)\n    def get_distance_unit(self, Weapon):\n        return Weapon.get_distance_unit\n    \nclass ItemRaritySerializer(GameContentSerializer):\n    class Meta:\n        model = models.ItemRarity\n        fields = ['name', 'url', 'key', 'rank']\n\nclass ItemCategorySerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    document = DocumentSummarySerializer()\n    class Meta:\n        model = models.ItemCategory\n        fields = '__all__'\n\nclass ItemCategorySummarySerializer(GameContentSerializer):\n    class Meta:\n        model = models.ItemCategory\n","position":{"index":192,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"2199c0fe8ed70f6c"},"created_at":"2026-01-14T02:19:18.916Z"}
{"chunk_id":"82ba457673d00c03a19b916513aa5c9b","source_id":"eafc791729cec9b9","text":"mCategory\n        fields = '__all__'\n\nclass ItemCategorySummarySerializer(GameContentSerializer):\n    class Meta:\n        model = models.ItemCategory\n        fields = ['name', 'key', 'url']\n\nclass ItemSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    is_magic_item = serializers.ReadOnlyField()\n    weapon = WeaponSummarySerializer()\n    armor = ArmorSummarySerializer()\n    document = DocumentSummarySerializer()\n    category = ItemCategorySummarySerializer()\n    rarity = ItemRaritySerializer()\n    #damage_immunities = DamageTypeSummarySerializer(many=True)\n    size = SizeSummarySerializer()\n    weight_unit = serializers.SerializerMethodField()\n    \n    @extend_schema_field(OpenApiTypes.STR)\n    def get_weight_unit(self, item):\n        return item.get_weight_unit()\n\n    class Meta:\n        model = models.Item\n        fields = [\n            'url',\n            'key',\n            'name',\n            'desc',\n            'category',\n            'rarity',\n            'is_magic_item',\n            'weapon',\n            'armor',\n            'size',\n            'weight',\n            'weight_unit',\n            'cost',\n            'requires_attunement',\n            'attunement_detail',\n            'document',]\n\n\nclass ItemSummarySerializer(GameContentSerializer):\n    class Meta:\n        model = models.Item\n        fields = ['name', 'key', 'url']\n\n\n\nclass ItemSetSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    items = ItemSummarySerializ","position":{"index":193,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"03dd122885f8089d"},"created_at":"2026-01-14T02:19:18.916Z"}
{"chunk_id":"e7f09510cba5516c8537b3b9c20dc983","source_id":"eafc791729cec9b9","text":"elds = ['name', 'key', 'url']\n\n\n\nclass ItemSetSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    items = ItemSummarySerializer(many=True, read_only=True)\n\n    class Meta:\n        model = models.ItemSet\n        fields = '__all__'","position":{"index":194,"start_char":5400,"end_char":5654},"metadata":{"content_hash":"010cd9ca340fba45"},"created_at":"2026-01-14T02:19:18.916Z"}
{"chunk_id":"ad6870ae09688ebf89c9e27ca22c077b","source_id":"29645464d97d8e95","text":"\"\"\"Serializer for the Language model.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .document import DocumentSummarySerializer\n\nclass LanguageSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    document = DocumentSummarySerializer()\n    class Meta:\n        model = models.Language\n        fields = '__all__'\n\nclass LanguageSummarySerializer(GameContentSerializer):\n    \"\"\"\n    This serializer is used for FKs to the Language model from other \n    serializers. ie. for the languages spoken by creatures on the \n    CreatureSerializer.\n    \"\"\"\n    key = serializers.ReadOnlyField()\n    class Meta:\n        model = models.Language\n        fields = ['name', 'key', 'url', 'desc']","position":{"index":195,"start_char":0,"end_char":775},"metadata":{"content_hash":"fe7381fed91d1e31"},"created_at":"2026-01-14T02:19:19.507Z"}
{"chunk_id":"60c70993bebb6200a3067ce8bc39d4c4","source_id":"d97ada39e5aa7016","text":"\"\"\" Serializer for the Rule model \"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .document import DocumentSummarySerializer\n\nclass RuleSerializer(GameContentSerializer):\n  class Meta:\n    model = models.Rule\n    fields = '__all__'\n\nclass RuleSetSerializer(GameContentSerializer):\n  document = DocumentSummarySerializer()\n  rules = RuleSerializer(many=True)\n  class Meta:\n    model = models.RuleSet\n    fields = ['name', 'key', 'document', 'desc', 'rules']","position":{"index":196,"start_char":0,"end_char":530},"metadata":{"content_hash":"218ede09f233d9ea"},"created_at":"2026-01-14T02:19:19.998Z"}
{"chunk_id":"c722589d91165a9773802e97d006f01a","source_id":"1a64d0b95a88dd59","text":"from rest_framework import serializers\nfrom api_v2 import models\nfrom .abstracts import GameContentSerializer\nfrom .document import DocumentSummarySerializer\n\nclass ServiceSerializer(GameContentSerializer):\n  key = serializers.ReadOnlyField()\n  document = DocumentSummarySerializer()\n\n  class Meta:\n    model = models.Service\n    fields = '__all__'","position":{"index":197,"start_char":0,"end_char":348},"metadata":{"content_hash":"a7b5a479c8e16e4a"},"created_at":"2026-01-14T02:19:20.530Z"}
{"chunk_id":"2ec849867c239159cddabf7e8e4005d0","source_id":"0354a53e7e544d7e","text":"\"\"\"Serializer for the Size model.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .document import DocumentSummarySerializer\nfrom drf_spectacular.utils import extend_schema_field\nfrom drf_spectacular.types import OpenApiTypes\n\nclass SizeSerializer(GameContentSerializer):\n    \"\"\"Serializer for the Size type\"\"\"\n    key = serializers.ReadOnlyField()\n    document = DocumentSummarySerializer()\n    distance_unit = serializers.SerializerMethodField()\n\n    class Meta:\n        model = models.Size\n        fields = '__all__'\n    \n    # todo: model typed as any\n    @extend_schema_field(OpenApiTypes.STR)\n    def get_distance_unit(self, Size):\n        return Size.get_distance_unit\n\nclass SizeSummarySerializer(GameContentSerializer):\n    '''\n    A slimmer SizeSerializer, designed to serialize Size FKs on other\n    serializers. ie. The `size` field on the CreatureSerializer. Not intended\n    to be used directly in a ModelViewset.\n    '''\n    class Meta:\n        model = models.Size\n        fields = ['name', 'key', 'url']","position":{"index":198,"start_char":0,"end_char":1092},"metadata":{"content_hash":"e27023a5f54b95ec"},"created_at":"2026-01-14T02:19:21.023Z"}
{"chunk_id":"828b1efdefdbdb3c86cc0f750a6d2aff","source_id":"0ec3c26e5e9e6e4f","text":"\"\"\"Serializers for the Trait and Species models.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .document import DocumentSummarySerializer\n\nclass SpeciesTraitSerializer(GameContentSerializer):\n\n    class Meta:\n        model = models.SpeciesTrait\n        fields = ['name', 'desc', 'type', 'order']\n\n\nclass SpeciesSerializer(GameContentSerializer):\n    key = serializers.ReadOnlyField()\n    is_subspecies = serializers.ReadOnlyField()\n    document = DocumentSummarySerializer()\n    \n    traits = SpeciesTraitSerializer(many=True)\n\n    class Meta:\n        model = models.Species\n        fields = '__all__'","position":{"index":199,"start_char":0,"end_char":676},"metadata":{"content_hash":"a8018afa3849964d"},"created_at":"2026-01-14T02:19:21.627Z"}
{"chunk_id":"c34848eb2c2bf57390d93e82b81350ce","source_id":"155451bead39b282","text":"\"\"\"Serializers for the Trait and Race models.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models\n\nfrom .abstracts import GameContentSerializer\nfrom .document import DocumentSummarySerializer\nfrom .characterclass import CharacterClassSummarySerializer\n\nfrom drf_spectacular.utils import extend_schema_field\nfrom drf_spectacular.types import OpenApiTypes\n\nclass SpellSchoolSerializer(GameContentSerializer):\n    class Meta:\n        model = models.SpellSchool\n        fields='__all__'\n\nclass SpellSchoolSummarySerializer(GameContentSerializer):\n    '''\n    A slimmer SpellSchoolSerializer, designed to serialize Spell School FKs on \n    other serializers. ie. The `school` field on the SpellSerializer. Not\n    intended to be used directly in a ModelViewset.\n    '''\n    class Meta:\n        model = models.SpellSchool\n        fields = ['name', 'key', 'url']\n\nclass SpellCastingOptionSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = models.SpellCastingOption\n        exclude = ['id','parent']\n\n\nclass SpellSerializer(GameContentSerializer):\n    document = DocumentSummarySerializer()\n    key = serializers.ReadOnlyField()\n    casting_options = SpellCastingOptionSerializer(many=True)\n    school = SpellSchoolSummarySerializer()\n    classes = CharacterClassSummarySerializer(many=True)\n    \n    range_unit = serializers.SerializerMethodField()\n    shape_size_unit = serializers.SerializerMethodField()\n\n    # todo: model typed as any\n    @extend_schema_field(Ope","position":{"index":200,"start_char":0,"end_char":1500},"metadata":{"content_hash":"4a7f2620a1e029ba"},"created_at":"2026-01-14T02:19:22.083Z"}
{"chunk_id":"bd11a56307b472f901184e35bc0f6bfe","source_id":"155451bead39b282","text":"alizers.SerializerMethodField()\n    shape_size_unit = serializers.SerializerMethodField()\n\n    # todo: model typed as any\n    @extend_schema_field(OpenApiTypes.STR)\n    def get_range_unit(self, spell):\n        return spell.get_range_unit()\n\n    #todo: model typed as any\n    @extend_schema_field(OpenApiTypes.STR)\n    def get_shape_size_unit(self, spell):\n        return spell.get_shape_size_unit()\n\n\n    class Meta:\n        model = models.Spell\n        fields = '__all__'","position":{"index":201,"start_char":1350,"end_char":1822},"metadata":{"content_hash":"c23739a8a9fe7fdb"},"created_at":"2026-01-14T02:19:22.083Z"}
{"chunk_id":"8f78831d671a65253f6f498b966227bf","source_id":"584ce18da301fa11","text":"\"\"\"The initialization for views for open5e's api v2.\"\"\"\n\nfrom .background import BackgroundFilterSet, BackgroundViewSet\n\nfrom .creature import CreatureFilterSet, CreatureViewSet\nfrom .creature import CreatureTypeViewSet\nfrom .creature import CreatureSetViewSet\n\nfrom .document import DocumentViewSet\nfrom .document import GameSystemViewSet\nfrom .document import PublisherViewSet\nfrom .document import LicenseViewSet\n\nfrom .feat import FeatFilterSet, FeatViewSet\n\nfrom .species import SpeciesFilterSet, SpeciesViewSet\n\nfrom .item import ItemFilterSet, ItemViewSet, MagicItemViewSet\nfrom .item import ItemSetFilterSet, ItemSetViewSet\nfrom .item import ItemCategoryViewSet\nfrom .item import ItemRarityViewSet\nfrom .item import ArmorFilterSet, ArmorViewSet\nfrom .item import WeaponFilterSet, WeaponViewSet\n\nfrom .damagetype import DamageTypeViewSet\n\nfrom .language import LanguageFilterSet, LanguageViewSet\n\nfrom .alignment import AlignmentFilterSet, AlignmentViewSet\n\nfrom .condition import ConditionViewSet\n\nfrom .spell import SpellViewSet, SpellSchoolViewSet\n\nfrom .characterclass import CharacterClassViewSet\n\nfrom .size import SizeViewSet\n\nfrom .rule import RuleViewSet, RuleSetViewSet\n\nfrom .enum import get_enums\n\nfrom .environment import EnvironmentViewSet\n\nfrom .ability import AbilityFilterSet, AbilityViewSet\nfrom .ability import SkillFilterSet, SkillViewSet\n\nfrom .image import ImageViewSet\n\nfrom .weaponproperty import WeaponPropertyViewSet\n\nfrom .service import ServiceViewSet","position":{"index":202,"start_char":0,"end_char":1486},"metadata":{"content_hash":"eb40c795ec05ba24"},"created_at":"2026-01-14T02:19:22.431Z"}
{"chunk_id":"5d5d68715366c5303c337ef2ef0976d9","source_id":"4356256443f56d3e","text":"from rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\nfrom .mixins import EagerLoadingMixin\n\nclass AbilityFilterSet(FilterSet):\n    class Meta:\n        model = models.Ability\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact','contains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\nclass AbilityViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of abilities.\n    retrieve: API endpoint for returning a particular ability.\n    \"\"\"\n    queryset = models.Ability.objects.all().order_by('pk')\n    serializer_class = serializers.AbilitySerializer\n    filterset_class = AbilityFilterSet\n\n\nclass SkillFilterSet(FilterSet):\n    class Meta:\n        models.Skill\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact','contains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\n\nclass SkillViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of skills.\n    retrieve: API endpoint for returning a particular skill.\n    \"\"\"\n    queryset = models.Skill.objects.all().order_by('pk')\n    serializer_class = serializers.SkillSerializer\n    filterset_class = Ski","position":{"index":203,"start_char":0,"end_char":1500},"metadata":{"content_hash":"64c0d6b47838ac7b"},"created_at":"2026-01-14T02:19:23.070Z"}
{"chunk_id":"0fc67038fa1d1702a786ebda526aa527","source_id":"4356256443f56d3e","text":"r skill.\n    \"\"\"\n    queryset = models.Skill.objects.all().order_by('pk')\n    serializer_class = serializers.SkillSerializer\n    filterset_class = SkillFilterSet","position":{"index":204,"start_char":1350,"end_char":1511},"metadata":{"content_hash":"79373ebb67beb8d5"},"created_at":"2026-01-14T02:19:23.070Z"}
{"chunk_id":"21cd75800377faecde8dc5ec800839f6","source_id":"5f1d1564edb110b9","text":"from rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\n\nfrom .mixins import EagerLoadingMixin\n\nclass AlignmentFilterSet(FilterSet):\n    class Meta:\n        model = models.Alignment\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact','contains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\nclass AlignmentViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of alignments.\n    retrieve: API endpoint for returning a particular alignment.\n    \"\"\"\n    queryset = models.Alignment.objects.all().order_by('pk')\n    serializer_class = serializers.AlignmentSerializer\n    filterset_class = AlignmentFilterSet\n\n    prefetch_related_fields = ['document']","position":{"index":205,"start_char":0,"end_char":921},"metadata":{"content_hash":"78873d419894b854"},"created_at":"2026-01-14T02:19:23.807Z"}
{"chunk_id":"d026a8da9ead6ef11808db6f8641ae0b","source_id":"b00709d210daa864","text":"\"\"\"Viewset and Filterset for the Background Serializers.\"\"\"\nfrom rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\nfrom .mixins import EagerLoadingMixin\n\nclass BackgroundFilterSet(FilterSet):\n    class Meta:\n        model = models.Background\n        fields = {\n            'key': ['in', 'iexact', 'exact'],\n            'name': ['iexact', 'exact', 'icontains'],\n            'document__key': ['in', 'iexact', 'exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\n\nclass BackgroundViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of backgrounds.\n    retrieve: API endpoint for returning a particular background.\n    \"\"\"\n    queryset = models.Background.objects.all().order_by('pk')\n    serializer_class = serializers.BackgroundSerializer\n    filterset_class = BackgroundFilterSet\n\n    prefetch_related_fields = [\n        'benefits',\n        'document',\n        'document__publisher',\n        'document__gamesystem'\n    ]","position":{"index":206,"start_char":0,"end_char":1089},"metadata":{"content_hash":"8a2e87335cf3cf68"},"created_at":"2026-01-14T02:19:24.274Z"}
{"chunk_id":"b415fb2f192d343ab64a287ae2d47d03","source_id":"139c2792a9a66a9a","text":"\"\"\"Viewset and Filterset for the CharacterClass Serializers.\"\"\"\nfrom rest_framework import viewsets\n\nfrom django_filters import FilterSet\nfrom django_filters import BooleanFilter\nfrom .mixins import EagerLoadingMixin\n\nfrom api_v2 import models\nfrom api_v2 import serializers\n\n\nclass CharacterClassFilterSet(FilterSet):\n    is_subclass = BooleanFilter(field_name='subclass_of', lookup_expr='isnull', exclude=True)\n\n    class Meta:\n        model = models.CharacterClass\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact','contains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n            'subclass_of': ['exact']\n        }\n\n\nclass CharacterClassViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of classes.\n    retrieve: API endpoint for returning a particular class.\n    \"\"\"\n    queryset = models.CharacterClass.objects.all().order_by('pk')\n    serializer_class = serializers.CharacterClassSerializer\n    filterset_class = CharacterClassFilterSet\n\n    select_related_fields = []\n    prefetch_related_fields = [\n        'document',\n        'features',\n        'features__feature_items',\n        'primary_abilities',\n        'saving_throws',\n        'subclass_of',\n    ]","position":{"index":207,"start_char":0,"end_char":1360},"metadata":{"content_hash":"95aea74bd0115485"},"created_at":"2026-01-14T02:19:24.695Z"}
{"chunk_id":"81e72efc12cbf5743312692627a2ec29","source_id":"b98c84971accfec1","text":"from rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\nfrom .mixins import EagerLoadingMixin\n\nclass ConditionFilterSet(FilterSet):\n    class Meta:\n        model = models.Condition\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact','contains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\n\nclass ConditionViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of conditions.\n    retrieve: API endpoint for returning a particular condition.\n    \"\"\"\n    queryset = models.Condition.objects.all().order_by('pk')\n    serializer_class = serializers.ConditionSerializer\n    filterset_class = ConditionFilterSet\n\n    select_related_fields = []\n    prefetch_related_fields = ['document__gamesystem',\n                                'icon']","position":{"index":208,"start_char":0,"end_char":1004},"metadata":{"content_hash":"5278f12bed07376d"},"created_at":"2026-01-14T02:19:30.380Z"}
{"chunk_id":"2e3f81a1b4232d77d8d6a3d98efbdd61","source_id":"2835fab5859e9143","text":"from rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\n\nfrom .mixins import EagerLoadingMixin\n\nclass CreatureFilterSet(FilterSet):\n    '''This is the filterset class for creatures.'''\n\n    class Meta:\n        model = models.Creature\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact', 'icontains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n            'size': ['exact'],\n            'category': ['exact', 'iexact'],\n            'subcategory': ['exact', 'iexact'],\n            'type': ['exact'],\n            'challenge_rating_decimal': ['exact','lt','lte','gt','gte'],\n            'armor_class': ['exact','lt','lte','gt','gte'],\n            'ability_score_strength': ['exact','lt','lte','gt','gte'],\n            'ability_score_dexterity': ['exact','lt','lte','gt','gte'],\n            'ability_score_constitution': ['exact','lt','lte','gt','gte'],\n            'ability_score_intelligence': ['exact','lt','lte','gt','gte'],\n            'ability_score_wisdom': ['exact','lt','lte','gt','gte'],\n            'ability_score_charisma': ['exact','lt','lte','gt','gte'],\n            'saving_throw_strength': ['isnull'],\n            'saving_throw_dexterity': ['isnull'],\n            'saving_throw_constitution': ['isnull'],\n            'saving_throw_intelligence': ['isnull'],\n            'saving_thro","position":{"index":209,"start_char":0,"end_char":1500},"metadata":{"content_hash":"c0aa1e65d840cd7c"},"created_at":"2026-01-14T02:19:31.011Z"}
{"chunk_id":"0139e9c0488234d85c69e6a0eb0b7f1c","source_id":"2835fab5859e9143","text":"erity': ['isnull'],\n            'saving_throw_constitution': ['isnull'],\n            'saving_throw_intelligence': ['isnull'],\n            'saving_throw_wisdom': ['isnull'],\n            'saving_throw_charisma': ['isnull'],\n            'skill_bonus_acrobatics': ['isnull'],\n            'skill_bonus_animal_handling': ['isnull'],\n            'skill_bonus_arcana': ['isnull'],\n            'skill_bonus_athletics': ['isnull'],\n            'skill_bonus_deception': ['isnull'],\n            'skill_bonus_history': ['isnull'],\n            'skill_bonus_insight': ['isnull'],\n            'skill_bonus_intimidation': ['isnull'],\n            'skill_bonus_investigation': ['isnull'],\n            'skill_bonus_medicine': ['isnull'],\n            'skill_bonus_nature': ['isnull'],\n            'skill_bonus_perception': ['isnull'],\n            'skill_bonus_performance': ['isnull'],\n            'skill_bonus_persuasion': ['isnull'],\n            'skill_bonus_religion': ['isnull'],\n            'skill_bonus_sleight_of_hand': ['isnull'],\n            'skill_bonus_stealth': ['isnull'],\n            'skill_bonus_survival': ['isnull'],\n            'passive_perception': ['exact','lt','lte','gt','gte'],\n        }\n\n\nclass CreatureViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of creatures.\n    retrieve: API endpoint for returning a particular creature.\n    \"\"\"\n    queryset = models.Creature.objects.all().order_by('pk')\n    serializer_class = serializers.Cr","position":{"index":210,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"c3d24d6719296d35"},"created_at":"2026-01-14T02:19:31.011Z"}
{"chunk_id":"3479c06a030a9c6207e9d210ed2a47e0","source_id":"2835fab5859e9143","text":"ndpoint for returning a particular creature.\n    \"\"\"\n    queryset = models.Creature.objects.all().order_by('pk')\n    serializer_class = serializers.CreatureSerializer\n    filterset_class = CreatureFilterSet\n    \n    prefetch_related_fields = [\n        'actions',\n        'actions__attacks',\n        'actions__attacks__damage_type',\n        'actions__attacks__extra_damage_type',\n        'creaturesets',\n        'condition_immunities',\n        'condition_immunities__icon',\n        'damage_immunities',\n        'damage_resistances',\n        'damage_vulnerabilities',\n        'document',\n        'document__publisher',\n        'document__gamesystem',\n        'environments',\n        'languages',\n        'type',\n        'size',\n        'traits',\n    ]\n\nclass CreatureTypeFilterSet(FilterSet):\n    class Meta:\n        model = models.CreatureType\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact','contains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\n\nclass CreatureTypeViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of creatures types.\n    retrieve: API endpoint for returning a particular creature type.\n    \"\"\"\n    queryset = models.CreatureType.objects.all().order_by('pk')\n    serializer_class = serializers.CreatureTypeSerializer\n    filterset_class = CreatureTypeFilterSet\n\n\nclass CreatureSetFilterSet(Filte","position":{"index":211,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"cfd667e9e6de80bf"},"created_at":"2026-01-14T02:19:31.011Z"}
{"chunk_id":"6908f15c792137861b4d31aa453d02c4","source_id":"2835fab5859e9143","text":"rder_by('pk')\n    serializer_class = serializers.CreatureTypeSerializer\n    filterset_class = CreatureTypeFilterSet\n\n\nclass CreatureSetFilterSet(FilterSet):\n    class Meta:\n        model = models.CreatureSet\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact','contains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\n\nclass CreatureSetViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of creature sets, which is similar to tags.\n    retrieve: API endpoint for returning a particular creature set.\n    \"\"\"\n    queryset = models.CreatureSet.objects.all().order_by('pk')\n    serializer_class = serializers.CreatureSetSerializer\n    filterset_class = CreatureSetFilterSet\n\n    prefetch_related_fields = [\n        'creatures__actions',\n        'creatures__condition_immunities',\n        'creatures__damage_resistances',\n        'creatures__damage_immunities',\n        'creatures__damage_vulnerabilities',\n        'creatures__creaturesets',\n        'creatures__document',\n        'creatures__environments',\n        'creatures__size',\n        'creatures__traits',\n        'creatures__type',\n        'creatures__languages',\n    ]","position":{"index":212,"start_char":4050,"end_char":5372},"metadata":{"content_hash":"aae756bc8ba2b154"},"created_at":"2026-01-14T02:19:31.011Z"}
{"chunk_id":"e48c05834492cf70ab65ce5e1540e135","source_id":"c60185a672014b7d","text":"from rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\n\n\nclass DamageTypeFilterSet(FilterSet):\n    class Meta:\n        model = models.DamageType\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact','contains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\n\nclass DamageTypeViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of damage types.\n    retrieve: API endpoint for returning a particular damage type.\n    \"\"\"\n    queryset = models.DamageType.objects.all().order_by('pk')\n    serializer_class = serializers.DamageTypeSerializer\n    filterset_class = DamageTypeFilterSet","position":{"index":213,"start_char":0,"end_char":831},"metadata":{"content_hash":"9205afc93e38a839"},"created_at":"2026-01-14T02:19:31.558Z"}
{"chunk_id":"a6b3a9703ec3c061b70facb03e0b36d2","source_id":"54d0dda795a263d5","text":"\"\"\"Viewsets for the Document, GameSystem, Publisher, and License Serializers.\"\"\"\nfrom rest_framework import viewsets\nfrom django_filters import FilterSet, CharFilter\nfrom django.db.models import JSONField\nfrom .mixins import EagerLoadingMixin\nfrom api_v2 import models\nfrom api_v2 import serializers\n\n\n\nclass GameSystemViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\"\n    list: API Endpoint for returning a set of gamesystems.\n\n    retrieve: API endpoint for return a particular gamesystem.\n    \"\"\"\n    queryset = models.GameSystem.objects.all().order_by('pk')\n    serializer_class = serializers.GameSystemSerializer\n\n\nclass DocumentFilterSet(FilterSet):\n    '''This is the filterset class for Documents.'''\n    \n    class Meta:\n        model = models.Document\n        fields = '__all__'\n        filter_overrides = {\n            JSONField: {\n                'filter_class': CharFilter\n            }\n        }\n\nclass DocumentViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of documents.\n    retrieve: API endpoint for returning a particular document.\n    \"\"\"\n    queryset = models.Document.objects.all().order_by('pk')\n    serializer_class = serializers.DocumentSerializer\n    filterset_class = DocumentFilterSet\n\n    select_related_fields = []\n    prefetch_related_fields = ['licenses', 'gamesystem', 'publisher']\n\n\nclass PublisherViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of publishers.","position":{"index":214,"start_char":0,"end_char":1500},"metadata":{"content_hash":"c7445c9449e99d6b"},"created_at":"2026-01-14T02:19:31.976Z"}
{"chunk_id":"1f68efc175a2e598416620f2bbf2221d","source_id":"54d0dda795a263d5","text":"'gamesystem', 'publisher']\n\n\nclass PublisherViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of publishers.\n    retrieve: API endpoint for returning a particular publisher.\n    \"\"\"\n    queryset = models.Publisher.objects.all().order_by('pk')\n    serializer_class = serializers.PublisherSerializer\n    filterset_fields = '__all__'\n\n\nclass LicenseViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of licenses.\n    retrieve: API endpoint for returning a particular license.\n    \"\"\"\n    queryset = models.License.objects.all().order_by('pk')\n    serializer_class = serializers.LicenseSerializer\n    filterset_fields = '__all__'","position":{"index":215,"start_char":1350,"end_char":2058},"metadata":{"content_hash":"a0b05fab678aa158"},"created_at":"2026-01-14T02:19:31.976Z"}
{"chunk_id":"67972a526ad5ca6d39920e28ed3eac3c","source_id":"2292608722ab74d7","text":"from rest_framework.decorators import api_view\nfrom rest_framework.response import Response\n\nfrom api_v2.models import enums\n\nfrom drf_spectacular.types import OpenApiTypes\nfrom rest_framework import serializers\nfrom drf_spectacular.utils import extend_schema_field, extend_schema_view, extend_schema, inline_serializer\n\n@extend_schema(\n    description=\"API endpoint for enums.\",\n    responses={\n        200: serializers.ListSerializer(\n            child=serializers.DictField(\n                child=serializers.CharField()\n            )\n        )\n    }\n)\n@api_view()\ndef get_enums(_):\n    \"\"\"\n    API endpoint for enums.\n    \"\"\"\n    e = []\n    for key,value in enums.__dict__.items():\n        if not key.startswith(\"__\"):\n            e.append({key:value})\n\n    return Response(e)","position":{"index":216,"start_char":0,"end_char":780},"metadata":{"content_hash":"cb594cb6ca7ebbeb"},"created_at":"2026-01-14T02:19:32.393Z"}
{"chunk_id":"3e55d84a05783f671fef37dad98e8771","source_id":"47a162ca391a20fb","text":"\"\"\" The view for an Environment. \"\"\"\n\nfrom rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\n\n\nclass EnvironmentFilterSet(FilterSet):\n    class Meta:\n        model = models.Environment\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact','contains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\n\n\nclass EnvironmentViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of environments.\n    retrieve: API endpoint for returning a particular environment.\n    \"\"\"\n    queryset = models.Environment.objects.all().order_by('pk')\n    serializer_class = serializers.EnvironmentSerializer\n    filterset_class = EnvironmentFilterSet","position":{"index":217,"start_char":0,"end_char":876},"metadata":{"content_hash":"3725cb7b972bd3a1"},"created_at":"2026-01-14T02:19:32.777Z"}
{"chunk_id":"a1ea141851f8b019525ee2b3b8652d4d","source_id":"6f28a1bcbf44b2c6","text":"from rest_framework import viewsets\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\nfrom .mixins import EagerLoadingMixin\n\nclass FeatFilterSet(FilterSet):\n    class Meta:\n        model = models.Feat\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact', 'icontains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\n\nclass FeatViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of feats.\n    retrieve: API endpoint for returning a particular feat.\n    \"\"\"\n    queryset = models.Feat.objects.all().order_by('pk')\n    serializer_class = serializers.FeatSerializer\n    filterset_class = FeatFilterSet\n\n    select_related_fields = []\n    prefetch_related_fields = ['benefits', 'document']","position":{"index":218,"start_char":0,"end_char":925},"metadata":{"content_hash":"f3be6c60b493eb11"},"created_at":"2026-01-14T02:19:33.304Z"}
{"chunk_id":"2e21a0418c059623ada5e576a25c5cee","source_id":"24d7ee1adc9d2648","text":"from rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\n\nfrom .mixins import EagerLoadingMixin\n\nclass ImageViewSet(viewsets.ReadOnlyModelViewSet):\n    queryset = models.Image.objects.all()\n    serializer_class = serializers.ImageSerializer","position":{"index":219,"start_char":0,"end_char":315},"metadata":{"content_hash":"17c0ff1c842a673f"},"created_at":"2026-01-14T02:19:33.615Z"}
{"chunk_id":"4380064e1e02e7361a5e2a0a612d230a","source_id":"bb5df4102fac20a6","text":"from rest_framework import viewsets\nfrom django_filters import FilterSet, BooleanFilter\n\nfrom api_v2 import models, serializers\nfrom .mixins import EagerLoadingMixin\n\nclass ItemFilterSet(FilterSet):\n    ''' Filter set for the Item model. Used in the ItemViewSet below '''\n\n    is_magic_item = BooleanFilter(\n        label='Magic Items',\n        field_name='rarity',\n        lookup_expr='isnull',\n        exclude=True\n    )\n\n    is_weapon = BooleanFilter(\n        label='Weapons',\n        field_name='weapon',\n        lookup_expr='isnull',\n        exclude=True\n    )\n\n    is_armor = BooleanFilter(\n        label='Armor',\n        field_name='armor',\n        lookup_expr='isnull',\n        exclude=True\n    )\n    \n    # Weapon property filter factory method\n    def weapon_property_filter(property_name):\n        return lambda queryset, name, value: (\n            queryset.filter(weapon__properties__property__name__iexact=property_name)\n        )\n\n    # Filters for weapon properties (using the factory method defined above)\n    is_light = BooleanFilter(label='Light Weapons', method=weapon_property_filter('light'))\n    is_versatile = BooleanFilter(label='Versatile Weapons', method=weapon_property_filter('versatile'))\n    is_thrown = BooleanFilter(label='Thrown Weapons', method=weapon_property_filter('thrown'))\n    is_finesse = BooleanFilter(label='Finesse Weapons', method = weapon_property_filter('finesse'))\n    is_two_handed = BooleanFilter(label='Two-handed Weapons', method=weapon_property_fi","position":{"index":220,"start_char":0,"end_char":1500},"metadata":{"content_hash":"9978f59a8ef64146"},"created_at":"2026-01-14T02:19:34.043Z"}
{"chunk_id":"7441054f8c5425015925f0175ac47cf9","source_id":"bb5df4102fac20a6","text":"'Finesse Weapons', method = weapon_property_filter('finesse'))\n    is_two_handed = BooleanFilter(label='Two-handed Weapons', method=weapon_property_filter('two-handed'))\n\n    class Meta:\n        model = models.Item\n        fields = {\n            'key': ['in', 'iexact'],\n            'name': ['iexact', 'icontains'],\n            'desc': ['icontains'],\n            'cost': ['exact', 'range', 'gt', 'gte', 'lt', 'lte'],\n            'weight': ['exact', 'range', 'gt', 'gte', 'lt', 'lte'],\n            'rarity': ['exact', 'in'],\n            'requires_attunement': ['iexact'],\n            'category': ['in', 'exact'],\n            'document': ['in', 'exact'],\n            'document__key': ['in','iexact'],\n            'document__gamesystem__key': ['in','iexact'],\n        }\n\n# used in ItemViewSet and MagicItemViewSet - factored out for DRYness\nitem_prefetch_fields = [\n    'armor',\n    'category',\n    'damage_immunities',\n    'damage_resistances',\n    'damage_vulnerabilities',\n    'document',\n    'weapon__properties',\n    'weapon__damage_type',\n    'weapon__document',\n    'weapon__properties__property',\n    'rarity',\n    'size',\n]\n\nclass ItemViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of items.\n\n    retrieve: API endpoint for returning a particular item.\n    \"\"\"\n    queryset = models.Item.objects.all().order_by('pk')\n    serializer_class = serializers.ItemSerializer\n    filterset_class = ItemFilterSet\n\n    select_related_fields ","position":{"index":221,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"c0981b8f7e6842b6"},"created_at":"2026-01-14T02:19:34.043Z"}
{"chunk_id":"41a92f94b1c3de76658a75a979841ce4","source_id":"bb5df4102fac20a6","text":"ls.Item.objects.all().order_by('pk')\n    serializer_class = serializers.ItemSerializer\n    filterset_class = ItemFilterSet\n\n    select_related_fields = ['armor', 'weapon']\n    prefetch_related_fields = item_prefetch_fields\n\nclass MagicItemViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of magic items.\n\n    retrieve: API endpoint for returning a particular magic item.\n    \"\"\"\n    queryset = models.Item.objects.filter(rarity__isnull=False).order_by('pk')\n    serializer_class = serializers.ItemSerializer\n    filterset_class = ItemFilterSet\n    \n    select_related_fields = ['armor', 'weapon']\n    prefetch_related_fields = item_prefetch_fields\n\nclass ItemRarityViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of item rarities.\n\n    retrieve: API endpoint for returning a particular item rarity.\n    \"\"\"\n    queryset = models.ItemRarity.objects.all().order_by('pk')\n    serializer_class = serializers.ItemRaritySerializer\n\n\n\nclass ItemSetFilterSet(FilterSet):\n\n    class Meta:\n        model = models.ItemSet\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\n\nclass ItemSetViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\"\n    list: API Endpoint for returning a set of itemsets.\n\n    re","position":{"index":222,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"b3ff88905039efa7"},"created_at":"2026-01-14T02:19:34.043Z"}
{"chunk_id":"f17c2be83cbf63d59004abec1ae1a53b","source_id":"bb5df4102fac20a6","text":"  }\n\n\nclass ItemSetViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\"\n    list: API Endpoint for returning a set of itemsets.\n\n    retrieve: API endpoint for return a particular itemset.\n    \"\"\"\n    queryset = models.ItemSet.objects.all().order_by('pk')\n    serializer_class = serializers.ItemSetSerializer\n    filterset_class = ItemSetFilterSet\n\n    prefetch_related_fields = [\n        'items',\n        'items__document',\n        'items__damage_resistances',\n        'items__damage_immunities',\n        'items__damage_vulnerabilities',\n        'items__armor',\n        'items__category',\n        'items__weapon',\n        'items__weapon__document'\n    ]\n\nclass ItemCategoryViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\"\n    list: API Endpoint for returning a set of item categories.\n\n    retrieve: API endpoint for return a particular item categories.\n    \"\"\"\n    queryset = models.ItemCategory.objects.all().order_by('pk')\n    serializer_class = serializers.ItemCategorySerializer\n\n\nclass WeaponFilterSet(FilterSet):\n\n    # returns a filter method to a given WeaponProperty\n    def weapon_property_filter(property_name):\n        return lambda queryset, name, value: (\n            queryset.filter(properties__property__name__iexact=property_name)\n        )\n\n    is_light = BooleanFilter(label='Is Light', method=weapon_property_filter('light'))\n    is_versatile = BooleanFilter(label='Is Versatile', method=weapon_property_filter('versatile'))\n    is_thrown = BooleanFilter(label='I","position":{"index":223,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"e82ecd0066118062"},"created_at":"2026-01-14T02:19:34.043Z"}
{"chunk_id":"1ea60b718c5360d901230a0933532da0","source_id":"bb5df4102fac20a6","text":"er('light'))\n    is_versatile = BooleanFilter(label='Is Versatile', method=weapon_property_filter('versatile'))\n    is_thrown = BooleanFilter(label='Is Thrown', method=weapon_property_filter('thrown'))\n    is_finesse = BooleanFilter(label='Is Finesse', method = weapon_property_filter('finesse'))\n    is_two_handed = BooleanFilter(label='Is Two-handed', method=weapon_property_filter('two-handed'))\n\n    class Meta:\n        model = models.Weapon\n        fields = {\n            'key': ['in', 'iexact'],\n            'name': ['iexact'],\n            'document__key': ['in','iexact'],\n            'document__gamesystem__key': ['in','iexact'],\n            'damage_dice': ['in','iexact'],\n        }\n\n\nclass WeaponViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of weapons.\n    retrieve: API endpoint for returning a particular weapon.\n    \"\"\"\n    queryset = models.Weapon.objects.all().order_by('pk')\n    serializer_class = serializers.WeaponSerializer\n    filterset_class = WeaponFilterSet\n\n    prefetch_related_fields = ['document', 'damage_type', 'properties__property']\n\nclass ArmorFilterSet(FilterSet):\n\n    class Meta:\n        model = models.Armor\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n            'grants_stealth_disadvantage': ['exact'],\n         ","position":{"index":224,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"41fdcc6ebe94f02c"},"created_at":"2026-01-14T02:19:34.043Z"}
{"chunk_id":"be54f1b5dd48187a341df61796d6e4cb","source_id":"bb5df4102fac20a6","text":"','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n            'grants_stealth_disadvantage': ['exact'],\n            'strength_score_required': ['exact','lt','lte','gt','gte'],\n            'ac_base': ['exact','lt','lte','gt','gte'],\n            'ac_add_dexmod': ['exact'],\n            'ac_cap_dexmod': ['exact'],\n\n        }\n\n\nclass ArmorViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of armor.\n    retrieve: API endpoint for returning a particular armor.\n    \"\"\"\n    queryset = models.Armor.objects.all().order_by('pk')\n    serializer_class = serializers.ArmorSerializer\n    filterset_class = ArmorFilterSet","position":{"index":225,"start_char":6750,"end_char":7438},"metadata":{"content_hash":"7fc61ee2eb84707b"},"created_at":"2026-01-14T02:19:34.043Z"}
{"chunk_id":"63326cc8df9477cc009b76a1706656fc","source_id":"f7c7e3f974d80f6c","text":"from rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\n\nfrom .mixins import EagerLoadingMixin\n\n\nclass LanguageFilterSet(FilterSet):\n    class Meta:\n        model = models.Language\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n            'is_exotic': ['exact'],\n            'is_secret': ['exact']\n        }\n\n\nclass LanguageViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of feats.\n    retrieve: API endpoint for returning a particular feat.\n    \"\"\"\n    queryset = models.Language.objects.all().order_by('pk')\n    serializer_class = serializers.LanguageSerializer\n    filterset_class = LanguageFilterSet\n\n    select_related_fields = []\n    prefetch_related_fields = [\n        'document',\n        'document__gamesystem',\n        'document__publisher',\n    ]","position":{"index":226,"start_char":0,"end_char":1076},"metadata":{"content_hash":"18f6123c0f257985"},"created_at":"2026-01-14T02:19:34.573Z"}
{"chunk_id":"adcc9de968e5ecf1ea07859281ab9d4d","source_id":"37c5eefb3ec77ec2","text":"class EagerLoadingMixin:\n  \"\"\"\n  Mixin to apply eager loading optimisations to a ViewSet.\n  \n  Dynamically applies `selected_related()` for ForeignKey fields and \n  `prefetch_related()` from ManyToMany/reverse relationships. This improves \n  query efficiency and prevents N+1 problems\n  \n  ## Usage\n  1. Make sure your ViewSet inherits from `EagerLoadingMixin` before its base\n  class (ie. ReadOnlyModelViewSet).\n  2. Re-define `select_related_fields` and `prefetch_related_fields` lists on \n  the child ViewSet to specify relationships to optimise.\n  \n  ## Usage Example\n  ```\n    # EagerLoadingMixin inhertired before base-case\n    class CreatureViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n      queryset = models.Creature.objects.all().order_by('pk')\n      serializer_class = serializers.CreatureSerializer\n      filterset_class = CreatureFilterSet\n\n      select_related_fields = []   # ForeignKey relations to optimise with select_related()      \n      prefetch_related_fields = [] # ManyToMany/reverse relations to optimise with prefetch_related()\n  ```\n  \"\"\"\n\n  # Override these lists in child views \n  select_related_fields = [] # ForeignKeys to optimise\n  prefetch_related_fields = [] # ManyToMany & reverse relationships to prefetch\n\n  def get_queryset(self):\n    \"\"\"Override DRF's default get_queryset() method to apply eager loading\"\"\"\n    queryset = super().get_queryset()\n\n    # Get query parameters from request\n    requested_fields = self.request.query_params.get('field","position":{"index":227,"start_char":0,"end_char":1500},"metadata":{"content_hash":"a00b299eef4777e2"},"created_at":"2026-01-14T02:19:34.948Z"}
{"chunk_id":"a77404629237b3a2a69709ce7eb7ec52","source_id":"37c5eefb3ec77ec2","text":" loading\"\"\"\n    queryset = super().get_queryset()\n\n    # Get query parameters from request\n    requested_fields = self.request.query_params.get('fields', '').split(',')\n    depth = int(self.request.query_params.get('depth', 0))\n\n    # if no fields are passed via query param, select/prefetch all fields defined on the view\n    if not requested_fields:\n      queryset = queryset.select_related(*self.select_related_fields)\n      queryset = queryset.prefetch_related(*self.prefetch_related_fields)\n      return queryset\n    \n    # filter selected fields against fields requested by user via query params \n    # this stops Django prefetching data that isn't even returned by this view\n    select_fields = []\n    for field_to_select in self.select_related_fields:\n      if any(field_in_request in field_to_select for field_in_request in requested_fields):\n        select_fields.append(field_to_select)\n    \n    # filter prefetch fields against fields requested by user via query params\n    # this stops Django prefetching data that isn't even returned by this view\n    prefetch_fields = []\n    for field_to_prefetch in self.prefetch_related_fields:\n      if any(field_in_request in field_to_prefetch for field_in_request in requested_fields):\n        prefetch_fields.append(field_to_prefetch)\n\n    # Apply filtered optimisations\n    queryset = queryset.select_related(*select_fields)\n    queryset = queryset.prefetch_related(*prefetch_fields)\n    return queryset","position":{"index":228,"start_char":1350,"end_char":2808},"metadata":{"content_hash":"70671bb22e9aa6d6"},"created_at":"2026-01-14T02:19:34.948Z"}
{"chunk_id":"a37d02a0f29c6af9f7c71f50c4d9929e","source_id":"25882e837e096cd9","text":"from rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\n\nfrom .mixins import EagerLoadingMixin\n\nclass RuleFilterSet(FilterSet):\n    class Meta:\n        model = models.Rule\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact', 'icontains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\nclass RuleViewSet(viewsets.ReadOnlyModelViewSet):\n    queryset = models.Rule.objects.all()\n    serializer_class = serializers.RuleSerializer\n    filterset_class = RuleFilterSet\n\nclass RuleSetFilterSet(FilterSet):\n    class Meta:\n        model = models.RuleSet\n        fields = {\n            'key': ['in', 'exact'],\n            'name': ['exact', 'contains'],\n            'document__key': ['in', 'exact'],\n            'document__gamesystem__key': ['in', 'exact'],\n        }\n\nclass RuleSetViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    queryset = models.RuleSet.objects.all()\n    serializer_class = serializers.RuleSetSerializer\n    filterset_class = RuleSetFilterSet\n\n    select_related_fields = []\n    prefetch_related_fields = [\n      'document',\n      'document__gamesystem',\n      'document__publisher',\n      'rules',\n    ]","position":{"index":229,"start_char":0,"end_char":1341},"metadata":{"content_hash":"8b9645258f1eaf53"},"created_at":"2026-01-14T02:19:35.500Z"}
{"chunk_id":"c32cd5cadf218b7e3703c511a84f66ef","source_id":"1f68833d63e90b80","text":"from rest_framework import viewsets\nfrom api_v2 import models, serializers\nfrom .mixins import EagerLoadingMixin\n\n\nclass ServiceViewSet(viewsets.ReadOnlyModelViewSet, EagerLoadingMixin):\n  queryset = models.Service.objects.all().order_by('pk')\n  serializer_class = serializers.ServiceSerializer\n\n  prefetch_related_fields = ['document']","position":{"index":230,"start_char":0,"end_char":336},"metadata":{"content_hash":"2b419ae4aacedf8b"},"created_at":"2026-01-14T02:19:35.914Z"}
{"chunk_id":"8cc6401fa7be3c69f36070354f2cd913","source_id":"14e627c36f539c74","text":"from rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\nfrom .mixins import EagerLoadingMixin\n\nclass SizeFilterSet(FilterSet):\n    class Meta:\n        model = models.Size\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact','contains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\n\nclass SizeViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of damage types.\n    retrieve: API endpoint for returning a particular damage type.\n    \"\"\"\n    queryset = models.Size.objects.all().order_by('pk')\n    serializer_class = serializers.SizeSerializer\n    filterset_class = SizeFilterSet\n\n    select_related_fields = []\n    prefetch_related_fields = ['document__gamesystem', 'document__publisher']","position":{"index":231,"start_char":0,"end_char":961},"metadata":{"content_hash":"a726ab82364aa759"},"created_at":"2026-01-14T02:19:36.308Z"}
{"chunk_id":"3ebc85c7668f0ee9443cc8dcc58cdddb","source_id":"4393e69f8e5fe778","text":"from rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\n\nfrom .mixins import EagerLoadingMixin\n\nclass SpeciesFilterSet(FilterSet):\n    class Meta:\n        model = models.Species\n        fields = {\n            'key': ['in', 'iexact', 'exact'],\n            'name': ['iexact', 'exact', 'icontains'],\n            'document__key': ['in', 'iexact', 'exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n            'subspecies_of': ['isnull'],\n            'subspecies_of__key':['in', 'iexact', 'exact'],\n        }\n\n\nclass SpeciesViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of species.\n    retrieve: API endpoint for returning a particular species.\n    \"\"\"\n    queryset = models.Species.objects.all().order_by('pk')\n    serializer_class = serializers.SpeciesSerializer\n    filterset_class = SpeciesFilterSet\n\n    select_related_fields = []\n    prefetch_related_fields = [\n        'document',\n        'document__gamesystem',\n        'traits',\n        'subspecies_of'\n    ]","position":{"index":232,"start_char":0,"end_char":1129},"metadata":{"content_hash":"4babc2535b29a7a9"},"created_at":"2026-01-14T02:19:36.807Z"}
{"chunk_id":"1c107f9937a1061357865f3edc1b6e6a","source_id":"50770d417f7520ad","text":"from rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\nfrom .mixins import EagerLoadingMixin\n\nclass SpellFilterSet(FilterSet):\n    class Meta:\n        model = models.Spell\n        fields = {\n            'key': ['in', 'iexact', 'exact'],\n            'name': ['iexact', 'exact', 'contains', 'icontains'],\n            'document__key': ['in', 'iexact', 'exact'],\n            'document__gamesystem__key': ['in', 'iexact', 'exact'],\n            'classes__key': ['in', 'iexact', 'exact'],\n            'classes__name': ['in'],\n            'level': ['exact', 'range', 'gt', 'gte', 'lt', 'lte'],\n            'range': ['exact', 'range', 'gt', 'gte', 'lt', 'lte'],\n            'school__key': ['exact'],\n            'school__name': ['in', 'iexact', 'exact'],\n            'duration': ['in', 'iexact', 'exact'],\n            'concentration': ['exact'],\n            'verbal': ['exact'],\n            'somatic': ['exact'],\n            'material': ['exact'],\n            'material_consumed': ['exact'],\n            'casting_time': ['in', 'iexact', 'exact'],\n        }\n\nclass SpellViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n    \"\"\"\n    list: API endpoint for returning a list of spells.\n    retrieve: API endpoint for returning a particular spell.\n    \"\"\"\n    queryset = models.Spell.objects.all().order_by('pk')\n    serializer_class = serializers.SpellSerializer\n    filterset_class = SpellFilterSet\n\n    select_related_fields ","position":{"index":233,"start_char":0,"end_char":1500},"metadata":{"content_hash":"790406fd6a8544fe"},"created_at":"2026-01-14T02:19:37.235Z"}
{"chunk_id":"fddd84fa73ad1223d86706a95888c236","source_id":"50770d417f7520ad","text":"Spell.objects.all().order_by('pk')\n    serializer_class = serializers.SpellSerializer\n    filterset_class = SpellFilterSet\n\n    select_related_fields = ['document']\n    prefetch_related_fields = [\n        'classes',\n        'document',\n        'school',\n        'document__gamesystem',\n        'document__publisher',\n        'spellcastingoption_set'\n    ]\n\nclass SpellSchoolFilterSet(FilterSet):\n    class Meta:\n        model = models.SpellSchool\n        fields = {\n            'key': ['in', 'iexact', 'exact' ],\n            'name': ['iexact', 'exact','contains'],\n            'document__key': ['in','iexact','exact'],\n            'document__gamesystem__key': ['in','iexact','exact'],\n        }\n\nclass SpellSchoolViewSet(viewsets.ReadOnlyModelViewSet):\n    queryset = models.SpellSchool.objects.all().order_by('pk')\n    serializer_class = serializers.SpellSchoolSerializer\n    filterset_class = SpellSchoolFilterSet","position":{"index":234,"start_char":1350,"end_char":2265},"metadata":{"content_hash":"41828ab95867c4f8"},"created_at":"2026-01-14T02:19:37.235Z"}
{"chunk_id":"e51857da0fce4a529a9c80ec009114b2","source_id":"1ff8c3dc66aab73a","text":"from rest_framework import viewsets\n\nfrom django_filters import FilterSet\n\nfrom api_v2 import models\nfrom api_v2 import serializers\n\nfrom .mixins import EagerLoadingMixin\n\nclass WeaponPropertyFilterSet(FilterSet):\n    class Meta:\n        model = models.WeaponProperty\n        fields = {\n            'key': ['in', 'iexact', 'exact'],\n            'name': ['iexact', 'exact', 'icontains'],\n            'type': ['exact', 'isnull'],\n            'document__key': ['in', 'iexact', 'exact'],\n            'document__gamesystem__key': ['in', 'iexact', 'exact'],\n        }\n\nclass WeaponPropertyViewSet(EagerLoadingMixin, viewsets.ReadOnlyModelViewSet):\n  queryset = models.WeaponProperty.objects.all()\n  serializer_class = serializers.WeaponPropertySerializer\n  filterset_class = WeaponPropertyFilterSet\n\n  prefetch_related_fields = ['document']","position":{"index":235,"start_char":0,"end_char":834},"metadata":{"content_hash":"12daffa9487b8049"},"created_at":"2026-01-14T02:19:37.800Z"}
{"chunk_id":"bc4ee3f3b12d242ceb914b6b289ff2cd","source_id":"365584755f43cb81","text":"import newrelic.agent\n\nclass NewRelicMiddleware:\n    def __init__(self, get_response):\n        self.get_response = get_response\n\n    def __call__(self, request):\n        newrelic.agent.add_custom_parameter(\"referer\", request.META.get('HTTP_REFERER', 'unknown'))\n        newrelic.agent.add_custom_parameter(\"userAgent\", request.META.get('HTTP_USER_AGENT', 'unknown'))\n        newrelic.agent.add_custom_parameter(\"origin\", request.META.get('HTTP_ORIGIN', 'unknown'))\n        newrelic.agent.add_custom_parameter(\"X-Requested-With\", request.META.get('HTTP_X_REQUESTED_WITH', 'unknown'))\n\n        response = self.get_response(request)\n\n        return response\n\nclass ResponseWarningHeaderMiddleware:\n    def __init__(self, get_response):\n        self.get_response = get_response\n\n    def __call__(self, request):\n        response = self.get_response(request)\n        if request.path.startswith('/v1'):\n            response_message = \"299 Deprecated API: use /v2/ instead. /v1/ will be maintained until 2024-12-31.\"\n\n            if request.path in ['/v1/search','/v1/search/']:\n                response_message = \"299 Deprecated API: use /v2/search instead.\"\n \n            response.headers['Warning'] = response_message\n\n        return response","position":{"index":236,"start_char":0,"end_char":1238},"metadata":{"content_hash":"16899e9f6082c8c0"},"created_at":"2026-01-14T02:19:38.412Z"}
{"chunk_id":"50f228e413d7de9f5e6ae75630e6d2ea","source_id":"6f71a83e72548f28","text":"# https://drf-spectacular.readthedocs.io/en/latest/customization.html#step-7-preprocessing-hooks\ndef custom_preprocessing_hook(endpoints):\n\t# Only show api v2 endpoints\n\tendpoints = [\n\t\t(path, path_regex, method, callback) \n\t\tfor (path, path_regex, method, callback) in endpoints \n\t\tif path.startswith('/v2')\n\t]\n\n\treturn endpoints\n\n\n# https://drf-spectacular.readthedocs.io/en/latest/customization.html#step-6-postprocessing-hooks\ndef custom_postprocessing_hook(result, generator, request, public):\n\n\t# Add a oneOf to the SearchResult object field. Couldn't figure out how to do this with @extend_schema_field\n\tresult['components']['schemas']['SearchResult']['properties']['object'] = {\n\t\t'oneOf': [\n\t\t\t{ '$ref': '#/components/schemas/Item' },\n\t\t\t{ '$ref': '#/components/schemas/Creature' },\n\t\t\t{ '$ref': '#/components/schemas/Spell' },\n\t\t\t{ '$ref': '#/components/schemas/CharacterClass' },\n\t\t\t{ '$ref': '#/components/schemas/Race' }\n\t\t]\n\t}\n\n\treturn result","position":{"index":237,"start_char":0,"end_char":956},"metadata":{"content_hash":"faa47d43d4b6d7cc"},"created_at":"2026-01-14T02:19:38.940Z"}
{"chunk_id":"15410bceaaebc919c6134025dc77c6f9","source_id":"3f003d8d790444bf","text":"from rest_framework import routers\n\nclass Open5eAPI(routers.APIRootView):\n    \"\"\"\n    Welcome to the Open5e API.\n    You can review the basic DRF Browseable API here.\n    You can review swagger-ui at /schema/swagger-ui/\n    You can review redoc at /schema/redoc/\n    \"\"\"\n\nclass DocumentedDefaultRouter(routers.DefaultRouter):\n    APIRootView = Open5eAPI","position":{"index":238,"start_char":0,"end_char":353},"metadata":{"content_hash":"01a357237422512d"},"created_at":"2026-01-14T02:19:39.408Z"}
{"chunk_id":"c70b27e56d26ff8b92d24551bfd54585","source_id":"f580fc7f71d858ac","text":"\"\"\"\nDjango settings for server project.\n\nGenerated by 'django-admin startproject' using Django 2.1.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/2.1/topics/settings/\n\nFor the full list of settings and their values, see\nhttps://docs.djangoproject.com/en/2.1/ref/settings/\n\"\"\"\n\nimport os\n\n# Build paths inside the project like this: os.path.join(BASE_DIR, ...)\nBASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\nSTATIC_URL = \"/static/\"\nSTATIC_ROOT = os.path.join(BASE_DIR, \"staticfiles\")\n\n# Extra places for collectstatic to find static files.\nSTATICFILES_DIRS = [\n    os.path.join(BASE_DIR, \"static\")\n\n]\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = os.environ.get(\"OPEN5E_DEBUG\", \"\") != \"False\"\n\n# SECURITY WARNING: keep the secret key used in production secret!\nassert \"SECRET_KEY\" in os.environ, \"Set SECRET_KEY in your .env or local OS!\"\nSECRET_KEY = os.environ[\"SECRET_KEY\"]\n\n# Flags to include v1 data and index.\nINCLUDE_V1_DATA = True\nBUILD_V1_INDEX = False\n\n# Flags to include v2 data\nINCLUDE_V2_DATA = True\n\n# V2 index always includes v1 data (at this time).\nBUILD_V2_INDEX = True\n\n# Added as part of the migration from django 2 to django 3.\n# Not likely to apply in the short term. https://docs.djangoproject.com/en/4.1/ref/settings/#default-auto-field\nDEFAULT_AUTO_FIELD = \"django.db.models.BigAutoField\"\n\n## Always allow connections from localhost, and the SERVER_NAME if it's there in the .env file.\nALLOWED_HOS","position":{"index":239,"start_char":0,"end_char":1500},"metadata":{"content_hash":"e5b3c24c47026308"},"created_at":"2026-01-14T02:19:39.721Z"}
{"chunk_id":"46110a1127eace904d22257ebb65966e","source_id":"f580fc7f71d858ac","text":"O_FIELD = \"django.db.models.BigAutoField\"\n\n## Always allow connections from localhost, and the SERVER_NAME if it's there in the .env file.\nALLOWED_HOSTS = [\n    \"localhost\",\n    os.environ.get(\"SERVER_NAME\", \"\"),\n    \"0.0.0.0\",\n    \"api.open5e.com\",\n    \"api-beta.open5e.com\",\n    \"127.0.0.1\",\n]\n\n\n# Application definition\n\nINSTALLED_APPS = [\n    \"corsheaders\",\n    \"django.contrib.admin\",\n    \"django.contrib.auth\",\n    \"django.contrib.contenttypes\",\n    \"django.contrib.sessions\",\n    \"django.contrib.messages\",\n    \"django.contrib.staticfiles\",\n    'api',\n    'api_v2',\n    'search',\n\t'drf_spectacular',\n    'drf_spectacular_sidecar',\n\n    # downloaded modules\n    \"rest_framework\",\n    \"django_filters\",\n]\n\n\nMIDDLEWARE = [\n    \"corsheaders.middleware.CorsMiddleware\",\n    \"django.middleware.security.SecurityMiddleware\",\n    \"whitenoise.middleware.WhiteNoiseMiddleware\",\n    \"django.contrib.sessions.middleware.SessionMiddleware\",\n    \"django.middleware.common.CommonMiddleware\",\n    \"django.middleware.csrf.CsrfViewMiddleware\",\n    \"django.contrib.auth.middleware.AuthenticationMiddleware\",\n    \"django.contrib.messages.middleware.MessageMiddleware\",\n    \"django.middleware.clickjacking.XFrameOptionsMiddleware\",\n    \"server.middleware.NewRelicMiddleware\",\n    \"server.middleware.ResponseWarningHeaderMiddleware\"\n]\n\nROOT_URLCONF = \"server.urls\"\n\nTEMPLATES = [\n    {\n        \"BACKEND\": \"django.template.backends.django.DjangoTemplates\",\n        \"DIRS\": [os.path.join(BASE_DIR, \"templates\")],\n    ","position":{"index":240,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"cc99dbc59870d6b3"},"created_at":"2026-01-14T02:19:39.721Z"}
{"chunk_id":"247593cc9fd82a506917cdb0f8ecb73e","source_id":"f580fc7f71d858ac","text":"\nTEMPLATES = [\n    {\n        \"BACKEND\": \"django.template.backends.django.DjangoTemplates\",\n        \"DIRS\": [os.path.join(BASE_DIR, \"templates\")],\n        \"APP_DIRS\": True,\n        \"OPTIONS\": {\n            \"context_processors\": [\n                \"django.template.context_processors.debug\",\n                \"django.template.context_processors.request\",\n                \"django.contrib.auth.context_processors.auth\",\n                \"django.contrib.messages.context_processors.messages\",\n            ],\n        },\n    },\n]\n\nWSGI_APPLICATION = \"server.wsgi.application\"\n\nSTATICFILES_STORAGE = \"whitenoise.storage.CompressedManifestStaticFilesStorage\"\n\n# Database\n# https://docs.djangoproject.com/en/2.1/ref/settings/#databases\n\nDATABASES = {\n    \"default\": {\n        \"ENGINE\": \"django.db.backends.sqlite3\",\n        \"NAME\": os.path.join(BASE_DIR, \"db.sqlite3\"),\n    }\n}\n\n\n# Password validation\n# https://docs.djangoproject.com/en/2.1/ref/settings/#auth-password-validators\n\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        \"NAME\": \"django.contrib.auth.password_validation.UserAttributeSimilarityValidator\",\n    },\n    {\n        \"NAME\": \"django.contrib.auth.password_validation.MinimumLengthValidator\",\n    },\n    {\n        \"NAME\": \"django.contrib.auth.password_validation.CommonPasswordValidator\",\n    },\n    {\n        \"NAME\": \"django.contrib.auth.password_validation.NumericPasswordValidator\",\n    },\n]\n\n\n# Internationalization\n# https://docs.djangoproject.com/en/2.1/topics/i18n/\n\nLANGUAGE_CODE = \"en-us\"\n\nTIM","position":{"index":241,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"15c1df7440d480d5"},"created_at":"2026-01-14T02:19:39.721Z"}
{"chunk_id":"945a69ff28b2e406fb109681dca7be6a","source_id":"f580fc7f71d858ac","text":"dation.NumericPasswordValidator\",\n    },\n]\n\n\n# Internationalization\n# https://docs.djangoproject.com/en/2.1/topics/i18n/\n\nLANGUAGE_CODE = \"en-us\"\n\nTIME_ZONE = \"UTC\"\n\nUSE_I18N = True\n\nUSE_L10N = True\n\nUSE_TZ = False\n\n\n# Django REST Framework settings\n\nREST_FRAMEWORK = {\n    # Pagination\n    \"DEFAULT_PAGINATION_CLASS\": \"api.utils.StandardResultsSetPagination\",\n    \n    # Filtering\n    \"DEFAULT_FILTER_BACKENDS\": [\n        \"django_filters.rest_framework.DjangoFilterBackend\",\n        \"rest_framework.filters.OrderingFilter\",\n        \"rest_framework.filters.SearchFilter\",\n    ],\n    \"DEFAULT_AUTHENTICATION_CLASSES\": [],\n    \"DEFAULT_PERMISSION_CLASSES\": [],\n    \"UNAUTHENTICATED_USER\": None,\n\n    # Versioning\n    \"DEFAULT_VERSIONING_CLASS\": \"rest_framework.versioning.NamespaceVersioning\",\n    \"DEFAULT_VERSION\": \"v1\",\n    \"ALLOWED_VERSIONS\": [\"v1\", \"v2\"],\n\n    # Rendering\n    'DEFAULT_RENDERER_CLASSES': [\n        'rest_framework.renderers.JSONRenderer',\n        'rest_framework.renderers.BrowsableAPIRenderer',\n    ],\n    # Parsing\n    'DEFAULT_PARSER_CLASSES': [\n        'rest_framework.parsers.JSONParser',\n        'rest_framework.parsers.FormParser',\n        'rest_framework.parsers.MultiPartParser',\n    ],\n    'DEFAULT_CONTENT_NEGOTIATION_CLASS': 'rest_framework.negotiation.DefaultContentNegotiation',\n\t\n    # OpenAPI Schema Generation\n\t'DEFAULT_SCHEMA_CLASS': 'drf_spectacular.openapi.AutoSchema',\n}\n\n\n# Static files (CSS, JavaScript, Images)\n# https://docs.djangoproject.com/en/2.1/howto","position":{"index":242,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"f130d9fd715b7c4b"},"created_at":"2026-01-14T02:19:39.721Z"}
{"chunk_id":"052ce8d23087c8d535fc32d3e5e48356","source_id":"f580fc7f71d858ac","text":"EFAULT_SCHEMA_CLASS': 'drf_spectacular.openapi.AutoSchema',\n}\n\n\n# Static files (CSS, JavaScript, Images)\n# https://docs.djangoproject.com/en/2.1/howto/static-files/\n\nSTATIC_URL = \"/static/\"\n\nCORS_ORIGIN_ALLOW_ALL = True\n\nCORS_ORIGIN_WHITELIST = (\n    \"https://0.0.0.0\",\n    \"https://0.0.0.0:8888\",\n    \"https://localhost:3333\",\n    \"https://127.0.0.1:3333\",\n    \"https://127.0.0.1:8888\",\n    \"https://localhost:8888\",\n)\n\nSECURE_PROXY_SSL_HEADER = (\n    \"HTTP_X_FORWARDED_PROTO\",\n    \"https\",\n)  # This setting allows the header from NGINX to tell us that the request is secured.\n\nSPECTACULAR_SETTINGS = {\n    'VERSION' : 'development',\n    'TITLE': 'Open5e',\n    'DESCRIPTION': 'The Open5e API. See [https://github.com/open5e/open5e-api] for more information.',\n    'SERVERS': [\n        {'url': 'https://api.open5e.com', 'description': 'Production server'},\n        {'url': 'https://api-beta.open5e.com', 'description': 'Beta server'},\n        {'url': 'http://localhost:8000', 'description': 'Localhost'}],\n\t'PREPROCESSING_HOOKS': [\n        'server.oas.custom_preprocessing_hook'\n    ],\n    'POSTPROCESSING_HOOKS': [\n        'server.oas.custom_postprocessing_hook'\n    ],\n    'SWAGGER_UI_DIST': 'SIDECAR',\n    'SWAGGER_UI_FAVICON_HREF': 'SIDECAR',\n    'REDOC_DIST': 'SIDECAR',\n    'SORT_OPERATIONS': False,  \n    'SORT_OPERATION_PARAMETERS': False,  # Preserve parameter order from code\n    'SWAGGER_UI_SETTINGS': {\n        'operationsSorter': None,  \n        'tagsSorter': None,        \n    }\n}","position":{"index":243,"start_char":5400,"end_char":6895},"metadata":{"content_hash":"83aaead49608cacd"},"created_at":"2026-01-14T02:19:39.721Z"}
{"chunk_id":"21cfb2f395ea9a8ae67573101dcf623e","source_id":"d3de9fa80596241c","text":"\"\"\"server URL Configuration\n\nThe `urlpatterns` list routes URLs to views. For more information please see:\n    https://docs.djangoproject.com/en/2.1/topics/http/urls/\nExamples:\nFunction views\n    1. Add an import:  from my_app import views\n    2. Add a URL to urlpatterns:  path('', views.home, name='home')\nClass-based views\n    1. Add an import:  from other_app.views import Home\n    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')\nIncluding another URLconf\n    1. Import the include() function: from django.urls import include, path\n    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))\n\"\"\"\n\nfrom django.conf.urls import include\nfrom django.urls import path\nfrom django.contrib import admin\nfrom django.conf import settings\n\nfrom drf_spectacular.views import SpectacularAPIView, SpectacularRedocView, SpectacularSwaggerView\n\nfrom api import urls as v1_urls\nfrom api_v2 import urls as v2_urls\nfrom search import urls as search_urls\n\nurlpatterns = []\nurlpatterns+=v1_urls.urlpatterns\nurlpatterns+=v2_urls.urlpatterns\nurlpatterns+=search_urls.urlpatterns\nurlpatterns+=[\n    path('schema/', SpectacularAPIView.as_view(), name='schema'),\n    # Optional UI:\n    path('schema/swagger-ui/', SpectacularSwaggerView.as_view(url_name='schema'), name='swagger-ui'),\n    path('schema/redoc/', SpectacularRedocView.as_view(url_name='schema'), name='redoc'),]\n\nif settings.DEBUG is True:\n    urlpatterns.append(path('admin/', admin.site.urls))","position":{"index":244,"start_char":0,"end_char":1467},"metadata":{"content_hash":"a3c59eff3fca0c2a"},"created_at":"2026-01-14T02:19:40.310Z"}
{"chunk_id":"3845c8473021014fdf330051a26f3ebb","source_id":"7874f1579c4628e9","text":"import hashlib\nimport os\n# This file is used to serve data to the /version endpoint of the API.\n# For production (and staging) deploys, this file is overwritten at build time.\n\ndef GetHashofDirs(directory):\n    \"\"\"\n    Hash directories for \n    Adapted from: https://stackoverflow.com/questions/24937495/how-can-i-calculate-a-hash-for-a-filesystem-directory-using-python\n    \"\"\"\n\n    digest = hashlib.sha256()\n    if not os.path.exists(directory):\n        raise IOError\n\n    for root, _, files in os.walk(directory):\n      for names in files:\n        filepath = os.path.join(root,names)\n        with open(filepath, 'rb') as file:\n           digest = hashlib.file_digest(file, \"sha256\")\n                \n\n    return digest.hexdigest()\n\nDATA_V1_HASH = GetHashofDirs(\"./data/v1\")\nDATA_V2_HASH = GetHashofDirs(\"./data/v2\")\nAPI_V1_HASH = GetHashofDirs(\"./api\")\nAPI_V2_HASH = GetHashofDirs(\"./api_v2\")","position":{"index":245,"start_char":0,"end_char":895},"metadata":{"content_hash":"520b7591de707c3c"},"created_at":"2026-01-14T02:19:41.616Z"}
{"chunk_id":"630cf7378bc22f52588440881d364bdb","source_id":"1604a32f78c4ba0a","text":"\"\"\"\nWSGI config for server project.\n\nIt exposes the WSGI callable as a module-level variable named ``application``.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/2.1/howto/deployment/wsgi/\n\"\"\"\n\nimport os\nimport newrelic.agent\n\nnewrelic.agent.initialize('newrelic.ini', os.getenv('NEW_RELIC_ENVIRONMENT', 'development'))\n\nfrom django.core.wsgi import get_wsgi_application\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'server.settings')\n\napplication = get_wsgi_application()","position":{"index":246,"start_char":0,"end_char":504},"metadata":{"content_hash":"f720383efff2ff22"},"created_at":"2026-01-14T02:19:42.293Z"}
{"chunk_id":"ced1dbce3fdd3af038f64609211de583","source_id":"848934b065b00ab3","text":"import pickle\nfrom pathlib import Path\nfrom django.apps import AppConfig\n\n\nclass SearchConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'search'\n    vector_index = None  # Class attribute to store the loaded index\n    \n    def ready(self):\n        \"\"\"Load vector index once when Django starts.\"\"\"\n        vector_index_path = Path('server/vector_index.pkl')\n        \n        if vector_index_path.exists():\n            try:\n                print(\"Loading vector search index...\")\n                with vector_index_path.open('rb') as f:\n                    SearchConfig.vector_index = pickle.load(f)\n                \n                # Print basic info about the loaded index\n                if SearchConfig.vector_index and 'matrix' in SearchConfig.vector_index:\n                    matrix_shape = SearchConfig.vector_index['matrix'].shape\n                    print(f\"Vector index loaded successfully: {matrix_shape}\")\n                else:\n                    print(\"Vector index loaded but missing expected components\")\n                    \n            except Exception as e:\n                print(f\"Failed to load vector index: {e}\")\n                SearchConfig.vector_index = None\n        else:\n            print(f\"Vector index file not found: {vector_index_path}\")\n            SearchConfig.vector_index = None","position":{"index":247,"start_char":0,"end_char":1350},"metadata":{"content_hash":"7f24d131f13d78e7"},"created_at":"2026-01-14T02:19:42.978Z"}
{"chunk_id":"68c2bc279584a803e59efaff406ac861","source_id":"9ceb42226d323d1d","text":"\"\"\" The Search app models\"\"\"\nfrom django.db import models\n\n\nclass SearchResult(models.Model):\n    \"\"\" The Search Result object model. This model is used to build the \n    originally loaded table which is then separately used to build the search\n    index. That table is then deleted.\n    This process is defined in /api_v2/management/commands/buildindex.py\"\"\"\n\n    document_pk = models.CharField(max_length=255)\n    object_pk = models.CharField(max_length=255)\n    object_name = models.CharField(max_length=100)\n    object_model = models.CharField(max_length=255)\n    schema_version = models.CharField(max_length=100)\n\n    rank = models.DecimalField(max_digits=10, decimal_places=4, null=True, default=None)\n    text = models.TextField(null=True, default=None)\n    highlighted = models.TextField(null=True, default=None)","position":{"index":248,"start_char":0,"end_char":820},"metadata":{"content_hash":"543a68c5a38e2377"},"created_at":"2026-01-14T02:19:44.031Z"}
{"chunk_id":"fc009ad68cbafd50b09ca3fbab527ca2","source_id":"1a62f007e9a32409","text":"\"\"\"Serializers for the Search application models.\"\"\"\n\nfrom rest_framework import serializers\n\nfrom api_v2 import models as v2\nfrom api import models as v1\nfrom search import models\nfrom drf_spectacular.utils import extend_schema_field, inline_serializer, PolymorphicProxySerializer\nfrom drf_spectacular.types import OpenApiTypes\n\nclass SearchResultSerializer(serializers.ModelSerializer):\n    \"\"\"This method builds the search result object structure.\n    It does a lookup based on primary keys stored in the search table.\n    \"\"\"\n    object = serializers.SerializerMethodField(method_name='get_object')\n    document = serializers.SerializerMethodField(method_name='get_document')\n    route = serializers.SerializerMethodField(method_name='get_route')\n    match_type = serializers.CharField(read_only=True)\n    matched_term = serializers.CharField(read_only=True, allow_null=True)\n    match_score = serializers.FloatField(read_only=True, allow_null=True)\n\n    class Meta:\n        model = models.SearchResult\n        fields = [\n            'document',\n            'object_pk',\n            'object_name',\n            'object',\n            'object_model',\n            'schema_version',\n            'route',\n            'text',\n            'highlighted',\n            'match_type',\n            'matched_term',\n            'match_score']\n\n    # The following override is replaced in a postproccessing hook defined in oas.py. I couldn't figure out how to get a oneof in here\n    @extend_schema_field(OpenApiT","position":{"index":249,"start_char":0,"end_char":1500},"metadata":{"content_hash":"65b0ff9f480e26dd"},"created_at":"2026-01-14T02:19:44.564Z"}
{"chunk_id":"33b7593f5d8ba09a1bc3dd5fc082ce3b","source_id":"1a62f007e9a32409","text":"g override is replaced in a postproccessing hook defined in oas.py. I couldn't figure out how to get a oneof in here\n    @extend_schema_field(OpenApiTypes.STR)\n    def get_object(self, obj):\n        \"\"\"This returns a given object based on the lookup from the search result key.\"\"\"\n        result_detail = None\n\n        if obj.schema_version == 'v1':\n            if obj.object_model == 'MagicItem':\n                result_detail = v1.MagicItem.objects.get(slug=obj.object_pk)\n            if obj.object_model == 'Monster':\n                result_detail = v1.Monster.objects.get(slug=obj.object_pk)\n            if obj.object_model == 'Spell':\n                result_detail = v1.Spell.objects.get(slug=obj.object_pk)\n            if obj.object_model == 'Section':\n                result_detail = v1.Section.objects.get(slug=obj.object_pk)\n        \n        if obj.schema_version == 'v2':\n            if obj.object_model == 'Item':\n                result_detail = v2.Item.objects.get(pk=obj.object_pk)\n            if obj.object_model == 'Creature':\n                result_detail = v2.Creature.objects.get(pk=obj.object_pk)\n            if obj.object_model == 'Spell':\n                result_detail = v2.Spell.objects.get(pk=obj.object_pk)\n            if obj.object_model == 'CharacterClass':\n                result_detail = v2.CharacterClass.objects.get(pk=obj.object_pk)\n            if obj.object_model == 'Species':\n                result_detail = v2.Species.objects.get(pk=obj.object_pk)\n\n        if resul","position":{"index":250,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"21f020a4a1cc2c92"},"created_at":"2026-01-14T02:19:44.564Z"}
{"chunk_id":"b721f26e0e2530f34b69f15f954d4fac","source_id":"1a62f007e9a32409","text":"bj.object_pk)\n            if obj.object_model == 'Species':\n                result_detail = v2.Species.objects.get(pk=obj.object_pk)\n\n        if result_detail is not None:\n            return result_detail.search_result_extra_fields()\n        else:\n            return None\n\n    @extend_schema_field(inline_serializer(\n        name=\"search_document\",\n        fields={\n            # todo: slug is typed as any\n            \"key\": serializers.StringRelatedField(),\n            \"name\": serializers.StringRelatedField()\n        }\n    ))\n    def get_document(self, obj):\n        \"\"\"All search results have documents related to them, this returns the related document.\"\"\"\n        if obj.schema_version == 'v1':\n            doc = v1.Document.objects.get(slug=obj.document_pk)\n            return {\n                'key': doc.slug,\n                'name': doc.title\n                }\n\n        if obj.schema_version == 'v2':\n            doc = v2.Document.objects.get(key=obj.document_pk)\n            return {\n                'key': doc.key,\n                'name': doc.name\n                }\n\n    @extend_schema_field(OpenApiTypes.STR)\n    def get_route(self, obj):\n        \"\"\"Route is a way to build the link to the object.\"\"\"\n\n        route_lookup = {\n            \"CharacterClass\":\"classes\",\n            \"CharClass\":\"classes\",\n            \"Species\": \"species\",\n        }\n\n        if obj.object_model in route_lookup.keys():\n            route = f\"{obj.schema_version}/{route_lookup[obj.object_model]}/\"\n        e","position":{"index":251,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"4c704c65a2e2bee4"},"created_at":"2026-01-14T02:19:44.564Z"}
{"chunk_id":"7612ae1ead66d3461a4f1062c0f1ac67","source_id":"1a62f007e9a32409","text":"        }\n\n        if obj.object_model in route_lookup.keys():\n            route = f\"{obj.schema_version}/{route_lookup[obj.object_model]}/\"\n        else:\n            route = f\"{obj.schema_version}/{obj.object_model.lower()}s/\"\n        return route","position":{"index":252,"start_char":4050,"end_char":4298},"metadata":{"content_hash":"05fff02a0cc16338"},"created_at":"2026-01-14T02:19:44.564Z"}
{"chunk_id":"f05640283416bf513872664309532459","source_id":"7bbf030e089ea817","text":"import json\nfrom unittest.mock import Mock, patch\n\nfrom django.test import TestCase\nfrom rest_framework.test import APITestCase\n\nfrom search.viewsets import SearchResultViewSet\n\n\nclass SearchLogicTest(TestCase):\n    \"\"\"Test basic search logic and parameter parsing.\"\"\"\n\n    def setUp(self):\n        self.viewset = SearchResultViewSet()\n        self.request = Mock()\n        self.viewset.request = self.request\n\n    def test_fuzzy_parameter_parsing(self):\n        \"\"\"Test that fuzzy parameter is parsed correctly.\"\"\"\n        # Test fuzzy=true\n        self.request.query_params = {\"fuzzy\": \"true\"}\n        params = self.viewset._parse_parameters()\n        self.assertTrue(params['include_fuzzy'])\n\n        # Test fuzzy=false\n        self.request.query_params = {\"fuzzy\": \"false\"}\n        params = self.viewset._parse_parameters()\n        self.assertFalse(params['include_fuzzy'])\n\n        # Test default (not specified)\n        self.request.query_params = {}\n        params = self.viewset._parse_parameters()\n        self.assertFalse(params['include_fuzzy'])\n\n    def test_vector_parameter_parsing(self):\n        \"\"\"Test that vector parameter is parsed correctly.\"\"\"\n        # Test vector=true\n        self.request.query_params = {\"vector\": \"true\"}\n        params = self.viewset._parse_parameters()\n        self.assertTrue(params['include_vector'])\n\n        # Test vector=false\n        self.request.query_params = {\"vector\": \"false\"}\n        params = self.viewset._parse_parameters()\n        self.asser","position":{"index":253,"start_char":0,"end_char":1500},"metadata":{"content_hash":"8dd8efab25125a40"},"created_at":"2026-01-14T02:19:45.296Z"}
{"chunk_id":"97a5f75572fcf1e004f2e7c4a9745995","source_id":"7bbf030e089ea817","text":"      # Test vector=false\n        self.request.query_params = {\"vector\": \"false\"}\n        params = self.viewset._parse_parameters()\n        self.assertFalse(params['include_vector'])\n\n        # Test default (not specified)\n        self.request.query_params = {}\n        params = self.viewset._parse_parameters()\n        self.assertFalse(params['include_vector'])\n\n    def test_query_required(self):\n        \"\"\"Test that query parameter is required.\"\"\"\n        self.request.query_params = {}\n        \n        result = self.viewset.get_queryset()\n        \n        # Should have metadata for empty query\n        self.assertTrue(hasattr(result, '_search_metadata'))\n        metadata = result._search_metadata\n        self.assertEqual(metadata['exact_matches'], False)\n\n    def test_strict_parameter_parsing(self):\n        \"\"\"Test that strict parameter is parsed correctly.\"\"\"\n        # Test strict=true\n        self.request.query_params = {\"strict\": \"true\"}\n        params = self.viewset._parse_parameters()\n        self.assertTrue(params['strict'])\n\n        # Test default (not specified)\n        self.request.query_params = {}\n        params = self.viewset._parse_parameters()\n        self.assertFalse(params['strict'])\n\n\nclass SearchMethodTest(TestCase):\n    \"\"\"Test individual search methods.\"\"\"\n\n    def setUp(self):\n        self.viewset = SearchResultViewSet()\n\n    def test_extract_result_data(self):\n        \"\"\"Test result data extraction.\"\"\"\n        results = [\n            (1, 'highlighted1', '","position":{"index":254,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"35a1a886629e5ee5"},"created_at":"2026-01-14T02:19:45.296Z"}
{"chunk_id":"f981ad1d3f14d0b6629d05bc7f4433d9","source_id":"7bbf030e089ea817","text":"ultViewSet()\n\n    def test_extract_result_data(self):\n        \"\"\"Test result data extraction.\"\"\"\n        results = [\n            (1, 'highlighted1', 'term1', 0.9),\n            (2, 'highlighted2', None, 0.8),\n            (3, 'highlighted3', 'term3', 0.7),\n        ]\n        \n        pks, highlighted_map, matched_term_map, match_score_map = self.viewset._extract_result_data(results)\n        \n        self.assertEqual(pks, [1, 2, 3])\n        self.assertEqual(highlighted_map, {1: 'highlighted1', 2: 'highlighted2', 3: 'highlighted3'})\n        self.assertEqual(matched_term_map, {1: 'term1', 3: 'term3'})  # None values filtered out\n        self.assertEqual(match_score_map, {1: 0.9, 2: 0.8, 3: 0.7})\n\n    @patch('search.viewsets.SearchResultViewSet._load_index')\n    def test_build_word_index(self, mock_load_index):\n        \"\"\"Test word index building for fuzzy search.\"\"\"\n        names = ['Fire Shield', 'Fireball', 'Magic Weapon', 'Sword +1']\n        \n        word_index = self.viewset._build_word_index(names)\n        \n        # Check expected mappings\n        self.assertIn('fire', word_index)\n        self.assertIn('Fire Shield', word_index['fire'])  # \"Fire Shield\" contains \"fire\"\n        \n        self.assertIn('fireball', word_index)\n        self.assertIn('Fireball', word_index['fireball'])  # \"Fireball\" contains \"fireball\"\n        \n        self.assertIn('magic', word_index)\n        self.assertIn('Magic Weapon', word_index['magic'])\n        \n        self.assertIn('sword', word_index)\n  ","position":{"index":255,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"f422d5c2a2555f68"},"created_at":"2026-01-14T02:19:45.296Z"}
{"chunk_id":"1f2a2fbc5445cc184509e1761ab3a77b","source_id":"7bbf030e089ea817","text":"  self.assertIn('magic', word_index)\n        self.assertIn('Magic Weapon', word_index['magic'])\n        \n        self.assertIn('sword', word_index)\n        self.assertIn('Sword +1', word_index['sword'])\n\n    def test_highlight_text(self):\n        \"\"\"Test text highlighting functionality.\"\"\"\n        text = \"This is a magic weapon spell\"\n        \n        # Test single word highlighting\n        result = self.viewset._highlight_text(text, \"magic\")\n        self.assertIn('<span class=\"highlighted\">magic</span>', result)\n        \n        # Test multiple word highlighting  \n        result = self.viewset._highlight_text(text, \"magic weapon\")\n        self.assertIn('<span class=\"highlighted\">magic</span>', result)\n        self.assertIn('<span class=\"highlighted\">weapon</span>', result)\n        \n        # Test case insensitive\n        result = self.viewset._highlight_text(text, \"MAGIC\")\n        self.assertIn('<span class=\"highlighted\">magic</span>', result)\n\n\nclass SearchMetadataTest(APITestCase):\n    \"\"\"Test search metadata in API responses.\"\"\"\n\n    @patch('search.viewsets.SearchResultViewSet.get_queryset')\n    def test_api_handles_missing_query(self, mock_get_queryset):\n        \"\"\"Test API handles missing query parameter gracefully.\"\"\"\n        # Create a mock queryset with metadata using the same pattern as the viewset\n        class MockQuerySetWithMetadata(list):\n            def __init__(self):\n                super().__init__([])\n                self._search_metadata = {\n             ","position":{"index":256,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"b8b36578999436cc"},"created_at":"2026-01-14T02:19:45.296Z"}
{"chunk_id":"d71b3b307ea6764430249f320ae559e3","source_id":"7bbf030e089ea817","text":"erySetWithMetadata(list):\n            def __init__(self):\n                super().__init__([])\n                self._search_metadata = {\n                    'exact_matches': False,\n                    'suggestion': None\n                }\n        \n        mock_queryset = MockQuerySetWithMetadata()\n        mock_get_queryset.return_value = mock_queryset\n        \n        response = self.client.get('/v2/search/')\n        \n        self.assertEqual(response.status_code, 200)\n        data = response.json()\n        self.assertEqual(data['count'], 0)\n        self.assertEqual(len(data['results']), 0)\n        self.assertIn('search_metadata', data)\n        self.assertEqual(data['search_metadata']['exact_matches'], False)\n\n    def test_build_metadata_with_exact_results(self):\n        \"\"\"Test metadata building with exact results.\"\"\"\n        viewset = SearchResultViewSet()\n        request = Mock()\n        request.query_params = {\"query\": \"test\"}\n        viewset.request = request\n        \n        # Mock result with match_type attribute\n        mock_result = Mock()\n        mock_result.match_type = 'exact'\n        all_results = [mock_result]\n        final_results = [mock_result]\n        params = {'include_vector': False}\n        \n        metadata = viewset._build_metadata(all_results, final_results, params)\n        \n        self.assertEqual(metadata['exact_matches'], True)\n        self.assertIsNone(metadata['suggestion'])\n\n    def test_build_metadata_with_vector_suggestion(self):\n        \"\"\"Tes","position":{"index":257,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"248bcf610c549511"},"created_at":"2026-01-14T02:19:45.296Z"}
{"chunk_id":"9662f003876e8e205ce9dc7c67ec7534","source_id":"7bbf030e089ea817","text":"ta['exact_matches'], True)\n        self.assertIsNone(metadata['suggestion'])\n\n    def test_build_metadata_with_vector_suggestion(self):\n        \"\"\"Test metadata building with vector suggestion.\"\"\"\n        viewset = SearchResultViewSet()\n        request = Mock()\n        request.query_params = {\"query\": \"test\"}\n        request.build_absolute_uri = Mock(return_value=\"http://test.com/search\")\n        viewset.request = request\n        \n        all_results = []\n        final_results = []\n        params = {'query': 'test', 'include_vector': False}\n        vector_count = 10\n        \n        metadata = viewset._build_metadata(all_results, final_results, params, vector_count)\n        \n        self.assertEqual(metadata['exact_matches'], False)\n        self.assertIsNotNone(metadata['suggestion'])\n        self.assertEqual(metadata['suggestion']['type'], 'vector')\n        self.assertEqual(metadata['suggestion']['additional_matches'], 10)\n\n    def test_search_metadata_structure(self):\n        \"\"\"Test that search metadata has the expected structure.\"\"\"\n        viewset = SearchResultViewSet()\n        request = Mock()\n        request.query_params = {\"query\": \"test\"}\n        viewset.request = request\n        \n        all_results = []\n        final_results = []\n        params = {'include_vector': False}\n        \n        metadata = viewset._build_metadata(all_results, final_results, params)\n        \n        # Check all expected fields are present\n        expected_fields = ['exact_matches', 'sugge","position":{"index":258,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"44d8755125aea02f"},"created_at":"2026-01-14T02:19:45.296Z"}
{"chunk_id":"fa68850bfccf7e9b15987c2bafffd825","source_id":"7bbf030e089ea817","text":"tadata(all_results, final_results, params)\n        \n        # Check all expected fields are present\n        expected_fields = ['exact_matches', 'suggestion']\n        \n        for field in expected_fields:\n            self.assertIn(field, metadata, f\"Missing field: {field}\")\n\n\nclass SearchIntegrationTest(TestCase):\n    \"\"\"Test search integration with mocked database calls.\"\"\"\n\n    @patch('search.viewsets.SearchResultViewSet._execute_search_query')\n    @patch('search.viewsets.SearchResultViewSet._load_index')\n    def test_exact_search_integration(self, mock_load_index, mock_execute):\n        \"\"\"Test exact search method integration.\"\"\"\n        # Mock database result\n        mock_result = Mock()\n        mock_result.object_pk = 1\n        mock_result.highlighted = 'Fire<span class=\"highlighted\">ball</span>'\n        mock_execute.return_value = [mock_result]\n        \n        viewset = SearchResultViewSet()\n        results = viewset._exact_search('fireball', '%', '%', '%')\n        \n        self.assertEqual(len(results), 1)\n        self.assertEqual(results[0][0], 1)  # pk\n        self.assertEqual(results[0][2], 'fireball')  # matched_term\n        self.assertEqual(results[0][3], 1.0)  # score\n\n    @patch('search.viewsets.SearchResultViewSet._load_index')\n    def test_vector_search_count_integration(self, mock_load_index):\n        \"\"\"Test vector search count method.\"\"\"\n        # Mock index data with numpy-like behavior\n        import numpy as np\n        \n        mock_vectorizer = Mock()\n","position":{"index":259,"start_char":8100,"end_char":9600},"metadata":{"content_hash":"6ea2bb0ecc4199e5"},"created_at":"2026-01-14T02:19:45.296Z"}
{"chunk_id":"c753307cc6210d275ab33e17d5990c46","source_id":"7bbf030e089ea817","text":"ector search count method.\"\"\"\n        # Mock index data with numpy-like behavior\n        import numpy as np\n        \n        mock_vectorizer = Mock()\n        mock_matrix = Mock()\n        \n        # Create actual numpy arrays for realistic behavior\n        query_vec = np.array([[0.1, 0.2, 0.3, 0.4]])\n        mock_vectorizer.transform.return_value = type('MockSparse', (), {\n            'T': query_vec.T\n        })()\n        \n        # Mock matrix multiplication result\n        scores = np.array([0.1, 0.3, 0.02, 0.8])\n        mock_matrix.__matmul__ = Mock(return_value=type('MockResult', (), {\n            'toarray': Mock(return_value=type('MockArray', (), {\n                'ravel': Mock(return_value=scores)\n            })())\n        })())\n        \n        mock_load_index.return_value = {\n            'vectorizer': mock_vectorizer,\n            'matrix': mock_matrix\n        }\n        \n        viewset = SearchResultViewSet()\n        # With threshold 0.05, should match scores 0.1, 0.3, 0.8 = 3 matches\n        count = viewset._vector_search_count('test query', '%', '%', '%')\n        \n        self.assertEqual(count, 3)","position":{"index":260,"start_char":9450,"end_char":10573},"metadata":{"content_hash":"75f3a9a30c94b434"},"created_at":"2026-01-14T02:19:45.296Z"}
{"chunk_id":"bdfdb3802ec585c358df315c0ee928e3","source_id":"1d8d958ea03c3daf","text":"from django.conf.urls import include\nfrom django.urls import path\nfrom rest_framework import routers\n\nfrom search import viewsets\n\nsearch_router = routers.DefaultRouter()\nsearch_router.register('',viewsets.SearchResultViewSet, basename='search')\n\nurlpatterns = [\n    path('v2/search/', include(search_router.urls)),\n]","position":{"index":261,"start_char":0,"end_char":317},"metadata":{"content_hash":"0fe5ba6b5f4b91d3"},"created_at":"2026-01-14T02:19:45.977Z"}
{"chunk_id":"1c64f674fc6724e6a6bc3d85d9fd343d","source_id":"979ffdfd60e16101","text":"\"\"\"Search implementation with exact, fuzzy, and vector search.\"\"\"\nimport pickle\nimport re\nfrom concurrent.futures import ThreadPoolExecutor\nfrom pathlib import Path\nfrom urllib.parse import urlencode\n\nfrom rapidfuzz import process, fuzz\nfrom rest_framework import viewsets\nfrom rest_framework.response import Response\nfrom drf_spectacular.utils import extend_schema, extend_schema_view, OpenApiParameter, OpenApiExample\nfrom drf_spectacular.types import OpenApiTypes\n\nfrom search import models, serializers\nfrom search.apps import SearchConfig\n\n\nclass ResultsWithMetadata(list):\n    \"\"\"Custom list that can hold search metadata and behaves like a QuerySet.\"\"\"\n    def __init__(self, items, metadata=None):\n        super().__init__(items)\n        self._search_metadata = metadata\n        # Add model attribute to satisfy DRF expectations\n        self.model = models.SearchResult\n\n\n@extend_schema_view(\n    list=extend_schema(\n        operation_id=\"search_list\",\n        summary=\"Search across D&D 5E content\",\n        description=\"\"\"\n        Search across all Open5e content and objects.\n\n        If multiple search types are requested, the results are first sorted, then merged & deduplicated in order of decreasing precision:\n        - Exact matches(name first, then other fields)\n        - Fuzzy matches (similarity, descending)\n        - Vector matches (similarity, descending)\n\n        \"\"\",\n        parameters=[\n            OpenApiParameter(\n                name=\"query\",\n                type=Ope","position":{"index":262,"start_char":0,"end_char":1500},"metadata":{"content_hash":"eb685353d5c3f595"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"57d7c9800937690a9c4f512e81a2f053","source_id":"979ffdfd60e16101","text":"tches (similarity, descending)\n\n        \"\"\",\n        parameters=[\n            OpenApiParameter(\n                name=\"query\",\n                type=OpenApiTypes.STR,\n                location=OpenApiParameter.QUERY,\n                required=True,\n                description=\"The search term to find. Required parameter.\",\n                examples=[\n                    OpenApiExample(\"Existing term\", value=\"fireball\"),\n                    OpenApiExample(\"Typo example\", value=\"firbal\"),\n                    OpenApiExample(\"Multi-word\", value=\"magic weapon\"),\n                ]\n            ),\n            OpenApiParameter(\n                name=\"strict\",\n                type=OpenApiTypes.BOOL,\n                location=OpenApiParameter.QUERY,\n                required=False,\n                description=\"Strict mode: only return explicitly requested search types. When false (default), exact search always runs with fuzzy fallback if no results found.\",\n                examples=[\n                    OpenApiExample(\"Strict mode\", value=\"true\"),\n                    OpenApiExample(\"Default mode\", value=\"false\"),\n                ]\n            ),\n            OpenApiParameter(\n                name=\"fuzzy\",\n                type=OpenApiTypes.BOOL,\n                location=OpenApiParameter.QUERY,\n                required=False,\n                description=\"Include fuzzy individual word matches in name fields only. Default: false (but used as fallback in default mode).\",\n                examples=[\n  ","position":{"index":263,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"358ec23c5b440cd7"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"76f05356fd145a47cc8c6dc096080361","source_id":"979ffdfd60e16101","text":"ion=\"Include fuzzy individual word matches in name fields only. Default: false (but used as fallback in default mode).\",\n                examples=[\n                    OpenApiExample(\"Enable fuzzy matching\", value=\"true\"),\n                    OpenApiExample(\"Disable fuzzy matching\", value=\"false\"),\n                ]\n            ),\n            OpenApiParameter(\n                name=\"vector\",\n                type=OpenApiTypes.BOOL,\n                location=OpenApiParameter.QUERY,\n                required=False,\n                description=\"Include vector search results against name + description. Finds semantically similar content using TF-IDF similarity. Default: false.\",\n                examples=[\n                    OpenApiExample(\"Enable vector\", value=\"true\"),\n                    OpenApiExample(\"Disable vector\", value=\"false\"),\n                ]\n            ),\n            OpenApiParameter(\n                name=\"object_model\",\n                type=OpenApiTypes.STR,\n                location=OpenApiParameter.QUERY,\n                required=False,\n                description=\"Filter results to specific content type. Default: all types.\",\n                examples=[\n                    OpenApiExample(\"Spells only\", value=\"Spell\"),\n                    OpenApiExample(\"Creatures only\", value=\"Creature\"),\n                    OpenApiExample(\"Items only\", value=\"Item\"),\n                    OpenApiExample(\"All types\", value=\"%\"),\n                ]\n            ),\n            OpenApiPara","position":{"index":264,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"24c8c1bf22986976"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"24c6388a38858ab0a9e3d6a70402f876","source_id":"979ffdfd60e16101","text":"mple(\"Items only\", value=\"Item\"),\n                    OpenApiExample(\"All types\", value=\"%\"),\n                ]\n            ),\n            OpenApiParameter(\n                name=\"document_pk\",\n                type=OpenApiTypes.STR,\n                location=OpenApiParameter.QUERY,\n                required=False,\n                description=\"Filter results to specific document. Use document key/slug. Default: all documents.\",\n                examples=[\n                    OpenApiExample(\"SRD only\", value=\"srd-2014\"),\n                    OpenApiExample(\"All documents\", value=\"%\"),\n                ]\n            ),\n            OpenApiParameter(\n                name=\"schema\",\n                type=OpenApiTypes.STR,\n                location=OpenApiParameter.QUERY,\n                required=False,\n                description=\"API schema version to search. Default: 'v2'.\",\n                examples=[\n                    OpenApiExample(\"API v2\", value=\"v2\"),\n                    OpenApiExample(\"API v1\", value=\"v1\"),\n                ]\n            ),\n        ],\n        responses={\n            200: serializers.SearchResultSerializer(many=True),\n            400: \"Bad request - missing or invalid query parameter\"\n        },\n        examples=[\n            OpenApiExample(\n                \"Default search\",\n                summary=\"Basic search with exact + fuzzy fallback\",\n                description=\"Searches for 'fireball' using exact text search, with fuzzy fallback if no exact matches\",\n      ","position":{"index":265,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"3abf497ef1cdd97e"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"aab0f01509151712b66758986b9aeaff","source_id":"979ffdfd60e16101","text":"xact + fuzzy fallback\",\n                description=\"Searches for 'fireball' using exact text search, with fuzzy fallback if no exact matches\",\n                value={\n                    \"query\": \"fireball\"\n                }\n            ),\n            OpenApiExample(\n                \"Fuzzy search for typo\",\n                summary=\"Explicit fuzzy search for handling typos\",\n                description=\"Searches for 'firbal' using fuzzy search to handle the typo and find 'fireball'\",\n                value={\n                    \"query\": \"firbal\",\n                    \"fuzzy\": \"true\"\n                }\n            ),\n            OpenApiExample(\n                \"Vector semantic search\",\n                summary=\"Add semantic similarity search\",\n                description=\"Finds exact matches for 'healing' and content semantically similar to 'healing' using vector search\",\n                value={\n                    \"query\": \"healing\",\n                    \"vector\": \"true\"\n                }\n            ),\n            OpenApiExample(\n                \"Strict mode - vector only\",\n                summary=\"Strict mode: vector only search\",\n                description=\"Returns only vector matches for 'fire' eg. 'heat', 'flame', 'scorching'\",\n                value={\n                    \"query\": \"fire\",\n                    \"strict\": \"true\",\n                    \"vector\": \"true\"\n                }\n            ),\n            OpenApiExample(\n                \"Combined search modes\",\n             ","position":{"index":266,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"fa8ae40ba36ee4db"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"46bccecb0f5ac243912638c7db41cae3","source_id":"979ffdfd60e16101","text":"                  \"vector\": \"true\"\n                }\n            ),\n            OpenApiExample(\n                \"Combined search modes\",\n                summary=\"Multiple search types combined\",\n                description=\"Combines exact, fuzzy, and vector search for comprehensive results\",\n                value={\n                    \"query\": \"magic\",\n                    \"fuzzy\": \"true\",\n                    \"vector\": \"true\"\n                }\n            ),\n            OpenApiExample(\n                \"Filtered search\",\n                summary=\"Search filtered to specific content type\",\n                description=\"Search for dragons but only in creature content\",\n                value={\n                    \"query\": \"dragon\",\n                    \"object_model\": \"Creature\"\n                }\n            ),\n        ]\n    )\n)\nclass SearchResultViewSet(viewsets.ReadOnlyModelViewSet):\n    \"\"\"Unified search across exact text, fuzzy, and vector search methods.\"\"\"\n\n    serializer_class = serializers.SearchResultSerializer\n    \n    # Configuration constants\n    VECTOR_INDEX_PATH = Path('server/vector_index.pkl')\n    FUZZY_THRESHOLD = 75\n    VECTOR_THRESHOLD = 0.05\n    BASE_SELECT_FIELDS = \"document_pk, object_pk, object_name, object_model, text, schema_version\"\n    WHERE_FILTERS = \"schema_version LIKE %s AND document_pk LIKE %s AND object_model LIKE %s\"\n\n    def _parse_parameters(self):\n        \"\"\"Parse search parameters from request.\"\"\"\n        return {\n            'query': self.reques","position":{"index":267,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"9d8990366d1dde41"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"ef649793dbbb19cb4e84a11806d76c63","source_id":"979ffdfd60e16101","text":"model LIKE %s\"\n\n    def _parse_parameters(self):\n        \"\"\"Parse search parameters from request.\"\"\"\n        return {\n            'query': self.request.query_params.get('query'),\n            'include_vector': self.request.query_params.get(\"vector\", \"false\").lower() in [\"1\", \"true\", \"yes\"],\n            'include_fuzzy': self.request.query_params.get(\"fuzzy\", \"false\").lower() in [\"1\", \"true\", \"yes\"],\n            'strict': self.request.query_params.get(\"strict\", \"false\").lower() in [\"1\", \"true\", \"yes\"],\n            'schema_version': self.request.query_params.get(\"schema\", \"v2\"),\n            'document_pk': self.request.query_params.get(\"document_pk\", '%'),\n            'object_model': self.request.query_params.get(\"object_model\", '%')\n        }\n\n    def _load_index(self):\n        \"\"\"Get the pre-loaded search index from app configuration.\"\"\"\n        if SearchConfig.vector_index is None:\n            # Fallback: load on demand if not pre-loaded\n            if not hasattr(SearchResultViewSet, '_fallback_index'):\n                with self.VECTOR_INDEX_PATH.open('rb') as f:\n                    SearchResultViewSet._fallback_index = pickle.load(f)\n            return SearchResultViewSet._fallback_index\n        \n        return SearchConfig.vector_index\n\n    def _execute_search_query(self, sql, params):\n        \"\"\"Execute a search query with error handling.\"\"\"\n        try:\n            return list(models.SearchResult.objects.raw(sql, params))\n        except Exception:\n            return []\n\n  ","position":{"index":268,"start_char":8100,"end_char":9600},"metadata":{"content_hash":"9fca7eb663e20e0c"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"b85a8fa581d336d222ec5ff1e9973c80","source_id":"979ffdfd60e16101","text":"or handling.\"\"\"\n        try:\n            return list(models.SearchResult.objects.raw(sql, params))\n        except Exception:\n            return []\n\n    def _build_name_lookup_query(self, matched_names, schema_version, document_pk, object_model):\n        \"\"\"Build SQL query for looking up results by object names.\"\"\"\n        placeholders = ','.join(['%s'] * len(matched_names))\n        sql = f\"\"\"\n            SELECT 1 as id, 0 as rank, text as highlighted,\n                   {self.BASE_SELECT_FIELDS}\n            FROM search_index\n            WHERE object_name IN ({placeholders})\n              AND {self.WHERE_FILTERS}\n            ORDER BY object_name\n        \"\"\"\n        params = matched_names + [schema_version, document_pk, object_model]\n        return sql, params\n\n    def _exact_search(self, query, schema_version, document_pk, object_model):\n        \"\"\"Exact text search using SQLite FTS5.\"\"\"\n        sql = f\"\"\"\n            SELECT 1 as id,\n                   rank,\n                   snippet(search_index, 4, '<span class=\"highlighted\">', '</span>', '...', 20) as highlighted,\n                   {self.BASE_SELECT_FIELDS}\n            FROM search_index \n            WHERE {self.WHERE_FILTERS}\n              AND search_index MATCH %s\n              AND rank MATCH 'bm25(1.0, 1.0, 10.0)'\n            ORDER BY rank\n        \"\"\"\n        \n        results = self._execute_search_query(sql, [schema_version, document_pk, object_model, query])\n        # Exact search gets perfect score of 1.0 and the que","position":{"index":269,"start_char":9450,"end_char":10950},"metadata":{"content_hash":"eb0838155cf01809"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"d949afc64efaa4b133bbb75f4f340760","source_id":"979ffdfd60e16101","text":"lts = self._execute_search_query(sql, [schema_version, document_pk, object_model, query])\n        # Exact search gets perfect score of 1.0 and the query as matched_term for consistency\n        return [(r.object_pk, r.highlighted, query, 1.0) for r in results]\n\n    def _build_word_index(self, names):\n        \"\"\"Build mapping of words to names for fuzzy search.\"\"\"\n        word_to_names = {}\n        for name in names:\n            # Split name into words (handle spaces, hyphens, etc.)\n            words = re.findall(r'\\b\\w+\\b', name.lower())\n            for word in words:\n                if word not in word_to_names:\n                    word_to_names[word] = []\n                word_to_names[word].append(name)\n        return word_to_names\n\n    def _find_fuzzy_matches(self, query, word_to_names):\n        \"\"\"Find fuzzy matches and return sorted name matches.\"\"\"\n        all_words = list(word_to_names.keys())\n        \n        # Fuzzy match query against individual words (case-insensitive)\n        word_matches = process.extract(query.lower(), all_words, scorer=fuzz.ratio)\n        good_word_matches = [(word, score) for word, score, _ in word_matches if score >= self.FUZZY_THRESHOLD]\n        \n        if not good_word_matches:\n            return []\n        \n        # Collect all names that contain good word matches, with their best scores\n        name_scores = {}\n        for word, score in good_word_matches:\n            for name in word_to_names[word]:\n                # Keep the highest sc","position":{"index":270,"start_char":10800,"end_char":12300},"metadata":{"content_hash":"02ee7dde1cc5849c"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"fc5539d6c3bd5f27c9cfad97d908733e","source_id":"979ffdfd60e16101","text":"     name_scores = {}\n        for word, score in good_word_matches:\n            for name in word_to_names[word]:\n                # Keep the highest score for each name\n                if name not in name_scores or score > name_scores[name]['score']:\n                    name_scores[name] = {'score': score, 'matched_word': word}\n        \n        # Convert to list and sort\n        name_matches = [(name, info['score'], info['matched_word']) for name, info in name_scores.items()]\n        \n        # Sort matches: exact word matches first, then by similarity score (descending)\n        def sort_key(match):\n            name, score, matched_word = match\n            # Check if query exactly matches the word (case insensitive)\n            is_exact_word_match = query.lower() == matched_word.lower()\n            # Return tuple: (exact_word_priority, negative_score) for sorting\n            return (0 if is_exact_word_match else 1, -score)\n        \n        name_matches.sort(key=sort_key)\n        return name_matches\n\n    def _process_name_matches(self, name_matches, schema_version, document_pk, object_model):\n        \"\"\"Process name matches into ordered results.\"\"\"\n        if not name_matches:\n            return []\n            \n        # Get results for matched names\n        match_name_to_info = {match[0]: {'term': match[2], 'score': match[1] / 100.0} for match in name_matches}  # Convert to 0-1 range\n        matched_names = [match[0] for match in name_matches]\n        \n        sql, params = se","position":{"index":271,"start_char":12150,"end_char":13650},"metadata":{"content_hash":"a936d22b995bff88"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"4262b67df2aa976c7f2e8534165aa026","source_id":"979ffdfd60e16101","text":"0.0} for match in name_matches}  # Convert to 0-1 range\n        matched_names = [match[0] for match in name_matches]\n        \n        sql, params = self._build_name_lookup_query(matched_names, schema_version, document_pk, object_model)\n        results = self._execute_search_query(sql, params)\n        \n        # Return with proper ordering based on our sorted matches\n        name_to_result = {r.object_name: r for r in results}\n        ordered_results = []\n        for name in matched_names:\n            if name in name_to_result:\n                result = name_to_result[name]\n                match_info = match_name_to_info[name]\n                ordered_results.append((result.object_pk, result.highlighted, match_info['term'], match_info['score']))\n        \n        return ordered_results\n\n    def _fuzzy_search(self, query, schema_version, document_pk, object_model):\n        \"\"\"Fuzzy search using RapidFuzz against individual words.\"\"\"\n        index = self._load_index()\n        names = index['names']\n        \n        word_to_names = self._build_word_index(names)\n        name_matches = self._find_fuzzy_matches(query, word_to_names)\n        return self._process_name_matches(name_matches, schema_version, document_pk, object_model)\n\n    def _vector_search(self, query, schema_version, document_pk, object_model):\n        \"\"\"Vector search using TF-IDF.\"\"\"\n        index = self._load_index()\n        vectorizer = index['vectorizer'] \n        matrix = index['matrix']\n        \n        # Get simi","position":{"index":272,"start_char":13500,"end_char":15000},"metadata":{"content_hash":"55ce75281d982faf"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"2a347e1a66211fa86247d611ff94e7b1","source_id":"979ffdfd60e16101","text":"g TF-IDF.\"\"\"\n        index = self._load_index()\n        vectorizer = index['vectorizer'] \n        matrix = index['matrix']\n        \n        # Get similarity scores\n        query_vec = vectorizer.transform([query])\n        scores = (matrix @ query_vec.T).toarray().ravel()\n        best_indices = scores.argsort()[::-1]\n        \n        # Filter by threshold and track scores\n        good_results = []\n        for i in best_indices:\n            if scores[i] > self.VECTOR_THRESHOLD:\n                good_results.append((i, scores[i]))\n        \n        if not good_results:\n            return []\n            \n        # Get matched names with their scores\n        matched_data = [(index['names'][i], score) for i, score in good_results]\n        matched_names = [name for name, score in matched_data]\n        \n        sql, params = self._build_name_lookup_query(matched_names, schema_version, document_pk, object_model)\n        results = self._execute_search_query(sql, params)\n        \n        # Create mapping from name to score\n        name_to_score = dict(matched_data)\n        \n        # Return with vector similarity scores as match_score, no matched_term for vector\n        result_list = []\n        for result in results:\n            score = name_to_score.get(result.object_name, 0.0)\n            result_list.append((result.object_pk, result.highlighted, None, score))\n        \n        return result_list\n\n    def _highlight_text(self, text, query_or_term):\n        \"\"\"Add highlighting to text for ","position":{"index":273,"start_char":14850,"end_char":16350},"metadata":{"content_hash":"08284258e4626452"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"a272d3bfdb4ab8a949119dd0f933a3d2","source_id":"979ffdfd60e16101","text":"ghted, None, score))\n        \n        return result_list\n\n    def _highlight_text(self, text, query_or_term):\n        \"\"\"Add highlighting to text for fuzzy/vector results.\"\"\"\n        if not text or not query_or_term:\n            return text\n            \n        # Split query/term into words\n        words = [w.strip() for w in re.split(r'\\s+', query_or_term.lower()) if w.strip()]\n        if not words:\n            return text\n            \n        # Create pattern and highlight\n        escaped_words = [re.escape(word) for word in words]\n        pattern = r'\\b(' + '|'.join(escaped_words) + r')\\b'\n        \n        try:\n            return re.sub(\n                pattern, \n                r'<span class=\"highlighted\">\\1</span>', \n                text, \n                flags=re.IGNORECASE\n            )\n        except Exception:\n            return text\n\n    def _merge_results(self, exact_results, fuzzy_results, vector_results, params):\n        \"\"\"Fast merge of pre-sorted result lists with deduplication.\"\"\"\n        # Fast merge with priority: exact > fuzzy > vector\n        # Each list is already sorted correctly, just combine and dedupe\n        seen_pks = set()\n        merged_data = []\n        match_types = []\n        \n        # Process in priority order: exact, fuzzy, vector\n        for results, match_type in [(exact_results, 'exact'), (fuzzy_results, 'fuzzy'), (vector_results, 'vector')]:\n            for result_tuple in results:\n                pk = result_tuple[0]\n                if ","position":{"index":274,"start_char":16200,"end_char":17700},"metadata":{"content_hash":"18686d4e2ac5c8b5"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"381e0b01c2492f031152675c00523e08","source_id":"979ffdfd60e16101","text":"uzzy_results, 'fuzzy'), (vector_results, 'vector')]:\n            for result_tuple in results:\n                pk = result_tuple[0]\n                if pk not in seen_pks:\n                    seen_pks.add(pk)\n                    merged_data.append(result_tuple)\n                    match_types.append(match_type)\n        \n        if not merged_data:\n            return []\n        \n        # Build simple lookup query - no complex CASE statements needed\n        pks = [r[0] for r in merged_data]\n        placeholders = ','.join(['%s'] * len(pks))\n        \n        sql = f\"\"\"\n            SELECT 1 as id, object_pk, object_name, object_model, text, document_pk, schema_version\n            FROM search_index\n            WHERE object_pk IN ({placeholders})\n              AND {self.WHERE_FILTERS}\n        \"\"\"\n        \n        params_list = pks + [params['schema_version'], params['document_pk'], params['object_model']]\n        raw_results = self._execute_search_query(sql, params_list)\n        \n        # Create lookup map for fast access\n        pk_to_raw = {r.object_pk: r for r in raw_results}\n        \n        # Build final results in correct order with all metadata\n        final_results = []\n        for i, (result_tuple, match_type) in enumerate(zip(merged_data, match_types)):\n            pk, highlighted, matched_term, score = result_tuple\n            \n            if pk in pk_to_raw:\n                raw_result = pk_to_raw[pk]\n                \n                # Set the core attributes\n           ","position":{"index":275,"start_char":17550,"end_char":19050},"metadata":{"content_hash":"474459df805f1c9a"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"0f95ae97ba433d9a53544d10969d2c73","source_id":"979ffdfd60e16101","text":"    \n            if pk in pk_to_raw:\n                raw_result = pk_to_raw[pk]\n                \n                # Set the core attributes\n                raw_result.id = 1\n                raw_result.rank = i  # Preserve merge order\n                raw_result.match_type = match_type\n                raw_result.matched_term = matched_term\n                raw_result.match_score = score\n                \n                # Set highlighting\n                if match_type == 'exact':\n                    # Use the FTS5 highlighting for exact matches\n                    raw_result.highlighted = highlighted\n                elif match_type == 'fuzzy' and matched_term:\n                    # Highlight the matched term for fuzzy results\n                    raw_result.highlighted = self._highlight_text(raw_result.text, matched_term)\n                else:\n                    # Highlight the original query for vector results\n                    raw_result.highlighted = self._highlight_text(raw_result.text, params['query'])\n                \n                final_results.append(raw_result)\n        \n        return final_results\n\n    def _filter_results(self, results, params):\n        \"\"\"Filter results based on search parameters.\"\"\"\n        if params['strict']:\n            # Strict mode: only requested types\n            return [r for r in results if (\n                (not params['include_vector'] and not params['include_fuzzy'] and getattr(r, 'match_type', '') == 'exact') or\n                (params","position":{"index":276,"start_char":18900,"end_char":20400},"metadata":{"content_hash":"eec7bf42b407b563"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"39a5f59f1cf8833b921126402f5004b1","source_id":"979ffdfd60e16101","text":"\n                (not params['include_vector'] and not params['include_fuzzy'] and getattr(r, 'match_type', '') == 'exact') or\n                (params['include_fuzzy'] and getattr(r, 'match_type', '') == 'fuzzy') or\n                (params['include_vector'] and getattr(r, 'match_type', '') == 'vector')\n            )]\n        else:\n            # Normal mode: include exact and fuzzy (already filtered), but vector only if requested\n            return [r for r in results if (\n                getattr(r, 'match_type', '') == 'exact' or\n                getattr(r, 'match_type', '') == 'fuzzy' or\n                (getattr(r, 'match_type', '') == 'vector' and params['include_vector'])\n            )]\n\n    def _build_metadata(self, all_results, final_results, params):\n        \"\"\"Build simple search metadata.\"\"\"\n        exact_count = sum(1 for r in all_results if getattr(r, 'match_type', '') == 'exact')\n        \n        metadata = {\n            'exact_matches': exact_count > 0\n        }\n            \n        return metadata\n\n    def get_queryset(self):\n        \"\"\"Main search logic - simplified.\"\"\"\n        params = self._parse_parameters()\n        \n        if not params['query']:\n            queryset = models.SearchResult.objects.none()\n            queryset._search_metadata = {\n                'exact_matches': False\n            }\n            return queryset\n        \n        search_args = (params['query'], params['schema_version'], params['document_pk'], params['object_model'])\n        \n     ","position":{"index":277,"start_char":20250,"end_char":21750},"metadata":{"content_hash":"301a391f214f907c"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"4c316329b3e6becd857c06aac003f71e","source_id":"979ffdfd60e16101","text":"turn queryset\n        \n        search_args = (params['query'], params['schema_version'], params['document_pk'], params['object_model'])\n        \n        # Determine which searches to run\n        searches_to_run = ['exact']  # Always start with exact\n        \n        # Add explicitly requested searches\n        if params['include_fuzzy']:\n            searches_to_run.append('fuzzy')\n        if params['include_vector']:\n            searches_to_run.append('vector')\n        \n        # Run initial searches in parallel\n        search_functions = {\n            'exact': self._exact_search,\n            'fuzzy': self._fuzzy_search,\n            'vector': self._vector_search\n        }\n        \n        results = {}\n        with ThreadPoolExecutor(max_workers=len(searches_to_run)) as executor:\n            futures = {\n                search_type: executor.submit(search_functions[search_type], *search_args)\n                for search_type in searches_to_run\n            }\n            \n            for search_type, future in futures.items():\n                results[search_type] = future.result()\n        \n        # Fallback logic: if exact found nothing and we're not in strict mode and fuzzy wasn't explicitly requested\n        exact_results = results.get('exact', [])\n        if len(exact_results) == 0 and not params['strict'] and not params['include_fuzzy']:\n            results['fuzzy'] = self._fuzzy_search(*search_args)\n        \n        # Extract results with empty list defaults\n        fuzzy_res","position":{"index":278,"start_char":21600,"end_char":23100},"metadata":{"content_hash":"26e176adf1f40e20"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"1093faf2bc31cd3beba8ad942c820859","source_id":"979ffdfd60e16101","text":"fuzzy']:\n            results['fuzzy'] = self._fuzzy_search(*search_args)\n        \n        # Extract results with empty list defaults\n        fuzzy_results = results.get('fuzzy', [])\n        vector_results = results.get('vector', [])\n\n        # Merge and process results\n        all_results = self._merge_results(exact_results, fuzzy_results, vector_results, params)\n        final_results = self._filter_results(all_results, params)\n        metadata = self._build_metadata(all_results, final_results, params)\n        \n        # Return results with metadata\n        return ResultsWithMetadata(final_results, metadata)\n\n    def list(self, request, *args, **kwargs):\n        \"\"\"Return search results with metadata.\"\"\"\n        queryset = self.get_queryset()\n        metadata = getattr(queryset, '_search_metadata', None)\n        \n        # Handle pagination\n        page = self.paginate_queryset(queryset)\n        if page is not None:\n            serializer = self.get_serializer(page, many=True)\n            paginated_response = self.get_paginated_response(serializer.data)\n            if metadata:\n                paginated_response.data['search_metadata'] = metadata\n            return paginated_response\n        \n        # Non-paginated response\n        serializer = self.get_serializer(queryset, many=True)\n        response_data = {'results': serializer.data, 'count': len(serializer.data)}\n        if metadata:\n            response_data['search_metadata'] = metadata\n        return Response(response","position":{"index":279,"start_char":22950,"end_char":24450},"metadata":{"content_hash":"0142c0283645790d"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"0401c89d46ffcc8f9ea8c8ca865151b2","source_id":"979ffdfd60e16101","text":"zer.data, 'count': len(serializer.data)}\n        if metadata:\n            response_data['search_metadata'] = metadata\n        return Response(response_data)","position":{"index":280,"start_char":24300,"end_char":24456},"metadata":{"content_hash":"b8c34abb012cdb48"},"created_at":"2026-01-14T02:19:46.325Z"}
{"chunk_id":"e19c7c265c215d9ff92d092da76e35a3","source_id":"2c6cf7ffdacf8010","text":"#!/usr/bin/env python\nimport os\nimport sys\n\nif __name__ == '__main__':\n    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'server.settings')\n    try:\n        from django.core.management import execute_from_command_line\n    except ImportError as exc:\n        raise ImportError(\n            \"Couldn't import Django. Are you sure it's installed and \"\n            \"available on your PYTHONPATH environment variable? Did you \"\n            \"forget to activate a virtual environment?\"\n        ) from exc\n    execute_from_command_line(sys.argv)","position":{"index":281,"start_char":0,"end_char":537},"metadata":{"content_hash":"0befa134876c14aa"},"created_at":"2026-01-14T02:19:46.888Z"}
{"chunk_id":"8ed5eab5f4d60ce06e372297ce6a9128","source_id":"5467d281a9585eae","text":"# Github Releases\nWe use github releases for stable packages of this software. Instructions on creating a new github release.\n\n### Confirm Stability\nFirst, confirm the staging branch is stable.\n\n```\ngit fetch origin\ngit checkout staging\nrm ./db.sqlite3\npipenv run python manage.py quicksetup\npipenv run python manage.py runserver\n```\n\nThen in a new window terminal run tests.\n```\npipenv run pytest\n```\nIf the results are successful, then you are stable and ready to mint a release.\n\n### Merging staging into main\n\nFirst, merge main into staging to resolve any conflicts there.\n```\n(on branch staging)\ngit merge main\n(If 'already up to date', proceed, else resolve conflicts)\ngit checkout main\ngit merge staging\n```\n\nAt this point, locally, you'll have commits to push to origin. Doing so will kick off all build steps and deploy steps to production. It's a good idea to wait for those to finish before doing the next step.\n\n### Creating the release\n1. Go to [the github releases page](https://github.com/open5e/open5e-api/releases) for the repo.\n1. Click Draft a New Release\n1. Pick target: main. pick Create a new tag.\n1. Name the new release tag v.major.minor.patch. Increment the minor version if ANY feature changes were added, rather than just bugfixes.\n1. Name the Release itself the same as the tag.\n1. Generate the release notes.\n1. Set as latest release\n1. Click Publish release","position":{"index":282,"start_char":0,"end_char":1387},"metadata":{"content_hash":"b7355051afc9c05e"},"created_at":"2026-01-14T02:19:47.344Z"}
{"chunk_id":"a56a10f3fd8b086fc8e33be7659885ef","source_id":"87b398c1a31c8690","text":"## Pipelines and Infrastructure\nThis document describes the pipelines and infrastructure of the open5e api. It's intended to a good primer on the actual hosting and delivery mechanisms. It's not intended to be documentation of the api or its code structure.\n\n## Infrastructure\n\n### DNS / Certificates / Edge\nThere are two A records related to open5e api, one for each environment.\n| Record | Environment | Authority | Certificate Issuer |\n| ---- | ---- | ---- | ---- | \n| api.open5e.com | Production API | Cloudflare | Clouflare | \n| api-beta.open5e.com | Beta API | DigitalOcean and Cloudflare? | Cloudflare | \n\nCloudflare provides certificates for requests that terminate on its edge. These records all resolve on cloudflare's edge proxies and are forwarded onto the backend servers. The certificates auto-renew.\n\nCloudflare also caches requests. More information about caching should go here.\n\n### Compute / Storage\nDigital Ocean is used for production and beta environments. We are using DigitalOcean App Engine to serve a docker container in both environments.\n\n### Code / Build\nThe root repository is https://github.com/open5e/open5e-api.\n\n### Monitoring / Analytics\nNew Relic is being used, as well as cloudflare's built in analytics.\n\n## Pipelines\nWe have four major flows.\n| Pipeline | Trigger | Result | \n| --- | --- | --- |\n| PR Validation | pull_request, push (except to staging, main) | Python tests are run, and docker image is built. |\n| Build and Deploy (Staging) | push (staging)| Do","position":{"index":283,"start_char":0,"end_char":1500},"metadata":{"content_hash":"53e91cbf09182940"},"created_at":"2026-01-14T02:19:47.839Z"}
{"chunk_id":"93d37f2c3d8006196f1a0a801225182e","source_id":"87b398c1a31c8690","text":" | pull_request, push (except to staging, main) | Python tests are run, and docker image is built. |\n| Build and Deploy (Staging) | push (staging)| Docker image is built and pushed to DO staging app, as well as docker hub.|\n| Build and Deploy (Production) | push (main) | Docker image is built and pushed to DO production app, as well as docker hub.|\n| Deploy Readme OpenAPI | push (main) | openAPI schema is pushed to readme.io.|\n\n\nWe have controls around the ***staging*** branch (no one is allowed to merge directly). We have similar controls around the ***main*** branch, but we also require that merges come from staging.","position":{"index":284,"start_char":1350,"end_char":1976},"metadata":{"content_hash":"77f2e3816072b776"},"created_at":"2026-01-14T02:19:47.839Z"}
{"chunk_id":"42681b4f239b1d5376aded33df7e0726","source_id":"b76c7be3cde1cdc6","text":"```mermaid\nerDiagram\n\n  api_document {\n    INTEGER id\n    VARCHAR slug\n    TEXT title\n    TEXT desc\n    TEXT license\n    TEXT author\n    TEXT organization\n    TEXT version\n    VARCHAR url\n    DATETIME created_at\n    TEXT license_url\n    TEXT copyright\n  }\n\n  api_manifest {\n    INTEGER id\n    VARCHAR filename\n    VARCHAR type\n    VARCHAR hash\n    DATETIME created_at\n  }\n\n  auth_group {\n    INTEGER id\n    VARCHAR name\n  }\n\n  auth_user {\n    INTEGER id\n    VARCHAR password\n    DATETIME last_login\n    BOOL is_superuser\n    VARCHAR username\n    VARCHAR last_name\n    VARCHAR email\n    BOOL is_staff\n    BOOL is_active\n    DATETIME date_joined\n    VARCHAR first_name\n  }\n\n  django_content_type {\n    INTEGER id\n    VARCHAR app_label\n    VARCHAR model\n  }\n\n  django_migrations {\n    INTEGER id\n    VARCHAR app\n    VARCHAR name\n    DATETIME applied\n  }\n\n  django_session {\n    VARCHAR session_key\n    TEXT session_data\n    DATETIME expire_date\n  }\n\n  api_armor {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT category\n    TEXT cost\n    TEXT weight\n    BOOL stealth_disadvantage\n    INTEGER base_ac\n    BOOL plus_dex_mod\n    BOOL plus_con_mod\n    BOOL plus_wis_mod\n    INTEGER plus_flat_mod\n    INTEGER plus_max\n    INTEGER strength_requirement\n    TEXT route\n    INTEGER document_id\n    INTEGER page_no\n  }\n\n  api_background {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT skill_proficiencies\n    TEXT tool_proficiencies\n    TEXT language","position":{"index":285,"start_char":0,"end_char":1500},"metadata":{"content_hash":"97da8265295ae1b3"},"created_at":"2026-01-14T02:19:48.423Z"}
{"chunk_id":"6f610873a5eeba2680dc26d95cb1887d","source_id":"b76c7be3cde1cdc6","text":"ound {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT skill_proficiencies\n    TEXT tool_proficiencies\n    TEXT languages\n    TEXT equipment\n    TEXT feature\n    TEXT feature_desc\n    TEXT suggested_characteristics\n    TEXT route\n    INTEGER document_id\n    INTEGER page_no\n  }\n\n  api_charclass {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT hit_dice\n    TEXT hp_at_1st_level\n    TEXT hp_at_higher_levels\n    TEXT prof_armor\n    TEXT prof_weapons\n    TEXT prof_tools\n    TEXT prof_saving_throws\n    TEXT prof_skills\n    TEXT equipment\n    TEXT table\n    TEXT spellcasting_ability\n    TEXT subtypes_name\n    TEXT route\n    INTEGER document_id\n    INTEGER page_no\n  }\n\n  api_condition {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT route\n    INTEGER document_id\n    INTEGER page_no\n  }\n\n  api_feat {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT prerequisite\n    INTEGER document_id\n    INTEGER page_no\n    TEXT effects_desc_json\n    TEXT route\n  }\n\n  api_magicitem {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT type\n    TEXT rarity\n    TEXT requires_attunement\n    TEXT route\n    INTEGER document_id\n    INTEGER page_no\n  }\n\n  api_monster {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT size\n    TEXT type\n    TEXT subtype\n    TEXT group\n    TEXT alignment\n    INTEGER armor_class\n    TEXT armor_desc\n    IN","position":{"index":286,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"576f69158ac9286e"},"created_at":"2026-01-14T02:19:48.423Z"}
{"chunk_id":"09bab836ef79a1dd251a89b578503c1d","source_id":"b76c7be3cde1cdc6","text":" DATETIME created_at\n    TEXT size\n    TEXT type\n    TEXT subtype\n    TEXT group\n    TEXT alignment\n    INTEGER armor_class\n    TEXT armor_desc\n    INTEGER hit_points\n    TEXT hit_dice\n    TEXT speed_json\n    INTEGER strength\n    INTEGER dexterity\n    INTEGER constitution\n    INTEGER intelligence\n    INTEGER wisdom\n    INTEGER charisma\n    INTEGER strength_save\n    INTEGER dexterity_save\n    INTEGER constitution_save\n    INTEGER intelligence_save\n    INTEGER wisdom_save\n    INTEGER charisma_save\n    INTEGER perception\n    TEXT skills_json\n    TEXT damage_vulnerabilities\n    TEXT damage_resistances\n    TEXT damage_immunities\n    TEXT condition_immunities\n    TEXT senses\n    TEXT languages\n    TEXT challenge_rating\n    TEXT actions_json\n    TEXT special_abilities_json\n    TEXT reactions_json\n    TEXT legendary_desc\n    TEXT legendary_actions_json\n    TEXT spells_json\n    TEXT route\n    VARCHAR img_main\n    INTEGER document_id\n    REAL cr\n    INTEGER page_no\n  }\n\n  api_plane {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT route\n    INTEGER document_id\n    INTEGER page_no\n  }\n\n  api_race {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT asi_desc\n    TEXT asi_json\n    TEXT age\n    TEXT alignment\n    TEXT size\n    TEXT speed_json\n    TEXT speed_desc\n    TEXT languages\n    TEXT vision\n    TEXT traits\n    TEXT route\n    INTEGER document_id\n    INTEGER page_no\n  }\n\n  api_section {\n    VARCHAR slug\n    TEXT name\n    TEXT des","position":{"index":287,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"f736d140937fc959"},"created_at":"2026-01-14T02:19:48.423Z"}
{"chunk_id":"30ade0844ebc39c0434936dd5681f7a7","source_id":"b76c7be3cde1cdc6","text":"EXT vision\n    TEXT traits\n    TEXT route\n    INTEGER document_id\n    INTEGER page_no\n  }\n\n  api_section {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT parent\n    TEXT route\n    INTEGER document_id\n    INTEGER page_no\n  }\n\n  api_spell {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT higher_level\n    TEXT page\n    TEXT range\n    TEXT material\n    TEXT duration\n    TEXT casting_time\n    TEXT school\n    TEXT dnd_class\n    TEXT archetype\n    TEXT circles\n    TEXT route\n    BIGINT document_id\n    INTEGER page_no\n    BOOL can_be_cast_as_ritual\n    INTEGER spell_level\n    BOOL requires_concentration\n    INTEGER target_range_sort\n    BOOL requires_material_components\n    BOOL requires_somatic_components\n    BOOL requires_verbal_components\n  }\n\n  api_spelllist {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    INTEGER page_no\n    BIGINT document_id\n  }\n\n  api_weapon {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT category\n    TEXT cost\n    TEXT damage_dice\n    TEXT damage_type\n    TEXT weight\n    TEXT properties_json\n    TEXT route\n    INTEGER document_id\n    INTEGER page_no\n  }\n\n  auth_permission {\n    INTEGER id\n    INTEGER content_type_id\n    VARCHAR codename\n    VARCHAR name\n  }\n\n  auth_user_groups {\n    INTEGER id\n    INTEGER user_id\n    INTEGER group_id\n  }\n\n  django_admin_log {\n    INTEGER id\n    DATETIME action_time\n    TEXT object_id\n    VARCHAR object_repr\n","position":{"index":288,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"4216e7e32edc5995"},"created_at":"2026-01-14T02:19:48.423Z"}
{"chunk_id":"a354057e4b5d42d2aa8035898a328de8","source_id":"b76c7be3cde1cdc6","text":"    INTEGER user_id\n    INTEGER group_id\n  }\n\n  django_admin_log {\n    INTEGER id\n    DATETIME action_time\n    TEXT object_id\n    VARCHAR object_repr\n    TEXT change_message\n    INTEGER content_type_id\n    INTEGER user_id\n    SMALLINTUNSIGNED action_flag\n  }\n\n  api_archetype {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT route\n    VARCHAR char_class_id\n    INTEGER document_id\n    INTEGER page_no\n  }\n\n  api_monsterspell {\n    INTEGER id\n    VARCHAR monster_id\n    VARCHAR spell_id\n  }\n\n  api_spelllist_spells {\n    INTEGER id\n    VARCHAR spelllist_id\n    VARCHAR spell_id\n  }\n\n  api_subrace {\n    VARCHAR slug\n    TEXT name\n    TEXT desc\n    DATETIME created_at\n    TEXT asi_desc\n    TEXT asi_json\n    TEXT traits\n    TEXT route\n    INTEGER document_id\n    VARCHAR parent_race_id\n    INTEGER page_no\n  }\n\n  auth_group_permissions {\n    INTEGER id\n    INTEGER group_id\n    INTEGER permission_id\n  }\n\n  auth_user_user_permissions {\n    INTEGER id\n    INTEGER user_id\n    INTEGER permission_id\n  }\n\n  api_document ||--o{ api_archetype : \"foreign key\"\n  api_document ||--o{ api_armor : \"foreign key\"\n  api_document ||--o{ api_background : \"foreign key\"\n  api_document ||--o{ api_charclass : \"foreign key\"\n  api_document ||--o{ api_condition : \"foreign key\"\n  api_document ||--o{ api_feat : \"foreign key\"\n  api_document ||--o{ api_magicitem : \"foreign key\"\n  api_document ||--o{ api_monster : \"foreign key\"\n  api_document ||--o{ api_plane : \"foreign key\"\n  api_document","position":{"index":289,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"3cffe48e61c37303"},"created_at":"2026-01-14T02:19:48.423Z"}
{"chunk_id":"ae5e495fb37170ed210b78266072bfc0","source_id":"b76c7be3cde1cdc6","text":" ||--o{ api_magicitem : \"foreign key\"\n  api_document ||--o{ api_monster : \"foreign key\"\n  api_document ||--o{ api_plane : \"foreign key\"\n  api_document ||--o{ api_race : \"foreign key\"\n  api_document ||--o{ api_section : \"foreign key\"\n  api_document ||--o{ api_spell : \"foreign key\"\n  api_document ||--o{ api_spelllist : \"foreign key\"\n  api_document ||--o{ api_subrace : \"foreign key\"\n  api_document ||--o{ api_weapon : \"foreign key\"\n  auth_group ||--o{ auth_group_permissions : \"foreign key\"\n  auth_group ||--o{ auth_user_groups : \"foreign key\"\n  auth_user ||--o{ auth_user_groups : \"foreign key\"\n  auth_user ||--o{ auth_user_user_permissions : \"foreign key\"\n  auth_user ||--o{ django_admin_log : \"foreign key\"\n  django_content_type ||--o{ auth_permission : \"foreign key\"\n  django_content_type ||--o{ django_admin_log : \"foreign key\"\n  api_charclass ||--o{ api_archetype : \"foreign key\"\n  api_monster ||--o{ api_monsterspell : \"foreign key\"\n  api_race ||--o{ api_subrace : \"foreign key\"\n  api_spell ||--o{ api_monsterspell : \"foreign key\"\n  api_spell ||--o{ api_spelllist_spells : \"foreign key\"\n  api_spelllist ||--o{ api_spelllist_spells : \"foreign key\"\n  auth_permission ||--o{ auth_group_permissions : \"foreign key\"\n  auth_permission ||--o{ auth_user_user_permissions : \"foreign key\"\n```","position":{"index":290,"start_char":6750,"end_char":8039},"metadata":{"content_hash":"67dc833b934f0a39"},"created_at":"2026-01-14T02:19:48.423Z"}
{"chunk_id":"a635bab83e7a2b2f8b6c736f1c0f443d","source_id":"98f9d6c37ba51329","text":"# Admin Interface\nV2 data can be edited using the built-in django admin interface. This allows for a UI rather than a text-editable field. It works cleanly with import and export below. It is disabled on production and staging, so editing must occur when running the application locally.\n\n## Setup\nAfter installing the project, you will need to create a superuser for the local instance. \nThis will allow you to log in and edit the data.\n\nThis will force a prompt to create a custom superuser for the local instance. Set any username and password you like you will\nonly use this once and it is only for your local instance. Just do something simple like `admin` and `admin`.\n````shell\npipenv run python manage.py createsuperuser\n````\nOnce done, you should be able to run the server locally.\n```shell\npipenv run python manage.py runserver\n```\nThen you can aim your browser at the default admin interface, and log in using the credentials you just created.\n> http://localhost:8000/admin/\n\nYou will see the list of the resource types that can be edited. Click on the type you wish to edit to open the full list\nof all instances of this resource type. There you can add a new entity or edit an existing one. Fill out the form with \nall required fields and then save. These edits will apply to only your local database. Use the\n[export command](./export.md) to save your changes to the source files. Then make your commit and push your changes.\n\nMake sure to review the changes after the export to ensure ","position":{"index":291,"start_char":0,"end_char":1500},"metadata":{"content_hash":"1e64ecc375018c33"},"created_at":"2026-01-14T02:19:49.468Z"}
{"chunk_id":"dd895a70eeb085d8c3c15f055d42c286","source_id":"98f9d6c37ba51329","text":"d) to save your changes to the source files. Then make your commit and push your changes.\n\nMake sure to review the changes after the export to ensure that the data is correct and you made no unintended changes.","position":{"index":292,"start_char":1350,"end_char":1560},"metadata":{"content_hash":"266172d7c3b5aa0c"},"created_at":"2026-01-14T02:19:49.468Z"}
{"chunk_id":"f9c886dbabf6fbccae3df074434348bf","source_id":"fa7289061747a90c","text":"Creature actions\n================\n\nThese are the fields that appear in the JSON as returned by the server.\n\n\nFields for creature actions\n---------------------------\n\n- `name`\n\n  **Example values:** `\"Longsword\"`, `\"Multiattack\"`, `\"Frightful Presence\"`\n\n  The name of the creature action.\n\n- `desc`\n\n  **Example values:** `\"Melee Weapon Attack: +4 to hit, reach 5 ft., one target. Hit: 4 (1d4 + 2) piercing\n  damage.\\n\"`, `\"The hippogriff makes two attacks: one with its beak and one with its claws.\\n\"`\n\n  The human-readable description of the action, pulled directly from the SRD.\n\n- `uses_per_day` (optional)\n\n  **Example values:** `1`, `3`, `4`\n\n  If the action is limited by uses per day, this is how many uses are allowed.\n\n- `recharge_on_roll` (optional)\n\n  **Example values:** `4`, `5`, `6`\n\n  If the action recharges on a die roll, this is the number that must be rolled.\n\n- `recharge_after_rest` (optional)\n\n  **Value:** `true`\n\n  If the action recharges after a short or long rest then this is set.\n\n- `attacks` (optional)\n\n  **Value:** Array of action objects (see below)\n\n  If this action is an attack, the entries in this array define each possible attack variation.\n\n\nFields for creature attack actions\n----------------------------------\n\n- `name`\n\n  **Example values:** `\"Claw attack\"`, `\"Longsword attack (if used with two hands)\"`\n\n  The name of the attack.\n\n- `attack_type`\n\n  **Allowed values:** `\"SPELL\"`, `\"WEAPON\"`\n\n  Whether this is a Weapon or Spell attack.\n\n- `to_hit_mod`\n\n","position":{"index":293,"start_char":0,"end_char":1500},"metadata":{"content_hash":"3a0e557e216505f5"},"created_at":"2026-01-14T02:19:50.163Z"}
{"chunk_id":"00ef4eced9f99ef6ed852cd4860a324e","source_id":"fa7289061747a90c","text":"  The name of the attack.\n\n- `attack_type`\n\n  **Allowed values:** `\"SPELL\"`, `\"WEAPON\"`\n\n  Whether this is a Weapon or Spell attack.\n\n- `to_hit_mod`\n\n  **Example values:** `9`, `10`, `7`\n\n  The attack roll modifier.\n\n- `reach_ft` (melee attacks only)\n\n  **Example values:** `5`, `10`, `15`\n\n  Reach for melee attacks, in feet.\n\n- `range_ft` (ranged attacks only)\n\n  **Example values:** `60`, `150`, `20`\n\n  Normal range for ranged attacks, in feet.\n\n- `long_range_ft` (ranged attacks only; optional)\n\n  **Example values:** `120`, `320`, `400`\n\n  Long range for ranged attacks, in feet.\n\n- `target_creature_only`\n\n  **Allowed values:** `true`, `false`\n\n  If an attack can target creatures only and not objects.\n\n- `damage` (optional)\n\n  The damage the attack deals, if any.\n\n  - `amount`\n\n    **Example values**: `12`, `17`, `5`\n\n    The fixed amount of damage the attack may deal. Some attacks deal only 1 damage, in which case\n    the die count/type and bonus fields are absent.\n\n  - `die_count` (optional)\n\n    **Example values**: `1`, `4`, `0`\n\n    The number of dice to roll for damage.\n\n  - `die_type` (optional)\n\n    **Allowed values**: `D4`, `D6`, `D8`, `D10`, `D12`, `D20`\n\n    What kind of die to roll for damage.\n\n  - `bonus` (optional)\n\n    **Example values**: `4`, `2`, `0`\n\n    The damage roll modifier.\n\n  - `type`\n\n    **Allowed values**: `\"ACID\"`, `\"BLUDGEONING\"`, `\"COLD\"`, `\"FIRE\"`, `\"FORCE\"`, `\"LIGHTNING\"`,\n      `\"NECROTIC\"`, `\"PIERCING\"`, `\"POISON\"`, `\"PSYCHIC\"`, `\"RADIANT\"`, `","position":{"index":294,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"0882bd3c9b23e55b"},"created_at":"2026-01-14T02:19:50.163Z"}
{"chunk_id":"6bfdb596e13c34b1dfa151f9c9eb2d71","source_id":"fa7289061747a90c","text":"**: `\"ACID\"`, `\"BLUDGEONING\"`, `\"COLD\"`, `\"FIRE\"`, `\"FORCE\"`, `\"LIGHTNING\"`,\n      `\"NECROTIC\"`, `\"PIERCING\"`, `\"POISON\"`, `\"PSYCHIC\"`, `\"RADIANT\"`, `\"SLASHING\"`, `\"THUNDER\"`\n\n    What kind of damage this attack deals.\n\n- `extra_damage` (optional)\n\n  Will be present if the attack deals secondary damage in addition to its main damage. Same fields\n  as \"damage\" above.","position":{"index":295,"start_char":2700,"end_char":3068},"metadata":{"content_hash":"2c865d510a22e730"},"created_at":"2026-01-14T02:19:50.163Z"}
{"chunk_id":"6b77948a33b94ee95136570ca446e00e","source_id":"1f3d3d6ea8b90d71","text":"# Data\n\nWithin the v2 api, the data loading is completely distinct from the v1 data. It uses the /data/v2 folder in the repository. It also follows a heirarchy that looks like this:\n\nDescriptions of the licenses for data that we serve, and gamesystems for the data.\n> /data/v2/License.json\n> /data/v2/GameSystem.json\n\nDescription of the organization or publishers of the data.\n> /data/v2/{publisher-key}/Publisher.json\n\nDescription of the document related to the data.\n> /data/v2/{publisher-key}/{document-key}/Document.json.\n\nThe actual data.\n> /data/v2/{publisher-key}/{document-key}/{model-name}.json.\n\n## Keys\nDocuments when onboarded are given a short key. To allow for data to be presented in the same views, even with conflicting data names, we by convention choose the keys of an individual data item to be <document-key>_<slugified-name>, or for child objects, such as CreatureActions, <document-key>_<slugified-parent-name>_<slugified-name> which should be unique per object all cases. The only violation of this rule is on legendary actions, which are also CreatureActions, so Legendary Bite can be distinct from Bite.\n\n**Examples:**\n> srd_magic-missile - The original Magic Missile, from Wizard's of the Coast's Systems Reference Document (srd)\n>\n> a5e-ag_acolyte - The Acolyte Background, from Advanced 5e's Adventurer's Guide (a5e-ag).","position":{"index":296,"start_char":0,"end_char":1349},"metadata":{"content_hash":"c5e69f3f01c50138"},"created_at":"2026-01-14T02:19:50.930Z"}
{"chunk_id":"24a44dd06766d32f7e427224fe741eb4","source_id":"ac8cdc75d2e366d9","text":"## Export\nTo export data, there's a new django command. All models in both v1 and v2 are supported for export, although at this time only v2 models could be edited while the site was live.\n\n```shell\npipenv run python manage.py export --dir data\n```\n\nThis is based on logic found [here](../../api_v2/management/commands/export.py), and leverages django's built-in concept of fixtures, but structures the \nfolders in a way that's consistent and flexible.\n\n## Known Issues\n- When exporting the data, some `v1` resources are slightly changed because of timestamp fields being updated the last time quicksetup was run. Make sure to roll these changes back before committing.","position":{"index":297,"start_char":0,"end_char":669},"metadata":{"content_hash":"222829dd0c848026"},"created_at":"2026-01-14T02:19:51.456Z"}
{"chunk_id":"2db6b4a89ef39a313e8d41f71501c279","source_id":"032e75bb26943b13","text":"## Import\nTo import data, there's a new django command.\n```shell\npipenv run python manage.py import --dir data\n```\nThis is based on logic found [here](../../api_v2/management/commands/import.py), \nand leverages django's built-in concept of fixtures.\n\nThis import command only imports all fixtures in the data directory. It has been added as part of `quicksetup` \ncommand (see [README.md](../../README.md)).","position":{"index":298,"start_char":0,"end_char":406},"metadata":{"content_hash":"675d8864b38653f2"},"created_at":"2026-01-14T02:19:51.861Z"}
{"chunk_id":"9e5c344073d60974868a637be164b06a","source_id":"9d13bc3bc9979529","text":"# Model Design\n\n## Base Models\nOur base open5e models are GameContent (an abstract), and Document, which is a description of the source document that the GameContent items come from. These more or less stay the same as they are in API V1.","position":{"index":299,"start_char":0,"end_char":238},"metadata":{"content_hash":"1fed912b99f827f2"},"created_at":"2026-01-14T02:19:52.288Z"}
{"chunk_id":"96728c33b905c312d5119419ab834988","source_id":"6b4c7dc7ff58b961","text":"# Shared concepts\n\nIn the current implementation, certain concepts are so universal that we have decided to have them be considered \"core\", as they are basic world concepts with basically the same definition between. Exceptions that arise can be implemented within the individual document.\n\nThese concepts include:\n- Ability (e.g. Strength)\n- Alignment (e.g. Chaotic Good)\n- Creature Type (e.g. Abberation)\n- Damage Types (e.g. Acid)\n- Environment (e.g. Mountains)\n- ItemCategory (e.g. Scroll)\n- ItemRarity (e.g. Uncommon)\n- Language (e.g. Dwarvish)\n- Size (e.g. Large)\n- Skill (e.g. Animal Handling)\n- Spell School (e.g. Illusion)","position":{"index":300,"start_char":0,"end_char":631},"metadata":{"content_hash":"c2c1448d085ab150"},"created_at":"2026-01-14T02:19:52.725Z"}
{"chunk_id":"69e7351975fc2e0224186a528cf95c58","source_id":"358c04fab87b476c","text":"import requests\n\nfrom approvaltests import verify_as_json, Options,  DiffReporter\nfrom typing import Callable\n\nAPI_BASE = f\"http://localhost:8000\"\n\nclass TestObjects:\n\n    def _verify(self, endpoint: str, transformer: Callable[[dict], None] = None):\n        response = requests.get(API_BASE + endpoint, allow_redirects=True, headers = {'Accept': 'application/json'}).json()\n        if transformer:\n            transformer(response)\n        verify_as_json(response, options=Options().with_reporter(DiffReporter()))\n\n    # /ITEMS ENDPOINT\n    def test_item_example(self):\n        path=\"/v2/items/srd_apparatus-of-the-crab/\"\n        self._verify(path)\n\n    def test_item_melee_weapon_example(self):\n        path=\"/v2/items/srd_shortsword/\"\n        self._verify(path)\n\n    def test_item_ranged_weapon_example(self):\n        path=\"/v2/items/srd_longbow/\"\n        self._verify(path)\n\n    def test_item_armor_example(self):\n        path=\"/v2/items/srd_splint-armor/\"\n        self._verify(path)\n\n    # /ITEMSETS ENDPOINT\n    def test_item_set_example(self):\n        path=\"/v2/itemsets/arcane-focuses/\"\n        self._verify(path)\n\n    # /ITEMCATEGORIES ENDPOINT\n    def test_item_category_example(self):\n        path=\"/v2/itemcategories/weapon/\"\n        self._verify(path)\n\n    # /DOCUMENTS ENDPOINT\n    def test_document_example(self):\n        path=\"/v2/documents/srd-2014/\"\n        self._verify(path)\n\n    # /LICENSES ENDPOINT\n    def test_license_example(self):\n        path=\"/v2/licenses/ogl-10a/\"\n       ","position":{"index":301,"start_char":0,"end_char":1500},"metadata":{"content_hash":"512b21785d874ad0"},"created_at":"2026-01-14T02:19:53.098Z"}
{"chunk_id":"4ba5e74952b4eb87c8dfd04999c3705e","source_id":"358c04fab87b476c","text":"ments/srd-2014/\"\n        self._verify(path)\n\n    # /LICENSES ENDPOINT\n    def test_license_example(self):\n        path=\"/v2/licenses/ogl-10a/\"\n        self._verify(path)\n\n    # /PUBLISHERS ENDPOINT\n    def test_publisher_example(self):\n        path=\"/v2/publishers/wizards-of-the-coast/\"\n        self._verify(path)\n    \n    # /WEAPONS ENDPOINT\n    def test_weapon_example(self):\n        path=\"/v2/weapons/srd_shortsword/\"\n        self._verify(path)\n\n    def test_weapon_with_mastery_example(self):\n        path=\"/v2/weapons/srd-2024_longsword/\"\n        self._verify(path)\n\n    # /ARMOR ENDPOINT\n    def test_armor_example(self):\n        path=\"/v2/armor/srd_splint/\"\n        self._verify(path)\n\n    # /GAMESYSTEM ENDPOINT\n    def test_gamesystem_example(self):\n        path=\"/v2/gamesystems/o5e/\"\n        self._verify(path)\n\n    # /BACKGROUNDS ENDPOINT\n    def test_background_example(self):\n        path=\"/v2/backgrounds/srd_acolyte/\"\n        self._verify(path)\n\n    # /FEATS ENDPOINT\n    def test_feats_example(self):\n        path=\"/v2/feats/srd_grappler/\"\n        self._verify(path)\n\n    # /SPECIES ENDPOINT\n    def test_species_example(self):\n        path=\"/v2/species/srd_halfling/\"\n        self._verify(path)\n\n    # /CREATURES ENDPOINT\n    def test_creature_goblin_example(self):\n        path=\"/v2/creatures/srd_goblin/\"\n        self._verify(path)\n\n    def test_creature_guard_example(self):\n        path=\"/v2/creatures/srd_guard/\"\n        self._verify(path)\n\n    def test_creature_ancient_examp","position":{"index":302,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"bc2497e1b47a3fa9"},"created_at":"2026-01-14T02:19:53.098Z"}
{"chunk_id":"288776e3d38d9fab03efc7423ba6b6d0","source_id":"358c04fab87b476c","text":"h)\n\n    def test_creature_guard_example(self):\n        path=\"/v2/creatures/srd_guard/\"\n        self._verify(path)\n\n    def test_creature_ancient_example(self):\n        path=\"/v2/creatures/srd_ancient-red-dragon/\"\n        self._verify(path)\n\n    # CREATURETYPES ENDPOINT\n    def test_creaturetype_example(self):\n        path=\"/v2/creaturetypes/elemental/\"\n        self._verify(path)\n\n    # CREATURESETS ENDPOINT\n    def test_creatureset_example(self):\n        path=\"/v2/creaturesets/common-mounts/\"\n        self._verify(path)\n\n    # DAMAGETYPES ENDPOINT\n    def test_damagetype_example(self):\n        path=\"/v2/damagetypes/radiant/\"\n        self._verify(path)\n\n    # LANGUAGES ENDPOINT\n    def test_language_example(self):\n        path=\"/v2/languages/abyssal/\"\n        self._verify(path)\n\n    # ALIGNMENTS ENDPOINT\n    def test_alignment_example(self):\n        path=\"/v2/alignments/chaotic-good/\"\n        self._verify(path)\n\n    # CONDITIONS ENDPOINT\n    def test_condition_example(self):\n        path=\"/v2/conditions/stunned/\"\n        self._verify(path)\n\n    # SPELLS ENDPOINT\n    def test_spell_cantrip_example(self):\n        path=\"/v2/spells/srd_prestidigitation/\"\n        self._verify(path)\n    \n    def test_spell_fireball(self):\n        path=\"/v2/spells/srd_fireball/\"\n        self._verify(path)\n    \n    def test_spell_wish(self):\n        path=\"/v2/spells/srd_wish/\"\n        self._verify(path)\n    \n    # CLASSES ENDPOINT\n    def test_class_example(self):\n        path=\"/v2/classes/srd_barbaria","position":{"index":303,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"ba0266da9aa38b69"},"created_at":"2026-01-14T02:19:53.098Z"}
{"chunk_id":"1b91415f025062de722e9dd5f18ea847","source_id":"358c04fab87b476c","text":"\"/v2/spells/srd_wish/\"\n        self._verify(path)\n    \n    # CLASSES ENDPOINT\n    def test_class_example(self):\n        path=\"/v2/classes/srd_barbarian/\"\n        self._verify(path)\n    \n    def test_subclass_example(self):\n        path=\"/v2/classes/srd_thief/\"\n        self._verify(path)\n    \n    # SIZES ENDPOINT\n    def test_size_example(self):\n        path=\"/v2/sizes/huge/\"\n        self._verify(path)\n    \n    # ITEMRARITIES ENDPOINT\n    def test_itemrarity_example(self):\n        path=\"/v2/itemrarities/common/\"\n        self._verify(path)\n\n    # ENVIRONMENTS ENDPOINT\n    def test_environment_example(self):\n        path=\"/v2/environments/srd_astral-plane/\"\n        self._verify(path)\n\n    # ABILITIES ENDPOINT\n    def test_ability_example(self):\n        path=\"/v2/abilities/dex/\"\n        self._verify(path)\n\n    # SKILLS ENDPOINT\n    def test_skill_example(self):\n        path=\"/v2/skills/insight/\"\n        self._verify(path)\n\n    # WEAPONPROPERTIES ENDPOINT\n    def test_weaponproperty_standard_example(self):\n        path=\"/v2/weaponproperties/srd-2014_finesse-wp/\"\n        self._verify(path)\n\n    def test_weaponproperty_mastery_example(self):\n        path=\"/v2/weaponproperties/srd-2024_cleave-mastery/\"\n        self._verify(path)\n\n    def test_weaponproperties_mastery_filter(self):\n        path=\"/v2/weaponproperties/?type=Mastery&limit=3\"\n        self._verify(path)\n\n    def test_weaponproperties_standard_filter(self):\n        path=\"/v2/weaponproperties/?type__isnull=true&document__key","position":{"index":304,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"6d4f28fbde601f34"},"created_at":"2026-01-14T02:19:53.098Z"}
{"chunk_id":"6afd5057b8df505c79a1343831a48743","source_id":"358c04fab87b476c","text":"\"\n        self._verify(path)\n\n    def test_weaponproperties_standard_filter(self):\n        path=\"/v2/weaponproperties/?type__isnull=true&document__key=srd-2024&limit=3\"\n        self._verify(path)","position":{"index":305,"start_char":5400,"end_char":5595},"metadata":{"content_hash":"c4264552acc17a62"},"created_at":"2026-01-14T02:19:53.098Z"}
{"chunk_id":"2f3928b86ad5ee728dd5833d7306dd94","source_id":"6d5ad5b2ba24473c","text":"from rest_framework.test import APITestCase\n\n\nclass APIV2RootTest(APITestCase):\n    \"\"\"Test cases for testing the / root of the API.\"\"\"\n\n    def test_get_root_headers(self):\n        \"\"\"Server response headers from the API root.\"\"\"\n        response = self.client.get(f'/v2/?format=json')\n\n        self.assertEqual(response.status_code, 200)\n        self.assertEqual(response.headers['allow'], 'GET, HEAD, OPTIONS')\n        self.assertEqual(response.headers['content-type'], 'application/json')\n        self.assertEqual(response.headers['X-Frame-Options'], 'DENY')\n        self.assertEqual(response.headers['X-Content-Type-Options'], 'nosniff')\n        self.assertEqual(response.headers['Referrer-Policy'], 'same-origin')\n\n    def test_get_root_list(self):\n        \"\"\"\n        Confirm the list of resources available at the root.\n\n        Checks the response for each of the known endpoints.\n        Two results, one for the name, one for the link.\n        \"\"\"\n        response = self.client.get(f'/v2/?format=json')\n\n        self.assertContains(response, 'documents', count=2)\n        self.assertContains(response, 'publishers', count=2)\n        self.assertContains(response, 'licenses', count=2)\n        self.assertContains(response, 'gamesystems', count=2)\n        self.assertContains(response, 'items', count=6) #include itemsets\n        self.assertContains(response, 'itemsets', count=2)\n        self.assertContains(response, 'weapons', count=2)\n        self.assertContains(response, 'armor', coun","position":{"index":306,"start_char":0,"end_char":1500},"metadata":{"content_hash":"b6f29fd0ace921d5"},"created_at":"2026-01-14T02:19:53.814Z"}
{"chunk_id":"3e0c8dad55a001fe8a313fa3abc121be","source_id":"6d5ad5b2ba24473c","text":"tContains(response, 'itemsets', count=2)\n        self.assertContains(response, 'weapons', count=2)\n        self.assertContains(response, 'armor', count=2)\n        self.assertContains(response, 'creatures', count=4) #includes creaturesets\n\n    def test_options_root_data(self):\n        \"\"\"\n        Confirm the OPTIONS response available at the root.\n\n        Checks the response for each of known values.\n        \"\"\"\n        response = self.client.get(f'/v2/?format=json', REQUEST_METHOD='OPTIONS')\n        self.assertEqual(response.json()['name'], 'Api Root')\n        self.assertEqual(\n            response.json()['description'],\n            'The default basic root view for DefaultRouter')\n        self.assertEqual(\n            response.json()['renders'], [\n                \"application/json\", \"text/html\"])\n        self.assertEqual(\n            response.json()['parses'], [\n                \"application/json\",\n                \"application/x-www-form-urlencoded\",\n                \"multipart/form-data\"])","position":{"index":307,"start_char":1350,"end_char":2354},"metadata":{"content_hash":"0cb331d98bc8fe7e"},"created_at":"2026-01-14T02:19:53.814Z"}
{"chunk_id":"2327691edb704c9757c5ff8ed1209e33","source_id":"d6b0f0b9decd2a6a","text":"import os\nimport csv\nimport json\nimport time\n\nfrom django.core.management import call_command\nfrom django.core.management.base import BaseCommand\n\nfrom django.core import serializers\n\nfrom django.apps import apps\nfrom django.apps import AppConfig\n\nfrom api_v2.models import *\nfrom api import models as v1\n\nclass Command(BaseCommand):\n    \"\"\"Implementation for the `manage.py `export` subcommand.\"\"\"\n\n    help = 'Export all v2 model data in structured directory.'\n\n    def add_arguments(self, parser):\n        parser.add_argument(\"-d\",\n                            \"--dir\",\n                            type=str,\n                            help=\"Directory to write files to.\")\n\n        parser.add_argument(\"-f\",\n                            \"--format\",\n                            type=str,\n                            choices = ['csv','json'],\n                            default = 'json',\n                            help=\"File format of the output files.\")\n\n\n    def handle(self, *args, **options) -> None:\n        \n        self.stdout.write('Checking if directory exists.')\n        if os.path.exists(options['dir']) and os.path.isdir(options['dir']):\n            self.stdout.write('Directory {} exists.'.format(options['dir']))\n        else:\n            self.stdout.write(self.style.ERROR(\n                'Directory {} does not exist.'.format(options['dir'])))\n            exit(0)\n\n        app_models = apps.get_models()\n\n        # Start v1 output.\n        v1documents = v1.Document.objects.all()\n ","position":{"index":308,"start_char":0,"end_char":1500},"metadata":{"content_hash":"04ec38d68f520a99"},"created_at":"2026-01-14T02:19:54.384Z"}
{"chunk_id":"fde73da6e03f1b586d2c9829e5d4afd5","source_id":"d6b0f0b9decd2a6a","text":"ns['dir'])))\n            exit(0)\n\n        app_models = apps.get_models()\n\n        # Start v1 output.\n        v1documents = v1.Document.objects.all()\n        for v1doc in v1documents:\n            v1docq = v1.Document.objects.filter(slug=v1doc.slug).order_by('pk')\n            v1doc_path = get_filepath_by_model(\n                \"Document\",\n                \"api\",\n                doc_key=v1doc.slug,\n                base_path=options['dir'],\n                format=options['format'])\n            write_queryset_data(v1doc_path, v1docq, format=options['format'])\n\n            for model in app_models:\n                if model._meta.app_label == 'api':\n                    if model.__name__ == \"MonsterSpell\":\n                        modelq = model.objects.filter(monster__document=v1doc).order_by('pk')\n                    SKIPPED_MODEL_NAMES = ['Document', 'Manifest','MonsterSpell']\n                    if model.__name__ not in SKIPPED_MODEL_NAMES:\n                        modelq = model.objects.filter(document=v1doc).order_by('pk')\n                    else: continue\n                else:\n                    continue\n                model_path = get_filepath_by_model(\n                    model.__name__,\n                    model._meta.app_label,\n                    doc_key=v1doc.slug,\n                    base_path=options['dir'],\n                    format=options['format'])\n                write_queryset_data(model_path, modelq, format=options['format'])\n\n            self.stdout.write(self.","position":{"index":309,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"5c5b144079da855c"},"created_at":"2026-01-14T02:19:54.384Z"}
{"chunk_id":"61699e4eb3dee2efe39084661f0bd652","source_id":"d6b0f0b9decd2a6a","text":"      format=options['format'])\n                write_queryset_data(model_path, modelq, format=options['format'])\n\n            self.stdout.write(self.style.SUCCESS(\n                'Wrote {} to {}'.format(v1doc.slug, v1doc_path)))\n\n        self.stdout.write(self.style.SUCCESS('Data for v1 data complete.'))\n\n        # Start V2 output.\n        gamesystems = GameSystem.objects.all()\n        gamesystem_path = get_filepath_by_model(\n            'GameSystem',\n            'api_v2',\n            base_path=options['dir'],\n            format=options['format'])\n        write_queryset_data(gamesystem_path, gamesystems, format=options['format'])\n\n        license_path = get_filepath_by_model(\n            'License',\n            'api_v2',\n            base_path=options['dir'],\n            format=options['format'])\n        licenses = License.objects.all()\n        write_queryset_data(license_path, licenses, format=options['format'])\n\n        # Create a folder and Publisher fixture for each pubishing org.\n        for pub in Publisher.objects.order_by('key'):\n            pubq = Publisher.objects.filter(key=pub.key).order_by('pk')\n            pub_path = get_filepath_by_model(\n                \"Publisher\",\n                \"api_v2\",\n                pub_key=pub.key,\n                base_path=options['dir'],\n                format=options['format'])\n            write_queryset_data(pub_path, pubq, format=options['format'])\n\n            # Create a Document fixture for each document.\n            for doc in","position":{"index":310,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"b3a60ac03bf08344"},"created_at":"2026-01-14T02:19:54.384Z"}
{"chunk_id":"fffc90e3045ef674449d6bbb6c950e36","source_id":"d6b0f0b9decd2a6a","text":"      write_queryset_data(pub_path, pubq, format=options['format'])\n\n            # Create a Document fixture for each document.\n            for doc in Document.objects.filter(publisher=pub):\n                docq = Document.objects.filter(key=doc.key).order_by('pk')\n                doc_path = get_filepath_by_model(\n                    \"Document\",\n                    \"api_v2\",\n                    pub_key=pub.key,\n                    doc_key=doc.key,\n                    base_path=options['dir'],\n                    format=options['format'])\n                write_queryset_data(doc_path, docq, format=options['format'])\n\n                for model in app_models:\n                    SKIPPED_MODEL_NAMES = ['Document', 'GameSystem', 'License', 'Publisher','SearchResult']\n                    CHILD_MODEL_NAMES = ['SpeciesTrait', 'FeatBenefit', 'BackgroundBenefit', 'ClassFeatureItem', 'SpellCastingOption','CreatureAction', 'CreatureTrait']\n                    CHILD_CHILD_MODEL_NAMES = ['CreatureActionAttack']\n                    \n                    if model._meta.app_label == 'api_v2' and model.__name__ not in SKIPPED_MODEL_NAMES and model.__name__ not in CONCEPT_MODEL_NAMES:\n                        modelq=None\n                        if model.__name__ in CHILD_CHILD_MODEL_NAMES:\n                            modelq = model.objects.filter(parent__parent__document=doc).order_by('pk')\n                        if model.__name__ in CHILD_MODEL_NAMES:\n                            modelq = model.o","position":{"index":311,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"41ecda6c47967c6f"},"created_at":"2026-01-14T02:19:54.384Z"}
{"chunk_id":"a8696d048fe389e3c05b44851eba8f40","source_id":"d6b0f0b9decd2a6a","text":"ent__parent__document=doc).order_by('pk')\n                        if model.__name__ in CHILD_MODEL_NAMES:\n                            modelq = model.objects.filter(parent__document=doc).order_by('pk')\n                        if modelq is None:\n                            modelq = model.objects.filter(document=doc).order_by('pk')\n                        model_path = get_filepath_by_model(\n                            model.__name__,\n                            model._meta.app_label,\n                            pub_key=pub.key,\n                            doc_key=doc.key,\n                            base_path=options['dir'],\n                            format=options['format'])\n                        write_queryset_data(model_path, modelq, format=options['format'])\n\n                self.stdout.write(self.style.SUCCESS(\n                    'Wrote {} to {}'.format(doc.key, doc_path)))\n\n        self.stdout.write(self.style.SUCCESS('Data for v2 data complete.'))\n\n\ndef get_filepath_by_model(model_name, app_label, pub_key=None, doc_key=None, base_path=None, format='json'):\n    if not format.startswith('.'):\n        file_ext = \".\"+format\n    else:\n        file_ext = format\n\n    if app_label == \"api_v2\":\n        root_folder_name = 'v2'\n        root_models = ['License', 'GameSystem']  # Concept models are exported at root level\n        pub_models = ['Publisher']\n        \n        if model_name in root_models:\n            return \"/\".join((base_path, root_folder_name, model_name+file_ext))","position":{"index":312,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"4025942f66365483"},"created_at":"2026-01-14T02:19:54.384Z"}
{"chunk_id":"09a65beef22e03119e0512f75da37aa6","source_id":"d6b0f0b9decd2a6a","text":"_models = ['Publisher']\n        \n        if model_name in root_models:\n            return \"/\".join((base_path, root_folder_name, model_name+file_ext))\n\n        if model_name in pub_models:\n            return \"/\".join((base_path, root_folder_name, pub_key, model_name+file_ext))\n\n        else:\n            return \"/\".join((base_path, root_folder_name, pub_key, doc_key, model_name+file_ext))\n\n    if app_label == \"api\":\n        root_folder_name = 'v1'\n        root_models = ['Manifest']\n        doc_folder_name = doc_key\n\n        if model_name in root_models:\n            return \"/\".join((base_path, root_folder_name, model_name+file_ext))\n\n        else:\n            return \"/\".join((base_path, root_folder_name, doc_key, model_name+file_ext))\n\n\ndef write_queryset_data(filepath, queryset, format='json'):\n    if queryset.count() > 0:\n        dir = os.path.dirname(filepath)\n        if not os.path.exists(dir):\n            os.makedirs(dir)\n\n        output_filepath = filepath\n\n        with open(output_filepath, 'w', encoding='utf-8') as f:\n            if format=='json':\n                serializers.serialize(\"json\", queryset, indent=2, stream=f, sort_keys=True)\n            if format=='csv':\n                # Create headers:\n                fieldnames = []\n                for field in queryset.first().__dict__.keys():\n                    if not field.startswith(\"_\"):\n                        fieldnames.append(field)\n                \n                writer = csv.DictWriter(f, fieldnames=fieldnam","position":{"index":313,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"2c0374a54e362c77"},"created_at":"2026-01-14T02:19:54.384Z"}
{"chunk_id":"183669e79660c32a8b5641e53b5c8a65","source_id":"d6b0f0b9decd2a6a","text":"ield.startswith(\"_\"):\n                        fieldnames.append(field)\n                \n                writer = csv.DictWriter(f, fieldnames=fieldnames)\n                writer.writeheader()\n                writer.writerows(queryset.values())","position":{"index":314,"start_char":8100,"end_char":8342},"metadata":{"content_hash":"c03ee02079beaf26"},"created_at":"2026-01-14T02:19:54.384Z"}
{"chunk_id":"0a95596095de3d579c532dcb6e21e195","source_id":"8577c7e188a80b27","text":"import os\nimport json\nimport glob\n\nfrom django.core.management import call_command\nfrom django.core.management.base import BaseCommand\nfrom django.db import IntegrityError, connection\nfrom django.core import serializers\n\nclass Command(BaseCommand):\n    \"\"\"Implementation for the `manage.py `dumpbyorg` subcommand.\"\"\"\n\n    help = 'Import all v2 model data recursively in structured directory.'\n\n    def add_arguments(self, parser):\n        parser.add_argument(\"-d\",\n                            \"--dir\",\n                            type=str,\n                            help=\"Directory to write files to.\")\n        parser.add_argument(\"--skip-concepts\",\n                            action=\"store_true\",\n                            help=\"Skip automatic concept population after import.\")\n        parser.add_argument(\"--debug\",\n                            action=\"store_true\",\n                            help=\"Load files one by one to identify problematic data.\")\n\n    def handle(self, *args, **options) -> None:\n        self.stdout.write('Checking if directory exists.')\n        if os.path.exists(options['dir']) and os.path.isdir(options['dir']):\n            self.stdout.write('Directory {} exists.'.format(options['dir']))\n        else:\n            self.stdout.write(self.style.ERROR(\n                'Directory {} does not exist.'.format(options['dir'])))\n            exit(0)\n\n        fixture_filepaths = glob.glob(options['dir'] + '/**/*.json', recursive=True)\n        \n        self.stdout.write(f'","position":{"index":315,"start_char":0,"end_char":1500},"metadata":{"content_hash":"5c766b8a78ad01de"},"created_at":"2026-01-14T02:19:55.008Z"}
{"chunk_id":"bb1d4e0c723f6a1bfb6e8dd081efb349","source_id":"8577c7e188a80b27","text":"r'])))\n            exit(0)\n\n        fixture_filepaths = glob.glob(options['dir'] + '/**/*.json', recursive=True)\n        \n        self.stdout.write(f'Found {len(fixture_filepaths)} fixture files to load.')\n        \n        if options['debug']:\n            self._load_files_individually(fixture_filepaths)\n        else:\n            try:\n                # Disable foreign key checks during loading\n                self._disable_foreign_key_checks()\n                self.stdout.write('Disabled foreign key constraints for loading.')\n\n                call_command('loaddata', fixture_filepaths)\n                \n                # Re-enable foreign key checks and validate\n                self._enable_foreign_key_checks()\n                self.stdout.write('Re-enabled foreign key constraints.')\n                \n                # Check constraints after all data is loaded\n                self._check_constraints()\n                self.stdout.write('All foreign key constraints validated successfully.')\n                \n            except IntegrityError as e:\n                # Re-enable foreign key checks even if there was an error\n                self._enable_foreign_key_checks()\n                \n                self.stdout.write(self.style.ERROR(\n                    f'Data import completed but foreign key constraint validation failed.'\n                ))\n                self.stdout.write(self.style.ERROR(f'Error details: {e}'))\n                \n                # Extract and format the violati","position":{"index":316,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"94360260a831bb29"},"created_at":"2026-01-14T02:19:55.008Z"}
{"chunk_id":"a99c7a27e92b2efd5ff3097fe4dda379","source_id":"8577c7e188a80b27","text":"       ))\n                self.stdout.write(self.style.ERROR(f'Error details: {e}'))\n                \n                # Extract and format the violation details for a clear worklist\n                if \"Foreign key constraint violations found:\" in str(e):\n                    violations = str(e).split(\"Foreign key constraint violations found:\\n\")[1]\n                    self.stdout.write(self.style.ERROR('\\nFOREIGN KEY CONSTRAINT VIOLATIONS - WORKLIST:'))\n                    for violation in violations.split('\\n'):\n                        if violation.strip():\n                            self.stdout.write(self.style.ERROR(f'  • {violation}'))\n                \n                self.stdout.write(self.style.ERROR(\n                    '\\nData import FAILED due to foreign key constraint violations.'\n                ))\n                self.stdout.write(self.style.WARNING(\n                    'Fix the above violations and re-run the import.'\n                ))\n                raise\n\n    def _disable_foreign_key_checks(self):\n        \"\"\"Disable foreign key constraint checking.\"\"\"\n        with connection.cursor() as cursor:\n            if connection.vendor == 'sqlite':\n                cursor.execute('PRAGMA foreign_keys = OFF;')\n            elif connection.vendor == 'mysql':\n                cursor.execute('SET foreign_key_checks = 0;')\n            elif connection.vendor == 'postgresql':\n                cursor.execute('SET session_replication_role = replica;')\n\n    def _enable_foreign_key_","position":{"index":317,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"5a1ebcb4216ea996"},"created_at":"2026-01-14T02:19:55.008Z"}
{"chunk_id":"f5476c67ad90455b2ee1ef8cc6d4a2e8","source_id":"8577c7e188a80b27","text":"       elif connection.vendor == 'postgresql':\n                cursor.execute('SET session_replication_role = replica;')\n\n    def _enable_foreign_key_checks(self):\n        \"\"\"Re-enable foreign key constraint checking.\"\"\"\n        with connection.cursor() as cursor:\n            if connection.vendor == 'sqlite':\n                cursor.execute('PRAGMA foreign_keys = ON;')\n            elif connection.vendor == 'mysql':\n                cursor.execute('SET foreign_key_checks = 1;')\n            elif connection.vendor == 'postgresql':\n                cursor.execute('SET session_replication_role = DEFAULT;')\n\n    def _check_constraints(self):\n        \"\"\"Check all foreign key constraints after loading.\"\"\"\n        try:\n            with connection.cursor() as cursor:\n                if connection.vendor == 'sqlite':\n                    cursor.execute('PRAGMA foreign_key_check;')\n                    violations = cursor.fetchall()\n                    if violations:\n                        violation_details = []\n                        for violation in violations:\n                            violation_details.append(f\"Table: {violation[0]}, Row: {violation[1]}, Parent: {violation[2]}, FK: {violation[3]}\")\n                        raise IntegrityError(f\"Foreign key constraint violations found:\\n\" + \"\\n\".join(violation_details))\n                    pass\n        except Exception as e:\n            raise IntegrityError(f\"Foreign key constraint validation failed: {e}\")\n\n    def _load_files_individu","position":{"index":318,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"22d527d4b2018a33"},"created_at":"2026-01-14T02:19:55.008Z"}
{"chunk_id":"41e04d86c40ec096c70f7d2beebcd500","source_id":"8577c7e188a80b27","text":"  pass\n        except Exception as e:\n            raise IntegrityError(f\"Foreign key constraint validation failed: {e}\")\n\n    def _load_files_individually(self, fixture_filepaths):\n        \"\"\"Load fixture files one by one to identify which one causes the foreign key error.\"\"\"\n        loaded_count = 0\n        \n        for filepath in sorted(fixture_filepaths):\n            try:\n                self.stdout.write(f'Loading: {filepath}')\n                call_command('loaddata', filepath)\n                loaded_count += 1\n            except IntegrityError as e:\n                self.stdout.write(self.style.ERROR(\n                    f'FOREIGN KEY CONSTRAINT FAILED in file: {filepath}'\n                ))\n                self.stdout.write(self.style.ERROR(f'Error: {e}'))\n                \n                # Try to identify the specific problematic object\n                self._analyze_problematic_file(filepath)\n                \n                self.stdout.write(f'Successfully loaded {loaded_count} files before failure.')\n                raise\n            except Exception as e:\n                self.stdout.write(self.style.ERROR(\n                    f'Other error in file {filepath}: {e}'\n                ))\n                raise\n\n        call_command('loaddata', fixture_filepaths)\n        \n        # After loading data, populate concept objects to aggregate equivalent content across systems\n        if not options.get('skip_concepts', False):\n            self.stdout.write(self.style.SUCCESS('","position":{"index":319,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"14fa5072dc368d0f"},"created_at":"2026-01-14T02:19:55.008Z"}
{"chunk_id":"7eaef4afe0f08e391cc7bbd0c0b101e0","source_id":"8577c7e188a80b27","text":" to aggregate equivalent content across systems\n        if not options.get('skip_concepts', False):\n            self.stdout.write(self.style.SUCCESS('Data import complete. Now populating concept aggregations...'))\n            call_command('populate_concepts')\n        else:\n            self.stdout.write('Skipping concept population (--skip-concepts flag provided)')\n\n    def _analyze_problematic_file(self, filepath):\n        \"\"\"Analyze the problematic file to identify specific objects causing issues.\"\"\"\n        try:\n            with open(filepath, 'r') as f:\n                data = json.load(f)\n            \n            self.stdout.write(f'Analyzing {len(data)} objects in {filepath}:')\n            \n            for i, obj in enumerate(data):\n                try:\n                    # Try to deserialize just this one object\n                    for deserialized_obj in serializers.deserialize('json', [obj]):\n                        # Try to save it\n                        deserialized_obj.save()\n                except IntegrityError as e:\n                    self.stdout.write(self.style.ERROR(\n                        f'  Object {i+1}: {obj.get(\"model\", \"unknown\")} '\n                        f'pk=\"{obj.get(\"pk\", \"unknown\")}\" FAILED'\n                    ))\n                    self.stdout.write(self.style.ERROR(f'    Error: {e}'))\n                    \n                    # Show the object's foreign key fields\n                    fields = obj.get('fields', {})\n                    fk_field","position":{"index":320,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"3cda978ef15c9767"},"created_at":"2026-01-14T02:19:55.008Z"}
{"chunk_id":"a0eb65fab5ac9a7deb0e4f032c7d9b7d","source_id":"8577c7e188a80b27","text":"           \n                    # Show the object's foreign key fields\n                    fields = obj.get('fields', {})\n                    fk_fields = {}\n                    for field_name, field_value in fields.items():\n                        if field_value and (isinstance(field_value, str) or isinstance(field_value, list)):\n                            # Likely a foreign key reference\n                            fk_fields[field_name] = field_value\n                    \n                    if fk_fields:\n                        self.stdout.write(f'    Foreign key fields: {fk_fields}')\n                    \n                    return  # Stop at first problematic object\n                except Exception as e:\n                    self.stdout.write(self.style.WARNING(\n                        f'  Object {i+1}: Other error - {e}'\n                    ))\n                    \n        except Exception as e:\n            self.stdout.write(self.style.ERROR(f'Could not analyze file: {e}'))","position":{"index":321,"start_char":8100,"end_char":9090},"metadata":{"content_hash":"f3867891e8173284"},"created_at":"2026-01-14T02:19:55.008Z"}
{"chunk_id":"f657fd56eca314a203d19298a5366f99","source_id":"23c8905ffa87765e","text":"<p align=\"center\">\n  <img src=\"logo.png\" width=\"200px\" align=\"center\" alt=\"Open5e logo\" />\n  <h1 align=\"center\">Open5e</h1>\n  <p align=\"center\">\n    <a href=\"https://open5e.com\">https://open5e.com</a>\n    <br/>\n    Site for browsing open D&D 5e content\n  </p>\n</p>\n<br />\n\n<p align=\"center\">\n<a href=\"https://api.open5e.com\" rel=\"nofollow\"><img src=\"https://img.shields.io/website?down_message=Down&label=Open5e%20API&up_message=Up&url=https%3A%2F%2Fapi.open5e.com\" alt=\"API\"></a>\n<a href=\"https://open5e.com\" rel=\"nofollow\"><img src=\"https://img.shields.io/website?down_message=Down&label=Open5e&up_message=Up&url=https%3A%2F%2Fopen5e.com\" alt=\"homepage\"></a>\n</p>\n\n<div align=\"center\">\n    <a href=\"https://api.open5e.com\">API</a>\n    <span>&nbsp;&nbsp;•&nbsp;&nbsp;</span>\n    <a href=\"https://discord.gg/9RNE2rY\">Discord</a>\n    <span>&nbsp;&nbsp;•&nbsp;&nbsp;</span>\n    <a href=\"https://www.patreon.com/open5e\">Patreon</a>\n</div>\n\n<br/>\n\n# Introduction\n\nOpen5e is a community project driven by a small number of volunteers in their spare time. We welcome any and all contributions!\n\nUseful places to check out:\n\n- [Our discord](https://discord.gg/9RNE2rY) where we discuss the project and generally pal around. Bring your best memes.\n- [The project org homepage](https://github.com/open5e) which has links to our roadmaps and other resources\n\n# Development\n\nOpen5e uses the Nuxt3 framework for Vue3, which takes care of a lot of the architectural work for the frontend layer while allowing a la","position":{"index":322,"start_char":0,"end_char":1500},"metadata":{"content_hash":"ec74a2287f2f5a2c"},"created_at":"2026-01-14T02:19:55.811Z"}
{"chunk_id":"d81cde9f8724780237c9990c78e00179","source_id":"23c8905ffa87765e","text":" Development\n\nOpen5e uses the Nuxt3 framework for Vue3, which takes care of a lot of the architectural work for the frontend layer while allowing a large amount of flexibility.\n\n5e game content is fetched from the [open5e API](https://github.com/eepMoody/open5e-api) running at https://api.open5e.com. This can be redirected using the environment variable `API_URL`.\n\n## Build Setup\n\nInstall dependencies.\n```bash\nnpm install\n```\n\nRun the page in development mode.\n```bash\nnpm run dev\n```\n\nBuild for production and launch server.\n```bash\nnpm start\n```\n\nGenerate static project for publishing.\n```bash\nnpm run generate\n```\n\nFor detailed explanation on how things work, checkout the [Nuxt.js docs](https://github.com/nuxt/nuxt.js).","position":{"index":323,"start_char":1350,"end_char":2079},"metadata":{"content_hash":"8060ea77feb8de2e"},"created_at":"2026-01-14T02:19:55.811Z"}
{"chunk_id":"16cbde95062214f66a2044ae4b0c8043","source_id":"e3da89b7395375ea","text":"// https://nuxt.com/docs/api/configuration/nuxt-config\nexport default defineNuxtConfig({\n  app: {\n    pageTransition: {\n      name: 'fade',\n      mode: 'out-in',\n    },\n    /*\n     ** Headers of the page\n     */\n    head: {\n      title: 'Open5e',\n      meta: [\n        { charset: 'utf-8' },\n        { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n        {\n          hid: 'description',\n          name: 'description',\n          content: 'The truly open source for 5e rules and resources',\n        },\n      ],\n      link: [\n        { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },\n        {\n          rel: 'stylesheet',\n          href: 'https://fonts.googleapis.com/css?family=Lora:700',\n        },\n        {\n          rel: 'stylesheet',\n          href: 'https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i,700,700i',\n        },\n      ],\n      htmlAttrs: {\n        lang: 'en',\n      },\n    },\n  },\n  nitro: {\n    preset: 'digital-ocean',\n  },\n  // vite: {\n  //   resolve: {\n  //     alias: {\n  //       vue: 'vue/dist/vue.esm-bundler',\n  //     }\n  //   },\n  // },\n  modules: [\n    '@nuxtjs/tailwindcss',\n    'nuxt-icon',\n    '@hebilicious/vue-query-nuxt',\n    '@nuxt/test-utils/module',\n  ],\n  queryClientOptions: {\n    defaultOptions: { queries: { staleTime: Infinity } },\n  },\n  runtimeConfig: {\n    public: {\n      apiUrl: process.env.API_URL || 'https://api.open5e.com',\n    },\n  },\n  router: {\n    prefetchLinks: false,\n  },\n  hooks: {\n   ","position":{"index":324,"start_char":0,"end_char":1500},"metadata":{"content_hash":"34a9a7df9e7c267a"},"created_at":"2026-01-14T02:19:56.984Z"}
{"chunk_id":"499b892581d7ae9ef147c70b8d7bfe4d","source_id":"e3da89b7395375ea","text":": {\n    public: {\n      apiUrl: process.env.API_URL || 'https://api.open5e.com',\n    },\n  },\n  router: {\n    prefetchLinks: false,\n  },\n  hooks: {\n    'vite:extendConfig': (config, { isClient, isServer }) => {\n      if (isClient) {\n        config.resolve.alias.vue = 'vue/dist/vue.esm-bundler';\n      }\n    },\n  },\n  tailwindcss: {\n    configPath: '~/tailwind.config.ts',\n    cssPath: '~/styles/tailwind.css',\n  },\n});","position":{"index":325,"start_char":1350,"end_char":1768},"metadata":{"content_hash":"5a1b5aa05f4d14c5"},"created_at":"2026-01-14T02:19:56.984Z"}
{"chunk_id":"5a392af02a3b7fcbf56dd7494f6c5a52","source_id":"f76d41c30455fb97","text":"{\n  \"name\": \"nuxt-app\",\n  \"private\": true,\n  \"engines\": {\n    \"node\": \"20.x\"\n  },\n  \"type\": \"module\",\n  \"scripts\": {\n    \"build\": \"nuxt build\",\n    \"dev\": \"nuxt dev\",\n    \"generate\": \"nuxt generate\",\n    \"preview\": \"nuxt preview\",\n    \"postinstall\": \"nuxt prepare\",\n    \"prepare\": \"husky install\",\n    \"format\": \"npx prettier --write .\",\n    \"lint\": \"npm run lint:js && npm run lint:prettier\",\n    \"lint:ci\": \"eslint --ext .js,.vue --ignore-path .gitignore .\",\n    \"lint:js\": \"eslint --ext '.js,.vue' --ignore-path .gitignore .\",\n    \"lint:prettier\": \"prettier --check --ignore-path .gitignore '**/*.{js,vue}'\",\n    \"lintfix\": \"npm run lint:js -- --fix && npm run lint:prettier -- --write\",\n    \"pre-commit\": \"npx pretty-quick --staged && npm run lintfix\",\n    \"test\": \"npx vitest run --silent\",\n    \"start\": \"node .output/server/index.mjs\"\n  },\n  \"devDependencies\": {\n    \"@nuxt/eslint-config\": \"^0.1.1\",\n    \"@nuxt/test-utils\": \"^3.13.1\",\n    \"@nuxtjs/tailwindcss\": \"^6.7.0\",\n    \"@types/node\": \"^18\",\n    \"@vue/test-utils\": \"^2.4.6\",\n    \"eslint\": \"^8.41.0\",\n    \"eslint-config-prettier\": \"^8.8.0\",\n    \"eslint-plugin-import\": \"^2.27.5\",\n    \"eslint-plugin-prettier\": \"^4.2.1\",\n    \"eslint-plugin-vue\": \"^9.13.0\",\n    \"happy-dom\": \"^14.12.3\",\n    \"husky\": \"^8.0.3\",\n    \"nuxt\": \"^3.12.4\",\n    \"nuxt-icon\": \"^0.4.1\",\n    \"playwright-core\": \"^1.45.1\",\n    \"prettier-plugin-tailwindcss\": \"^0.3.0\",\n    \"pretty-quick\": \"^3.1.3\",\n    \"sass\": \"^1.62.1\",\n    \"vitest\": \"^1.6.0\"\n  },\n  \"dependencies\": {\n ","position":{"index":326,"start_char":0,"end_char":1500},"metadata":{"content_hash":"7d0917528de4e272"},"created_at":"2026-01-14T02:20:01.857Z"}
{"chunk_id":"f22cf50858226984d8ae1e415f358d43","source_id":"f76d41c30455fb97","text":"\",\n    \"prettier-plugin-tailwindcss\": \"^0.3.0\",\n    \"pretty-quick\": \"^3.1.3\",\n    \"sass\": \"^1.62.1\",\n    \"vitest\": \"^1.6.0\"\n  },\n  \"dependencies\": {\n    \"@headlessui/vue\": \"^1.7.14\",\n    \"@hebilicious/vue-query-nuxt\": \"^0.3.0\",\n    \"@heroicons/vue\": \"^2.0.18\",\n    \"@tanstack/vue-query\": \"^5.35.1\",\n    \"@vueuse/core\": \"^10.11.0\",\n    \"axios\": \"^1.7.4\",\n    \"tailwindcss\": \"^3.3.2\",\n    \"vue\": \"^3.3.4\",\n    \"vue-gtag-next\": \"^1.14.0\",\n    \"vue-showdown\": \"^4.1.0\"\n  }\n}","position":{"index":327,"start_char":1350,"end_char":1820},"metadata":{"content_hash":"c6ceda4098f2f945"},"created_at":"2026-01-14T02:20:01.857Z"}
{"chunk_id":"7283374dcf5f3f0b888ab03de917b1bd","source_id":"ea54297a145d2a39","text":"{\n  // https://nuxt.com/docs/guide/concepts/typescript\n  \"extends\": \"./.nuxt/tsconfig.json\"\n}","position":{"index":328,"start_char":0,"end_char":93},"metadata":{"content_hash":"986fbdd96533cd5d"},"created_at":"2026-01-14T02:20:02.610Z"}
{"chunk_id":"72c465332d7ccd4cb24f46aff6bc95e8","source_id":"d676aa161209f8bf","text":"let zIndex: { [key: number]: string } = {};\nfor (let i = -1; i <= 100; i++) {\n  zIndex[i] = `${i}`;\n}\n\nmodule.exports = {\n  content: [\n    './app.vue',\n    './pages/index.vue',\n    './pages/**/*.vue',\n    './components/*.vue',\n    './components/**/*.vue',\n  ],\n  darkMode: 'class',\n  theme: {\n    fontFamily: {\n      sans: ['\"Source Sans Pro\"', 'sans-serif'],\n      serif: ['\"Lora\"', 'serif'],\n    },\n    extend: {\n      colors: {\n        red: {\n          DEFAULT: '#E74C3C', // scss var $color-fireball\n          50: '#FBE2DF',\n          100: '#F9D1CD',\n          200: '#F4B0A9',\n          300: '#F08F85',\n          400: '#EB6D60',\n          500: '#E74C3C',\n          600: '#D12B1A',\n          700: '#9F2114',\n          800: '#6D160D',\n          900: '#3B0C07',\n          950: '#220704',\n        },\n\n        // colors from scss variables\n        blood: '#a82315',\n        mana: '#166c9c',\n        fog: '#f4f4f4',\n        smoke: '#d4d4d4',\n        granite: '#888',\n        // gray: '#767676', // this conflicts with an existing tailwind class\n        basalt: '#333',\n        darkness: '#111',\n      },\n\n      //adds z-index from 1 to 100\n      zIndex: zIndex,\n    },\n  },\n  plugins: [],\n};","position":{"index":329,"start_char":0,"end_char":1189},"metadata":{"content_hash":"4d29df76a08b9ba6"},"created_at":"2026-01-14T02:20:03.088Z"}
{"chunk_id":"d80f4d83688f06763ee8e2e0f2f563fd","source_id":"24f1a38263b13b2f","text":"import { defineVitestConfig } from '@nuxt/test-utils/config';\n\nexport default defineVitestConfig({\n  test: {\n    environment: 'nuxt',\n    environmentOptions: {\n      nuxt: {\n        mock: {\n          intersectionObserver: true,\n          indexedDb: true,\n        },\n      },\n    },\n  },\n});","position":{"index":330,"start_char":0,"end_char":290},"metadata":{"content_hash":"c96af7b90d03d954"},"created_at":"2026-01-14T02:20:03.498Z"}
{"chunk_id":"615ecf22ded9a231d56c863ade16a7d6","source_id":"bd588d428b4f207e","text":"<template>\n  <NuxtLayout />\n</template>","position":{"index":331,"start_char":0,"end_char":39},"metadata":{"content_hash":"d4d3581865b9fe49"},"created_at":"2026-01-14T02:20:03.794Z"}
{"chunk_id":"bf0d33336f3055301985a1e2561322d2","source_id":"04f131e3b4bcd487","text":"<template>\n  <div class=\"container\">\n    <h1>Critical Failure!</h1>\n    <h2>Error {{ error?.statusCode }}</h2>\n    <p class=\"font-italics\">{{ error?.message }}</p>\n\n    <button class=\"font-bold text-red hover:text-blood\" @click=\"handleError\">\n      Return to Homepage\n    </button>\n\n    <p>Try searching for what you need in the site menu</p>\n\n    <div class=\"roll-container\">\n      <svg\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        viewBox=\"0 0 312.78 312.78\"\n        xml:space=\"preserve\"\n        x=\"0px\"\n        y=\"0px\"\n        class=\"die-roll\"\n      >\n        <g>\n          <path\n            d=\"M201.4,285.94c-29.92-12.17-59.86-24.31-89.76-36.56c-3.46-1.42-5.05-0.76-6.77,2.76\n            c-6.85,14-14.12,27.8-21.23,41.67c0.58,0.33,1.15,0.66,1.73,1c1.97-0.12,3.93-0.35,5.9-0.36c41.27-0.1,82.53-0.17,123.8-0.25\n            c1.59,0,3.18-0.12,6.02-0.23C213.67,290.94,207.54,288.43,201.4,285.94z\"\n          />\n          <path\n            d=\"M78.7,32.17c-1.08,1.57-1.76,2.49-2.35,3.45c-18.67,30.22-37.32,60.44-56.03,90.64\n            c-1.73,2.79-3.8,5.38-5.72,8.06c-1.33,2.3-2.66,4.61-3.98,6.91c1.84-1.36,3.79-2.59,5.51-4.09c22.07-19.32,44.1-38.68,66.14-58.02\n            c6.07-5.33,12.16-10.65,18.5-16.2C93.33,52.56,86.14,42.54,78.7,32.17z\"\n          />\n          <path\n            d=\"M244.41,38.68c-0.28,0.06-0.57,0.11-0.85,0.17c5.95,35.83,11.94,71.66,17.79,107.51\n            c0.48,2.95,2.17,3.21,4.44,3.42c10.89,0.98,21","position":{"index":332,"start_char":0,"end_char":1500},"metadata":{"content_hash":"ab052c71689cef57"},"created_at":"2026-01-14T02:20:04.182Z"}
{"chunk_id":"36b4ae911af49f2bff6aa663dd7e382d","source_id":"04f131e3b4bcd487","text":"          d=\"M244.41,38.68c-0.28,0.06-0.57,0.11-0.85,0.17c5.95,35.83,11.94,71.66,17.79,107.51\n            c0.48,2.95,2.17,3.21,4.44,3.42c10.89,0.98,21.78,2.02,32.67,3.01c2.88,0.26,5.77,0.41,9.55,0.66\n            C286.5,114.62,265.45,76.65,244.41,38.68z\"\n          />\n          <path\n            d=\"M107.59,68.63c0.67,56.52,1.33,111.9,2,168.22c48.39-28.41,95.66-56.17,143.54-84.29\n            C204.43,124.48,156.6,96.9,107.59,68.63z\"\n          />\n          <path\n            d=\"M236.45,287.59c3.67-25.43,7.5-50.84,11.28-76.25c2.59-17.37,5.2-34.73,7.93-53.01\n            c-48.16,28.29-95.4,56.05-143.48,84.3c2.82,1.33,4.55,2.26,6.36,2.99c37.33,15.15,74.69,30.2,111.95,45.52\n            C234.98,292.98,235.87,291.65,236.45,287.59z\"\n          />\n          <path\n            d=\"M101.4,70.64c-32.56,28.56-64.33,56.43-96.12,84.28c-2.74,2.4-2.23,4.2,0.47,6.31\n            c27.4,21.48,54.74,43.05,82.11,64.56c4.74,3.73,9.57,7.34,15.49,11.88C102.69,181.28,102.05,126.38,101.4,70.64z\"\n          />\n          <path\n            d=\"M234.02,19.48c-40.69,14.93-80.51,29.54-121.05,44.41c47.57,27.44,94.3,54.39,141.98,81.89\n            C247.91,103.21,241.03,61.74,234.02,19.48z\"\n          />\n          <path\n            d=\"M99.46,249.33c1.96-3.71,1.29-5.77-1.87-8.23c-29.41-22.93-58.72-45.99-88.06-69.01\n            c-0.18,0.16-0.36,0.31-0.55,0.47c22.98,39.08,45.96,78.17,69.42,118.07C85.75,276.14,92.43,262.64,99.46,249.33z\"\n          />\n          <path\n            d=\"M207.2,21.67c-40.73,2.41-81.46,4.82-123.05,7.29c","position":{"index":333,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"c9ca94db425c9432"},"created_at":"2026-01-14T02:20:04.182Z"}
{"chunk_id":"0aa83d2676a991fdf747162c6612a9f0","source_id":"04f131e3b4bcd487","text":".17,69.42,118.07C85.75,276.14,92.43,262.64,99.46,249.33z\"\n          />\n          <path\n            d=\"M207.2,21.67c-40.73,2.41-81.46,4.82-123.05,7.29c6.84,9.56,13.21,18.22,19.29,27.08\n            c1.95,2.84,3.71,3.37,6.96,2.15c20.34-7.62,40.76-15.01,61.15-22.47c11.93-4.37,23.87-8.72,35.81-13.08\n            C207.3,22.31,207.25,21.99,207.2,21.67z\"\n          />\n          <path\n            d=\"M249.27,269.5c18.18-33.4,36.37-66.8,54.54-100.18c0.36-0.65,0.72-1.31,1.08-1.96\n            c0.11-0.19,0.21-0.39,0.31-0.59c1.05-1.93,2.1-3.85,3.15-5.78c-0.71-0.47-0.97-0.77-1.25-0.8c-13.84-1.41-27.68-2.78-41.52-4.2\n            c-1.2-0.22-2.38-0.43-3.58-0.65c-1.32,8.74-2.58,17.12-3.85,25.51c-4.63,30.41-9.28,60.81-13.87,91.23\n            c-0.36,2.36-0.29,4.84-0.42,7.27c1.4-2.34,2.8-4.67,4.2-7.01C248.47,271.38,248.87,270.44,249.27,269.5z\"\n          />\n        </g>\n      </svg>\n    </div>\n  </div>\n</template>\n\n<script setup>\nconst props = defineProps({\n  error: {\n    default: undefined,\n    type: Object || undefined,\n  },\n});\nconst handleError = () => clearError({ redirect: '/' });\n</script>\n\n<style>\n.roll-container {\n  animation: slide 1.5s ease-in-out;\n  text-align: right;\n}\n\n.die-roll {\n  animation: roll 1.5s ease-in-out;\n  display: inline-block;\n  fill: #e74c3c;\n  height: 15em;\n  width: 15em;\n  max-width: 60%;\n}\n\n@keyframes slide {\n  from {\n    transform: translateX(-100vw);\n  }\n}\n\n@keyframes roll {\n  to {\n    transform: rotate(360deg);\n  }\n}\n</style>","position":{"index":334,"start_char":2700,"end_char":4158},"metadata":{"content_hash":"9ad621ad38ba0996"},"created_at":"2026-01-14T02:20:04.182Z"}
{"chunk_id":"83b12dbc269c43b81bb18bad7401fe2a","source_id":"352c6af9ba02d4b9","text":"<template>\n  <div class=\"overflow-hidden text-darkness\">\n    <sources-modal :show=\"showModal\" @close=\"showModal = false\" />\n    <div\n      class=\"grid h-screen w-screen grid-flow-col bg-white transition-all dark:bg-darkness sm:ml-0 sm:grid-cols-[14rem_1fr] sm:overflow-y-auto sm:transition-none\"\n      :class=\"showSidebar ? 'ml-0' : '-ml-56'\"\n    >\n      <!-- Sidebar -->\n      <div\n        class=\"z-50 flex w-56 flex-col overflow-y-auto bg-slate-700 text-white dark:bg-slate-900\"\n      >\n        <!-- Logo -->\n        <nuxt-link\n          to=\"/\"\n          class=\"bg-red p-5 font-serif text-3xl text-white hover:text-white\"\n        >\n          Open5e\n        </nuxt-link>\n\n        <!-- SOURCE MODAL -->\n        <div\n          class=\"cursor-pointer bg-red-600 px-4 py-2 hover:bg-red-400 dark:bg-red-700 dark:hover:bg-red-600\"\n          @click=\"showModal = true\"\n        >\n          <span v-if=\"documents\">\n            {{ no_selected_sources }} of {{ no_avilable_sources }} sources\n            <Icon\n              name=\"heroicons:pencil-square\"\n              class=\"h-5 w-5 text-white\"\n              aria-hidden=\"true\"\n            />\n          </span>\n          <span v-else>Loading sources...</span>\n          <span v-show=\"isLoadingData\">\n            <Icon name=\"line-md:loading-twotone-loop\" />\n          </span>\n        </div>\n        <!-- SEARCH BAR -->\n        <div class=\"relative\">\n          <div\n            class=\"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-2\"\n          >\n","position":{"index":335,"start_char":0,"end_char":1500},"metadata":{"content_hash":"f70b38cae5fc83f9"},"created_at":"2026-01-14T02:20:04.782Z"}
{"chunk_id":"b8aa67b1c8cb50ca1b2b13bad02ca257","source_id":"352c6af9ba02d4b9","text":"AR -->\n        <div class=\"relative\">\n          <div\n            class=\"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-2\"\n          >\n            <Icon\n              name=\"majesticons:search-line\"\n              class=\"h-8 w-8 rounded-full bg-red-900/25 p-1 text-white hover:bg-red-900/50\"\n              aria-hidden=\"true\"\n              @click=\"doSearch(searchText)\"\n            />\n          </div>\n          <input\n            v-model=\"searchText\"\n            class=\"w-full bg-red-700 px-4 py-4 placeholder-white/80 placeholder:font-semibold focus:border-0 focus:bg-red-800 focus:outline-none dark:bg-red-800 dark:focus:bg-red-600\"\n            placeholder=\"Search Open5e\"\n            @keyup.enter=\"doSearch(searchText)\"\n          />\n        </div>\n\n        <!-- Navigation Links -->\n        <ul class=\"text-inherit text-white\">\n          <li v-for=\"section in routes\" :key=\"section.title\">\n            <nav-link :to=\"section.route\"> {{ section.title }} </nav-link>\n            <ul\n              v-if=\"section.subroutes\"\n              v-show=\"useRoute().path.indexOf(section.route) != -1\"\n              class=\"bg-slate-800/30 py-2\"\n            >\n              <li v-for=\"page in section.subroutes\" :key=\"page.slug\">\n                <nav-link :to=\"`${section.route}/${page.slug}`\" :indent=\"true\">\n                  {{ page.name }}\n                </nav-link>\n              </li>\n            </ul>\n          </li>\n        </ul>\n\n        <!-- Report Issue UI -->\n        <report-issue />\n","position":{"index":336,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"a7c59e203afda41a"},"created_at":"2026-01-14T02:20:04.782Z"}
{"chunk_id":"40d0242a4b1cbfebf7ce94649dbcf4fd","source_id":"352c6af9ba02d4b9","text":"           </nav-link>\n              </li>\n            </ul>\n          </li>\n        </ul>\n\n        <!-- Report Issue UI -->\n        <report-issue />\n\n        <!-- Patron Banner -->\n        <a href=\"https://www.patreon.com/open5e\">\n          <img\n            src=\"/img/patron-badge.png\"\n            class=\"block w-full\"\n            alt=\"Become a patron! Keep Open5e ad free!\"\n          />\n        </a>\n      </div>\n\n      <!-- Page central column -->\n      <div\n        class=\"content-wrapper w-screen overflow-y-auto bg-white text-darkness dark:bg-darkness dark:text-white sm:w-full\"\n      >\n        <!-- Site Header -->\n\n        <div class=\"flex h-12 align-middle\">\n          <sidebar-toggle @click=\"toggleSidebar\" />\n          <breadcrumb-links class=\"flex-grow\" />\n          <theme-switcher class=\"inline-block\" />\n        </div>\n\n        <!-- Shade: fades out main content when sidebar expanded on mobile -->\n        <div\n          v-show=\"showSidebar\"\n          class=\"fixed left-0 top-0 z-48 h-full w-full bg-basalt/50 sm:hidden\"\n          @click=\"hideSidebar\"\n        />\n\n        <page-notifications />\n\n        <!-- Main page content -->\n        <nuxt-page\n          class=\"main-content pt-auto mx-0 w-full px-4 py-4 pb-0 text-darkness dark:text-white sm:px-8\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { useRoute } from 'nuxt/app';\nimport { computed } from 'vue';\n\nconst spellcastingClasses = [\n  { name: 'Spells by Class', slug: 'by-class' },\n  { name:","position":{"index":337,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"9c79bf2923a7436d"},"created_at":"2026-01-14T02:20:04.782Z"}
{"chunk_id":"7e321528eb38538845dd703db0f1ecef","source_id":"352c6af9ba02d4b9","text":" useRoute } from 'nuxt/app';\nimport { computed } from 'vue';\n\nconst spellcastingClasses = [\n  { name: 'Spells by Class', slug: 'by-class' },\n  { name: 'Bard Spells', slug: 'by-class/bard' },\n  { name: 'Cleric Spells', slug: 'by-class/cleric' },\n  { name: 'Druid Spells', slug: 'by-class/druid' },\n  { name: 'Paladin Spells', slug: 'by-class/paladin' },\n  { name: 'Ranger Spells', slug: 'by-class/ranger' },\n  { name: 'Wizard Spells', slug: 'by-class/wizard' },\n  { name: 'Warlock Spells', slug: 'by-class/warlock' },\n];\nconst showSidebar = ref(false);\n\nconst $route = useRoute();\n\nconst crumbs = computed(() => {\n  let url = '';\n\n  return useRoute()\n    .fullPath.split('/')\n    .map((segment) => {\n      // ignore initial & trailing slashes\n      if (segment === '' || segment === '/') {\n        return;\n      }\n\n      // rebuild link urls segment by segment\n      url += `/${segment}`;\n\n      // seperate segment title & query params\n      const [title, queryParams] = segment.split('?');\n\n      // extract & format the search params if on the /search route\n      let searchParam = '';\n      if (title === 'search' && queryParams) {\n        searchParam = queryParams.split('text=')[1].split('+').join(' ');\n      }\n\n      // return a\n      return {\n        url,\n        title: title // format crumb title\n          .split('-')\n          .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n          .join(' '),\n        subtitle: searchParam,\n      };\n    })\n    .filter((breadcrumb) => bre","position":{"index":338,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"f995345e2e5a3ff0"},"created_at":"2026-01-14T02:20:04.782Z"}
{"chunk_id":"eea255067ce33fdbea6f80b55473334c","source_id":"352c6af9ba02d4b9","text":" => word.charAt(0).toUpperCase() + word.slice(1))\n          .join(' '),\n        subtitle: searchParam,\n      };\n    })\n    .filter((breadcrumb) => breadcrumb);\n});\nprovide('crumbs', crumbs);\n\nconst BASE_TITLE = 'Open5e';\n\nconst title = computed(() => {\n  if (crumbs.value.length === 0) {\n    return BASE_TITLE;\n  }\n  const crumb_titles = crumbs.value.map((crumb) => crumb.title);\n  const reversed_titles = [...crumb_titles].reverse();\n\n  return reversed_titles.join(' - ') + ` - ${BASE_TITLE}`;\n});\nuseHead({ title: title });\nconst searchText = ref($route.query.text);\n\nwatch(\n  () => $route.path,\n  () => {\n    showSidebar.value = false;\n  }\n);\n\nconst showModal = ref(false);\nconst { sources } = useSourcesList();\n\nconst no_selected_sources = computed(() => sources.value.length);\nconst { data: documents } = useDocuments();\nconst { data: classes } = useFindMany(API_ENDPOINTS.classes, {\n  fields: ['name', 'slug'].join(),\n});\nconst { data: races } = useFindMany(API_ENDPOINTS.races, {\n  fields: ['name', 'slug'].join(),\n});\nconst { data: combat_sections } = useSections('Combat');\nconst { data: equipment_sections } = useSections('Equipment');\nconst { data: gameplay_sections } = useSections('Gameplay Mechanics');\nconst { data: rules_sections } = useSections('Rules');\n\nconst { data: character_sections } = useSections(\n  'Characters',\n  'Character Advancement'\n);\n\nconst no_avilable_sources = computed(() => documents.value?.length ?? 0);\n\nconst isLoadingData = useIsFetching();\n\nconst routes = c","position":{"index":339,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"e12d539606252eb3"},"created_at":"2026-01-14T02:20:04.782Z"}
{"chunk_id":"63b74b11fe34b879b4878ff532f13634","source_id":"352c6af9ba02d4b9","text":"r Advancement'\n);\n\nconst no_avilable_sources = computed(() => documents.value?.length ?? 0);\n\nconst isLoadingData = useIsFetching();\n\nconst routes = computed(() => [\n  {\n    title: 'Characters',\n    route: '/characters',\n    subroutes: character_sections.value ?? [],\n  },\n  {\n    title: 'Classes',\n    route: '/classes',\n    subroutes: classes.value ?? [],\n  },\n  {\n    title: 'Conditions',\n    route: '/conditions',\n  },\n  {\n    title: 'Races',\n    route: '/races',\n    subroutes: races.value ?? [],\n  },\n  {\n    title: 'Backgrounds',\n    route: '/backgrounds',\n  },\n  {\n    title: 'Feats',\n    route: '/feats',\n  },\n  {\n    title: 'Combat',\n    route: '/combat',\n    subroutes: combat_sections.value ?? [],\n  },\n  {\n    title: 'Equipment',\n    route: '/equipment',\n    subroutes: equipment_sections.value ?? [],\n  },\n  {\n    title: 'Magic Items',\n    route: '/magic-items',\n  },\n  {\n    title: 'Spells',\n    route: '/spells',\n    subroutes: spellcastingClasses,\n  },\n  {\n    title: 'Monsters',\n    route: '/monsters',\n  },\n  {\n    title: 'Gameplay Mechanics',\n    route: '/gameplay-mechanics',\n    subroutes: gameplay_sections.value ?? [],\n  },\n  {\n    title: 'Running a Game',\n    route: '/running',\n    subroutes: rules_sections.value ?? [],\n  },\n  {\n    title: 'API Docs',\n    route: '/api-docs',\n  },\n]);\n\nconst $router = useRouter();\n\nfunction doSearch(searchText) {\n  $router.push({ name: 'search', query: { text: searchText } });\n  showSidebar.value = false;\n}\n\nfunction toggleSidebar() {\n ","position":{"index":340,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"1c275f7bccc73626"},"created_at":"2026-01-14T02:20:04.782Z"}
{"chunk_id":"1d7582ab26fc5a92045d6d4ad1f5b961","source_id":"352c6af9ba02d4b9","text":"n doSearch(searchText) {\n  $router.push({ name: 'search', query: { text: searchText } });\n  showSidebar.value = false;\n}\n\nfunction toggleSidebar() {\n  showSidebar.value = !showSidebar.value;\n}\nfunction hideSidebar() {\n  showSidebar.value = false;\n}\n</script>\n\n<style lang=\"scss\">\n@import '../assets/main';\n\n.main-content {\n  a {\n    @apply text-indigo-600 hover:text-blood hover:underline dark:text-indigo-200 dark:hover:text-red;\n  }\n}\n</style>","position":{"index":341,"start_char":8100,"end_char":8545},"metadata":{"content_hash":"8b584d15d259c36f"},"created_at":"2026-01-14T02:20:04.782Z"}
{"chunk_id":"065c60e458a6a35912d0b51962af3674","source_id":"fa5fb567231e6b7e","text":"import { keepPreviousData, useQuery } from '@tanstack/vue-query';\nimport axios from 'axios';\n\nexport const API_ENDPOINTS = {\n  backgrounds: 'v1/backgrounds',\n  characters: 'v1/characters',\n  classes: 'v1/classes',\n  conditions: 'v1/conditions',\n  documents: 'v1/documents',\n  feats: 'v1/feats',\n  magicitems: 'v1/magicitems',\n  monsters: 'v1/monsters',\n  races: 'v1/races',\n  search: 'v2/search/',\n  sections: 'v1/sections',\n  spells: 'v1/spells',\n} as const;\n\n/** Provides the base functions to easily fetch data from the Open5e API. */\nexport const useAPI = () => {\n  const API_URL = useRuntimeConfig().public.apiUrl;\n\n  const api = axios.create({\n    baseURL: API_URL,\n    headers: { Accept: 'application/json' },\n  });\n\n  return {\n    findMany: async (\n      endpoint: string,\n      sources: string[],\n      params: Record<string, any> = {}\n    ) => {\n      const formattedSources =\n        sources.length > 0 ? sources.join(',') : 'no-sources';\n      const res = await api.get(endpoint, {\n        params: {\n          limit: 5000,\n          document__slug__in: formattedSources,\n          ...params,\n        },\n      });\n\n      return res.data.results as Record<string, any>[];\n    },\n    findPaginated: async (options: {\n      endpoint: string;\n      sources: string[];\n      pageNo?: number;\n      itemsPerPage?: number;\n      sortByProperty?: string;\n      isSortDescending?: boolean;\n      queryParams?: Record<string, any>;\n    }) => {\n      const {\n        endpoint,\n        sources,\n      ","position":{"index":342,"start_char":0,"end_char":1500},"metadata":{"content_hash":"7a70527bd2fcf45e"},"created_at":"2026-01-14T02:20:05.563Z"}
{"chunk_id":"344572d3eab35bcef4c732d05e808d7b","source_id":"fa5fb567231e6b7e","text":"string;\n      isSortDescending?: boolean;\n      queryParams?: Record<string, any>;\n    }) => {\n      const {\n        endpoint,\n        sources,\n        pageNo = 1,\n        itemsPerPage = 5,\n        sortByProperty = 'name',\n        isSortDescending = false,\n        queryParams = {},\n      } = options;\n\n      const formattedSources =\n        sources.length > 0 ? sources.join(',') : 'no-sources';\n      const res = await api.get(endpoint, {\n        params: {\n          limit: itemsPerPage,\n          page: pageNo,\n          document__slug__in: formattedSources,\n          ordering: `${isSortDescending ? '-' : ''}${sortByProperty}`,\n          ...queryParams,\n        },\n      });\n\n      const data = res.data as {\n        count: number;\n        results: Record<string, any>[];\n        next: string | null;\n        previous: string | null;\n      };\n\n      return data;\n    },\n    get: async (...parts: string[]) => {\n      const route = '/' + parts.join('/');\n      const res = await api.get(route);\n      return res.data as Record<string, any>;\n    },\n  };\n};\n\nexport const useFindMany = (\n  endpoint: MaybeRef<string>,\n  params?: MaybeRef<Record<string, string | number>>\n) => {\n  const { findMany } = useAPI();\n  const { sources } = useSourcesList();\n  return useQuery({\n    queryKey: ['findMany', endpoint, sources, params],\n    queryFn: () =>\n      unref(findMany(unref(endpoint), unref(sources), unref(params))),\n  });\n};\n\nexport const useFindPaginated = (options: {\n  endpoint: MaybeRef<string>","position":{"index":343,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"ccd9637179226792"},"created_at":"2026-01-14T02:20:05.563Z"}
{"chunk_id":"f2902d797f33a4d4f6f067169de4b7c6","source_id":"fa5fb567231e6b7e","text":"   unref(findMany(unref(endpoint), unref(sources), unref(params))),\n  });\n};\n\nexport const useFindPaginated = (options: {\n  endpoint: MaybeRef<string>;\n  itemsPerPage?: MaybeRef<number>;\n  initialPage?: MaybeRef<number>;\n  sortByProperty?: MaybeRef<string>;\n  isSortDescending?: MaybeRef<boolean>;\n  filter?: MaybeRef<Record<string, any>>;\n  params?: MaybeRef<Record<string, any>>;\n}) => {\n  const {\n    endpoint,\n    itemsPerPage = 50,\n    initialPage = 1,\n    sortByProperty = 'name',\n    isSortDescending = false,\n    filter = {},\n    params = {},\n  } = options;\n  const pageNo = ref(unref(initialPage));\n  const { findPaginated } = useAPI();\n  const { sources } = useSourcesList();\n  const { data, isFetching, error } = useQuery({\n    queryKey: [\n      'findPaginated',\n      endpoint,\n      sources,\n      itemsPerPage,\n      pageNo,\n      sortByProperty,\n      isSortDescending,\n      filter,\n      params,\n    ],\n    placeholderData: keepPreviousData,\n    queryFn: () =>\n      findPaginated({\n        endpoint: unref(endpoint),\n        sources: unref(sources),\n        pageNo: unref(pageNo),\n        sortByProperty: unref(sortByProperty),\n        isSortDescending: unref(isSortDescending),\n        itemsPerPage: unref(itemsPerPage),\n        queryParams: { ...unref(params), ...unref(filter) },\n      }),\n  });\n\n  const lastPageNo = computed(() => {\n    return data.value ? Math.ceil(data.value.count / unref(itemsPerPage)) : 1;\n  });\n\n  const nextPage = () => {\n    pageNo.value++;\n  };\n\n  con","position":{"index":344,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"7340168570dbfc36"},"created_at":"2026-01-14T02:20:05.563Z"}
{"chunk_id":"2facfb887fd05e668add2eece7210d60","source_id":"fa5fb567231e6b7e","text":" => {\n    return data.value ? Math.ceil(data.value.count / unref(itemsPerPage)) : 1;\n  });\n\n  const nextPage = () => {\n    pageNo.value++;\n  };\n\n  const prevPage = () => {\n    if (pageNo.value > 1) {\n      pageNo.value--;\n    }\n  };\n\n  const firstPage = () => {\n    pageNo.value = 1;\n  };\n\n  const lastPage = () => {\n    if (data.value) {\n      pageNo.value = lastPageNo.value;\n    }\n  };\n\n  // Move to the first page when the filter changes, to avoid showing an empty page due to fewer results\n  watch(filter, () => {\n    firstPage();\n  });\n\n  return {\n    data,\n    isFetching,\n    error,\n    firstPage,\n    prevPage,\n    nextPage,\n    lastPage,\n    pageNo,\n    lastPageNo,\n  };\n};\n\nexport const useFindOne = (\n  endpoint: MaybeRef<string>,\n  slug: MaybeRef<string>\n) => {\n  const { get } = useAPI();\n  return useQuery({\n    queryKey: ['get', endpoint, slug],\n    queryFn: () => get(unref(endpoint), unref(slug)),\n  });\n};\n\nexport const useSubclass = (className: string, subclass: string) => {\n  const api = useAPI();\n  return useQuery({\n    queryKey: ['subclass', className, subclass],\n    queryFn: async () => {\n      const class_result = await api.get(API_ENDPOINTS.classes, className);\n      return class_result.archetypes.find((a: any) => a.slug === subclass);\n    },\n  });\n};\n\nexport const useSections = (...categories: string[]) => {\n  const { data: sections, isPending } = useFindMany(API_ENDPOINTS.sections, {\n    fields: ['slug', 'name', 'parent'].join(),\n  });\n  const filtered_sections ","position":{"index":345,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"00640f08faa31954"},"created_at":"2026-01-14T02:20:05.563Z"}
{"chunk_id":"537e6e356582643a38cc8414bf4e047d","source_id":"fa5fb567231e6b7e","text":" { data: sections, isPending } = useFindMany(API_ENDPOINTS.sections, {\n    fields: ['slug', 'name', 'parent'].join(),\n  });\n  const filtered_sections = computed(() =>\n    sections.value?.filter((section) =>\n      categories.includes(`${section.parent}`)\n    )\n  );\n  return { data: filtered_sections, isPending };\n};\n\n/**\n * Returns a new array of items sorted by the given field\n */\nexport function sortByField(\n  items: Record<string, any>[],\n  field: string,\n  direction: 'ascending' | 'descending' = 'ascending'\n) {\n  const isAscending = direction === 'ascending';\n  return [...items].sort((a, b) => {\n    if (a[field] < b[field]) {\n      return isAscending ? -1 : 1;\n    }\n    if (a[field] > b[field]) {\n      return isAscending ? 1 : -1;\n    }\n    return 0;\n  });\n}\n\nexport type MagicItemsFilter = {\n  name?: string;\n  rarity?: string;\n  type?: string;\n  isAttunementRequired?: boolean;\n};\n\nexport const useDocuments = (params: Record<string, any> = {}) => {\n  const { findMany } = useAPI();\n  return useQuery({\n    queryKey: ['findMany', API_ENDPOINTS.documents],\n    queryFn: () => findMany(API_ENDPOINTS.documents, [], params),\n  });\n};\n\nexport const useSearch = (queryRef: Ref<string>) => {\n  const { findMany } = useAPI();\n  return useQuery({\n    queryKey: ['search', queryRef],\n    queryFn: () =>\n      queryRef.value\n        ? findMany(`${API_ENDPOINTS.search}`, [], {\n            schema: 'v1',\n            query: queryRef.value,\n          })\n        : [],\n  });\n};\n\nexport const useQuer","position":{"index":346,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"8f9c128d711a80cf"},"created_at":"2026-01-14T02:20:05.563Z"}
{"chunk_id":"08d0add9b84f468a5fcacdb0df257565","source_id":"fa5fb567231e6b7e","text":"${API_ENDPOINTS.search}`, [], {\n            schema: 'v1',\n            query: queryRef.value,\n          })\n        : [],\n  });\n};\n\nexport const useQueryParam = (paramName: string) =>\n  computed(() => useRoute().query[paramName]);","position":{"index":347,"start_char":6750,"end_char":6978},"metadata":{"content_hash":"b91d87fec0e8f2e5"},"created_at":"2026-01-14T02:20:05.563Z"}
{"chunk_id":"eb7c02aeca07d9a09c147b4ac1aa5d8d","source_id":"4f3162947bab3bcb","text":"import { debouncedRef } from '@vueuse/core';\n\nexport function useFilterState<T extends Record<string, any>>(\n  initialFilters: T,\n  debounceTimeMs = 300\n) {\n  const filter = ref({ ...initialFilters }) as Ref<T>;\n\n  const enabeledFiltersCount = computed(() => {\n    return Object.values(filter.value).filter(\n      (value) => value !== undefined && value !== ''\n    ).length;\n  });\n\n  const canClearFilter = computed(() => enabeledFiltersCount.value > 0);\n\n  function clear() {\n    filter.value = { ...initialFilters };\n  }\n\n  const debouncedFilter = debouncedRef(filter, debounceTimeMs);\n\n  function update(key: string, value: any) {\n    filter.value = { ...filter.value, [key]: value };\n  }\n\n  return {\n    clear,\n    update,\n    enabeledFiltersCount,\n    filter: computed(() => filter.value),\n    debouncedFilter,\n    canClearFilter,\n  };\n}","position":{"index":348,"start_char":0,"end_char":842},"metadata":{"content_hash":"05f370bdcf24c69c"},"created_at":"2026-01-14T02:20:06.132Z"}
{"chunk_id":"2c745bf04bd92e659d417d55021788f2","source_id":"0ab227a1ca97b60a","text":"export type MagicItemFilter = {\n  /** Name contains*/\n  name__icontains?: string;\n  rarity?: string;\n  type?: typeof MAGIC_ITEMS_TYPES | '';\n  requires_attunement?: 'requires attunement' | '';\n};\n\nexport const DefaultMagicItemFilter: Readonly<MagicItemFilter> = {\n  name__icontains: '',\n  rarity: '',\n  type: '',\n  requires_attunement: '',\n};\n\nexport const copyMagicItemFilter = (): MagicItemFilter => {\n  return { ...DefaultMagicItemFilter };\n};\n\nexport const MAGIC_ITEMS_RARITES = [\n  'Common',\n  'Uncommon',\n  'Rare',\n  'Very Rare',\n  'Legendary',\n] as const;\n\nexport const MAGIC_ITEMS_TYPES = [\n  'Armor',\n  'Potion',\n  'Ring',\n  'Rod',\n  'Scroll',\n  'Staff',\n  'Wand',\n  'Weapon',\n  'Wondrous Item',\n] as const;","position":{"index":349,"start_char":0,"end_char":716},"metadata":{"content_hash":"b3fba3ec2c685c6d"},"created_at":"2026-01-14T02:20:06.645Z"}
{"chunk_id":"3a4fc381939f35aca2281e1b097c233c","source_id":"e6ce6cbf1ade6a50","text":"export type MonsterFilter = {\n  /** Name contains */\n  name__icontains?: string;\n  /** Challenge rating lower bound */\n  cr__gte?: string;\n  /** Challenge rating upper bound */\n  cr__lte?: string;\n  /** HP rating lower bound */\n  hit_points__gte?: string;\n  /** HP rating lower bound */\n  hit_points__lte?: string;\n  size?: string;\n  type?: string;\n};\n\nexport const DefaultMonsterFilter: Readonly<MonsterFilter> = {\n  name__icontains: '',\n  cr__gte: '',\n  cr__lte: '',\n  hit_points__gte: '',\n  hit_points__lte: '',\n  size: '',\n  type: '',\n};\n\nexport function copyDefaultMonsterFilter(): MonsterFilter {\n  return { ...DefaultMonsterFilter };\n}\n\nexport const useMonster = (slug: string) => {\n  const { get } = useAPI();\n  return useQuery({\n    queryKey: ['get', API_ENDPOINTS.monsters, slug],\n    queryFn: async () => {\n      const monster = await get(API_ENDPOINTS.monsters, slug);\n      monster.abilities = ABILITY_SCORE_NAMES.map((ability) => ({\n        name: ability,\n        shortName: ability.slice(0, 3),\n        score: monster[ability],\n        modifier: formatMod(calcMod(monster[ability])),\n        save: monster[`${ability}_save`],\n      }));\n      return monster as Record<string, string>;\n    },\n  });\n};\n\nfunction calcMod(score: number) {\n  return Math.floor((score - 10) / 2);\n}\n\nfunction formatMod(mod: number) {\n  return mod >= 0 ? '+' + mod.toString() : mod.toString();\n}\n\nconst ABILITY_SCORE_NAMES = [\n  'strength',\n  'dexterity',\n  'constitution',\n  'intelligence',\n  'wisdom',\n  'c","position":{"index":350,"start_char":0,"end_char":1500},"metadata":{"content_hash":"062ad891f37dfe52"},"created_at":"2026-01-14T02:20:07.153Z"}
{"chunk_id":"2a4617f8924a49cf9e5efd6ebcc261f3","source_id":"e6ce6cbf1ade6a50","text":" + mod.toString() : mod.toString();\n}\n\nconst ABILITY_SCORE_NAMES = [\n  'strength',\n  'dexterity',\n  'constitution',\n  'intelligence',\n  'wisdom',\n  'charisma',\n] as const;\n\nexport const MONSTER_CHALLENGE_RATINGS_LIST = [\n  '0',\n  '1/8',\n  '1/4',\n  '1/2',\n  '1',\n  '2',\n  '3',\n  '4',\n  '5',\n  '6',\n  '7',\n  '8',\n  '9',\n  '10',\n  '11',\n  '12',\n  '13',\n  '14',\n  '15',\n  '16',\n  '17',\n  '18',\n  '19',\n  '20',\n  '21',\n  '22',\n  '23',\n  '24',\n  '25',\n  '26',\n  '27',\n  '28',\n  '29',\n  '30',\n] as const;\n\nexport const MONSTER_CHALLENGE_RATINGS_MAP = [\n  ['0', 0],\n  ['1/8', 0.125],\n  ['1/4', 0.25],\n  ['1/2', 0.5],\n  ['1', 1],\n  ['2', 2],\n  ['3', 3],\n  ['4', 4],\n  ['5', 5],\n  ['6', 6],\n  ['7', 7],\n  ['8', 8],\n  ['9', 9],\n  ['10', 10],\n  ['11', 11],\n  ['12', 12],\n  ['13', 13],\n  ['14', 14],\n  ['15', 15],\n  ['16', 16],\n  ['17', 17],\n  ['18', 18],\n  ['19', 19],\n  ['20', 20],\n  ['21', 21],\n  ['22', 22],\n  ['23', 23],\n  ['24', 24],\n  ['25', 25],\n  ['26', 26],\n  ['27', 27],\n  ['28', 28],\n  ['29', 29],\n  ['30', 30],\n] as const;\n\nexport const MONSTER_SIZES_LIST = [\n  'Tiny',\n  'Small',\n  'Medium',\n  'Large',\n  'Huge',\n  'Gargantuan',\n] as const;\n\nexport const MONSTER_TYPES_LIST = [\n  'Aberration',\n  'Beast',\n  'Celestial',\n  'Construct',\n  'Dragon',\n  'Elemental',\n  'Fey',\n  'Fiend',\n  'Giant',\n  'Humanoid',\n  'Monstrosity',\n  'Ooze',\n  'Plant',\n  'Undead',\n] as const;","position":{"index":351,"start_char":1350,"end_char":2719},"metadata":{"content_hash":"3226da39ac5cdc98"},"created_at":"2026-01-14T02:20:07.153Z"}
{"chunk_id":"27da1e1c1ec963a89fbc716d1cbb24c0","source_id":"c545649cad2c70e0","text":"function loadSourcesFromLocalStorage() {\n  if (!process.client) return []; // skip on server\n  const saved_sources = localStorage.getItem('sources');\n  return saved_sources ? JSON.parse(saved_sources) : [];\n}\n\nfunction writeSourcesToLocalStorage(sourcesList: string[]) {\n  localStorage.setItem('sources', JSON.stringify(sourcesList));\n}\n\nconst _sources = ref<string[]>(loadSourcesFromLocalStorage());\n\nexport const setSources = (sources: string[]) => {\n  _sources.value = sources;\n  writeSourcesToLocalStorage(sources);\n};\n\nexport const read_only_source_list = computed(() => _sources.value);\n\n/** Access the global list of sources documents. These are used to limit which documents are used in API queries. */\nexport const useSourcesList = () => ({\n  /** List of source tags */\n  sources: read_only_source_list,\n  /** Overwrite the list of source tags */\n  setSources,\n});","position":{"index":352,"start_char":0,"end_char":873},"metadata":{"content_hash":"b28d43b26620c4ce"},"created_at":"2026-01-14T02:20:07.500Z"}
{"chunk_id":"b8924705937421a341ca0d6d3db4b8ce","source_id":"38ca2a6a92233eb7","text":"import { groupBy } from '~/functions/groupBy';\n\nexport const useSpellsByClass = (\n  charClass: string,\n  params: Record<string, any>\n) => {\n  const { findMany } = useAPI();\n  const { sources } = useSourcesList();\n  return useQuery({\n    queryKey: ['findMany', API_ENDPOINTS.spells, sources, params],\n    queryFn: async () => {\n      const spells = await findMany(\n        API_ENDPOINTS.spells,\n        sources.value,\n        params\n      );\n      const class_spells = spells\n        .filter((spell) => {\n          return spell.dnd_class.toLowerCase().includes(charClass);\n        })\n        .sort(function (a, b) {\n          return a.lvl - b.lvl;\n        });\n      const grouped_spells = groupBy(class_spells, 'level_int');\n      // label groups by level\n      const levels = Object.getOwnPropertyNames(grouped_spells).map((key) => {\n        return {\n          lvl: key,\n          lvlText: SPELL_LEVELS_NAMES[parseInt(key)],\n          spells: grouped_spells[key],\n        };\n      });\n\n      return levels;\n    },\n  });\n};\n\nexport const useAllSpells = (params: Record<string, any> = {}) => {\n  const { findMany } = useAPI();\n  const { sources } = useSourcesList();\n  return useQuery({\n    queryKey: ['allSpells', API_ENDPOINTS.spells, sources, params],\n    queryFn: async () => {\n      const spells = await findMany(\n        API_ENDPOINTS.spells,\n        sources.value,\n        params\n      );\n      return spells;\n    },\n  });\n};\n\nconst SPELL_LEVELS_NAMES = [\n  'Cantrip',\n  '1st-level',\n  '2nd-leve","position":{"index":353,"start_char":0,"end_char":1500},"metadata":{"content_hash":"e92874775527b915"},"created_at":"2026-01-14T02:20:07.967Z"}
{"chunk_id":"2f9884e900035fa00a66f8afb871d526","source_id":"38ca2a6a92233eb7","text":"     sources.value,\n        params\n      );\n      return spells;\n    },\n  });\n};\n\nconst SPELL_LEVELS_NAMES = [\n  'Cantrip',\n  '1st-level',\n  '2nd-level',\n  '3rd-level',\n  '4th-level',\n  '5th-level',\n  '6th-level',\n  '7th-level',\n  '8th-level',\n  '9th-level',\n] as const;","position":{"index":354,"start_char":1350,"end_char":1620},"metadata":{"content_hash":"7381c88b82bf8f09"},"created_at":"2026-01-14T02:20:07.967Z"}
{"chunk_id":"2afe2cb6b27207128a6f2cda3ec6b58c","source_id":"3ac22bb29a53e9d1","text":"import { useNotifications } from './useNotifications';\nconst { addNotif } = useNotifications();\n\nexport function useDiceRoller(signature: string) {\n  // extract numerical data from dice signature\n  const parsed = parseDice(signature);\n  // make sure parseDice rtn'd data before deconstructing arr.\n  if (!parsed) {\n    return;\n  }\n  const [number, dice, modifier] = parsed;\n\n  // roll the dice\n  const rolls = [...Array(number)].map(\n    () => Math.floor(Math.random() * dice) + 1\n  );\n\n  // add up the results and add the modifier\n  const result = rolls.reduce((total, roll) => total + roll) + modifier;\n\n  const formattedModifier = useFormatModifier(modifier, {\n    showZero: false,\n  });\n\n  // push results to notifications\n  addNotif({\n    title: `Rolling ${number}d${dice} ${formattedModifier}`,\n    body: result,\n    footer: `[ ${rolls.join(', ')} ] ${formattedModifier}`,\n  });\n\n  return { signature, rolls, result };\n}\n\nfunction parseDice(input: string) {\n  const pattern = /(\\d*)[dD](\\d+)\\s*([+-]\\s*\\d+)?|^([+-]?\\d+)\\s*(?: to hit)?$/;\n\n  // groups 1-3 handle values in full dice sig. ie. 1d20+4, group 4 captures solo mod ie. +5\n  const matches = input.match(pattern);\n\n  if (!matches) return;\n\n  // groups 1-3 capture num/size/mod from dice sigs. in the form 1d20+4\n  if (matches[2]) {\n    const number = parseInt(matches[1] ?? 1);\n    const size = parseInt(matches[2] ?? 20);\n    const modifier = matches[3] ? parseInt(matches[3].split(' ').join('')) : 0;\n    return [number, size, modifie","position":{"index":355,"start_char":0,"end_char":1500},"metadata":{"content_hash":"fcaddeb3278dfe24"},"created_at":"2026-01-14T02:20:08.277Z"}
{"chunk_id":"3dc2686e0a3b46621a657accd73de571","source_id":"3ac22bb29a53e9d1","text":"t size = parseInt(matches[2] ?? 20);\n    const modifier = matches[3] ? parseInt(matches[3].split(' ').join('')) : 0;\n    return [number, size, modifier];\n  }\n\n  // group 4 captures the modifier from +5 or +3 to hit\n  if (matches[4]) {\n    const modifier = parseInt(matches[4]);\n    return [1, 20, modifier];\n  }\n}","position":{"index":356,"start_char":1350,"end_char":1663},"metadata":{"content_hash":"9f4a3830cf4edd41"},"created_at":"2026-01-14T02:20:08.277Z"}
{"chunk_id":"c7289622330c34b8ffdc50f8daf3529c","source_id":"d6b3ad389fe65c60","text":"export const useFormatModifier = (\n  input: string | number,\n  options?: {\n    inputType?: 'modifier' | 'score';\n    showZero: boolean;\n  }\n) => {\n  // set options defaults\n  const type = options?.inputType ?? 'modifer';\n  const showZero = options?.showZero ?? true;\n\n  // cast input to number\n  const inputNum = typeof input === 'string' ? parseInt(input) : input;\n\n  // handle 0s is showZero option is false\n  if (inputNum === 0 && !showZero) return '';\n\n  // convert score to mod\n  const mod = type === 'score' ? Math.floor((inputNum - 10) / 2) : inputNum;\n\n  return (mod < 0 ? '- ' : '+ ') + mod.toString().replace('-', '');\n};","position":{"index":357,"start_char":0,"end_char":631},"metadata":{"content_hash":"d8eeaf41fa0d7e4a"},"created_at":"2026-01-14T02:20:08.577Z"}
{"chunk_id":"8c91cb1ebe1fc804b46cb6e5aff43f98","source_id":"f405778b25ea26ea","text":"import { ref } from 'vue';\n\nconst notifications = ref([]);\n\nexport const useNotifications = () => {\n  const addNotif = (notif) => {\n    notifications.value.push(notif);\n  };\n\n  const clear = () => {\n    notifications.value = [];\n  };\n\n  const remove = (index) => {\n    notifications.value.splice(index, 1);\n  };\n\n  return { clear, remove, notifications, addNotif };\n};","position":{"index":358,"start_char":0,"end_char":368},"metadata":{"content_hash":"e82eada234c0cb8a"},"created_at":"2026-01-14T02:20:08.881Z"}
{"chunk_id":"c846f0c5f6271b4f48cf3ae41ea2494f","source_id":"104adc75c9b2c637","text":"/**\n * Groups an array of objects by a key.\n */\nexport function groupBy<T extends Record<string, any>>(\n  array: T[],\n  key: keyof T\n): Record<string, T[]> {\n  return array.reduce((result: Record<string, T[]>, item: T) => {\n    const keyValue = item[key];\n    if (!result[keyValue]) {\n      result[keyValue] = [];\n    }\n    result[keyValue].push(item);\n    return result;\n  }, {});\n}","position":{"index":359,"start_char":0,"end_char":383},"metadata":{"content_hash":"038d78ca50e964ec"},"created_at":"2026-01-14T02:20:09.414Z"}
{"chunk_id":"225f667c703d4c225d4407cd6e91c2d5","source_id":"e675502b9d1969ff","text":"// add redirects for exact path matches here\nconst redirects = {\n  '/monsters/monster-list': '/monsters',\n  '/magicitems/magicitem-list': '/magic-items',\n  '/spells/spells-table': '/spells',\n  '/magicitems': '/magic-items',\n};\n\n// add redirects for partial path matches here\nconst substitutions = [\n  {\n    find: '/magicitems',\n    replaceWith: '/magic-items',\n  },\n];\n\n// redirects from /sections routes require extra data from API\nasync function replaceSectionsWithParent(path) {\n  const slug = path.split('/')[2]; // isolate UID\n  const apiURL = useRuntimeConfig().public.apiUrl;\n  const endpoint = `${apiURL}/sections/${slug}`;\n\n  // fetch section parent & create redirect URL\n  const { data } = await useFetch(endpoint);\n  if (!data?.value) {\n    return;\n  }\n\n  // slugify section parent\n  const parent = data.value.parent\n    .toLowerCase()\n    .replace(/\\s+/g, '-') // replace spaces with hyphens\n    .replace('rules', 'gameplay-mechanics'); // handle common inconsistancy in data-set\n  return `/${parent}/${slug}`;\n}\n\nexport default defineNuxtRouteMiddleware((to) => {\n  // redirecting only works client-side, return if server-side\n  if (process.server) {\n    return;\n  }\n\n  // remove terminal slash from path\n  const path = to.fullPath.endsWith('/')\n    ? to.fullPath.slice(0, -1)\n    : to.fullPath;\n\n  // if entire path is present in redirects obj, navigate to it\n  if (redirects[path]) {\n    return navigateTo(redirects[path], { redirectCode: 301 });\n  }\n\n  // check whether any part of th","position":{"index":360,"start_char":0,"end_char":1500},"metadata":{"content_hash":"411e8c08bbfda22f"},"created_at":"2026-01-14T02:20:09.803Z"}
{"chunk_id":"3a71d66943395d318019d56e300abd34","source_id":"e675502b9d1969ff","text":"cts obj, navigate to it\n  if (redirects[path]) {\n    return navigateTo(redirects[path], { redirectCode: 301 });\n  }\n\n  // check whether any part of the path needs to be replaced\n  substitutions.forEach(({ find, replaceWith }) => {\n    if (path.search(find) > -1) {\n      return navigateTo(path.replace(find, replaceWith), { redirectCode: 301 });\n    }\n  });\n\n  // check whether a /section/ route needs to be replaced with parent from API\n  if (path.search('/sections/') > -1) {\n    return navigateTo(replaceSectionsWithParent(path), { redirectCode: 301 });\n  }\n});","position":{"index":361,"start_char":1350,"end_char":1914},"metadata":{"content_hash":"15cbb88830fad435"},"created_at":"2026-01-14T02:20:09.804Z"}
{"chunk_id":"5d2cf0afbfbfacac6aeaaf0bcfa68c2c","source_id":"ad94478e5eebcf12","text":"<template>\n  <tr>\n    <th class=\"border-none align-top font-normal\">\n      <!-- Row header contains a link to article and a source tag -->\n      <nuxt-link\n        tag=\"a\"\n        :params=\"{ id: data.slug }\"\n        :to=\"`/${endpoint}/${data.slug}`\"\n        :prefetch=\"false\"\n      >\n        {{ data.name }}\n      </nuxt-link>\n      <source-tag\n        v-if=\"data.document__slug && data.document__slug !== 'wotc-srd'\"\n        class=\"hide-mobile ml-0\"\n        :title=\"data.document__title\"\n        :text=\"data.document__slug\"\n      />\n    </th>\n    <!-- Render each field defined in columns as a table cell -->\n    <td v-for=\"field in cols\" :key=\"field\" class=\"capitalize\">\n      {{ format(data[field]) }}\n    </td>\n  </tr>\n</template>\n\n<script setup>\nimport SourceTag from './SourceTag.vue';\n\nconst props = defineProps({\n  // API endpoint from which data is sourced. Used to create links\n  endpoint: { type: String, default: '' },\n  // Data for a specific item from the Open5e API\n  data: { type: Object, default: () => {} },\n  // An arr. of which fields in the data prop to render as columns\n  cols: { type: Array, default: () => [] },\n});\n\nconst format = (input) => {\n  // parse decimals <1 as fractions\n  const asFloat = parseFloat(input);\n  if (asFloat && asFloat < 1 && asFloat > 0) {\n    return `1/${1.0 / asFloat}`;\n  }\n  return input;\n};\n</script>","position":{"index":362,"start_char":0,"end_char":1355},"metadata":{"content_hash":"3e84786e210e62d2"},"created_at":"2026-01-14T02:20:10.100Z"}
{"chunk_id":"e45946dbdb028211ce2cbdb6797603db","source_id":"f3f830d8afdaea78","text":"<template>\n  <div>\n    <div class=\"flex w-full flex-wrap justify-end align-middle\">\n      <api-table-nav\n        :page-number=\"pageNo\"\n        :last-page-number=\"lastPageNo\"\n        @first=\"firstPage()\"\n        @next=\"nextPage()\"\n        @prev=\"prevPage()\"\n        @last=\"lastPage()\"\n      />\n    </div>\n\n    <table v-if=\"results\" class=\"m-0 w-full\">\n      <thead>\n        <tr>\n          <sortable-table-header\n            v-for=\"column in ['name'].concat(cols)\"\n            :key=\"column\"\n            :title=\"column\"\n            :is-sorting-property=\"sortBy === column\"\n            :is-sort-descending=\"isSortDescending\"\n            @sort=\"(prop) => updateSortState(prop)\"\n          />\n        </tr>\n      </thead>\n      <tbody v-if=\"results && results.length > 0\">\n        <api-result-row\n          v-for=\"item in results\"\n          :key=\"item.slug\"\n          :data=\"item\"\n          :endpoint=\"endpoint\"\n          :cols=\"cols\"\n        />\n      </tbody>\n      <tbody v-else-if=\"results\">\n        <tr>\n          <td>No results match your search.</td>\n        </tr>\n      </tbody>\n      <tbody v-else>\n        <tr>\n          <td>Loading...</td>\n        </tr>\n      </tbody>\n    </table>\n    <div class=\"flex w-full flex-wrap justify-end align-middle\">\n      <div\n        v-show=\"results && results.length > 0\"\n        class=\"flex w-full justify-start italic text-blood md:w-1/2\"\n      >\n        Page {{ pageNo }} of {{ lastPageNo }}\n      </div>\n      <api-table-nav\n        :page-number=\"pageNo\"\n     ","position":{"index":363,"start_char":0,"end_char":1500},"metadata":{"content_hash":"e4a8e7e30cdf4ea8"},"created_at":"2026-01-14T02:20:10.581Z"}
{"chunk_id":"190b60e3347469d1b1db835a68e684dd","source_id":"f3f830d8afdaea78","text":"talic text-blood md:w-1/2\"\n      >\n        Page {{ pageNo }} of {{ lastPageNo }}\n      </div>\n      <api-table-nav\n        :page-number=\"pageNo\"\n        :last-page-number=\"lastPageNo\"\n        @first=\"firstPage()\"\n        @next=\"nextPage()\"\n        @prev=\"prevPage()\"\n        @last=\"lastPage()\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport ApiResultRow from './ApiResultRow.vue';\n\nconst sortBy = ref('name');\nconst isSortDescending = ref(false);\n\nconst props = defineProps({\n  endpoint: { type: String, required: true },\n  apiEndpoint: { type: String, required: true },\n  itemsPerPage: { type: Number, default: 50 },\n  cols: { type: Array, default: () => [] },\n});\n\nconst filter = defineModel({ default: () => ({}), type: Object });\n\nconst { data, pageNo, firstPage, prevPage, nextPage, lastPage, lastPageNo } =\n  useFindPaginated({\n    endpoint: props.apiEndpoint,\n    itemsPerPage: props.itemsPerPage,\n    sortByProperty: sortBy,\n    isSortDescending: isSortDescending,\n    filter: filter,\n    params: {\n      fields: ['slug', 'name'].concat(props.cols).join(),\n    },\n  });\n\nconst results = computed(() => data.value?.results);\n\nconst updateSortState = (property) => {\n  if (property !== sortBy.value) {\n    sortBy.value = property;\n    isSortDescending.value = false;\n  } else {\n    isSortDescending.value = !isSortDescending.value;\n  }\n};\n</script>","position":{"index":364,"start_char":1350,"end_char":2721},"metadata":{"content_hash":"ab1cd8ce62216255"},"created_at":"2026-01-14T02:20:10.581Z"}
{"chunk_id":"c6601d5290f36b09aef288bd03287f25","source_id":"d646b05dcc890435","text":"<template>\n  <div class=\"flex w-full justify-end md:w-1/2\">\n    <button\n      :disabled=\"isFirstPage\"\n      :class=\"\n        isFirstPage\n          ? 'mt-1 rounded-md border-2 bg-slate-800 p-1 pl-2 text-fog'\n          : 'mt-1 rounded-md border-2 bg-blood p-1 pl-2 text-fog hover:border-blood hover:bg-fog hover:text-blood'\n      \"\n      @click=\"firstPage()\"\n    >\n      <Icon name=\"heroicons:chevron-double-left\" class=\"mr-1\" />\n    </button>\n    <button\n      :disabled=\"isFirstPage\"\n      :class=\"\n        isFirstPage\n          ? 'mt-1 rounded-md border-2 bg-slate-800 p-1 pl-2 text-fog'\n          : 'mt-1 rounded-md border-2 bg-blood p-1 pl-2 text-fog hover:border-blood hover:bg-fog hover:text-blood'\n      \"\n      @click=\"prevPage()\"\n    >\n      <Icon name=\"heroicons:chevron-left\" class=\"mr-1\" />\n    </button>\n    <button\n      :disabled=\"isLastPage\"\n      :class=\"\n        isLastPage\n          ? 'mt-1 rounded-md border-2 bg-slate-800 p-1 pl-2 text-fog'\n          : 'mt-1 rounded-md border-2 bg-blood p-1 pl-2 text-fog hover:border-blood hover:bg-fog hover:text-blood'\n      \"\n      @click=\"nextPage()\"\n    >\n      <Icon name=\"heroicons:chevron-right\" class=\"mr-1\" />\n    </button>\n    <button\n      :disabled=\"isLastPage\"\n      :class=\"\n        isLastPage\n          ? 'mt-1 rounded-md border-2 bg-slate-800 p-1 pl-2 text-fog'\n          : 'mt-1 rounded-md border-2 bg-blood p-1 pl-2 text-fog hover:border-blood hover:bg-fog hover:text-blood'\n      \"\n      @click=\"lastPage()\"\n    >\n      <Icon","position":{"index":365,"start_char":0,"end_char":1500},"metadata":{"content_hash":"792f7c0a72379cc8"},"created_at":"2026-01-14T02:20:10.949Z"}
{"chunk_id":"375b608c97f052c40a775a0e6c6fb305","source_id":"d646b05dcc890435","text":"1 rounded-md border-2 bg-blood p-1 pl-2 text-fog hover:border-blood hover:bg-fog hover:text-blood'\n      \"\n      @click=\"lastPage()\"\n    >\n      <Icon name=\"heroicons:chevron-double-right\" class=\"mr-1\" />\n    </button>\n  </div>\n</template>\n<script setup>\nconst props = defineProps({\n  lastPageNumber: { type: Number, default: 1 },\n  pageNumber: { type: Number, default: 1 },\n});\nconst emit = defineEmits(['first', 'last', 'next', 'prev']);\n\nconst isFirstPage = computed(() => props.pageNumber <= 1);\nconst isLastPage = computed(() => props.pageNumber >= props.lastPageNumber);\n\nfunction firstPage() {\n  emit('first');\n}\nfunction lastPage() {\n  emit('last');\n}\nfunction nextPage() {\n  emit('next');\n}\nfunction prevPage() {\n  emit('prev');\n}\n</script>","position":{"index":366,"start_char":1350,"end_char":2099},"metadata":{"content_hash":"0774e7921084d19b"},"created_at":"2026-01-14T02:20:10.949Z"}
{"chunk_id":"1a6c1f52919e17ce4b44d207674b7206","source_id":"54ed5948feeebf71","text":"<template>\n  <div class=\"VueToNuxtLogo\">\n    <div class=\"Triangle Triangle--two\" />\n    <div class=\"Triangle Triangle--one\" />\n    <div class=\"Triangle Triangle--three\" />\n    <div class=\"Triangle Triangle--four\" />\n  </div>\n</template>\n\n<style>\n.VueToNuxtLogo {\n  display: inline-block;\n  animation: turn 2s linear forwards 1s;\n  transform: rotateX(180deg);\n  position: relative;\n  overflow: hidden;\n  height: 180px;\n  width: 245px;\n}\n\n.Triangle {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 0;\n}\n\n.Triangle--one {\n  border-left: 105px solid transparent;\n  border-right: 105px solid transparent;\n  border-bottom: 180px solid #41b883;\n}\n\n.Triangle--two {\n  top: 30px;\n  left: 35px;\n  animation: goright 0.5s linear forwards 3.5s;\n  border-left: 87.5px solid transparent;\n  border-right: 87.5px solid transparent;\n  border-bottom: 150px solid #3b8070;\n}\n\n.Triangle--three {\n  top: 60px;\n  left: 35px;\n  animation: goright 0.5s linear forwards 3.5s;\n  border-left: 70px solid transparent;\n  border-right: 70px solid transparent;\n  border-bottom: 120px solid #35495e;\n}\n\n.Triangle--four {\n  top: 120px;\n  left: 70px;\n  animation: godown 0.5s linear forwards 3s;\n  border-left: 35px solid transparent;\n  border-right: 35px solid transparent;\n  border-bottom: 60px solid #fff;\n}\n\n@keyframes turn {\n  100% {\n    transform: rotateX(0deg);\n  }\n}\n\n@keyframes godown {\n  100% {\n    top: 180px;\n  }\n}\n\n@keyframes goright {\n  100% {\n    left: 70px;\n  }\n}\n</style>","position":{"index":367,"start_char":0,"end_char":1472},"metadata":{"content_hash":"cbda317d5dfc7ddf"},"created_at":"2026-01-14T02:20:11.571Z"}
{"chunk_id":"7fe2369d250cdf7e63d2b765dfd0dafa","source_id":"4236c0303fa3a7c9","text":"<template>\n  <nav\n    class=\"my-2 flex h-min items-center py-0 align-middle dark:border-basalt sm:ml-8\"\n    aria-label=\"breadcrumbs\"\n  >\n    <ol class=\"space-x-1 text-xs font-semibold sm:space-x-3 lg:text-sm\">\n      <!-- Prepend Home Link to list -->\n      <li\n        class=\"inline-flex items-center align-middle text-gray-700 after:ml-1 after:text-blood after:content-['/'] last:after:content-[''] visited:text-gray-700 hover:text-red-700 dark:text-gray-200 dark:visited:text-gray-200 dark:hover:text-red-400 sm:after:ml-4\"\n      >\n        <!-- On narrow screens, home breadcrumb serves as site brand -->\n        <nuxt-link to=\"/\">\n          <span\n            class=\"font-serif text-lg font-bold hover:text-red-700 dark:text-white dark:hover:text-red-200 sm:hidden\"\n          >\n            Open5e\n          </span>\n          <span class=\"hidden align-middle uppercase sm:inline-flex\">\n            <Icon name=\"heroicons:home\" class=\"mt-0.5 align-middle sm:mr-1\" />\n            Home\n          </span>\n        </nuxt-link>\n      </li>\n\n      <!-- Render Breadcrumbs -->\n      <li\n        v-for=\"crumb in crumbs\"\n        :key=\"crumb.url\"\n        class=\"inline-flex break-before-auto items-center align-middle uppercase text-gray-700 after:ml-1 after:text-blood after:content-['/'] last:after:content-[''] visited:text-gray-700 hover:text-red-700 dark:text-gray-200 dark:visited:text-gray-200 dark:hover:text-red-400 sm:after:ml-4\"\n      >\n        <nuxt-link :to=\"crumb.url\" class=\"align-middle\">\n      ","position":{"index":368,"start_char":0,"end_char":1500},"metadata":{"content_hash":"19d053f7fd6cd580"},"created_at":"2026-01-14T02:20:11.919Z"}
{"chunk_id":"16b1c6c987115c5e8d9c7e1314884d9d","source_id":"4236c0303fa3a7c9","text":"ext-gray-200 dark:visited:text-gray-200 dark:hover:text-red-400 sm:after:ml-4\"\n      >\n        <nuxt-link :to=\"crumb.url\" class=\"align-middle\">\n          <span>{{ crumb.title }}</span>\n          <span v-if=\"crumb.subtitle\" class=\"font-thin text-granite sm:ml-2\">\n            ({{ crumb.subtitle }})\n          </span>\n        </nuxt-link>\n      </li>\n    </ol>\n  </nav>\n</template>\n\n<script setup>\nconst crumbs = inject('crumbs');\n</script>","position":{"index":369,"start_char":1350,"end_char":1788},"metadata":{"content_hash":"0707c0225343dedd"},"created_at":"2026-01-14T02:20:11.919Z"}
{"chunk_id":"5ab3c5827b1d7eb16ccc468adb14e8be","source_id":"614cefdaa8d54117","text":"<template>\n  <span> {{ challenge }} ({{ experience }} XP) </span>\n</template>\n\n<script setup>\nconst props = defineProps({\n  challenge: {\n    type: String,\n    default: '0',\n  },\n});\n\nconst experience = computed(() => {\n  const xpValues = {\n    0: 10,\n    '1/8': 25,\n    '1/4': 50,\n    '1/2': 100,\n    1: 200,\n    2: 450,\n    3: 700,\n    4: 1100,\n    5: 1800,\n    6: 2300,\n    7: 2900,\n    8: 3900,\n    9: 5000,\n    10: 5900,\n    11: 7200,\n    12: 8400,\n    13: 10000,\n    14: 11500,\n    15: 13000,\n    16: 15000,\n    17: 18000,\n    18: 20000,\n    19: 22000,\n    20: 25000,\n    21: 33000,\n    22: 41000,\n    23: 50000,\n    24: 62000,\n    30: 155000,\n  };\n  if (xpValues.hasOwnProperty(props.challenge)) {\n    return xpValues[props.challenge].toLocaleString('en');\n  } else {\n    return '???';\n  }\n});\n</script>\n\n<style></style>","position":{"index":370,"start_char":0,"end_char":826},"metadata":{"content_hash":"d4c0359963808b35"},"created_at":"2026-01-14T02:20:12.461Z"}
{"chunk_id":"671fc6c8fb2900e80b01880b3630ec44","source_id":"81662179e45fba14","text":"<!--\n  This component is global so that the markdown parser can see it and parse the\n  cross-link tags as components. There might be a better way to handle this\n-->\n<template>\n  <nuxt-link\n    v-if=\"acceptibleTypes.includes(category)\"\n    :to=\"url.linkTarget\"\n    class=\"group relative\"\n    @mouseover=\"loadData\"\n  >\n    <slot />\n    <link-preview v-if=\"content\" :content=\"content\" :category=\"category\" />\n  </nuxt-link>\n\n  <!-- If link markdown is invalid, render a span instead -->\n  <span v-else class=\"italic\"><slot /></span>\n</template>\n\n<script setup>\nimport axios from 'axios';\n\ndefineProps({ src: { type: String, default: '' } });\n\nconst loading = ref(false);\nconst content = ref(undefined);\nconst acceptibleTypes = ref(Object.keys(paramsByType));\nconst category = ref(\n  props.src.split('/').filter((crumb) => !['v1', 'v2'].includes(crumb))[0]\n);\nconst slug = ref(\n  props.src.split('/').filter((crumb) => !['v1', 'v2'].includes(crumb))[1]\n);\n\nconst url = computed(() => {\n  const apiURL = useRuntimeConfig().public.apiUrl;\n  const { altFrontEndSubroute, apiEndpoint } = paramsByType[category.value];\n\n  // make sure that category has a recognised endpoint\n  if (!apiEndpoint) {\n    return { linkTarget: '/' };\n  }\n\n  // FE uses section's parent for routing. Update url once data is fetched\n  if (content.value && category.value === 'sections') {\n    const subroute = content.value.parent.split(' ').join('-').toLowerCase();\n    return {\n      linkTarget: `/${subroute}/${slug.value}`,\n     ","position":{"index":371,"start_char":0,"end_char":1500},"metadata":{"content_hash":"bd6ec8e02a648009"},"created_at":"2026-01-14T02:20:12.902Z"}
{"chunk_id":"0eb9ba09c357cbbc613b0ad6b43c61e4","source_id":"81662179e45fba14","text":"s') {\n    const subroute = content.value.parent.split(' ').join('-').toLowerCase();\n    return {\n      linkTarget: `/${subroute}/${slug.value}`,\n      apiEndpoint: `${apiURL}/sections/${slug.value}`,\n    };\n  }\n  // the url on the front end site might be different to its API endpoint\n  return {\n    linkTarget: `/${altFrontEndSubroute ?? apiEndpoint}/${slug.value}`,\n    apiEndpoint: `${apiURL}/${apiEndpoint}/${slug.value}`,\n  };\n});\n\nasync function loadData() {\n  // guard clause so that data is only fetched on initial hover\n  if (loading.value || content.value) {\n    return;\n  }\n  loading.value = true;\n  const { queryParams } = paramsByType[category.value];\n  const res = await axios.get(`${url.value.apiEndpoint}/${queryParams}`);\n  content.value = res.data;\n}\n\n// Maps tag names from markdown to data required to show links/previews\nconst defaultQueryParams = '?fields=name,document__title,';\nconst paramsByType = {\n  armor: {\n    apiEndpoint: 'armor',\n    queryParams: defaultQueryParams + 'category',\n  },\n  backgrounds: {\n    apiEndpoint: 'backgrounds',\n    queryParams: defaultQueryParams,\n  },\n  classes: {\n    apiEndpoint: 'classes',\n    queryParams: defaultQueryParams,\n  },\n  combat: {\n    altFrontEndSubroute: 'combat',\n    apiEndpoint: 'sections',\n    queryParams: defaultQueryParams + 'title',\n  },\n  conditions: {\n    apiEndpoint: 'conditions',\n    queryParams: defaultQueryParams + 'desc',\n  },\n  equipment: {\n    altFrontEndSubroute: 'equipment',\n    apiEndpoint: 'sections',\n ","position":{"index":372,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"85d6c2d4f8a6402e"},"created_at":"2026-01-14T02:20:12.902Z"}
{"chunk_id":"4e7cc8c94a8e336d62c822c8d1181ee6","source_id":"81662179e45fba14","text":": 'conditions',\n    queryParams: defaultQueryParams + 'desc',\n  },\n  equipment: {\n    altFrontEndSubroute: 'equipment',\n    apiEndpoint: 'sections',\n    queryParams: defaultQueryParams + 'parent',\n  },\n  feats: {\n    apiEndpoint: 'feats',\n    queryParams: defaultQueryParams,\n  },\n  'gameplay-mechanics': {\n    altFrontEndSubroute: 'gameplay-mechanics',\n    apiEndpoint: 'sections',\n    queryParams: defaultQueryParams + 'parent',\n  },\n  magicitems: {\n    altFrontEndSubroute: 'magic-items',\n    apiEndpoint: 'magicitems',\n    queryParams: defaultQueryParams + 'type,rarity,requires_attunement',\n  },\n  monsters: {\n    apiEndpoint: 'monsters',\n    queryParams: defaultQueryParams + 'size,type,challenge_rating',\n  },\n  plane: {\n    apiEndpoint: 'planes',\n    queryParams: defaultQueryParams,\n  },\n  races: {\n    apiEndpoint: 'races',\n    queryParams: defaultQueryParams,\n  },\n  running: {\n    altFrontEndSubroute: 'running',\n    apiEndpoint: 'sections',\n    queryParams: defaultQueryParams + 'parent',\n  },\n  sections: {\n    apiEndpoint: 'sections',\n    queryParams: defaultQueryParams + 'parent',\n  },\n  spells: {\n    apiEndpoint: 'spells',\n    queryParams:\n      defaultQueryParams +\n      'level,school,casting_time,duration,range,components',\n  },\n  spelllist: {\n    altFrontEndSubroute: 'spells/by-class',\n    apiEndpoint: 'spelllist',\n    queryParams: defaultQueryParams,\n  },\n  weapons: {\n    apiEndpoint: 'weapons',\n    queryParams: defaultQueryParams + 'category',\n  },\n};\n</script>","position":{"index":373,"start_char":2700,"end_char":4191},"metadata":{"content_hash":"878377cabff156cb"},"created_at":"2026-01-14T02:20:12.902Z"}
{"chunk_id":"be59746246e67bc137de8007cbd8af11","source_id":"4189d50b54088b02","text":"<template>\n  <div>\n    <button\n      v-if=\"showClearButton\"\n      class=\"mr-2 rounded-md p-1 text-blood outline outline-1 outline-blood hover:bg-blood hover:text-fog dark:text-red-400\"\n      @click=\"$emit('clearFilter')\"\n    >\n      <Icon name=\"heroicons:x-mark\" class=\"mb-1 mr-1\" />\n      Clear {{ filterCount }} Filters\n    </button>\n    <button\n      class=\"rounded-md p-1 text-blood outline outline-1 outline-blood hover:bg-blood hover:text-fog dark:text-red-400\"\n      @click=\"showFilter()\"\n    >\n      <Icon name=\"heroicons:funnel\" class=\"mr-1\" />\n      {{ filterShown ? 'Hide' : 'Show' }} Filters\n    </button>\n  </div>\n</template>\n\n<script setup>\nconst props = defineProps({\n  showClearButton: {\n    type: Boolean,\n    default: false,\n  },\n  filterCount: {\n    type: Number,\n    default: 0,\n  },\n  filterShown: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst emit = defineEmits(['showFilter', 'clearFilter']);\n\nfunction showFilter() {\n  emit('showFilter');\n}\n</script>","position":{"index":374,"start_char":0,"end_char":985},"metadata":{"content_hash":"1e15f9693a140faa"},"created_at":"2026-01-14T02:20:13.612Z"}
{"chunk_id":"e4e70607557caaf4fa0f68c3f5844507","source_id":"8466a21bb76a4aab","text":"<template>\n  <div class=\"filter-wrapper\">\n    <label\n      :for=\"id\"\n      class=\"floating-label\"\n      :class=\"{ 'floating-label--top': isLabelFloating }\"\n      >{{ placeholder }}</label\n    >\n    <input\n      :id=\"id\"\n      ref=\"input\"\n      v-model=\"filterText\"\n      class=\"filter-input bg-fog dark:bg-basalt dark:text-white\"\n      type=\"input\"\n      aria-description=\"Results will update as you type.\"\n      @input.stop=\"onInput\"\n      @focus=\"onFocus\"\n      @blur=\"onBlur\"\n    />\n    <button v-show=\"filterValue\" class=\"filter-clear\" @click=\"clearSearch()\">\n      <img src=\"/img/x-close.png\" alt=\"Clear filter\" />\n    </button>\n  </div>\n</template>\n\n<script setup>\ndefineProps({\n  id: {\n    type: String,\n    required: true,\n  },\n  placeholder: {\n    type: String,\n    default: 'Filter...',\n  },\n});\n\nconst filterText = ref('');\nconst isLabelFloating = ref(false);\nconst input = ref(null);\nconst filterValue = computed(() => {\n  return filterText.value;\n});\nconst emit = defineEmits(['input']);\n\nfunction clearSearch() {\n  filterText.value = '';\n  isLabelFloating.value = false;\n  emit('input', filterText.value);\n  input.value.focus();\n}\nfunction onInput() {\n  emit('input', filterText.value);\n}\n\nfunction onFocus() {\n  isLabelFloating.value = true;\n}\n\nfunction onBlur() {\n  if (filterText.value.length === 0) {\n    isLabelFloating.value = false;\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../assets/variables';\n\n.filter-wrapper {\n  width: 30%;\n  min-width: 15rem;\n  position: relative;\n\n  ","position":{"index":375,"start_char":0,"end_char":1500},"metadata":{"content_hash":"591f6afea6932218"},"created_at":"2026-01-14T02:20:14.120Z"}
{"chunk_id":"a3031eadf2265e95fc6828cec6589964","source_id":"8466a21bb76a4aab","text":"se;\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../assets/variables';\n\n.filter-wrapper {\n  width: 30%;\n  min-width: 15rem;\n  position: relative;\n\n  &::after {\n    content: '';\n    height: 100%;\n    width: 3rem;\n    opacity: 0.5;\n    position: absolute;\n    left: 0;\n    top: 0;\n    background-image: url('/img/search-icon.png');\n    background-repeat: no-repeat;\n    background-position: 0.5rem center;\n    background-size: 1.2rem;\n    pointer-events: none;\n  }\n\n  .floating-label {\n    position: absolute;\n    top: 6px;\n    left: 28px;\n    padding-inline: 4px;\n\n    font-size: 1rem;\n    font-weight: normal;\n    font-family: 'Source Sans Pro', sans-serif;\n    color: $color-gray;\n    pointer-events: none;\n    transition: all 100ms ease;\n\n    &.floating-label--top {\n      top: -10px;\n      left: auto;\n      right: 32px;\n\n      background: #fff;\n    }\n  }\n\n  .filter-input {\n    font-size: $font-size-base;\n    border-radius: 2px;\n    border: 1px solid $color-smoke;\n    height: 2rem;\n    width: 100%;\n    padding-left: 2rem;\n    padding-right: 3rem;\n    border-radius: 2rem;\n    outline: none;\n\n    &:focus,\n    &:active {\n      border: 1px solid $color-granite;\n    }\n  }\n\n  .filter-clear {\n    background: none;\n    border: none;\n    position: absolute;\n    top: 0.6rem;\n    right: 0.6rem;\n    padding: 0;\n    width: 1rem;\n    height: 1rem;\n\n    img {\n      opacity: 0.3;\n      width: 100%;\n      cursor: pointer;\n\n      &:hover {\n        opacity: 0.6;\n      }\n    }\n  }\n}\n</style>","position":{"index":376,"start_char":1350,"end_char":2838},"metadata":{"content_hash":"9039a50e30f8c5b7"},"created_at":"2026-01-14T02:20:14.120Z"}
{"chunk_id":"bd9e6ad152f1c9485925f18a2b117b02","source_id":"2a8218690e19e727","text":"<template>\n  <span>\n    {{ fraction(challenge) }}\n  </span>\n</template>\n\n<script setup>\ndefineProps({\n  challenge: {\n    type: [Number, String],\n    default: 0,\n  },\n});\nfunction fraction(chal) {\n  const chalValue = {\n    0.125: '1/8',\n    0.25: '1/4',\n    0.5: '1/2',\n  };\n  if (chalValue.hasOwnProperty(chal)) {\n    return chalValue[chal];\n  } else {\n    return chal;\n  }\n}\n</script>\n\n<style></style>","position":{"index":377,"start_char":0,"end_char":402},"metadata":{"content_hash":"286e22f3820792d5"},"created_at":"2026-01-14T02:20:14.714Z"}
{"chunk_id":"1f47957a91578a989541dfdb2301705e","source_id":"cddead27aa003464","text":"<template>\n  <span\n    class=\"cursor-pointer font-bold text-blood hover:text-black\"\n    @click=\"useDiceRoller(signature)\"\n  >\n    <slot />\n  </span>\n</template>\n\n<script lang=\"ts\" setup>\nconst props = defineProps({\n  signature: { type: String, default: '' },\n});\n</script>","position":{"index":378,"start_char":0,"end_char":272},"metadata":{"content_hash":"3e863f1c1c8bd439"},"created_at":"2026-01-14T02:20:15.220Z"}
{"chunk_id":"dc0b58b8116eb5d6d420963570485304","source_id":"f98aab41fb898b02","text":"<template>\n  <article\n    class=\"absolute top--1 z-10 hidden h-max bg-slate-100 px-4 py-3 text-black shadow-md dark:bg-basalt dark:text-white md:group-hover:block\"\n  >\n    <!-- Generate card title from data -->\n    <p class=\"m-0 whitespace-nowrap border-b-2 border-blood pb-1 align-middle\">\n      <span class=\"font-serif text-lg font-bold text-blood dark:text-white\">\n        {{ content.name }}\n      </span>\n      <span class=\"before:mx-2 before:font-bold before:content-['|']\">\n        {{ subtitle }}\n      </span>\n    </p>\n\n    <!-- Generate card body from data -->\n    <p v-for=\"item in body\" :key=\"item.title\" class=\"m-0 p-0 text-sm\">\n      <span v-if=\"item.title\" class=\"font-bold after:mr-1 after:content-[':']\">\n        {{ item.title }}\n      </span>\n      <span>{{ item.data }} </span>\n    </p>\n\n    <!-- Card footer -->\n    <p v-if=\"content.document__title\" class=\"whitespace-nowrap text-sm italic\">\n      Source: {{ content.document__title }}\n    </p>\n  </article>\n</template>\n\n<script setup>\nconst props = defineProps({\n  category: { type: String, default: '' },\n  // eslint-disable-next-line vue/require-prop-types\n  content: { default: [] },\n});\n\nconst subtitle = computed(() => {\n  const data = props.content;\n  switch (props.category) {\n    case 'spells':\n      return `${data.level} ${data.school} Spell`;\n    case 'monsters':\n      return 'Monster';\n    case 'magicitems':\n      return 'Magic Item';\n    case 'conditions':\n      return 'Condition';\n    case 'feats':\n      return 'F","position":{"index":379,"start_char":0,"end_char":1500},"metadata":{"content_hash":"7c0beba685f87ff3"},"created_at":"2026-01-14T02:20:15.518Z"}
{"chunk_id":"62053ecef1d4ada9285667e597170280","source_id":"f98aab41fb898b02","text":"return 'Monster';\n    case 'magicitems':\n      return 'Magic Item';\n    case 'conditions':\n      return 'Condition';\n    case 'feats':\n      return 'Feat';\n    case 'sections':\n    case 'characters':\n    case 'combat':\n    case 'equipment':\n    case 'gameplay-mechanics':\n    case 'running':\n      return data.parent;\n    default:\n      return props.category.charAt(0).toUpperCase() + props.category.slice(1);\n  }\n});\n\nconst body = computed(() => {\n  const data = props.content;\n  switch (props.category) {\n    case 'conditions':\n      return [{ data: data.desc }];\n    case 'spells':\n      return [\n        { title: 'Casting Time', data: data.casting_time },\n        { title: 'Duration', data: data.duration },\n        { title: 'Range', data: data.range },\n        { title: 'Components', data: data.components },\n      ];\n    case 'magicitems':\n      return [\n        {\n          data: `${data.type}, ${data.rarity} ${\n            data.requires_attunement && '(requires attunement)'\n          }`,\n        },\n      ];\n    case 'monsters':\n      return [\n        { data: `CR ${data.challenge_rating} ${data.type} (${data.size})` },\n      ];\n    default:\n      return [];\n  }\n});\n</script>\n\n<style></style>","position":{"index":380,"start_char":1350,"end_char":2554},"metadata":{"content_hash":"f3fae37022a63307"},"created_at":"2026-01-14T02:20:15.518Z"}
{"chunk_id":"40d647f66fc37501961579504934c3cb","source_id":"d8519127400c5a70","text":"<template>\n  <!-- FILTER BOX -->\n  <div\n    class=\"filter-header-wrapper flex flex-wrap bg-gray-50 px-2 dark:bg-slate-900 dark:text-white\"\n  >\n    <div class=\"bg-blue flex w-full flex-wrap align-middle\">\n      <label for=\"itemName\" class=\"pt-1 font-bold md:w-1/6\">ITEM NAME:</label>\n      <input\n        id=\"itemName\"\n        :value=\"filter.name__icontains\"\n        name=\"itemName\"\n        placeholder=\"Any\"\n        class=\"mt-2 w-1/2 rounded-md px-2 ring-1 ring-gray-500 focus:ring-2 focus:ring-blood dark:bg-slate-700 dark:text-white md:w-5/6\"\n        @input=\"updateFilter('name__icontains', $event.target.value)\"\n      />\n      <div class=\"flex w-full flex-wrap\">\n        <div class=\"mt-2 flex w-full flex-wrap md:w-1/2\">\n          <span class=\"mr-2 w-full font-bold\">RARITY:</span>\n          <select\n            id=\"rarity\"\n            :value=\"filter.rarity\"\n            name=\"rarity\"\n            class=\"flex w-full rounded-md ring-1 ring-gray-500 focus:ring-2 focus:ring-blood dark:bg-slate-700 dark:text-white\"\n            @input=\"updateFilter('rarity', $event.target.value)\"\n          >\n            <option :key=\"''\" :value=\"''\" text=\"Any\" />\n            <option\n              v-for=\"rtg in MAGIC_ITEMS_RARITES\"\n              :key=\"rtg\"\n              class=\"\"\n              v-text=\"rtg\"\n            />\n          </select>\n        </div>\n        <div class=\"mt-2 flex w-full flex-wrap md:w-1/2\">\n          <span class=\"mr-2 w-full font-bold md:ml-2\">TYPE:</span>\n          <select\n            id","position":{"index":381,"start_char":0,"end_char":1500},"metadata":{"content_hash":"845aaf519eb85e41"},"created_at":"2026-01-14T02:20:16.191Z"}
{"chunk_id":"db1a7e3351a3fbdee52856f280dd6171","source_id":"d8519127400c5a70","text":" <div class=\"mt-2 flex w-full flex-wrap md:w-1/2\">\n          <span class=\"mr-2 w-full font-bold md:ml-2\">TYPE:</span>\n          <select\n            id=\"type\"\n            :value=\"filter.type\"\n            name=\"type\"\n            class=\"flex w-full rounded-md ring-1 ring-gray-500 focus:ring-2 focus:ring-blood dark:bg-slate-700 dark:text-white md:ml-2\"\n            @input=\"updateFilter('type', $event.target.value)\"\n          >\n            <option :key=\"''\" :value=\"''\" text=\"Any\" />\n            <option\n              v-for=\"rtg in MAGIC_ITEMS_TYPES\"\n              :key=\"rtg\"\n              class=\"\"\n              v-text=\"rtg\"\n            />\n          </select>\n        </div>\n        <div class=\"mt-4 flex w-full md:w-1/2\">\n          <span class=\"mr-2 font-bold\">REQUIRES ATTUNEMENT:</span>\n          <input\n            id=\"attunement\"\n            :value=\"filter.requires_attunement\"\n            type=\"checkbox\"\n            name=\"attunement\"\n            class=\"mb-1 accent-blood\"\n            @input=\"\n              updateFilter(\n                'requires_attunement',\n                $event.target.value ? '' : 'requires attunement'\n              )\n            \"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- END FILTER BOX -->\n</template>\n\n<script setup>\nconst props = defineProps({\n  filter: { type: Object, default: copyDefaultMonsterFilter() },\n  updateFilter: { type: Function, required: true },\n});\n</script>","position":{"index":382,"start_char":1350,"end_char":2784},"metadata":{"content_hash":"963060c91c003286"},"created_at":"2026-01-14T02:20:16.191Z"}
{"chunk_id":"87d439d82cbe27b1b172ffe6a182c9e6","source_id":"fb8ec11c9328285d","text":"<template ref=\"el\">\n  <vue-showdown\n    ref=\"mdwrapper\"\n    :vue-template=\"true\"\n    :options=\"{\n      tables: true,\n      headerLevelStart: headerLevel,\n      vueTemplate: true,\n    }\"\n    :markdown=\"text\"\n    :extensions=\"extensions\"\n    :class=\"inline ? 'markdown-inline' : ''\"\n  />\n</template>\n\n<script setup>\nimport { VueShowdown } from 'vue-showdown';\nconst props = defineProps({\n  toc: { type: Boolean, default: true },\n  text: { type: String, default: 'loading...' },\n  headerLevel: { type: Number, default: 1 },\n  inline: { type: Boolean, default: false },\n  useRoller: { type: Boolean, default: false },\n});\n\nconst crossLinkExtension = {\n  type: 'output',\n  regex: /<open5e-link src=([^>]+)>([^<]+)<\\/open5e-link>/g,\n  replace: '<cross-link src=\"$1\">$2</cross-link>',\n};\n\nconst diceRollerExtension = {\n  type: 'output',\n  regex: /(\\+\\d+ to hit|\\d+[dD]\\d+( *[+-] *\\d+)?)/g,\n  replace: '<inline-roller signature=\"$1\">$1</inline-roller>',\n};\n\nconst extensions = computed(() => {\n  const list = [crossLinkExtension];\n  if (props.useRoller) {\n    list.push(diceRollerExtension);\n  }\n  return list;\n});\n</script>\n\n<style>\n.markdown-inline {\n  display: inline;\n  * {\n    display: inherit;\n  }\n}\n</style>","position":{"index":383,"start_char":0,"end_char":1206},"metadata":{"content_hash":"a82f5494f5108186"},"created_at":"2026-01-14T02:20:16.725Z"}
{"chunk_id":"d5b00cc7cf30e887e0311ed9da61bc17","source_id":"e9115d6e9ac02232","text":"<template>\n  <TransitionRoot as=\"template\" :show=\"open\" @key.escape=\"closeModal\">\n    <Dialog as=\"div\" class=\"relative z-100\" @close=\"closeModal\">\n      <TransitionChild\n        as=\"template\"\n        enter=\"ease-out duration-300\"\n        enter-from=\"opacity-0\"\n        enter-to=\"opacity-100\"\n        leave=\"ease-in duration-200\"\n        leave-from=\"opacity-100\"\n        leave-to=\"opacity-0\"\n      >\n        <div\n          class=\"fixed inset-0 bg-gray-500/75 transition-opacity\"\n          @close=\"closeModal()\"\n        />\n      </TransitionChild>\n\n      <div class=\"fixed inset-0 z-100 overflow-y-auto\">\n        <div\n          class=\"flex min-h-full items-center justify-center p-4 text-center sm:p-0\"\n        >\n          <TransitionChild\n            as=\"template\"\n            enter=\"ease-out duration-300\"\n            enter-from=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n            enter-to=\"opacity-100 translate-y-0 sm:scale-100\"\n            leave=\"ease-in duration-200\"\n            leave-from=\"opacity-100 translate-y-0 sm:scale-100\"\n            leave-to=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n          >\n            <DialogPanel\n              class=\"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-2 text-left shadow-xl transition-all dark:bg-darkness dark:text-white sm:my-4 sm:w-full sm:max-w-lg sm:p-6\"\n            >\n              <!-- Use unnamed slot to inject modal content -->\n              <slot />\n\n              <!-- Use 'actions' slot","position":{"index":384,"start_char":0,"end_char":1500},"metadata":{"content_hash":"dc4061e326b6c61e"},"created_at":"2026-01-14T02:20:17.515Z"}
{"chunk_id":"ab552f5e2397dd8cf6b5a05f547be6e5","source_id":"e9115d6e9ac02232","text":"lg sm:p-6\"\n            >\n              <!-- Use unnamed slot to inject modal content -->\n              <slot />\n\n              <!-- Use 'actions' slot for modal buttons/etc -->\n              <div\n                class=\"mt-5 grid grid-cols-1 gap-2 sm:mt-6 sm:grid-flow-row-dense sm:grid-cols-2\"\n                :show=\"slots.actions\"\n              >\n                <slot name=\"actions\" />\n              </div>\n            </DialogPanel>\n          </TransitionChild>\n        </div>\n      </div>\n    </Dialog>\n  </TransitionRoot>\n</template>\n\n<script setup>\nimport { useSlots } from 'vue';\nimport {\n  Dialog,\n  DialogPanel,\n  TransitionChild,\n  TransitionRoot,\n} from '@headlessui/vue';\n\nconst slots = useSlots();\nconst props = defineProps({\n  open: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst emits = defineEmits(['close', 'update:open']);\n\nconst closeModal = () => {\n  emits('close', true);\n  emits('update:open', false);\n};\n</script>","position":{"index":385,"start_char":1350,"end_char":2296},"metadata":{"content_hash":"406060f571be7194"},"created_at":"2026-01-14T02:20:17.515Z"}
{"chunk_id":"80cf5716dea6cb5e6de98f1f50d5ae3f","source_id":"30db3cfe922a2e18","text":"<template>\n  <!-- FILTER BOX -->\n  <div\n    class=\"filter-header-wrapper flex flex-wrap bg-gray-50 px-2 dark:bg-slate-900 dark:text-white\"\n  >\n    <div class=\"bg-blue flex w-full flex-wrap align-middle\">\n      <label for=\"monsterName\" class=\"pt-1 font-bold md:w-1/6\"\n        >MONSTER NAME:</label\n      >\n      <input\n        id=\"monsterName\"\n        :value=\"filter.name__icontains\"\n        placeholder=\"Any\"\n        name=\"monsterName\"\n        class=\"mt-2 w-1/2 rounded-md px-2 ring-1 ring-gray-500 focus:ring-2 focus:ring-blood dark:bg-slate-700 dark:text-white md:w-5/6\"\n        @input=\"updateFilter('name__icontains', $event.target.value)\"\n      />\n      <span class=\"flex w-full font-bold\">CHALLENGE RATING</span>\n      <div class=\"flex w-full px-1 md:w-1/2\">\n        <label for=\"challengeRtgLow\" class=\"w-1/2\">From:</label>\n        <select\n          id=\"challengeRtgLow\"\n          :value=\"filter.cr__gte\"\n          name=\"challengeRtgLow\"\n          class=\"w-1/2 rounded-md ring-1 ring-gray-500 focus:ring-2 focus:ring-blood dark:bg-slate-700 dark:text-white\"\n          @input=\"updateFilter('cr__gte', $event.target.value)\"\n        >\n          <option :key=\"''\" :value=\"''\" text=\"Any\" />\n          <option\n            v-for=\"[label, value] in MONSTER_CHALLENGE_RATINGS_MAP\"\n            :key=\"value\"\n            :value=\"value\"\n            v-text=\"label\"\n          />\n        </select>\n      </div>\n      <div class=\"flex w-full px-1 md:w-1/2\">\n        <label for=\"challengeRtgHigh\" class=\"w-1/2\">To","position":{"index":386,"start_char":0,"end_char":1500},"metadata":{"content_hash":"e2a311af1834482c"},"created_at":"2026-01-14T02:20:17.963Z"}
{"chunk_id":"d61264ce617f45c591d00fd1593d8945","source_id":"30db3cfe922a2e18","text":"abel\"\n          />\n        </select>\n      </div>\n      <div class=\"flex w-full px-1 md:w-1/2\">\n        <label for=\"challengeRtgHigh\" class=\"w-1/2\">To:</label>\n        <select\n          id=\"challengeRtgHigh\"\n          :value=\"filter.cr__lte\"\n          name=\"challengeRtgHigh\"\n          class=\"w-1/2 rounded-md ring-1 ring-gray-500 focus:ring-2 focus:ring-blood dark:bg-slate-700 dark:text-white\"\n          @input=\"updateFilter('cr__lte', $event.target.value)\"\n        >\n          <option :key=\"''\" :value=\"''\" text=\"Any\" />\n          <option\n            v-for=\"[label, value] in MONSTER_CHALLENGE_RATINGS_MAP\"\n            :key=\"value\"\n            :value=\"value\"\n            v-text=\"label\"\n          />\n        </select>\n      </div>\n    </div>\n    <div class=\"flex w-full flex-wrap\">\n      <span class=\"flex w-full font-bold\">HIT POINTS</span>\n      <div class=\"flex w-full px-1 md:w-1/2\">\n        <label for=\"hpLow\" class=\"w-1/2\">From (low):</label>\n        <input\n          id=\"hpLow\"\n          :value=\"filter.hit_points__gte\"\n          placeholder=\"Any\"\n          type=\"number\"\n          min=\"0\"\n          max=\"9999\"\n          step=\"1\"\n          name=\"hpLow\"\n          class=\"w-1/2 rounded-md px-2 ring-1 ring-gray-500 focus:ring-2 focus:ring-blood dark:bg-slate-700 dark:text-white\"\n          @input=\"updateFilter('hit_points__gte', $event.target.value)\"\n        />\n      </div>\n      <div class=\"flex w-full px-1 md:w-1/2\">\n        <label for=\"hpHigh\" class=\"w-1/2\">To (high):</label>\n        <i","position":{"index":387,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"8ade7e1076835ef8"},"created_at":"2026-01-14T02:20:17.963Z"}
{"chunk_id":"a6497c573fb64b644a3727a430a4c314","source_id":"30db3cfe922a2e18","text":".value)\"\n        />\n      </div>\n      <div class=\"flex w-full px-1 md:w-1/2\">\n        <label for=\"hpHigh\" class=\"w-1/2\">To (high):</label>\n        <input\n          id=\"hpHigh\"\n          :value=\"filter.hit_points__lte\"\n          placeholder=\"Any\"\n          type=\"number\"\n          min=\"0\"\n          max=\"9999\"\n          step=\"1\"\n          name=\"hpHigh\"\n          class=\"w-1/2 rounded-md px-2 ring-1 ring-gray-500 focus:ring-2 focus:ring-blood dark:bg-slate-700 dark:text-white\"\n          @input=\"updateFilter('hit_points__lte', $event.target.value)\"\n        />\n      </div>\n    </div>\n    <div class=\"flex w-full flex-wrap pr-1 pt-4 md:w-1/2\">\n      <label for=\"size\" class=\"w-1/2 font-bold\">SIZE:</label>\n      <select\n        id=\"size\"\n        :value=\"filter.size\"\n        name=\"size\"\n        class=\"w-1/2 rounded-md ring-1 ring-gray-500 focus:ring-2 focus:ring-blood dark:bg-slate-700 dark:text-white\"\n        @input=\"updateFilter('size', $event.target.value)\"\n      >\n        <option :key=\"''\" :value=\"''\" text=\"Any\" />\n        <option v-for=\"size in MONSTER_SIZES_LIST\" :key=\"size\" v-text=\"size\" />\n      </select>\n    </div>\n    <div class=\"flex w-full flex-wrap pt-4 md:w-1/2\">\n      <div class=\"flex w-full px-1\">\n        <label for=\"type\" class=\"w-full font-bold\">TYPE:</label>\n        <select\n          id=\"type\"\n          :value=\"filter.type\"\n          name=\"type\"\n          class=\"w-full rounded-md ring-1 ring-gray-500 focus:ring-2 focus:ring-blood dark:bg-slate-700 dark:text-white\"\n   ","position":{"index":388,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"cfb523f176a19bba"},"created_at":"2026-01-14T02:20:17.963Z"}
{"chunk_id":"b34334ce3f9182daa1daa4d488316a82","source_id":"30db3cfe922a2e18","text":"pe\"\n          name=\"type\"\n          class=\"w-full rounded-md ring-1 ring-gray-500 focus:ring-2 focus:ring-blood dark:bg-slate-700 dark:text-white\"\n          @input=\"updateFilter('type', $event.target.value)\"\n        >\n          <option :key=\"''\" :value=\"''\" text=\"Any\" />\n          <option\n            v-for=\"monsterType in MONSTER_TYPES_LIST\"\n            :key=\"monsterType\"\n            v-text=\"monsterType\"\n          />\n        </select>\n      </div>\n    </div>\n  </div>\n  <!-- END FILTER BOX -->\n</template>\n<script setup>\nconst props = defineProps({\n  filter: { type: Object, default: copyDefaultMonsterFilter() },\n  updateFilter: { type: Function, required: true },\n});\n</script>","position":{"index":389,"start_char":4050,"end_char":4733},"metadata":{"content_hash":"5bd5cb83f5b08671"},"created_at":"2026-01-14T02:20:17.963Z"}
{"chunk_id":"be0a5b18d166a8da85c0e359d9bbe2ba","source_id":"cb4ca409c6f05920","text":"<template>\n  <nuxt-link\n    :class=\"`bold block w-full px-4  text-white hover:bg-slate-800/40 hover:underline\n      dark:hover:bg-slate-600/40 ${\n        useRoute().fullPath === to && 'bg-slate-800 font-bold'\n      } ${indent && 'py-1 pl-8'} ${!indent && 'py-3'}\n      `\"\n    :to=\"to\"\n  >\n    <slot />\n  </nuxt-link>\n</template>\n\n<script setup>\ndefineProps({\n  to: {\n    type: String,\n    default: '',\n  },\n  title: {\n    type: String,\n    default: '',\n  },\n  indent: {\n    type: Boolean,\n    default: false,\n  },\n});\n</script>","position":{"index":390,"start_char":0,"end_char":527},"metadata":{"content_hash":"1594c5df64c4c38a"},"created_at":"2026-01-14T02:20:18.730Z"}
{"chunk_id":"b03ac21bd90158a9b2acc8fff4e4e27c","source_id":"ce08fcd13d16cc1f","text":"<template>\n  <div class=\"flex w-full flex-wrap align-middle\">\n    <div class=\"flex w-full justify-start italic text-blood md:w-1/2\">\n      Total of {{ listLength }} {{ listWording }}\n    </div>\n    <div class=\"flex w-full justify-end md:w-1/2\">\n      <button\n        :disabled=\"pageNumber == 0\"\n        class=\"mt-1 rounded-md border-2 bg-blood p-1 pl-2 text-fog hover:border-blood hover:bg-fog hover:text-blood\"\n        @click=\"firstPage()\"\n      >\n        <Icon name=\"heroicons:chevron-double-left\" class=\"mr-1\" />\n      </button>\n      <button\n        :disabled=\"pageNumber == 0\"\n        class=\"mt-1 rounded-md border-2 bg-blood p-1 pl-2 text-fog hover:border-blood hover:bg-fog hover:text-blood\"\n        @click=\"prevPage()\"\n      >\n        <Icon name=\"heroicons:chevron-left\" class=\"mr-1\" />\n      </button>\n      <button\n        :disabled=\"pageNumber == pageCount - 1\"\n        class=\"mt-1 rounded-md border-2 bg-blood p-1 pl-2 text-fog hover:border-blood hover:bg-fog hover:text-blood\"\n        @click=\"nextPage()\"\n      >\n        <Icon name=\"heroicons:chevron-right\" class=\"mr-1\" />\n      </button>\n      <button\n        :disabled=\"pageNumber == pageCount - 1\"\n        class=\"mt-1 rounded-md border-2 bg-blood p-1 pl-2 text-fog hover:border-blood hover:bg-fog hover:text-blood\"\n        @click=\"lastPage()\"\n      >\n        <Icon name=\"heroicons:chevron-double-right\" class=\"mr-1\" />\n      </button>\n    </div>\n  </div>\n</template>\n<script setup>\ndefineProps({\n  listLength: { type: Number, default","position":{"index":391,"start_char":0,"end_char":1500},"metadata":{"content_hash":"d7a8ae3902ea809a"},"created_at":"2026-01-14T02:20:19.166Z"}
{"chunk_id":"e94936762efe37334cb4d11fd0afb3ec","source_id":"ce08fcd13d16cc1f","text":"evron-double-right\" class=\"mr-1\" />\n      </button>\n    </div>\n  </div>\n</template>\n<script setup>\ndefineProps({\n  listLength: { type: Number, default: 0 },\n  listWording: { type: String, default: '' },\n  pageCount: { type: Number, default: 0 },\n  pageNumber: { type: Number, default: 0 },\n});\nconst emit = defineEmits(['first', 'last', 'next', 'prev']);\n\nfunction firstPage() {\n  emit('first');\n}\nfunction lastPage() {\n  emit('last');\n}\nfunction nextPage() {\n  emit('next');\n}\nfunction prevPage() {\n  emit('prev');\n}\n</script>","position":{"index":392,"start_char":1350,"end_char":1877},"metadata":{"content_hash":"5e22519e15c8bae4"},"created_at":"2026-01-14T02:20:19.166Z"}
{"chunk_id":"ccfd3a0b787177e4d7208593e0937aa7","source_id":"36b41c6c179301f3","text":"<template>\n  <div class=\"absolute bottom-0 right-8 m-0 flex flex-col-reverse p-0\">\n    <div\n      v-if=\"notifications.length\"\n      class=\"flex gap-2 bg-white/80 dark:bg-darkness/80\"\n    >\n      <h2 class=\"my-0 text-lg\">Notifications</h2>\n      <button class=\"font-bold text-blood hover:text-red-400\" @click=\"clear()\">\n        Clear\n      </button>\n    </div>\n    <ul class=\"flex flex-col\">\n      <li\n        v-for=\"(notification, index) in notifications\"\n        :key=\"index\"\n        class=\"mt-1 border-b-2 border-t-2 border-red-400 bg-gray-100 px-3 py-2 dark:bg-slate-900\"\n      >\n        <p class=\"my-0 font-serif text-xs font-light\">\n          {{ notification.title }}\n        </p>\n        <div class=\"my-0 flex justify-between align-middle font-bold\">\n          <p class=\"m-0 text-4xl\">{{ notification.body }}</p>\n          <button\n            class=\"float-right font-bold text-blood transition-all hover:text-red-400\"\n            @click=\"remove(index)\"\n          >\n            &#x2715;\n          </button>\n        </div>\n        <div class=\"m-0 p-0 text-sm\">\n          {{ notification.footer }}\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script setup>\nimport { useNotifications } from '~/composables/useNotifications';\nconst { clear, notifications, remove } = useNotifications();\n\n// clear notifications when route changes\nconst route = useRoute();\nwatch(\n  () => route.path,\n  () => clear()\n);\n</script>","position":{"index":393,"start_char":0,"end_char":1427},"metadata":{"content_hash":"51fbe49d3081e109"},"created_at":"2026-01-14T02:20:19.771Z"}
{"chunk_id":"45e0583fa44f9e2d481c6664a862fe67","source_id":"e7b39c5fcac96c88","text":"<script setup>\nimport { ref } from 'vue';\nconst isOpen = ref(false);\nconst formData = ref({});\nconst status = ref('ready');\n\nconst WEBAPP_URL =\n  'https://script.google.com/macros/s/AKfycbzUzyBCluTJXL4GC98i31NRoso0td-zNgBbp8Ws4CmmLMzd3ovYBcX7HyVlo3m-kDLHZA/exec';\n\nconst submitIssue = async () => {\n  // on click handler for submitting an issue\n  status.value = 'pending';\n  formData.value['date'] = new Date().toDateString();\n  // convert form data to key=value pair string\n  const data = Object.entries(formData.value)\n    .map(([key, value]) => encodeURI([key, value].join('=')))\n    .join('&');\n  await $fetch(WEBAPP_URL, {\n    method: 'POST',\n    body: data,\n    headers: { 'Content-Type': 'text/plain;charset=utf-8' },\n  });\n  status.value = 'submitted';\n};\n\nconst closeModal = () => {\n  isOpen.value = false;\n  // short delay to give the modal closing animation time to run\n  setTimeout(() => {\n    formData.value = {};\n    status.value = 'ready';\n  }, 300);\n};\n</script>\n\n<template>\n  <!-- Container for both Report Issue button & modal popup -->\n  <div>\n    <button\n      class=\"w-full bg-red-600 px-4 py-1 text-left align-middle hover:bg-red-400 dark:bg-red-700 dark:hover:bg-red-600\"\n      @click=\"isOpen = !isOpen\"\n    >\n      <span>Report Issue</span>\n      <icon\n        name=\"heroicons:exclaimation-circle\"\n        class=\"ml-1 h-6 w-6 rounded-full\"\n      />\n    </button>\n\n    <modal-dialog :show=\"isOpen\" @close=\"isOpen = false\">\n      <slot>\n        <!-- Bug submission form -->\n    ","position":{"index":394,"start_char":0,"end_char":1500},"metadata":{"content_hash":"152d5e39b31f52c0"},"created_at":"2026-01-14T02:20:20.137Z"}
{"chunk_id":"c8526e59ae828b57f387a320c91e2b6b","source_id":"e7b39c5fcac96c88","text":"rounded-full\"\n      />\n    </button>\n\n    <modal-dialog :show=\"isOpen\" @close=\"isOpen = false\">\n      <slot>\n        <!-- Bug submission form -->\n        <form\n          v-if=\"['ready', 'pending'].includes(status)\"\n          id=\"report-issue-form\"\n          method=\"POST\"\n          :action=\"WEBAPP_URL\"\n        >\n          <legend\n            class=\"mb-3 mt-0 border-b-4 border-red-400 pb-2 font-serif text-2xl\"\n          >\n            Report an Issue\n          </legend>\n          <ul>\n            <li class=\"mb-2\">\n              <label for=\"type\" class=\"text-lg font-bold\">\n                What best describes your issue?\n              </label>\n              <select\n                v-model=\"formData.type\"\n                name=\"type\"\n                class=\"w-full border bg-transparent p-2 dark:bg-basalt\"\n              >\n                <option value=\"page\">\n                  A page is broken or doesn't load properly\n                </option>\n                <option value=\"data\">\n                  Page or API contains incorrect data or spelling mistakes\n                </option>\n                <option value=\"visual\">\n                  Something doesn't quite look right\n                </option>\n                <option value=\"accessibility\">\n                  There is a problem with page accessibility\n                </option>\n                <option value=\"misc\">Other</option>\n              </select>\n            </li>\n            <li class=\"mb-2\">\n              <label for=\"descripti","position":{"index":395,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"b01afbd70e61624f"},"created_at":"2026-01-14T02:20:20.137Z"}
{"chunk_id":"b94c20b57d891950395a7d10cba0fa44","source_id":"e7b39c5fcac96c88","text":"       <option value=\"misc\">Other</option>\n              </select>\n            </li>\n            <li class=\"mb-2\">\n              <label for=\"description\" class=\"text-lg font-bold\">\n                Can you describe the bug?\n              </label>\n              <legend class=\"text-sm italic\">\n                What happened? What did it look like? What page were you on when\n                it happened?\n              </legend>\n              <textarea\n                v-model=\"formData.description\"\n                type=\"text\"\n                name=\"description\"\n                class=\"block w-full border dark:bg-basalt\"\n              />\n            </li>\n\n            <li class=\"mb-2\">\n              <label for=\"reproduction\" class=\"text-lg font-bold\">\n                Reproduction\n              </label>\n              <legend class=\"text-sm italic\">\n                Can you provide steps on how to reproduce the bug? The more\n                detail the better. This will help us identify and fix the issue.\n              </legend>\n              <textarea\n                v-model=\"formData.reproduction\"\n                type=\"text\"\n                name=\"reproduction\"\n                class=\"block h-16 w-full border dark:bg-basalt\"\n              />\n            </li>\n          </ul>\n        </form>\n\n        <!-- Success Screen (replaces form on successful submission) -->\n        <div v-if=\"status === 'submitted'\">\n          <p\n            class=\"mb-3 mt-0 border-b-4 border-red-400 pb-2 font-serif ","position":{"index":396,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"cf2008bf5b0df299"},"created_at":"2026-01-14T02:20:20.137Z"}
{"chunk_id":"d078f2be08aae5150db2af9360482bf1","source_id":"e7b39c5fcac96c88","text":"ssful submission) -->\n        <div v-if=\"status === 'submitted'\">\n          <p\n            class=\"mb-3 mt-0 border-b-4 border-red-400 pb-2 font-serif text-2xl\"\n          >\n            Bug Submitted\n          </p>\n          <p>Thank you!</p>\n        </div>\n      </slot>\n\n      <!-- Actions are rendered as btns at the bottom of modal -->\n      <template #actions>\n        <!-- Close without submitting -->\n        <button\n          class=\"mt-3 w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:bg-smoke hover:dark:bg-fog sm:col-start-1 sm:mt-0\"\n          @click=\"closeModal()\"\n        >\n          Close\n        </button>\n\n        <!-- Submit Issue -->\n        <button\n          v-if=\"status === 'ready'\"\n          class=\"w-full justify-center rounded-md bg-blood px-3 py-2 text-sm font-semibold text-white shadow-sm ring-offset-2 hover:ring-2 hover:ring-blood focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 sm:col-start-2\"\n          for=\"report-issue-form\"\n          @click=\"submitIssue\"\n        >\n          Submit\n        </button>\n\n        <!-- Pending UI -->\n        <span v-if=\"status === 'pending'\">Submitting...</span>\n      </template>\n    </modal-dialog>\n  </div>\n</template>","position":{"index":397,"start_char":4050,"end_char":5396},"metadata":{"content_hash":"fa5196f877453111"},"created_at":"2026-01-14T02:20:20.137Z"}
{"chunk_id":"637270638fee2eb6256774a540e65a76","source_id":"408ffab2755c4f21","text":"<!-- SearchResults is designed to take a single row returned by the /search API endpoint and return a list item containing a link to a page -->\n\n<template>\n  <li class=\"py-2 text-base\">\n    <!-- Row title -->\n    <h3 class=\"mt-1 flex items-center align-middle text-xl\">\n      <nuxt-link\n        tag=\"a\"\n        :to=\"`${getRoute(result.object_model)}/${result.object_pk}`\"\n      >\n        {{ result.object_name }}\n      </nuxt-link>\n      <span class=\"ml-2 font-sans text-sm uppercase text-granite\">\n        {{ result.object_model.match(/[A-Z][a-z]+/g).join(' ') }}\n      </span>\n      <source-tag :text=\"result.document.key\" :title=\"result.document.name\" />\n    </h3>\n\n    <!-- Row subtitle -->\n    <div>\n      <span v-if=\"result.object_model === 'Monster'\">\n        {{\n          `\n           CR ${result.object.challenge_rating} | \n           HP ${result.object.hit_points},\n           AC ${result.object.armor_class}\n           `\n        }}\n      </span>\n      <span v-else-if=\"result.object_model === 'Spell'\" class=\"capitalize\">\n        {{ result.object.school }} Spell | {{ result.object.dnd_class }}\n      </span>\n      <span v-else-if=\"result.object_model === 'MagicItem'\" class=\"capitalize\">\n        {{ result.object.type }}, {{ result.object.rarity }}\n      </span>\n    </div>\n\n    <!-- include snipet if query text is not part of article title -->\n    <md-viewer\n      v-if=\"!result.object_name.toUpperCase().includes(query.toUpperCase())\"\n      class=\"text-sm italic text-basalt dark:text-","position":{"index":398,"start_char":0,"end_char":1500},"metadata":{"content_hash":"8736b55e61516e85"},"created_at":"2026-01-14T02:20:20.519Z"}
{"chunk_id":"b7af2ca7fc5882dfe783a5c1aa0d4525","source_id":"408ffab2755c4f21","text":"tle -->\n    <md-viewer\n      v-if=\"!result.object_name.toUpperCase().includes(query.toUpperCase())\"\n      class=\"text-sm italic text-basalt dark:text-granite\"\n      :markdown=\"stripMarkdownTables(result.highlighted)\"\n    />\n    <!-- include article source -->\n    <div class=\"text-sm\">(from {{ result.document.name }})</div>\n  </li>\n</template>\n\n<script setup>\ndefineProps({\n  query: {\n    type: String,\n    default: '',\n  },\n  result: {\n    type: Array,\n    default: () => [],\n  },\n});\n\nconst ModelToRoute = {\n  Monster: 'monsters',\n  Spell: 'spells',\n  Race: 'races',\n  Section: 'sections',\n  MagicItem: 'magic-items',\n  Feat: 'feats',\n  Background: 'backgrounds',\n  CharClass: 'classes',\n};\n\nfunction stripMarkdownTables(text) {\n  // Remove table row markup but keep the content\n  return text\n    .replace(/\\|/g, ' ') // Replace pipe characters with spaces\n    .replace(/(\\r\\n|\\n|\\r)/gm, ' ') // Remove line breaks\n    .replace(/-{3,}/g, ''); // Remove three or more hyphens\n}\n\nfunction getRoute(model) {\n  return ModelToRoute[model] ?? 'error';\n}\n</script>\n\n<style>\n.highlighted {\n  @apply bg-amber-300 px-1 text-black dark:bg-yellow-800 dark:text-white;\n}\n</style>","position":{"index":399,"start_char":1350,"end_char":2519},"metadata":{"content_hash":"01297e1f373af4bc"},"created_at":"2026-01-14T02:20:20.519Z"}
{"chunk_id":"d461121427a3d3d62e996343219ca4ff","source_id":"2a33acdf3765c9a2","text":"<template>\n  <button\n    class=\"m-1 h-min rounded-full bg-fog px-3 py-2 hover:bg-smoke dark:bg-basalt hover:dark:bg-granite sm:hidden md:px-4 md:py-3\"\n  >\n    <Icon name=\"heroicons:bars-3\" class=\"text-center\" />\n  </button>\n</template>","position":{"index":400,"start_char":0,"end_char":235},"metadata":{"content_hash":"b2f7cd4a57b46610"},"created_at":"2026-01-14T02:20:20.976Z"}
{"chunk_id":"61a88fb25fbb4b5bf7bd01c648d0c3fa","source_id":"770ce2e7b5b7e869","text":"<template>\n  <th :aria-sort=\"isSortDescending\" class=\"align-baseline\">\n    <button @click=\"onClick\">\n      <span>\n        {{ format(title) }}\n      </span>\n      <span\n        aria-hidden=\"true\"\n        class=\"ml-1\"\n        :class=\"isSortingProperty ? 'visible text-blood' : 'invisible'\"\n      >\n        {{ isSortDescending ? '▲' : '▼' }}\n      </span>\n    </button>\n  </th>\n</template>\n\n<script setup>\nconst emit = defineEmits(['sort']);\n\nconst props = defineProps({\n  title: { type: String, default: '' },\n  isSortingProperty: { type: Boolean, default: false },\n  isSortDescending: { type: Boolean, default: false },\n});\n\n// a list of human-readable subsitutions\nconst subsitutions = {\n  level_int: 'Level',\n  dnd_class: 'Classes',\n  cr: 'CR',\n};\n\nconst format = (input) => {\n  if (subsitutions[input]) {\n    return subsitutions[input];\n  }\n  // Replace underscores w/ spaces and capitalise initials\n  return input\n    .split('_')\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(' ');\n};\n\nconst onClick = () => {\n  emit('sort', props.title);\n};\n</script>","position":{"index":401,"start_char":0,"end_char":1083},"metadata":{"content_hash":"f3c3afd8fdf27b13"},"created_at":"2026-01-14T02:20:21.456Z"}
{"chunk_id":"4132fd5999be8bc1e6adabc6162b38ce","source_id":"2e558370e6ae9275","text":"<template>\n  <span\n    :class=\"['tag-element', 'font-sans', 'font-medium', 'ml-2']\"\n    :title=\"title\"\n    :style=\"{\n      backgroundColor: text ? computedColor(text, 80, 95) : background,\n      color: text ? computedColor(text, 50, 30) : textColor,\n      // borderColor: text ? computedColor(text, 80, 90) : border,\n    }\"\n  >\n    {{ text }}\n  </span>\n</template>\n\n<script setup>\nimport colors from 'tailwindcss/colors';\n\nconst props = defineProps({\n  text: {\n    default: '',\n    type: String,\n  },\n  title: {\n    default: '',\n    type: String,\n  },\n  textColor: {\n    type: String,\n    default: colors.slate[900],\n  },\n  background: {\n    type: String,\n    default: colors.slate[100],\n  },\n  border: {\n    type: String,\n    default: colors.slate[300],\n  },\n});\n// this creates a quick (but non-cryptographic) numeric hash of the string\nfunction hashCode(str) {\n  let hash = 0;\n  for (let i = 0, len = str.length; i < len; i++) {\n    //convert each character of the string to a number\n    let chr = str.charCodeAt(i);\n    //then bitshift the number by 5 and add it to the hash\n    hash = chr + (hash << 6) - hash;\n    //then convert the hash to a 32bit integer\n    hash |= 0;\n  }\n  return hash;\n}\nfunction computedColor(str, s, l) {\n  // take in a numerical string that will become the hue\n  let h = hashCode(str);\n  //reverse the number and append it to the original number\n  //this ensures even small changes to any character of the string will result in a different color\n  h = h + Math.abs(h).t","position":{"index":402,"start_char":0,"end_char":1500},"metadata":{"content_hash":"eae7466a3093d0a7"},"created_at":"2026-01-14T02:20:21.946Z"}
{"chunk_id":"e091740d946a99308e818bef1e70e4b4","source_id":"2e558370e6ae9275","text":" it to the original number\n  //this ensures even small changes to any character of the string will result in a different color\n  h = h + Math.abs(h).toString().split('').reverse().join('');\n  //convert the number to a hue in the HSL color space by taking modulo 360 of the hash\n  h = h % 360;\n  //generate an hsl color using the hue value and passed in saturation and lightness values\n  return 'hsl(' + h + ', ' + s + '%, ' + l + '%)';\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.tag-element {\n  display: inline-block;\n  font-size: 8px;\n  padding: 1px 3px;\n  line-height: 10px;\n  border-radius: 4px;\n  text-transform: uppercase;\n  position: relative;\n  height: min-content;\n  top: -1px;\n}\n</style>","position":{"index":403,"start_char":1350,"end_char":2044},"metadata":{"content_hash":"afc9e332ee79839e"},"created_at":"2026-01-14T02:20:21.946Z"}
{"chunk_id":"c5585b836f3e0d5b3a0d284203bcb7b6","source_id":"05c25726a4382f3c","text":"<template>\n  <modal-dialog @close=\"closeModal()\">\n    <slot>\n      <!-- MODAL MENU TITLE BAR -->\n      <div class=\"flex w-full justify-between border-b-4 border-red-400\">\n        <h2 class=\"mt-0 pb-2\">Select Sources</h2>\n        <div class=\"serif font-bold\">\n          <button\n            :class=\"`px-2 py-1 ${\n              // toggle styles based on selected sources\n              allSourcesSelected()\n                ? ` text-black before:mr-1 before:content-['✓'] dark:text-white`\n                : ` text-blood hover:text-red-800 dark:hover:text-red-400`\n            }`\"\n            @click=\"selectAll()\"\n          >\n            <span>All</span>\n          </button>\n\n          <button\n            :class=\"`px-2 py-1 ${\n              // toggle styles based on selected sources\n              selectedSources.length === 0\n                ? ` text-black before:mr-1 before:content-['✓'] dark:text-white`\n                : ` text-blood hover:text-red-800 dark:hover:text-red-400 `\n            }`\"\n            @click=\"deselectAll()\"\n          >\n            <span>None</span>\n          </button>\n        </div>\n      </div>\n\n      <!-- MODAL MENU BODY -->\n      <fieldset class=\"mt-1\">\n        <legend class=\"sr-only\">Source Selection</legend>\n        <!-- Organisation -->\n        <div\n          v-for=\"(publications, organization, index) in groupedDocuments\"\n          :key=\"index\"\n          class=\"space-y-0\"\n        >\n          <div class=\"my-1 flex items-center gap-2\">\n            <h3 class=\"mt-0 i","position":{"index":404,"start_char":0,"end_char":1500},"metadata":{"content_hash":"1c66487ec81c626e"},"created_at":"2026-01-14T02:20:22.499Z"}
{"chunk_id":"1d9d684e77806fdd104c5336747835ce","source_id":"05c25726a4382f3c","text":"ments\"\n          :key=\"index\"\n          class=\"space-y-0\"\n        >\n          <div class=\"my-1 flex items-center gap-2\">\n            <h3 class=\"mt-0 inline-block items-center gap-2\">\n              {{ organization }}\n            </h3>\n            <!-- Button for adding all src by publisher to selected srcs -->\n            <button\n              :class=\"`px-2 py-1 font-bold  ${\n                selectedSourcesByPublisher(organization) ===\n                countSourcesByPublisher(organization)\n                  ? `before:mr-1 before:content-['✓']`\n                  : `text-blood hover:text-red-800 dark:hover:text-red-400`\n              }`\"\n              @click=\"addPublisher(organization)\"\n            >\n              All\n            </button>\n            <!-- Button for removing all srcs by publisher to selected srcs -->\n            <button\n              :class=\"`0 px-2 py-1 font-bold ${\n                !selectedSourcesByPublisher(organization)\n                  ? `before:mr-1 before:content-['✓']`\n                  : `dark:hover:text-red-40 text-blood hover:text-red-800`\n              }`\"\n              @click=\"removePublisher(organization)\"\n            >\n              None\n            </button>\n          </div>\n\n          <!-- Sources by Organisation -->\n          <ul\n            v-for=\"document in publications\"\n            :key=\"document.slug\"\n            class=\"relative flex items-start\"\n          >\n            <li>\n              <input\n                v-model=\"selectedSources\"\n ","position":{"index":405,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"62c41cc3ea879cd2"},"created_at":"2026-01-14T02:20:22.499Z"}
{"chunk_id":"3e8d572a6491ddf36e98d8300c10486c","source_id":"05c25726a4382f3c","text":"ment.slug\"\n            class=\"relative flex items-start\"\n          >\n            <li>\n              <input\n                v-model=\"selectedSources\"\n                :name=\"document.slug\"\n                type=\"checkbox\"\n                class=\"mr-2 mt-1 h-4 w-4 rounded text-blue-600 accent-blood focus:ring-blue-600\"\n                :value=\"document.slug\"\n              />\n              <label\n                :for=\"document.slug\"\n                class=\"font-medium text-gray-900 dark:text-white\"\n              >\n                {{ document.title }}\n              </label>\n              <source-tag :title=\"document.title\" :text=\"document.slug\" />\n            </li>\n          </ul>\n        </div>\n      </fieldset>\n    </slot>\n    <template #actions>\n      <button\n        ref=\"cancelButtonRef\"\n        type=\"button\"\n        class=\"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0\"\n        @click=\"closeModal()\"\n      >\n        Cancel\n      </button>\n      <button\n        type=\"button\"\n        class=\"inline-flex w-full justify-center rounded-md bg-blood px-3 py-2 text-sm font-semibold text-white shadow-sm ring-offset-2 hover:ring-2 hover:ring-blood focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 sm:col-start-2\"\n        @click=\"saveSelection()\"\n      >\n        Update\n      </button>\n    </template","position":{"index":406,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"6400be56f2c49b03"},"created_at":"2026-01-14T02:20:22.499Z"}
{"chunk_id":"3eda693bdc1db406393ac32537b9d4f3","source_id":"05c25726a4382f3c","text":"outline-offset-2 focus-visible:outline-blue-600 sm:col-start-2\"\n        @click=\"saveSelection()\"\n      >\n        Update\n      </button>\n    </template>\n  </modal-dialog>\n</template>\n\n<script setup>\nimport SourceTag from '~/components/SourceTag.vue';\nconst { sources, setSources } = useSourcesList();\nconst emit = defineEmits(['close']);\n\nconst selectedSources = ref(sources.value);\nconst { data: documents } = useDocuments();\n\nconst groupedDocuments = computed(() => {\n  const docs = documents.value ?? [];\n  return docs.reduce((grouped, document) => {\n    (grouped[document.organization] =\n      grouped[document.organization] || []).push(document);\n    return grouped;\n  }, {});\n});\n\nfunction closeModal() {\n  emit('close'); // emits a 'close' event to the parent component\n}\nfunction saveSelection() {\n  setSources(selectedSources.value);\n  closeModal();\n}\n\nfunction addPublisher(publisher) {\n  const sourcesByPublisher = groupedDocuments.value[publisher].map(\n    (source) => source.slug\n  );\n\n  const sourcesToAdd = sourcesByPublisher.filter(\n    (source) => !selectedSources.value.includes(source)\n  );\n  selectedSources.value = [...selectedSources.value, ...sourcesToAdd];\n}\n\nfunction removePublisher(publisher) {\n  const sourcesByPublisher = groupedDocuments.value[publisher].map(\n    (source) => source.slug\n  );\n\n  selectedSources.value = selectedSources.value.filter(\n    (source) => !sourcesByPublisher.includes(source)\n  );\n}\n\nfunction togglePublisher(publisher) {\n  const sourcesByPubli","position":{"index":407,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"bb8aa605b8a7849d"},"created_at":"2026-01-14T02:20:22.499Z"}
{"chunk_id":"3528540401cadffa6b63b236965270ce","source_id":"05c25726a4382f3c","text":"electedSources.value.filter(\n    (source) => !sourcesByPublisher.includes(source)\n  );\n}\n\nfunction togglePublisher(publisher) {\n  const sourcesByPublisher = groupedDocuments.value[publisher].map(\n    (source) => source.slug // get slugs for sources by publisher\n  );\n\n  if (selectedSourcesByPublisher(publisher)) {\n    selectedSources.value = selectedSources.value.filter(\n      (source) => !sourcesByPublisher.includes(source)\n    );\n  } else {\n    const sourcesToAdd = sourcesByPublisher.filter(\n      (source) => !selectedSources.value.includes(source)\n    );\n    selectedSources.value = [...selectedSources.value, ...sourcesToAdd]; // combine checked & unchecked sources\n  }\n}\n\nfunction countSourcesByPublisher(publisher) {\n  return groupedDocuments.value[publisher]?.length || 0;\n}\n\nfunction selectedSourcesByPublisher(publisher) {\n  // find all sources for this publisher\n  const allSources = groupedDocuments.value[publisher].map(\n    (source) => source.slug\n  );\n  // find which of these are part of the current selected sources\n  const currentSources = selectedSources.value.filter((source) =>\n    allSources.includes(source)\n  );\n  return currentSources.length;\n}\n\nfunction allSourcesSelected() {\n  return selectedSources.value.length === documents.value.length;\n}\n\nfunction selectAll() {\n  selectedSources.value = documents.value.map((doc) => doc.slug);\n}\n\nfunction deselectAll() {\n  selectedSources.value = [];\n}\n</script>","position":{"index":408,"start_char":5400,"end_char":6834},"metadata":{"content_hash":"71e07b934cf3418f"},"created_at":"2026-01-14T02:20:22.499Z"}
{"chunk_id":"7dc6f410ef3f60e276e91a863a4392ef","source_id":"01a525cee8892f89","text":"<template>\n  <ul class=\"inline-flex\">\n    <li\n      v-for=\"(stat, key) in stats\"\n      :key=\"key\"\n      class=\"mr-4 flex flex-col items-center\"\n      @click=\"useDiceRoller(useFormatModifier(stat, { inputType: 'score' }))\"\n    >\n      <span class=\"font-bold capitalize\">{{ key }}</span>\n      <span>\n        {{ stat }} ({{ useFormatModifier(stat, { inputType: 'score' }) }})\n      </span>\n    </li>\n  </ul>\n</template>\n\n<script setup>\nimport StatBonus from '~/components/StatBonus';\n\ndefineProps({\n  stats: {\n    type: Object,\n    default: () => ({ str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 }),\n  },\n});\n</script>","position":{"index":409,"start_char":0,"end_char":617},"metadata":{"content_hash":"04fc6c989b450079"},"created_at":"2026-01-14T02:20:23.375Z"}
{"chunk_id":"86680fb81e39553271125e5a533f2b69","source_id":"51e6d80c71f52d4d","text":"<template>\n  <span>\n    <span v-if=\"statBonus >= 0\">+</span>\n    <span>{{ statBonus }}</span>\n  </span>\n</template>\n\n<script setup>\nconst props = defineProps({\n  stat: { type: Number, default: 0 },\n  type: { type: String, default: 'score' },\n});\nconst statBonus = computed(() => {\n  if (props.type === 'score') {\n    return Math.floor((props.stat - 10) / 2);\n  } else {\n    return props.stat;\n  }\n});\n</script>","position":{"index":410,"start_char":0,"end_char":410},"metadata":{"content_hash":"4185d1eae4c64d53"},"created_at":"2026-01-14T02:20:23.949Z"}
{"chunk_id":"e4a17caeccb817a434677dfdc0f7f912","source_id":"edef86103b83d4cd","text":"<template>\n  <div class=\"mt-1\">\n    <button\n      class=\"mr-1 h-min rounded-full bg-fog px-3 py-2 hover:bg-smoke dark:hidden sm:mx-2 md:px-4 md:py-3\"\n      aria-roledescription=\"Dark Mode Toggle\"\n      @click=\"handleClick\"\n    >\n      <Icon\n        name=\"heroicons:moon\"\n        class=\"hidden text-center text-lg dark:visible\"\n      />\n    </button>\n    <button\n      class=\"mr-1 hidden h-min rounded-full bg-basalt px-3 py-2 text-white hover:bg-granite dark:block sm:mx-2 md:px-4 md:py-3\"\n      aria-roledescription=\"Light Mode Toggle\"\n      @click=\"handleClick\"\n    >\n      <Icon\n        name=\"heroicons:sun\"\n        class=\"hidden text-center text-lg dark:visible\"\n      />\n    </button>\n  </div>\n</template>\n\n<script setup>\n/* load theme preference before page and insert them into the head. This is to\n * avoid flicker on load. 1st check local storage, then check media preferences\n */\nuseHead({\n  script: [\n    {\n      children: `\n          if (localStorage.theme === \"dark\" || (!('theme' in localStorage) && window.matchMedia(\"(prefers-color-scheme: dark)\").matches)) {\n            document.documentElement.classList.add('dark')\n          } else {\n          document.documentElement.classList.remove('dark')\n          }\n        `,\n    },\n  ],\n});\n\nconst handleClick = () => {\n  const body = document.documentElement;\n  if (body.classList.contains('dark')) {\n    body.classList.remove('dark');\n    localStorage.setItem('theme', 'light');\n  } else {\n    body.classList.add('dark');\n    localStora","position":{"index":411,"start_char":0,"end_char":1500},"metadata":{"content_hash":"8348f325ad161056"},"created_at":"2026-01-14T02:20:24.609Z"}
{"chunk_id":"acb5a28433011773608cbd81abfe54b5","source_id":"edef86103b83d4cd","text":"ns('dark')) {\n    body.classList.remove('dark');\n    localStorage.setItem('theme', 'light');\n  } else {\n    body.classList.add('dark');\n    localStorage.setItem('theme', 'dark');\n  }\n};\n</script>","position":{"index":412,"start_char":1350,"end_char":1545},"metadata":{"content_hash":"b913d954275fa44d"},"created_at":"2026-01-14T02:20:24.609Z"}
{"chunk_id":"1d1c8f508e00704e504aade9c6711500","source_id":"6ab6372d7308bc52","text":"<template>\n  <section class=\"docs-container container\">\n    <h1>Welcome to Open5e!</h1>\n    <p>The best open-source resource for 5e content.</p>\n\n    <h2>Projects we love</h2>\n    <h3>Slyflourish A.K.A. \"The Lazy DM\"</h3>\n    <p>\n      <a href=\"https://slyflourish.com/lazydm/\">The Lazy Dungeon Master</a> is a\n      masterwork of a guide for anyone aspiring to run Dungeons & Dragons or any\n      RPG. Check out\n      <a href=\"https://slyflourish.com/top_advice.html\">\n        How to Be a Great D&D Dungeon Master\n      </a>\n      , even if you're an expert. I can guarantee you'll learn something.\n    </p>\n    <p>\n      I'd also like to recommend\n      <a href=\"https://slyflourish.com/playing_dnd_can_save_your_life.html\"\n        >Playing D&D Can Save Your Life</a\n      >, an inspiring take on the role of fantasy and play in mental health.\n    </p>\n\n    <h3>LegendKeeper</h3>\n    <p>\n      <a href=\"https://www.legendkeeper.com/\">Legendkeeper</a> is a campaign\n      manager based around maps that I've personally supported from their days\n      on Patreon, and they've added a ton of great features recently. If you're\n      looking to manage a campaign and like thinking visually, they're going to\n      be right up your alley.\n    </p>\n\n    <h2>Supporting and Contributing</h2>\n\n    <h3>Contribute on Github</h3>\n    <p>\n      The Open5e <a href=\"https://github.com/open5e/open5e\">site</a> and\n      <a href=\"https://github.com/open5e/open5e-api\">API</a> are both\n      open-source on Github","position":{"index":413,"start_char":0,"end_char":1500},"metadata":{"content_hash":"d5a5ec2ca9d70699"},"created_at":"2026-01-14T02:20:25.359Z"}
{"chunk_id":"4373e81916ecf6a1a3b04c9a3a3c26a9","source_id":"6ab6372d7308bc52","text":"href=\"https://github.com/open5e/open5e\">site</a> and\n      <a href=\"https://github.com/open5e/open5e-api\">API</a> are both\n      open-source on Github! Join us as a contributor and help develop new\n      features and tools.\n    </p>\n    <div class=\"side-note\">\n      <h3>Hey! Stuff is missing!</h3>\n      <p>\n        Some content you may be expecting was not released as part of the 5e\n        SRD, so we aren’t allowed to include it in this site.\n      </p>\n      <p>\n        We are hoping to fill in the gaps using quality homebrew and 3rd party\n        OGL content. Contact us or make a pull request if you know something we\n        should add!\n      </p>\n    </div>\n    <h4>Our tech stack</h4>\n    <p>Want to know what you'd be getting into?</p>\n    <p><b>DRF API server.</b> A powerful Python-based REST Framework.</p>\n    <p>\n      <b>VueJs UI layer.</b> A Vue.js single-page app, using the Nuxt framework.\n    </p>\n\n    <a href=\"https://github.com/open5e/open5e\" class=\"external-button mr-2\">\n      <img src=\"/img/github-website-button.png\" alt=\"Open5e site repo\" />\n    </a>\n    <a href=\"https://github.com/open5e/open5e-api\" class=\"external-button\">\n      <img src=\"/img/github-api-button.png\" alt=\"Open5e API Repo\" />\n    </a>\n\n    <h3>Support us on Patreon</h3>\n    <p>\n      Help keep our digital lights on and keep this site <b>ad-free</b> We count\n      on donations and patrons to pay for our server costs, and to fund an\n      increasing effort to fill out flavor text and add art.\n  ","position":{"index":414,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"80857c5535092d7e"},"created_at":"2026-01-14T02:20:25.359Z"}
{"chunk_id":"e74d61ecd8771de245b6450a3e3b585c","source_id":"6ab6372d7308bc52","text":"b> We count\n      on donations and patrons to pay for our server costs, and to fund an\n      increasing effort to fill out flavor text and add art.\n    </p>\n    <a href=\"https://www.patreon.com/open5e\" class=\"external-button\">\n      <img\n        class=\"rounded-lg\"\n        src=\"/img/patron-button.png\"\n        alt=\"Become a patron! Keep Open5e ad free!\"\n      />\n    </a>\n\n    <h3>Join the Discord</h3>\n    <p>\n      Join us to chat, talk about development, and share neat homebrew. We don't\n      bite!\n    </p>\n    <a href=\"https://discord.gg/QXqF6gSVqB\" class=\"external-button\">\n      <img src=\"/img/discord-button.png\" alt=\"Join our discord\" />\n    </a>\n\n    <h2>The API</h2>\n\n    <p>\n      The <a href=\"https://api.open5e.com\">Open5e API</a> includes all monsters\n      and spells from the SRD and other OGL sources as well as a search API, so\n      you can easily access any part of the SRD from your app or website.\n    </p>\n\n    <h2>Bugs &amp; Issues</h2>\n    <p>\n      If you notice a bug or want to make a suggestion, join us on\n      <a href=\"https://discord.gg/z48BAsD\">Discord</a> to talk about it. Our\n      discord is a place to talk about the redesign as well as rules, tools,\n      art, gaming in general, or anything else on your mind!\n    </p>\n  </section>\n</template>\n\n<style lang=\"scss\">\n.external-button {\n  margin-top: 0.6rem;\n  zoom: 40%;\n  display: inline-block;\n\n  &:hover {\n    opacity: 0.9;\n  }\n}\n</style>","position":{"index":415,"start_char":2700,"end_char":4133},"metadata":{"content_hash":"a359019635afc208"},"created_at":"2026-01-14T02:20:25.359Z"}
{"chunk_id":"008d05f6c91880557e6e2882fa6baeb6","source_id":"73e427c579e61ccc","text":"<template>\n  <section>\n    <h1>What's the API?</h1>\n    <p>\n      The Open5e API provides programmatic access to all resources and rules\n      included on this site.\n    </p>\n    <p>\n      If you're working on an app or website, you can use this API to retrieve\n      monsters, spells, rules, or just about anything else you need.\n    </p>\n\n    <h4>\n      Visit the <a href=\"https://api.open5e.com\">Live API</a> to try it out!\n    </h4>\n    <p>\n      You can use explore the API using the\n      <a href=\"https://api.open5e.com\">Live API</a> page.\n    </p>\n    <p>\n      This api uses standard\n      <a href=\"https://www.django-rest-framework.org/\">Django Rest Framework</a>\n      concepts, including filters, search, and ordering. You can play with all\n      these settings in the live API.\n    </p>\n\n    <h4>Filtering</h4>\n    <p>\n      Each resource can be filtered by a variety of properties visible on the\n      live API list endpoint for that resource.\n    </p>\n    <p>\n      For example, monsters can be filtered by CR. For example:\n      <code\n        ><a href=\"https://api.open5e.com/monsters/?cr=3\"\n          >api.open5e.com/monsters/?cr=3</a\n        ></code\n      >\n      will return all monsters with a challenge rating of 3.\n    </p>\n\n    <h5>Filtering by Document</h5>\n    <p>\n      Each resource includes a <code>\"document__slug\"</code> property (note the\n      double underscores) indicating which resource it came from, such as\n      <code>\"5esrd\"</code> for the <em>5th edition SRD</","position":{"index":416,"start_char":0,"end_char":1500},"metadata":{"content_hash":"950413a243a91f15"},"created_at":"2026-01-14T02:20:25.994Z"}
{"chunk_id":"fa97122e9c6bfb58afcf66ee8e944945","source_id":"73e427c579e61ccc","text":" property (note the\n      double underscores) indicating which resource it came from, such as\n      <code>\"5esrd\"</code> for the <em>5th edition SRD</em>, or\n      <code>\"tob\"</code> for Kobold Press' <em>Tome of Beasts</em>.\n    </p>\n    <p>\n      If you want to limit your search results to a specific resource, you can\n      use filtering for this.\n    </p>\n    <p>\n      For example\n      <code\n        ><a href=\"https://api.open5e.com/monsters/?document__slug=tob\"\n      /></code>\n      will only return monsters from Kobold Press' <em>Tome of Beasts</em>.\n    </p>\n\n    <h4>Resource Searches</h4>\n    <p>\n      If you're trying to do case-insensitive search of a specific feature, you\n      can use <code>/?search=\"term\"</code>to do a case-insensitive partial-word\n      match on that resource.\n    </p>\n    <p>\n      This is supported for spells, monsters, items, and weapons at this time,\n      and can be extended as needed.\n    </p>\n    <p>\n      For example:\n      <code\n        ><a href=\"https://api.open5e.com/monsters/?search=fir\"\n          >https://api.open5e.com/monsters/?search=fir</a\n        ></code\n      >\n      will return all monsters that contain \"fir\" in their names, including all\n      monsters that include terms like \"fire\".\n    </p>\n\n    <h4>General Search</h4>\n    <p>\n      If you want to search the entire SRD for multiple kinds of resources, you\n      can use\n      <code>/search?text=\"search-term\"</code>. This search is by full terms\n      only.\n    </p>\n    <p>\n ","position":{"index":417,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"a4b0cd792cbe2d15"},"created_at":"2026-01-14T02:20:25.995Z"}
{"chunk_id":"0da92ea95765a949bbc6b1522fd78484","source_id":"73e427c579e61ccc","text":"tiple kinds of resources, you\n      can use\n      <code>/search?text=\"search-term\"</code>. This search is by full terms\n      only.\n    </p>\n    <p>\n      This endpoint also returns useful properties for each type of resource,\n      such as CR, type, and others. Additionally, the\n      <code>highlighted</code> property includes a span of markup containing a\n      snippet of text where the term was found. This is intended to be used in\n      previews of search results.\n    </p>\n    <p>\n      For example:\n      <code\n        ><a href=\"https://api.open5e.com/search/?text=fire\"\n          >https://api.open5e.com/search/?text=fire</a\n        ></code\n      >\n      will search the entire SRD for anything containing \"fire\".\n    </p>\n\n    <h4>Limits and Pagination</h4>\n    <p>You can set how many results you want using <code>/?limit</code>.</p>\n    <p>\n      For example,\n      <code\n        ><a href=\"https://api.open5e.com/monsters/?limit=100\"\n          >https://api.open5e.com/monsters/?limit=100</a\n        ></code\n      >\n      will return a paginated set of results with the page size of 100.\n    </p>\n\n    <h4>Ordering</h4>\n    <p>You can set how results are ordered using \"ordering\".</p>\n    <p>\n      For example,\n      <code\n        ><a href=\"https://api.open5e.com/monsters/?ordering=challenge_rating\"\n          >https://api.open5e.com/monsters/?ordering=challenge_rating</a\n        ></code\n      >\n      will return results ordered by Challenge Rating. The API always sub-sorts\n      by","position":{"index":418,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"8f25c1863c2b96c4"},"created_at":"2026-01-14T02:20:25.995Z"}
{"chunk_id":"209eeef61c8abc9e29e9944c1f686ab3","source_id":"73e427c579e61ccc","text":"onsters/?ordering=challenge_rating</a\n        ></code\n      >\n      will return results ordered by Challenge Rating. The API always sub-sorts\n      by alphabetical order (so this will return CR0 creatures starting with the\n      letter \"A\" first)\n    </p>\n  </section>\n</template>\n\n<script setup></script>\n\n<style></style>","position":{"index":419,"start_char":4050,"end_char":4372},"metadata":{"content_hash":"eab68fbaa3fb1138"},"created_at":"2026-01-14T02:20:25.995Z"}
{"chunk_id":"cd0fe65c748aab1a37aee96d556b8a8b","source_id":"199155bc0904ee84","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Backgrounds</h1>\n    </div>\n    <api-results-table\n      endpoint=\"backgrounds\"\n      :api-endpoint=\"API_ENDPOINTS.backgrounds\"\n      :cols=\"['document__title', 'document__slug']\"\n    />\n  </section>\n</template>\n\n<script setup>\nimport ApiResultsTable from '~/components/ApiResultsTable.vue';\n</script>","position":{"index":420,"start_char":0,"end_char":429},"metadata":{"content_hash":"b54ab84c356d5c34"},"created_at":"2026-01-14T02:20:26.602Z"}
{"chunk_id":"1cc6856ce276145d1f3f309f6747ff13","source_id":"b873b42e699f765a","text":"<template>\n  <main v-if=\"background\" class=\"docs-container container\">\n    <section>\n      <h1>{{ background.name }}</h1>\n      <source-tag\n        :title=\"background.document__slug\"\n        :text=\"background.document__slug\"\n      />\n      <md-viewer :text=\"background.desc\" />\n    </section>\n    <section>\n      <p>\n        <b>Skill Proficiencies: </b>\n        <span> {{ background.skill_proficiencies }}</span>\n      </p>\n      <p v-if=\"background.tool_proficiencies\">\n        <b>Tool Proficiencies: </b>\n        <span> {{ background.tool_proficiencies }}</span>\n      </p>\n      <p v-if=\"background.languages\">\n        <b>Languages: </b>\n        <span> {{ background.languages }}</span>\n      </p>\n      <p>\n        <b>Equipment: </b>\n        <span> {{ background.equipment }}</span>\n      </p>\n    </section>\n    <section>\n      <h2>Feature: {{ background.feature }}</h2>\n      <md-viewer :text=\"background.feature_desc\" />\n    </section>\n\n    <section>\n      <h2>Suggested Characteristics</h2>\n      <md-viewer :text=\"background.suggested_characteristics\" />\n    </section>\n  </main>\n  <p v-else>Loading...</p>\n</template>\n\n<script setup>\nconst { data: background } = useFindOne(\n  API_ENDPOINTS.backgrounds,\n  useRoute().params.id\n);\n</script>","position":{"index":421,"start_char":0,"end_char":1249},"metadata":{"content_hash":"997e8c0871ac87a4"},"created_at":"2026-01-14T02:20:27.108Z"}
{"chunk_id":"1dba60b0dc829aa910f1ebd6e1ad9587","source_id":"6d77d3a3b8b54661","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Creating Characters</h1>\n    </div>\n    <api-results-table\n      v-model=\"characterFilter\"\n      endpoint=\"characters\"\n      :api-endpoint=\"API_ENDPOINTS.sections\"\n      :cols=\"['document__title', 'document__slug']\"\n    />\n  </section>\n</template>\n\n<script setup>\nimport ApiResultsTable from '~/components/ApiResultsTable.vue';\n\nconst characterFilter = ref({\n  parent__in: 'Characters, Character Advancement',\n});\n</script>","position":{"index":422,"start_char":0,"end_char":551},"metadata":{"content_hash":"e6ed4d3db90aafc5"},"created_at":"2026-01-14T02:20:31.786Z"}
{"chunk_id":"9569aa7642355b0aed011d84b2e7402b","source_id":"a223a2f6f308f098","text":"<template>\n  <main v-if=\"section\" class=\"docs-container container\">\n    <h1>{{ section.name }}</h1>\n    <section>\n      <md-viewer :text=\"section.desc\" />\n    </section>\n  </main>\n  <p v-else>Loading...</p>\n</template>\n\n<script setup>\nconst { data: section } = useFindOne(\n  API_ENDPOINTS.sections,\n  useRoute().params.section\n);\n</script>","position":{"index":423,"start_char":0,"end_char":339},"metadata":{"content_hash":"8632683b19de9556"},"created_at":"2026-01-14T02:20:32.436Z"}
{"chunk_id":"f2dbdb83e39c04ff8d9c21d0fcd23313","source_id":"5e95dc4d2153ff02","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Classes</h1>\n    </div>\n    <api-results-table\n      endpoint=\"classes\"\n      :api-endpoint=\"API_ENDPOINTS.classes\"\n      :cols=\"['document__title', 'document__slug']\"\n    />\n  </section>\n</template>\n\n<script setup>\nimport ApiResultsTable from '~/components/ApiResultsTable.vue';\n</script>","position":{"index":424,"start_char":0,"end_char":417},"metadata":{"content_hash":"2e385c062440bb72"},"created_at":"2026-01-14T02:20:32.937Z"}
{"chunk_id":"aa939004c3982deabd77610f97353c8b","source_id":"4c7431ab00409c4f","text":"<template>\n  <main v-if=\"classData\" class=\"docs-container container\">\n    <h1>{{ classData.name }}</h1>\n\n    <section>\n      <h2>Class Features</h2>\n      <p>As a {{ classData.name }} you gain the following features.</p>\n      <h3>Hit Points</h3>\n      <p>\n        <span class=\"font-bold\">Hit Dice: </span>\n        {{ classData.hit_dice }} per {{ classData.name }} level\n      </p>\n      <p>\n        <span class=\"font-bold\">Hit Points at 1st Level: </span>\n        {{ classData.hp_at_1st_level }}\n      </p>\n      <p>\n        <span class=\"font-bold\">Hit Points at Higher Levels: </span>\n        {{ classData.hp_at_higher_levels }}\n      </p>\n\n      <h3>Proficiencies</h3>\n      <p>\n        <span class=\"font-bold\">Armor: </span>\n        {{ classData.prof_armor }}\n      </p>\n      <p>\n        <span class=\"font-bold\">Weapons: </span>\n        {{ classData.prof_weapons }}\n      </p>\n      <p>\n        <span class=\"font-bold\">Tools: </span>\n        {{ classData.prof_tools }}\n      </p>\n      <p>\n        <span class=\"font-bold\">Saving Throws: </span>\n        {{ classData.prof_saving_throws }}\n      </p>\n      <p>\n        <span class=\"font-bold\">Skills: </span>\n        {{ classData.prof_skills }}\n      </p>\n\n      <h3>The {{ classData.name }}</h3>\n      <md-viewer :text=\"classData.table\" />\n    </section>\n\n    <section>\n      <h2>Class Abilities</h2>\n      <md-viewer :text=\"classData.desc\" />\n    </section>\n    <section>\n      <h2>{{ classData.subtypes_name }}</h2>\n      <ul v-for=\"archetype i","position":{"index":425,"start_char":0,"end_char":1500},"metadata":{"content_hash":"3a194d55470e626d"},"created_at":"2026-01-14T02:20:33.367Z"}
{"chunk_id":"986ed8e67a30907013e30944ce3f2e12","source_id":"4c7431ab00409c4f","text":"/h2>\n      <md-viewer :text=\"classData.desc\" />\n    </section>\n    <section>\n      <h2>{{ classData.subtypes_name }}</h2>\n      <ul v-for=\"archetype in classData.archetypes\" :key=\"archetype\">\n        <li>\n          <nuxt-link :to=\"`${classData.slug}/${archetype.slug}`\">\n            {{ archetype.name }}\n          </nuxt-link>\n        </li>\n      </ul>\n    </section>\n  </main>\n\n  <p v-else>Loading...</p>\n</template>\n\n<script setup>\nconst { data: classData } = useFindOne(\n  API_ENDPOINTS.classes,\n  useRoute().params.className\n);\n</script>","position":{"index":426,"start_char":1350,"end_char":1891},"metadata":{"content_hash":"6ada6e720035d7b3"},"created_at":"2026-01-14T02:20:33.367Z"}
{"chunk_id":"d5f1dd4d536c85a7ff56efe137bb29ba","source_id":"9709b3c18cda14bf","text":"<template>\n  <main v-if=\"subclass\" class=\"docs-container container\">\n    <h1>\n      {{ subclass.name }}\n      <source-tag\n        :title=\"subclass.document__title\"\n        :text=\"subclass.document__slug\"\n      />\n    </h1>\n    <section>\n      <md-viewer :text=\"subclass.desc\" />\n    </section>\n  </main>\n  <p v-else>Loading...</p>\n</template>\n\n<script setup>\nconst { data: subclass } = useSubclass(\n  useRoute().params.className,\n  useRoute().params.subclass\n);\n</script>","position":{"index":427,"start_char":0,"end_char":471},"metadata":{"content_hash":"b92dca78de74e7a8"},"created_at":"2026-01-14T02:20:33.845Z"}
{"chunk_id":"8fabcebe0d945220db0b9b923d3dddc1","source_id":"035428dc82194f94","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Combat</h1>\n    </div>\n    <api-results-table\n      v-model=\"characterFilter\"\n      endpoint=\"characters\"\n      :api-endpoint=\"API_ENDPOINTS.sections\"\n      :cols=\"['document__title', 'document__slug']\"\n    />\n  </section>\n</template>\n\n<script setup>\nimport ApiResultsTable from '~/components/ApiResultsTable.vue';\n\nconst characterFilter = ref({\n  parent__in: 'Combat',\n});\n</script>","position":{"index":428,"start_char":0,"end_char":511},"metadata":{"content_hash":"ffc3557513889417"},"created_at":"2026-01-14T02:20:34.130Z"}
{"chunk_id":"430ebd8737e43a57faf59f1b222e1e16","source_id":"e7e308b1db9e0798","text":"<template>\n  <main v-if=\"section\" class=\"docs-container container\">\n    <h1>{{ section.name }}</h1>\n    <section>\n      <md-viewer :text=\"section.desc\" />\n    </section>\n  </main>\n</template>\n\n<script setup>\nconst { data: section } = useFindOne(\n  API_ENDPOINTS.sections,\n  useRoute().params.section\n);\n</script>","position":{"index":429,"start_char":0,"end_char":312},"metadata":{"content_hash":"cef461d1b3b26c3b"},"created_at":"2026-01-14T02:20:34.589Z"}
{"chunk_id":"dafa9036ebe9ff6bb5095e432977953d","source_id":"a6aec46e2d2c0cc8","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Conditions</h1>\n    </div>\n    <api-results-table\n      endpoint=\"conditions\"\n      :api-endpoint=\"API_ENDPOINTS.conditions\"\n      :cols=\"['document__title', 'document__slug']\"\n    />\n  </section>\n</template>\n\n<script setup>\nimport ApiResultsTable from '~/components/ApiResultsTable.vue';\n</script>","position":{"index":430,"start_char":0,"end_char":426},"metadata":{"content_hash":"631d7878b6f9eaf4"},"created_at":"2026-01-14T02:20:34.988Z"}
{"chunk_id":"02e8441c3116aadc06060cc43e43e59b","source_id":"339228ce4f7a9b3d","text":"<template>\n  <section v-if=\"condition\" class=\"docs-container container\">\n    <h1>{{ condition.name }}</h1>\n    <md-viewer :text=\"condition.desc\" />\n  </section>\n</template>\n\n<script setup>\nconst { data: condition } = useFindOne(\n  API_ENDPOINTS.conditions,\n  useRoute().params.id\n);\n</script>","position":{"index":431,"start_char":0,"end_char":292},"metadata":{"content_hash":"84bbd4d8a05aabdb"},"created_at":"2026-01-14T02:20:35.298Z"}
{"chunk_id":"54f347318eaeb47f3a6571d6d1bee9b2","source_id":"77f71e3de378da3f","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Equipment</h1>\n    </div>\n    <api-results-table\n      v-model=\"filter\"\n      endpoint=\"characters\"\n      :api-endpoint=\"API_ENDPOINTS.sections\"\n      :cols=\"['document__title', 'document__slug']\"\n    />\n  </section>\n</template>\n\n<script setup>\nimport ApiResultsTable from '~/components/ApiResultsTable.vue';\n\nconst filter = ref({\n  parent__in: 'Equipment',\n});\n</script>","position":{"index":432,"start_char":0,"end_char":499},"metadata":{"content_hash":"5596b3b9c78a49b9"},"created_at":"2026-01-14T02:20:35.801Z"}
{"chunk_id":"8fd6b022ae5ad129f529f75f67614991","source_id":"2b50e1c71bec8f8b","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Feats</h1>\n    </div>\n    <api-results-table\n      endpoint=\"feats\"\n      :api-endpoint=\"API_ENDPOINTS.feats\"\n      :cols=\"['document__title', 'document__slug']\"\n    />\n  </section>\n</template>\n\n<script setup>\nimport ApiResultsTable from '~/components/ApiResultsTable.vue';\n</script>","position":{"index":433,"start_char":0,"end_char":411},"metadata":{"content_hash":"488d2c1379f39b67"},"created_at":"2026-01-14T02:20:36.350Z"}
{"chunk_id":"1731cbaf5ba71cceba10adbb559e5893","source_id":"eb4773e3628f3e7e","text":"<template>\n  <main v-if=\"feat\" class=\"docs-container container\">\n    <h1>\n      <span>{{ feat.name }}</span>\n      <source-tag\n        v-if=\"feat.document__slug !== 'wotc-srd'\"\n        :text=\"feat.document__slug\"\n        :title=\"feat.document__title\"\n      />\n    </h1>\n    <section>\n      <p v-if=\"feat.prerequisite\">\n        <b>{{ feat.prerequisite }}</b>\n      </p>\n      <md-viewer :text=\"feat.desc\" />\n      <ul v-if=\"feat.effects_desc.length > 0\">\n        <li v-for=\"point in feat.effects_desc\" :key=\"point.slice(0, 10)\">\n          {{ point }}\n        </li>\n      </ul>\n    </section>\n  </main>\n  <p v-else>Loading...</p>\n</template>\n\n<script setup>\nconst { data: feat } = useFindOne(API_ENDPOINTS.feats, useRoute().params.id);\n</script>","position":{"index":434,"start_char":0,"end_char":743},"metadata":{"content_hash":"18e8a0be5b09633a"},"created_at":"2026-01-14T02:20:36.890Z"}
{"chunk_id":"8a0a1504d19ca4c8b9a06dec5dd40695","source_id":"a98d5302ed387963","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Gameplay Mechanics</h1>\n    </div>\n    <api-results-table\n      v-model=\"filter\"\n      endpoint=\"gameplay-mechanics\"\n      :api-endpoint=\"API_ENDPOINTS.sections\"\n      :cols=\"['document__title', 'document__slug']\"\n    />\n  </section>\n</template>\n\n<script setup>\nimport ApiResultsTable from '~/components/ApiResultsTable.vue';\n\nconst filter = ref({\n  parent__in: 'Gameplay Mechanics',\n});\n</script>","position":{"index":435,"start_char":0,"end_char":525},"metadata":{"content_hash":"272611687da0d66d"},"created_at":"2026-01-14T02:20:37.422Z"}
{"chunk_id":"2db22b9535055cf5f4379b0f706301b7","source_id":"6759af1abacb3478","text":"<template>\n  <section>\n    <h1>Legal Information</h1>\n    <p>\n      Permission to copy, modify and distribute the files collectively known as\n      open5e.com is granted solely through the use of the Open Gaming License,\n      Version 1.0a.\n    </p>\n\n    <p>\n      This material is being released using the Open Gaming License Version 1.0a\n      and you should read and understand the terms of that license before using\n      this material.\n    </p>\n\n    <p>\n      The text of the Open Gaming License itself is not Open Game Content.\n      Instructions on using the License are provided within the License itself.\n    </p>\n\n    <p>\n      All of the rest of open5e.com is Open Game Content as described in Section\n      1(d) of the License.\n    </p>\n\n    <p>The terms of the Open Gaming License Version 1.0a are as follows:</p>\n\n    <h2>OPEN GAME LICENSE Version 1.0a</h2>\n    <p>\n      The following text is the property of Wizards of the Coast, Inc. and is\n      Copyright 2000 <em>Wizards of the Coast, Inc</em> (\"Wizards\"). All Rights\n      Reserved.\n    </p>\n    <ol>\n      <li>\n        <b>Definitions: </b>\n        <p>\n          (a)<b> \"Contributors\"</b> means the copyright and/or trademark owners\n          who have contributed Open Game Content;\n        </p>\n        <p>\n          (b)<b> \"Derivative Material\"</b> means copyrighted material including\n          derivative works and translations (including into other computer\n          languages), potation, modification, correction, addition","position":{"index":436,"start_char":0,"end_char":1500},"metadata":{"content_hash":"37a076d79fbef0ef"},"created_at":"2026-01-14T02:20:38.025Z"}
{"chunk_id":"5d06efbc8131b56726f93c120cbf4f4f","source_id":"6759af1abacb3478","text":"ncluding\n          derivative works and translations (including into other computer\n          languages), potation, modification, correction, addition, extension,\n          upgrade, improvement, compilation, abridgment or other form in which\n          an existing work may be recast, transformed or adapted;\n        </p>\n        <p>\n          (c)<b> \"Distribute\"</b> means to reproduce, license, rent, lease,\n          sell, broadcast, publicly display, transmit or otherwise distribute;\n        </p>\n        <p>\n          (d)<b> \"Open Game Content\"</b> means the game mechanic and includes\n          the methods, procedures, processes and routines to the extent such\n          content does not embody the Product Identity and is an enhancement\n          over the prior art and any additional content clearly identified as\n          Open Game Content by the Contributor, and means any work covered by\n          this License, including translations and derivative works under\n          copyright law, but specifically excludes Product Identity.\n        </p>\n        <p>\n          (e)<b> \"Product Identity\"</b> means product and product line names,\n          logos and identifying marks including trade dress; artifacts;\n          creatures characters; stories, storylines, plots, thematic elements,\n          dialogue, incidents, language, artwork, symbols, designs, depictions,\n          likenesses, formats, poses, concepts, themes and graphic, photographic\n          and other visual or audio repre","position":{"index":437,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"1a69d88f1a8a9af4"},"created_at":"2026-01-14T02:20:38.025Z"}
{"chunk_id":"f429c8d13de5e97f9e5a5d62ad419a50","source_id":"6759af1abacb3478","text":"mbols, designs, depictions,\n          likenesses, formats, poses, concepts, themes and graphic, photographic\n          and other visual or audio representations; names and descriptions of\n          characters, spells, enchantments, personalities, teams, personas,\n          likenesses and special abilities; places, locations, environments,\n          creatures, equipment, magical or supernatural abilities or effects,\n          logos, symbols, or graphic designs; and any other trademark or\n          registered trademark clearly identified as Product identity by the\n          owner of the Product Identity, and which specifically excludes the\n          Open Game Content;\n        </p>\n        <p>\n          (f)<b> \"Trademark\"</b> means the logos, names, mark, sign, motto,\n          designs that are used by a Contributor to identify itself or its\n          products or the associated products contributed to the Open Game\n          License by the Contributor\n        </p>\n        <p>\n          (g)<b> \"Use\"</b>, <b>\"Used\"</b> or <b>\"Using\"</b> means to use,\n          Distribute, copy, edit, format, modify, translate and otherwise create\n          Derivative Material of Open Game Content.\n        </p>\n        <p>\n          (h)<b> \"You\"</b> or <b>\"Your\"</b> means the licensee in terms of this\n          agreement.\n        </p>\n        <br />\n      </li>\n      <li>\n        <b>The License:</b> This License applies to any Open Game Content that\n        contains a notice indicating that the Ope","position":{"index":438,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"fbfe56dccd5005f8"},"created_at":"2026-01-14T02:20:38.025Z"}
{"chunk_id":"b495e35ce5efb7a995547cf6183d0fe5","source_id":"6759af1abacb3478","text":"     </li>\n      <li>\n        <b>The License:</b> This License applies to any Open Game Content that\n        contains a notice indicating that the Open Game Content may only be Used\n        under and in terms of this License. You must affix such a notice to any\n        Open Game Content that you Use. No terms may be added to or subtracted\n        from this License except as described by the License itself. No other\n        terms or conditions may be applied to any Open Game Content distributed\n        using this License.\n      </li>\n      <li>\n        <b>Offer and Acceptance:</b> By Using the Open Game Content You indicate\n        Your acceptance of the terms of this License.\n      </li>\n      <li>\n        <b>Grant and Consideration:</b> In consideration for agreeing to use\n        this License, the Contributors grant You a perpetual, worldwide,\n        royalty-free, non-exclusive license with the exact terms of this License\n        to Use, the Open Game Content.\n      </li>\n      <li>\n        <b>Representation of Authority to Contribute:</b> If You are\n        contributing original material as Open Game Content, You represent that\n        Your Contributions are Your original creation and/or You have sufficient\n        rights to grant the rights conveyed by this License.\n      </li>\n      <li>\n        <b>Notice of License Copyright:</b> You must update the COPYRIGHT NOTICE\n        portion of this License to include the exact text of the COPYRIGHT\n        NOTICE of any Open Ga","position":{"index":439,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"e256a1dcf515cf1f"},"created_at":"2026-01-14T02:20:38.025Z"}
{"chunk_id":"f85471fbaf0dd8c3b11c7dd003f460ed","source_id":"6759af1abacb3478","text":"ght:</b> You must update the COPYRIGHT NOTICE\n        portion of this License to include the exact text of the COPYRIGHT\n        NOTICE of any Open Game Content You are copying, modifying or\n        distributing, and You must add the title, the copyright date, and the\n        copyright holder's name to the COPYRIGHT NOTICE of any original Open\n        Game Content you Distribute.\n      </li>\n      <li>\n        <b>Use of Product Identity:</b> You agree not to Use any Product\n        Identity, including as an indication as to compatibility, except as\n        expressly licensed in another, independent Agreement with the owner of\n        each element of that Product Identity. You agree not to indicate\n        compatibility or co-adaptability with any Trademark or Registered\n        Trademark in conjunction with a work containing Open Game Content except\n        as expressly licensed in another, independent Agreement with the owner\n        of such Trademark or Registered Trademark. The use of any Product\n        Identity in Open Game Content does not constitute a challenge to the\n        ownership of that Product Identity. The owner of any Product Identity\n        used in Open Game Content shall retain all rights, title and interest in\n        and to that Product Identity.\n      </li>\n      <li>\n        <b>Identification:</b> If you distribute Open Game Content You must\n        clearly indicate which portions of the work that you are distributing\n        are Open Game Content.\n   ","position":{"index":440,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"e4041d3f3033f942"},"created_at":"2026-01-14T02:20:38.025Z"}
{"chunk_id":"679872524aaa3c9eec3248da329e7368","source_id":"6759af1abacb3478","text":"distribute Open Game Content You must\n        clearly indicate which portions of the work that you are distributing\n        are Open Game Content.\n      </li>\n      <li>\n        <b>Updating the License:</b> Wizards or its designated Agents may\n        publish updated versions of this License. You may use any authorized\n        version of this License to copy, modify and distribute any Open Game\n        Content originally distributed under any version of this License.\n      </li>\n      <li>\n        <b>Copy of this License:</b> You MUST include a copy of this License\n        with every copy of the Open Game Content You Distribute.\n      </li>\n      <li>\n        <b>Use of Contributor Credits:</b> You may not market or advertise the\n        Open Game Content using the name of any Contributor unless You have\n        written permission from the Contributor to do so.\n      </li>\n      <li>\n        <b>Inability to Comply:</b> If it is impossible for You to comply with\n        any of the terms of this License with respect to some or all of the Open\n        Game Content due to statute, judicial order, or governmental regulation\n        then You may not Use any Open Game Material so affected.\n      </li>\n      <li>\n        <b>Termination:</b> This License will terminate automatically if You\n        fail to comply with all terms herein and fail to cure such breach within\n        30 days of becoming aware of the breach. All sublicenses shall survive\n        the termination of this License","position":{"index":441,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"f140014e28b5517e"},"created_at":"2026-01-14T02:20:38.025Z"}
{"chunk_id":"0a5633ee52a5ab9305b2b159de1ed9dd","source_id":"6759af1abacb3478","text":"fail to cure such breach within\n        30 days of becoming aware of the breach. All sublicenses shall survive\n        the termination of this License.\n      </li>\n      <li>\n        <b>Reformation:</b> If any provision of this License is held to be\n        unenforceable, such provision shall be reformed only to the extent\n        necessary to make it enforceable.\n      </li>\n      <li>\n        <p>\n          <b>COPYRIGHT NOTICE</b> Open Game License v 1.0a Copyright 2000,\n          Wizards of the Coast, LLC.\n        </p>\n        <p>\n          System Reference Document 5.1 Copyright 2016, Wizards of the Coast,\n          Inc.; Authors Mike Mearls, Jeremy Crawford, Chris Perkins, Rodney\n          Thompson, Peter Lee, James Wyatt, Robert J. Schwalb, Bruce R. Cordell,\n          Chris Sims, and Steve Townshend, based on original material by E. Gary\n          Gygax and Dave Arneson.\n        </p>\n        <!-- <p>12 Perilous Towers © 2018 Open Design LLC; Authors: Jeff Lee.</p>\n<p>A Leeward Shore Author: Mike Welham. © 2018 Open Design LLC.</p>\n<p>A Night at the Seven Steeds. Author: Jon Sawatsky. © 2018 Open Design.</p>\n<p>Advanced Bestiary, Copyright 2004, Green Ronin Publishing, LLC; Author Matthew Sernett.</p>\n<p>Advanced Races: Aasimar. © 2014 Open Design; Author: Adam Roy.KoboldPress.com</p>\n<p>Advanced Races: Centaurs. © 2014 Open Design; Author: Karen McDonald. KoboldPress.com</p>\n<p>Advanced Races: Dragonkin © 2013 Open Design; Authors: Amanda Hamon Kunz.</p>\n<p>Advanced Race","position":{"index":442,"start_char":8100,"end_char":9600},"metadata":{"content_hash":"66384e283bbb8206"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"63a4505daa4f673d7f7a555d00744a93","source_id":"6759af1abacb3478","text":" Design; Author: Karen McDonald. KoboldPress.com</p>\n<p>Advanced Races: Dragonkin © 2013 Open Design; Authors: Amanda Hamon Kunz.</p>\n<p>Advanced Races: Gearforged. © 2013 Open Design; Authors: Thomas Benton.</p>\n<p>Advanced Races: Gnolls. © 2015 Open Design; Authors: Ben McFarland and Brian Suskind.</p>\n<p>Advanced Races: Kobolds © 2013 Open Design; Authors: Nicholas Milasich, Matt Blackie.</p>\n<p>Advanced Races: Lizardfolk. © 2015 Open Design; Authors: Steven T.Helt, Stephen Rowe, and Dan Dillon.</p>\n<p>Advanced Races: Ravenfolk © 2014 Open Design; Authors: Wade Rockett.</p>\n<p>Advanced Races: Shadow Fey. © 2014 Open Design; Authors: Carlos and Holly Ovalle.</p>\n<p>Advanced Races: Trollkin. © 2015 Open Design; Authors: Steven T.Helt, Stephen Rowe, and Dan Dillon.</p>\n<p>Advanced Races: Werelions. © 2015 Open Design; Authors: Ben McFarland and Brian Suskind.</p>\n<p>An Enigma Lost in a Maze ©2018 Open Design. Author: Richard Pett.</p>\n<p>Bastion of Rime and Salt. Author: Jon Sawatsky. © 2018 Open Design LLC.</p>\n<p>Beyond Damage Dice © 2016 Open Design; Author: James J. Haeck.</p>\n<p>Birds of a Feather Author Kelly Pawlik. © 2019 Open Design LLC.</p>\n<p>Black Sarcophagus Author: Chris Lockey. © 2018 Open Design LLC.</p>\n<p>Blood Vaults of Sister Alkava. © 2016 Open Design. Author: Bill Slavicsek.</p>\n<p>Book of Lairs for Fifth Edition. Copyright 2016, Open Design; Authors Robert Adducci, Wolfgang Baur, Enrique Bertran, Brian Engard, Jeff Grubb, James J. Haeck, Shawn Merwin, M","position":{"index":443,"start_char":9450,"end_char":10950},"metadata":{"content_hash":"a72e8357c38b678a"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"f7ada705ca2bdcaae0c325bdbd35b493","source_id":"6759af1abacb3478","text":"dition. Copyright 2016, Open Design; Authors Robert Adducci, Wolfgang Baur, Enrique Bertran, Brian Engard, Jeff Grubb, James J. Haeck, Shawn Merwin, Marc Radle, Jon Sawatsky, Mike Shea, Mike Welham, and Steve Winter.</p>\n<p>Cat and Mouse © 2015 Open Design; Authors: Richard Pett with Greg Marks.</p>\n<p>Courts of the Shadow Fey © 2019 Open Design LLC; Authors: Wolfgang Baur & Dan Dillon.</p> -->\n        <p>\n          Creature Codex. © 2018 Open Design LLC; Authors Wolfgang Baur, Dan\n          Dillon, Richard Green, James Haeck, Chris Harris, Jeremy Hochhalter,\n          James Introcaso, Chris Lockey, Shawn Merwin, and Jon Sawatsky.\n        </p>\n        <!-- <p>Creature Codex Lairs. © 2018 Open Design LLC; Author Shawn Merwin.</p>\n<p>Deep Magic: Angelic Seals and Wards © 2016 Open Design; Author: Dan Dillon.</p>\n<p>Deep Magic: Battle Magic © 2016 Open Design; Author: Greg Marks.</p>\n<p>Deep Magic: Blood and Doom © 2017 Open Design; Author: Chris Harris.</p>\n<p>Deep Magic: Chaos Magic © 2016 Open Design; Author: Greg Marks.</p>\n<p>Deep Magic: Clockwork © 2016 Open Design; Author: Scott Carter.</p>\n<p>Deep Magic: Combat Divination © 2019 Open Design LLC; Author: Matt Corley.</p>\n<p>Deep Magic: Dragon Magic © 2017 Open Design; Author: Shawn Merwin.</p>\n<p>Deep Magic: Elemental Magic © 2017 Open Design; Author: Dan Dillon.</p>\n<p>Deep Magic: Elven High Magic © 2016 Open Design; Author: Greg Marks.</p>\n<p>Deep Magic: Hieroglyph Magic © 2018 Open Design LLC; Author: Michael Ohl.</p>\n","position":{"index":444,"start_char":10800,"end_char":12300},"metadata":{"content_hash":"fb68a2ddb4788ea1"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"e3794189992b86102ad798ba9e6eab4b","source_id":"6759af1abacb3478","text":" Magic: Elven High Magic © 2016 Open Design; Author: Greg Marks.</p>\n<p>Deep Magic: Hieroglyph Magic © 2018 Open Design LLC; Author: Michael Ohl.</p>\n<p>Deep Magic: Illumination Magic © 2016 Open Design; Author: Greg Marks..</p>\n<p>Deep Magic: Ley Line Magic © 2016 Open Design; Author: Dan Dillon.</p>\n<p>Deep Magic: Mythos Magic © 2018 Open Design LLC; Author: Christopher Lockey.</p>\n<p>Deep Magic: Ring Magic © 2016 Open Design; Author: Dan Dillon.</p>\n<p>Deep Magic: Runes © 2016 Open Design; Author: Chris Harris.</p>\n<p>Deep Magic: Shadow Magic © 2016 Open Design; Author: Michael Ohl</p>\n<p>Deep Magic: Time Magic © 2018 Open Design LLC; Author: Carlos Ovalle.</p>\n<p>Deep Magic: Void Magic © 2016 Open Design; Author: Dan Dillon.</p>\n<p>Deep Magic: Winter © 2019 Open Design LLC; Author: Mike Welham.</p>\n<p>Demon Cults & Secret Societies for 5th Edition. Copyright 2017 Open Design. Authors: Jeff Lee, Mike Welham, Jon Sawatsky.</p>\n<p>Divine Favor: the Cleric. Author: Stefen Styrsky Copyright 2011, Open Design LLC, .</p>\n<p>Divine Favor: the Druid. Author: Stefen Styrsky ©2011, Open Design LLC.</p>\n<p>Divine Favor: the Inquisitor. Author: Stefen Styrsky ©2011, Open Design LLC.</p>\n<p>Divine Favor: the Oracle. Author: Stefen Styrsky ©2011, Open Design LLC.</p>\n<p>Divine Favor: the Paladin. Author: Stefen Styrsky ©2011, Open Design LLC.</p>\n<p>Eldritch Lairs for Fifth Edition. Copyright 2018, Open Design; Authors James J. Haeck, Jerry LeNeave, Mike Shea, Bill Slavicsek.</p>\n<p>Emp","position":{"index":445,"start_char":12150,"end_char":13650},"metadata":{"content_hash":"f140c341b7cf1086"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"95ca230156718d75d0243c4b98e38f70","source_id":"6759af1abacb3478","text":"LC.</p>\n<p>Eldritch Lairs for Fifth Edition. Copyright 2018, Open Design; Authors James J. Haeck, Jerry LeNeave, Mike Shea, Bill Slavicsek.</p>\n<p>Empire of the Ghouls, ©2007 Wolfgang Baur, www.wolfgangbaur.com. All rights reserved.</p>\n<p>Fifth Edition Foes, © 2015, Necromancer Games, Inc.; Authors Scott Greene, Matt Finch, Casey Christofferson, Erica Balsley, Clark Peterson, Bill Webb, Skeeter Green, Patrick Lawinger, Lance Hawvermale, Scott Wylie Roberts “Myrystyr”, Mark R. Shipley, “Chgowiz”</p>\n<p>Firefalls of Ghoss. Author: Jon Sawatsky. © 2018 Open Design LLC.</p>\n<p>Fowl Play. Author: Kelly Pawlik. © 2019 Open Design LLC.</p>\n<p>Grimalkin ©2016 Open Design; Authors: Richard Pett with Greg Marks</p>\n<p>Imperial Gazetteer, ©2010, Open Design LLC.</p>\n<p>Items Wondrous Strange © 2017 Open Design; Authors: James Bitoy, Peter von Bleichert, Dan Dillon, James Haeck, Neal Litherland, Adam Roy, and Jon Sawatsky.</p>\n<p>Kobold Quarterly issue 21,Copyright 2012, Open Design LLC.</p>\n<p>KPOGL Wiki https:kpogl.wikidot.com/</p>\n<p>Last Gasp © 2016 Open Design; Authors: Dan Dillon.</p>\n<p>Mad Maze of the Moon Kingdom, Copyright 2018 Open Design LLC. Author: Richard Green.</p>\n<p>Margreve Player’s Guide © 2019 Open Design LLC; Authors: Dan Dillon, Dennis Sustare, Jon Sawatsky, Lou Anders, Matthew Corley, and Mike Welham.</p>\n<p>Midgard Bestiary for Pathfinder Roleplaying Game, © 2012 Open Design LLC; Authors: Adam Daigle with Chris Harris, Michael Kortes, James MacKenzie, Rob Mannin","position":{"index":446,"start_char":13500,"end_char":15000},"metadata":{"content_hash":"69144e3df8fccbb9"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"6640cc28c9fa47dc556481cd43d48ad3","source_id":"6759af1abacb3478","text":" Bestiary for Pathfinder Roleplaying Game, © 2012 Open Design LLC; Authors: Adam Daigle with Chris Harris, Michael Kortes, James MacKenzie, Rob Manning, Ben McFarland, Carlos Ovalle, Jan Rodewald, Adam Roy, Christina Stiles, James Thomas, and Mike Welham.</p>\n<p>Midgard Campaign Setting © 2012 Open Design LLC. Authors: Wolfgang Baur, Brandon Hodge, Christina Stiles, Dan Voyce, and Jeff Grubb.</p>\n<p>Midgard Heroes © 2015 Open Design; Author: Dan Dillon.</p>\n<p>Midgard Heroes Handbook © 2018 Open Design LLC; Authors: Chris Harris, Dan Dillon, Greg Marks, Jon Sawatsky, Michael Ohl, Richard Green, Rich Howard, Scott Carter, Shawn Merwin, and Wolfgang Baur.</p>\n<p>Midgard Sagas ©2018 Open Design LLC; Authors: Wolfgang Baur, Dan Dillon, Robert Fairbanks, Greg Marks, Ben McFarland, Kelly Pawlik, Brian Suskind, and Troy Taylor.</p>\n<p>Midgard Worldbook. Copyright ©2018 Open Design LLC. Authors: Wolfgang Baur, Dan Dillon, Richard Green, Jeff Grubb, Chris Harris, Brian Suskind, and Jon Sawatsky.</p>\n<p>Monkey Business Author: Richard Pett. © 2018 Open Design LLC.</p>\n<p>Monte Cook’s Arcana Evolved Copyright 2005 Monte J. Cook. All rights reserved.</p>\n<p>New Paths: The Expanded Shaman Copyright 2012, Open Design LLC.; Author: Marc Radle.</p>\n<p>Northlands © 2011, Open Design LL C; Author: Dan Voyce; www.koboldpress.com.</p>\n<p>Pathfinder Advanced Players Guide. Copyright 2010, Paizo Publishing, LLC; Author: Jason Bulmahn.</p>\n<p>Pathfinder Roleplaying Game Advanced Race Guide © 2012, ","position":{"index":447,"start_char":14850,"end_char":16350},"metadata":{"content_hash":"40d32242a2ddfc76"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"829a069b1b1dd75e1226e85b3f71c087","source_id":"6759af1abacb3478","text":" Advanced Players Guide. Copyright 2010, Paizo Publishing, LLC; Author: Jason Bulmahn.</p>\n<p>Pathfinder Roleplaying Game Advanced Race Guide © 2012, Paizo Publishing, LLC; Authors: Dennis Baker, Jesse Benner, Benjamin Bruck, Jason Bulmahn, Adam Daigle, Jim Groves, Tim Hitchcock, Hal MacLean, Jason Nelson, Stephen Radney-MacFarland, Owen K.C. Stephens, Todd Stewart, and Russ Taylor.</p>\n<p>Pathfinder Roleplaying Game Bestiary, © 2009, Paizo Publishing, LLC; Author Jason Bulmahn, based on material by Jonathan Tweet, Monte Cook, and Skip Williams.</p>\n<p>Pathfinder Roleplaying Game Bestiary 2, © 2010, Paizo Publishing, LLC; Authors Wolfgang Baur, Jason Bulmahn, Adam Daigle, Graeme Davis, Crystal Frasier, Joshua J. Frost, Tim Hitchcock, Brandon Hodge, James Jacobs, Steve Kenson, Hal MacLean, Martin Mason, Rob McCreary, Erik Mona, Jason Nelson, Patrick Renie, Sean K Reynolds, F. Wesley Schneider, Owen K.C. Stephens, James L. Sutter, Russ Taylor, and Greg A. Vaughan, based on material by Jonathan Tweet, Monte Cook, and Skip Williams.</p>\n<p>Pathfinder Roleplaying Game Bestiary 3, © 2011, Paizo Publishing, LLC; Authors Jesse Benner, Jason Bulmahn, Adam Daigle, James Jacobs, Michael Kenway, Rob McCreary, Patrick Renie, Chris Sims, F. Wesley Schneider, James L. Sutter, and Russ Taylor, based on material by Jonathan Tweet, Monte Cook, and Skip Williams. Pathfinder Roleplaying Game Ultimate Combat. © 2011, Paizo Publishing, LLC; Authors: Jason Bulmahn, Tim Hitchcock, Colin McComb, Rob ","position":{"index":448,"start_char":16200,"end_char":17700},"metadata":{"content_hash":"3994776b689c1ee0"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"24cd7f87e3ab46772f9d485a050f85d0","source_id":"6759af1abacb3478","text":"d Skip Williams. Pathfinder Roleplaying Game Ultimate Combat. © 2011, Paizo Publishing, LLC; Authors: Jason Bulmahn, Tim Hitchcock, Colin McComb, Rob McCreary, Jason Nelson, Stephen Radney-MacFarland, Sean K Reynolds, Owen K.C. Stephens, and Russ Taylor</p>\n<p>Pathfinder Roleplaying Game: Ultimate Equipment Copyright 2012, Paizo Publishing, LLC; Authors: Dennis Baker, Jesse Benner, Benjamin Bruck, Ross Byers, Brian J. Cortijo, Ryan Costello, Mike Ferguson, Matt Goetz, Jim Groves, Tracy Hurley, Matt James, Jonathan H. Keith, Michael Kenway, Hal MacLean, Jason Nelson, Tork Shaw, Owen K C Stephens, Russ Taylor, and numerous RPG Superstar contributors</p>\n<p>Pathfinder RPG Core Rulebook Copyright 2009, Paizo Publishing, LLC; Author: Jason Bulmahn, based on material by Jonathan Tweet, Monte Cook, and Skip Williams.</p>\n<p>Pathfinder Ultimate Magic Copyright 2011, Paizo Publishing, LLC; Author: Jason Bulmahn.</p>\n<p>Prepared: A Dozen Adventures for Fifth Edition. Copyright 2016, Open Design; Author Jon Sawatsky.</p>\n<p>Prepared 2: A Dozen Fifth Edition One-Shot Adventures. Copyright 2017, Open Design; Author Jon Sawatsky.</p>\n<p>Pride of the Mushroom Queen. Author: Mike Welham. © 2018 Open Design LLC.</p>\n<p>Reclamation of Hallowhall. Author: Jeff Lee. © 2019 Open Design LLC.</p>\n<p>Red Lenny’s Famous Meat Pies. Author: James J. Haeck. © 2017 Open Design.</p>\n<p>Return to Castle Shadowcrag. © 2018 Open Design; Authors Wolfgang Baur, Chris Harris, and Thomas Knauss.</p>\n<p>Rumble in","position":{"index":449,"start_char":17550,"end_char":19050},"metadata":{"content_hash":"8e94d1e1231d787e"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"c2f285b849d56109c45c62132ea26f75","source_id":"6759af1abacb3478","text":". © 2017 Open Design.</p>\n<p>Return to Castle Shadowcrag. © 2018 Open Design; Authors Wolfgang Baur, Chris Harris, and Thomas Knauss.</p>\n<p>Rumble in the Henhouse. © 2019 Open Design LLC. Author Kelly Pawlik.</p>\n<p>Run Like Hell. ©2019 Open Design LLC. Author Mike Welham.</p>\n<p>Sanctuary of Belches © 2016 Open Design; Author: Jon Sawatsky.</p>\n<p>Shadow’s Envy. Author: Mike Welham. © 2018 Open Design LLC.</p>\n<p>Shadows of the Dusk Queen, © 2018, Open Design LLC; Author Marc Radle.</p>\n<p>Skeletons of the Illyrian Fleet Author: James J. Haeck. © 2018 Open Design LLC.</p>\n<p>Smuggler's Run Author: Mike Welham. © 2018 Open Design LLC.</p>\n<p>Southlands Heroes © 2015 Open Design; Author: Rich Howard.</p>\n<p>Spelldrinker’s Cavern. Author: James J. Haeck. © 2017 Open Design.</p>\n<p>Steam & Brass © 2006, Wolfgang Baur, www.wolfgangbaur.com.</p>\n<p>Streets of Zobeck. © 2011, Open Design LLC. Authors: Ben McFarland, Mike Franke, Richard Pett, Christina Stiles, Matthew Stinson.</p>\n<p>Streets of Zobeck for 5th Edition. Copyright 2017, Open Design; Authors Ben McFarland, Mike Franke, Richard Pett, Christina Stiles, and Matthew Stinson. Converted for the 5th Edition of Dungeons & Dragons by Chris Harris</p>\n<p>Storming the Queen’s Desire Author: Mike Welham. © 2018 Open Design LLC.</p>\n<p>Sunken Empires ©2010, Open Design, LL C; Authors: Brandon Hodge, David “Zeb” Cook, and Stefen Styrsky.</p>\n<p>System Reference Document Copyright 2000. Wizards of the Coast, Inc; Authors Jonathan Tw","position":{"index":450,"start_char":18900,"end_char":20400},"metadata":{"content_hash":"4d43d38ac2ad12ea"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"47f0ccee60cce63f43387bd8cca79c46","source_id":"6759af1abacb3478","text":": Brandon Hodge, David “Zeb” Cook, and Stefen Styrsky.</p>\n<p>System Reference Document Copyright 2000. Wizards of the Coast, Inc; Authors Jonathan Tweet, Monte Cook, Skip Williams, based on material by E. Gary Gygax and Dave Arneson.</p>\n<p>System Reference Document 5.0 Copyright 2016, Wizards of the Coast, Inc.; Authors Mike Mearls, Jeremy Crawford, Chris Perkins, Rodney Thompson, Peter Lee, James Wyatt, Robert J. Schwalb, Bruce R. Cordell, Chris Sims, and Steve Townshend, based on original material by E. Gary Gygax and Dave Arneson.</p>\n<p>System Reference Document 5.1 Copyright 2016, Wizards of the Coast, Inc.; Authors Mike Mearls, Jeremy Crawford, Chris Perkins, Rodney Thompson, Peter Lee, James Wyatt, Robert J. Schwalb, Bruce R. Cordell, Chris Sims, and Steve Townshend, based on original material by E. Gary Gygax and Dave Arneson.</p>\n<p>Tales of the Old Margreve © 2019 Open Design LLC; Matthew Corley, Wolfgang Baur, Richard Green, James Introcaso, Ben McFarland, and Jon Sawatsky.</p>\n<p>Tales of Zobeck, ©2008, Open Design LLC. Authors: Wolfgang Baur, Bill Collins, Tim and Eileen Connors, Ed Greenwood, Jim Groves, Mike McArtor, Ben McFarland, Joshua Stevens, Dan Voyce.</p>\n<p>The Bagiennik Game. Author: Jon Sawatsky. © 2018 Open Design LLC.</p>\n<p>The Beacon at the Top of the World. Author: Mike Welham. © 2019 Open Design LLC.</p>\n<p>The Book of Eldritch Might, Copyright 2004 Monte J. Cook. All rights reserved.</p>\n<p>The Book of Experimental Might Copyright 2008, Monte","position":{"index":451,"start_char":20250,"end_char":21750},"metadata":{"content_hash":"199f9a50d98dcb14"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"c2259559bdf02fd8e902a89aa1eb9d83","source_id":"6759af1abacb3478","text":"LLC.</p>\n<p>The Book of Eldritch Might, Copyright 2004 Monte J. Cook. All rights reserved.</p>\n<p>The Book of Experimental Might Copyright 2008, Monte J. Cook. All rights reserved.</p>\n<p>The Book of Fiends, © 2003, Green Ronin Publishing; Authors Aaron Loeb, Erik Mona, Chris Pramas, Robert J. Schwalb.</p>\n<p>The Clattering Keep. Author: Jon Sawatsky. © 2017 Open Design.</p>\n<p>The Empty Village Author Mike Welham. © 2018 Open Design LLC.</p>\n<p>The Infernal Salt Pits. Author: Richard Green. © 2018 Open Design LLC.</p>\n<p>The Lamassu’s Secrets, Copyright 2018 Open Design LLC. Author: Richard Green.</p>\n<p>The Lost Temple of Anax Apogeion. Author: Mike Shea, AKA Sly Flourish. © 2018 Open Design LLC.</p>\n<p>The Raven’s Call. Copyright 2013, Open Design LLC. Author: Wolfgang Baur.</p>\n<p>The Raven’s Call 5th Edition © 2015 Open Design; Authors: Wolfgang Baur and Dan Dillon.</p>\n<p>The Returners’ Tower. Author: Jon Sawatsky. © 2018 Open Design LLC.</p>\n<p>The Rune Crypt of Sianis. Author: Jon Sawatsky. © 2018 Open Design LLC.</p>\n<p>The Scorpion’s Shadow. Author: Chris Harris. © 2018 Open Design LLC.</p>\n<p>The Seal of Rhydaas. Author: James J. Haeck. © 2017 Open Design.</p>\n<p>The Sunken Library of Qezzit Qire. © 2019 Open Design LLC. Author Mike Welham.</p>\n<p>The Tomb of Mercy (C) 2016 Open Design. Author: Sersa Victory.</p>\n<p>The Wilding Call Author Mike Welham. © 2019 Open Design LLC.</p>\n<p>Three Little Pigs - Part One: Nulah’s Tale. Author: Richard Pett. © 2019 Open Desig","position":{"index":452,"start_char":21600,"end_char":23100},"metadata":{"content_hash":"6996743267f1e41c"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"ebe9f429eb6c8b7b6a18adf24232f970","source_id":"6759af1abacb3478","text":"he Wilding Call Author Mike Welham. © 2019 Open Design LLC.</p>\n<p>Three Little Pigs - Part One: Nulah’s Tale. Author: Richard Pett. © 2019 Open Design LLC.</p>\n<p>Three Little Pigs - Part Two: Armina’s Peril. Author: Richard Pett. © 2019 Open Design LLC.</p>\n<p>Three Little Pigs - Part Three: Madgit’s Story. Author: Richard Pett. © 2019 Open Design LLC.</p>\n<p>Tomb of Tiberesh © 2015 Open Design; Author: Jerry LeNeave.</p> -->\n        <p>\n          Tome of Beasts. Copyright 2016, Open Design; Authors Chris Harris, Dan\n          Dillon, Rodrigo Garcia Carmona, and Wolfgang Baur.\n        </p>\n        <!-- <p>Tome of Horrors. Copyright 2002, Necromancer Games, Inc.; Authors: Scott Greene, with Clark Peterson, Erica Balsley, Kevin Baase, Casey Christofferson, Lance Hawvermale, Travis Hawvermale, Patrick Lawinger, and Bill Webb; Based on original content from TSR.</p>\n<p>Unlikely Heroes for 5th Edition © 2016 Open Design; Author: Dan Dillon.</p>\n<p>Wrath of the Bramble King Author: Mike Welham. © 2018 Open Design LLC.</p>\n<p>Wrath of the River King © 2017 Open Design; Author: Wolfgang Baur and Robert Fairbanks</p>\n<p>Warlock Bestiary Authors: Jeff Lee with Chris Harris, James Introcaso, and Wolfgang Baur. © 2018 Open Design LLC.</p>\n<p>Warlock Guide to the Shadow Realms. Author: Kelly Pawlik. © 2019 Open Design LLC.</p>\n<p>Warlock Part 1. Authors: Wolfgang Baur, Dan Dillon, Troy E. Taylor, Ben McFarland, Richard Green. © 2017 Open Design.</p>\n<p>Warlock 2: Dread Magic. Authors: W","position":{"index":453,"start_char":22950,"end_char":24450},"metadata":{"content_hash":"d329c9c98066b3e4"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"f204c41f6f3e23f7c32f7bf3a79618e0","source_id":"6759af1abacb3478","text":"art 1. Authors: Wolfgang Baur, Dan Dillon, Troy E. Taylor, Ben McFarland, Richard Green. © 2017 Open Design.</p>\n<p>Warlock 2: Dread Magic. Authors: Wolfgang Baur, Dan Dillon, Jon Sawatsky, Richard Green. © 2017 Open Design.</p>\n<p>Warlock 3: Undercity. Authors: James J. Haeck, Ben McFarland, Brian Suskind, Peter von Bleichert, Shawn Merwin. © 2018 Open Design.</p>\n<p>Warlock 4: The Dragon Empire. Authors: Wolfgang Baur, Chris Harris, James J. Haeck, Jon Sawatsky, Jeremy Hochhalter, Brian Suskind. © 2018 Open Design.</p>\n<p>Warlock 5: Rogue’s Gallery. Authors: James J. Haeck, Shawn Merwin, Richard Pett. © 2018 Open Design.</p>\n<p>Warlock 6: City of Brass. Authors: Richard Green, Jeff Grubb, Richard Pett, Steve Winter. © 2018 Open Design.</p>\n<p>Warlock 7: Fey Courts. Authors: Wolfgang Baur, Shawn Merwin , Jon Sawatsky, Troy E. Taylor. © 2018 Open Design.</p>\n<p>Warlock 8: Undead. Authors: Wolfgang Baur, Dan Dillon, Chris Harris, Kelly Pawlik. © 2018 Open Design.</p>\n<p>Warlock 9: The World Tree. Authors: Wolfgang Baur, Sarah Madsen, Richard Green, and Kelly Pawlik. © 2018 Open Design LLC.</p>\n<p>Warlock 10: The Magocracies. Authors: Dan Dillon, Ben McFarland, Kelly Pawlik, Troy E. Taylor. © 2019 Open Design LLC.</p>\n<p>Warlock 11: Treasure Vaults. Authors: Lysa Chen, Richard Pett, Marc Radle, Mike Welham. © 2019 Open Design LLC.</p>\n<p>Warlock 12: Dwarves. Authors: Wolfgang Baur, Ben McFarland and Robert Fairbanks, Hannah Rose, Ashley Warren. © 2019 Open Design LLC.</p>\n<p>Wa","position":{"index":454,"start_char":24300,"end_char":25800},"metadata":{"content_hash":"6527d7c946535302"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"ca349229db0e858356bd8fbfd25361b1","source_id":"6759af1abacb3478","text":"</p>\n<p>Warlock 12: Dwarves. Authors: Wolfgang Baur, Ben McFarland and Robert Fairbanks, Hannah Rose, Ashley Warren. © 2019 Open Design LLC.</p>\n<p>Warlock 13: War & Battle Authors: Kelly Pawlik and Brian Suskind. © 2019 Open Design LLC.</p>\n<p>Zobeck Gazetteer, ©2008, Open Design LLC; Author: Wolfgang Baur.</p>\n<p>Zobeck Gazetteer Volume 2: Dwarves of the Ironcrags ©2009, Open Design LLC.</p>\n<p>Zobeck Gazetteer for 5th Edition. Copyright ©2018 Open Design LLC. Author: James Haeck.</p>\n<p>Zobeck Gazetteer for the Pathfinder Roleplaying Game, ©2012, Open Design LLC. Authors: Wolfgang Baur and Christina Stiles</p> -->\n        <p>ope5e.com v2.0, copyright 2019.</p>\n      </li>\n    </ol>\n    <p>END OF LICENSE</p>\n  </section>\n</template>","position":{"index":455,"start_char":25650,"end_char":26394},"metadata":{"content_hash":"a017550b7dff833c"},"created_at":"2026-01-14T02:20:38.026Z"}
{"chunk_id":"5272939b6cf1cd33cbb9455cba542b08","source_id":"15a0df8dbae4c7b6","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Magic Item List</h1>\n      <FilterButton\n        :show-clear-button=\"canClearFilter\"\n        :filter-count=\"enabeledFiltersCount\"\n        :filter-shown=\"displayFilter\"\n        @show-filter=\"displayFilter = !displayFilter\"\n        @clear-filter=\"clear\"\n      />\n    </div>\n    <MagicItemFilterBox\n      v-if=\"displayFilter\"\n      :filter=\"filter\"\n      :update-filter=\"update\"\n    />\n    <div>\n      <div>\n        <h3\n          ref=\"results\"\n          class=\"sr-only\"\n          tabindex=\"-1\"\n          @keyup.esc=\"focusFilter\"\n        />\n      </div>\n      <api-results-table\n        v-model=\"debouncedFilter\"\n        endpoint=\"magic-items\"\n        :api-endpoint=\"API_ENDPOINTS.magicitems\"\n        :cols=\"['type', 'rarity', 'requires_attunement']\"\n      />\n    </div>\n  </section>\n</template>\n\n<script setup>\nimport FilterButton from '~/components/FilterButton.vue';\n\nconst displayFilter = ref(false);\n\nconst {\n  filter,\n  debouncedFilter,\n  canClearFilter,\n  enabeledFiltersCount,\n  clear,\n  update,\n} = useFilterState(DefaultMagicItemFilter);\n</script>","position":{"index":456,"start_char":0,"end_char":1181},"metadata":{"content_hash":"5e3eac58dcd9b232"},"created_at":"2026-01-14T02:20:39.105Z"}
{"chunk_id":"727308e381fed02468c3ab933ddf9557","source_id":"8dd8f1e3d434c64a","text":"<template>\n  <section class=\"docs-container container\">\n    <div v-if=\"item\">\n      <h1 class=\"inline\">\n        {{ item.name }}\n      </h1>\n      <p>\n        <em>\n          {{ item.type }}, {{ item.rarity }}\n          <span v-show=\"item.requires_attunement\">\n            ({{ item.requires_attunement }})\n          </span>\n        </em>\n        <source-tag\n          v-show=\"item.document__slug\"\n          :title=\"item.document__title\"\n          :text=\"item.document__slug\"\n        />\n      </p>\n      <md-viewer :text=\"item.desc\" />\n      <p class=\"text-sm italic\">\n        Source:\n        <a target=\"NONE\" :href=\"item.document__url\">\n          {{ item.document__title }}\n          <Icon name=\"heroicons:arrow-top-right-on-square-20-solid\" />\n        </a>\n      </p>\n    </div>\n    <p v-else>Loading...</p>\n  </section>\n</template>\n\n<script setup>\nconst { data: item } = useFindOne(\n  API_ENDPOINTS.magicitems,\n  useRoute().params.id\n);\n</script>","position":{"index":457,"start_char":0,"end_char":946},"metadata":{"content_hash":"0146b263baff840b"},"created_at":"2026-01-14T02:20:39.669Z"}
{"chunk_id":"d9524d455d78a115d31dd04674bb1902","source_id":"058d2e058b42b233","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Monster List</h1>\n      <FilterButton\n        :show-clear-button=\"canClearFilter\"\n        :filter-count=\"enabeledFiltersCount\"\n        :filter-shown=\"displayFilter\"\n        @show-filter=\"displayFilter = !displayFilter\"\n        @clear-filter=\"clear\"\n      />\n    </div>\n    <MonsterFilterBox\n      v-if=\"displayFilter\"\n      ref=\"monsterFilterBox\"\n      :filter=\"filter\"\n      :update-filter=\"update\"\n    />\n    <div>\n      <div>\n        <h3\n          ref=\"results\"\n          class=\"sr-only\"\n          tabindex=\"-1\"\n          @keyup.esc=\"focusFilter\"\n        />\n      </div>\n      <api-results-table\n        v-model=\"debouncedFilter\"\n        endpoint=\"monsters\"\n        :api-endpoint=\"API_ENDPOINTS.monsters\"\n        :cols=\"['type', 'cr', 'size', 'hit_points']\"\n      />\n    </div>\n  </section>\n</template>\n\n<script setup>\nimport ApiResultsTable from '~/components/ApiResultsTable.vue';\nimport FilterButton from '~/components/FilterButton.vue';\nimport MonsterFilterBox from '~/components/MonsterFilterBox.vue';\n\nconst displayFilter = ref(false);\n\nconst {\n  filter,\n  debouncedFilter,\n  canClearFilter,\n  enabeledFiltersCount,\n  clear,\n  update,\n} = useFilterState(DefaultMonsterFilter);\n</script>","position":{"index":458,"start_char":0,"end_char":1323},"metadata":{"content_hash":"b00c8b29b270ea9f"},"created_at":"2026-01-14T02:20:39.960Z"}
{"chunk_id":"2e072ede61142efe5ea13cfbb5cc6a3b","source_id":"07e5f7f672850415","text":"<template>\n  <main v-if=\"monster\" class=\"docs-container container\" :data-mode=\"mode\">\n    <!-- TITLE -->\n    <div class=\"flex items-end justify-between gap-8\">\n      <h1 class=\"flex-auto\">{{ monster.name }}</h1>\n\n      <div class=\"flex flex-none items-start\">\n        <button\n          class=\"flex items-center gap-1 rounded-md p-1 text-xs text-blood outline outline-1 outline-blood hover:bg-blood hover:text-white\"\n          @click=\"toggleMode()\"\n        >\n          <Icon\n            :name=\"\n              mode === 'compact'\n                ? 'heroicons:arrows-pointing-out'\n                : 'heroicons:arrows-pointing-in'\n            \"\n          />\n          {{ mode === 'compact' ? 'Regular statblock' : 'Compact statblock' }}\n        </button>\n      </div>\n    </div>\n\n    <img\n      v-if=\"mode !== 'compact' && monster.img_main\"\n      :src=\"monster.img_main\"\n      class=\"img-main\"\n    />\n    <p class=\"italic\">\n      <span>\n        {{\n          `${monster.size} ${monster.type}${\n            monster.subtype ? ` (${monster.subtype})` : ''\n          }, ${monster.alignment}`\n        }}\n      </span>\n      <source-tag\n        v-show=\"monster.document__slug\"\n        :title=\"monster.document__title\"\n        :text=\"monster.document__slug\"\n      />\n    </p>\n\n    <section>\n      <ul>\n        <li>\n          <span class=\"font-bold after:content-['_']\">Armor Class</span>\n          {{\n            `${monster.armor_class}${\n              monster.armor_desc ? ` (${monster.armor_desc})` : ''\n       ","position":{"index":459,"start_char":0,"end_char":1500},"metadata":{"content_hash":"908ad313ce9061a0"},"created_at":"2026-01-14T02:20:40.542Z"}
{"chunk_id":"422cdc532b83eeebcd6c9eb0883ed79f","source_id":"07e5f7f672850415","text":"'_']\">Armor Class</span>\n          {{\n            `${monster.armor_class}${\n              monster.armor_desc ? ` (${monster.armor_desc})` : ''\n            }`\n          }}\n        </li>\n        <li>\n          <span class=\"font-bold after:content-['_']\">Hit Points</span>\n          <span class=\"after:content-['_']\">{{ monster.hit_points }}</span>\n          <span\n            class=\"cursor-pointer font-bold text-blood hover:text-black\"\n            @click=\"useDiceRoller(monster.hit_dice)\"\n          >\n            {{ `(${monster.hit_dice})` }}\n          </span>\n        </li>\n        <li>\n          <span class=\"font-bold after:content-['_']\">Speed</span>\n          <span\n            v-for=\"(speed, key) in monster.speed\"\n            v-show=\"key !== 'hover'\"\n            :key=\"key\"\n            class=\"after:content-[',_'] last:after:content-[]\"\n          >\n            {{\n              `${key !== 'walk' ? `${key} ` : ''}${speed}ft.${\n                speed.hasOwnProperty('hover') && key === 'fly' ? ' (hover)' : ''\n              }`\n            }}\n          </span>\n        </li>\n      </ul>\n    </section>\n\n    <hr />\n\n    <!-- ABILITY SCORES -->\n    <section class=\"max-w-96\">\n      <ul class=\"flex items-center gap-4 text-center\">\n        <li v-for=\"ability in monster.abilities\" :key=\"ability.name\">\n          <span class=\"block font-bold uppercase\">{{ ability.shortName }}</span>\n          <span class=\"after:content-['_']\">{{ ability.score }}</span>\n          <span\n            class=\"cursor-poin","position":{"index":460,"start_char":1350,"end_char":2850},"metadata":{"content_hash":"ca4eb09e3e5616f0"},"created_at":"2026-01-14T02:20:40.542Z"}
{"chunk_id":"a2093722e8ba35fc59ef4309ed3392f0","source_id":"07e5f7f672850415","text":"\">{{ ability.shortName }}</span>\n          <span class=\"after:content-['_']\">{{ ability.score }}</span>\n          <span\n            class=\"cursor-pointer font-bold text-blood hover:text-black\"\n            @click=\"useDiceRoller(ability.modifier)\"\n          >\n            {{ `(${ability.modifier})` }}\n          </span>\n        </li>\n      </ul>\n    </section>\n\n    <hr />\n\n    <!-- FEATURES UNDER ABILITIES -->\n    <section>\n      <dl>\n        <!-- SAVING THROWS -->\n        <div v-if=\"savingThrows.length > 0\">\n          <dt class=\"inline font-bold\">{{ 'Saving Throws' + ' ' }}</dt>\n          <dl class=\"inline\">\n            <span\n              v-for=\"save in savingThrows\"\n              :key=\"save.label\"\n              class=\"cursor-pointer font-bold text-blood after:content-[',_'] last:after:content-[''] hover:text-black dark:hover:text-white\"\n              @click=\"useDiceRoller(save.value.toString())\"\n            >\n              {{ save.label + ' ' + (save.value >= 0 ? '+' : '') + save.value }}\n            </span>\n          </dl>\n        </div>\n\n        <!-- SKILLS -->\n        <div v-if=\"Object.keys(monster.skills).length > 0\">\n          <dt class=\"inline font-bold\">{{ 'Skills' + ' ' }}</dt>\n          <dl class=\"inline capitalize\">\n            <span\n              v-for=\"(mod, skill) in monster.skills\"\n              :key=\"skill\"\n              class=\"cursor-pointer font-bold text-blood after:content-[',_'] last:after:content-[''] hover:text-black dark:hover:text-white\"\n              @","position":{"index":461,"start_char":2700,"end_char":4200},"metadata":{"content_hash":"85d005d099ba21af"},"created_at":"2026-01-14T02:20:40.542Z"}
{"chunk_id":"6a731210297ebde93a4bbafd1f18f261","source_id":"07e5f7f672850415","text":"       class=\"cursor-pointer font-bold text-blood after:content-[',_'] last:after:content-[''] hover:text-black dark:hover:text-white\"\n              @click=\"useDiceRoller(mod.toString())\"\n            >\n              {{ skill + ' ' + (mod >= 0 ? '+' : '') + mod }}\n            </span>\n          </dl>\n        </div>\n\n        <!-- LANGUAGES, SENSES, RESISTANCES, ETC. -->\n        <div v-for=\"field in monsterFeatures\" :key=\"field.title\">\n          <dt class=\"inline font-bold\">{{ field.title + ' ' }}</dt>\n          <dd class=\"inline\">{{ field.data }}</dd>\n        </div>\n      </dl>\n      <hr />\n    </section>\n\n    <!-- Monster Special Abilities -->\n    <section v-if=\"monster.special_abilities\">\n      <p\n        v-for=\"ability in monster.special_abilities\"\n        :key=\"ability.name\"\n        class=\"action-block\"\n      >\n        <span class=\"font-bold after:content-['._']\">{{ ability.name }}</span>\n        <md-viewer :inline=\"true\" :text=\"ability.desc\" :use-roller=\"true\" />\n      </p>\n    </section>\n\n    <!-- Monster Actions -->\n    <section v-if=\"monster.actions\">\n      <h2>Actions</h2>\n      <ul id=\"actions-list\">\n        <li v-for=\"action in monster.actions\" :key=\"action.name\" class=\"my-1\">\n          <span class=\"font-bold after:content-['_']\">{{ action.name }}. </span>\n          <md-viewer :inline=\"true\" :text=\"action.desc\" :use-roller=\"true\" />\n        </li>\n      </ul>\n    </section>\n\n    <!-- Monster Bonus Actions -->\n    <section v-if=\"monster.bonus_actions\">\n      <h2>Bonus A","position":{"index":462,"start_char":4050,"end_char":5550},"metadata":{"content_hash":"904abb2942da16f7"},"created_at":"2026-01-14T02:20:40.542Z"}
{"chunk_id":"af1f0c5403113cc9a6057187695644d0","source_id":"07e5f7f672850415","text":"er=\"true\" />\n        </li>\n      </ul>\n    </section>\n\n    <!-- Monster Bonus Actions -->\n    <section v-if=\"monster.bonus_actions\">\n      <h2>Bonus Actions</h2>\n      <ul>\n        <li\n          v-for=\"action in monster.bonus_actions\"\n          :key=\"action.name\"\n          class=\"my-1\"\n        >\n          <span class=\"font-bold after:content-['_']\">{{ action.name }}. </span>\n          <md-viewer :inline=\"true\" :text=\"action.desc\" :use-roller=\"true\" />\n        </li>\n      </ul>\n    </section>\n\n    <!-- Monster Reactions -->\n    <section v-if=\"monster.reactions\">\n      <h2>Reactions</h2>\n      <ul>\n        <li v-for=\"action in monster.reactions\" :key=\"action.name\" class=\"my-1\">\n          <span class=\"font-bold after:content-['_']\">{{ action.name }}. </span>\n          <md-viewer :inline=\"true\" :text=\"action.desc\" :use-roller=\"true\" />\n        </li>\n      </ul>\n    </section>\n\n    <!-- Monster Legendary Actions -->\n    <section v-if=\"monster.legendary_actions\">\n      <h2>Legendary Actions</h2>\n      <p v-if=\"monster.legendary_desc\" class=\"text\">\n        {{ monster.legendary_desc }}\n      </p>\n\n      <ul>\n        <li\n          v-for=\"action in monster.legendary_actions\"\n          :key=\"action.name\"\n          class=\"my-1\"\n        >\n          <span class=\"font-bold after:content-['_']\">{{ action.name }}.</span>\n          <md-viewer :inline=\"true\" :text=\"action.desc\" />\n        </li>\n      </ul>\n    </section>\n    <!-- Monster Mythic Actions -->\n    <section v-if=\"monster.mythic_acti","position":{"index":463,"start_char":5400,"end_char":6900},"metadata":{"content_hash":"0406e8402e210d8a"},"created_at":"2026-01-14T02:20:40.542Z"}
{"chunk_id":"44adb1352199d3461a74590914a1c47e","source_id":"07e5f7f672850415","text":"line=\"true\" :text=\"action.desc\" />\n        </li>\n      </ul>\n    </section>\n    <!-- Monster Mythic Actions -->\n    <section v-if=\"monster.mythic_actions\">\n      <h2>Mythic Actions</h2>\n      <ul>\n        <li\n          v-for=\"action in monster.mythic_actions\"\n          :key=\"action.name\"\n          class=\"my-1\"\n        >\n          <span class=\"font-bold after:content-['_']\">{{ action.name }}.</span>\n          <md-viewer :inline=\"true\" :text=\"action.desc\" />\n        </li>\n      </ul>\n    </section>\n\n    <!-- Monster Lair and Lair Actions -->\n    <section v-if=\"monster.lair_actions\">\n      <h2>Lair Actions</h2>\n      <p v-if=\"monster.lair_desc\" class=\"text\">\n        {{ monster.lair_desc }}\n      </p>\n      <ul>\n        <li\n          v-for=\"action in monster.lair_actions\"\n          :key=\"action.name\"\n          class=\"my-1\"\n        >\n          <span class=\"font-bold after:content-['_']\">{{ action.name }}.</span>\n          <md-viewer :inline=\"true\" :text=\"action.desc\" />\n        </li>\n      </ul>\n    </section>\n\n    <!-- Monster Description -->\n    <section v-if=\"monster.desc\">\n      <h2>Description</h2>\n      <md-viewer :text=\"monster.desc\" />\n    </section>\n\n    <hr />\n\n    <!-- Monster Environments -->\n    <section v-if=\"monster.environments?.length > 0\">\n      <span class=\"font-bold after:content-[_]\">Environments:</span>\n      <span\n        v-for=\"environment in monster.environments\"\n        :key=\"environment\"\n        class=\"text-sm after:content-[',_'] last:after:content-[]\"\n","position":{"index":464,"start_char":6750,"end_char":8250},"metadata":{"content_hash":"778f5dc4bf35c058"},"created_at":"2026-01-14T02:20:40.542Z"}
{"chunk_id":"6f72d1db2281c003c57d9529d644f75c","source_id":"07e5f7f672850415","text":"pan\n        v-for=\"environment in monster.environments\"\n        :key=\"environment\"\n        class=\"text-sm after:content-[',_'] last:after:content-[]\"\n      >\n        {{ environment }}\n      </span>\n    </section>\n\n    <p class=\"mb-4 text-sm italic\">\n      Source:\n      <a target=\"NONE\" :href=\"monster.document__url\">\n        {{ monster.document__title }}\n        <Icon name=\"heroicons:arrow-top-right-on-square-20-solid\" />\n      </a>\n    </p>\n  </main>\n</template>\n\n<script setup>\nconst route = useRoute();\nconst { data: monster } = useMonster(route.params.id);\n\nconst savingThrows = computed(() => {\n  if (!monster) {\n    return [];\n  }\n  const saves = [\n    { label: 'Str', value: monster.value.strength_save },\n    { label: 'Dex', value: monster.value.dexterity_save },\n    { label: 'Con', value: monster.value.constitution_save },\n    { label: 'Int', value: monster.value.intelligence_save },\n    { label: 'Wis', value: monster.value.wisdom_save },\n    { label: 'Cha', value: monster.value.charisma_save },\n  ].filter((save) => save.value);\n  return saves;\n});\n\nconst monsterFeatures = computed(() => {\n  if (!monster) {\n    return [];\n  }\n  const features = [\n    {\n      title: 'Damage Vulnerabilities',\n      data: monster.value.damage_vulnerabilities,\n    },\n    {\n      title: 'Damage Resistances',\n      data: monster.value.damage_resistances,\n    },\n    {\n      title: 'Damage Immunities',\n      data: monster.value.damage_immunities,\n    },\n    {\n      title: 'Condition Immunities',\n  ","position":{"index":465,"start_char":8100,"end_char":9600},"metadata":{"content_hash":"0835d4d932f7f4b5"},"created_at":"2026-01-14T02:20:40.542Z"}
{"chunk_id":"de0e0be680cd2d1a97fcab15b3e2ad35","source_id":"07e5f7f672850415","text":"nces,\n    },\n    {\n      title: 'Damage Immunities',\n      data: monster.value.damage_immunities,\n    },\n    {\n      title: 'Condition Immunities',\n      data: monster.value.condition_immunities,\n    },\n    {\n      title: 'Senses',\n      data: monster.value.senses,\n    },\n    {\n      title: 'Languages',\n      data: monster.value.languages,\n    },\n  ].filter((feature) => feature.data);\n  return features;\n});\n\nconst mode = ref(route.query.mode || 'normal');\nfunction toggleMode() {\n  switch (mode.value) {\n    case 'compact':\n      mode.value = 'normal';\n      break;\n    default:\n      mode.value = 'compact';\n      break;\n  }\n\n  navigateTo({\n    path: `/monsters/${route.params.id}`,\n    query:\n      mode.value === 'compact'\n        ? {\n            mode: 'compact',\n          }\n        : null,\n  });\n}\n</script>\n\n<style scoped lang=\"scss\">\n.img-main {\n  float: right;\n  margin-block: 1rem;\n  width: 30%;\n  min-width: 300px;\n}\n\n@media screen and (max-width: 600px) {\n  .img-main {\n    float: none;\n    width: 100%;\n  }\n}\n\n[data-mode='compact'] {\n  font-size: 0.833rem;\n  line-height: 1.25;\n}\n\n[data-mode='compact'] h1 {\n  font-size: 1.2rem;\n  margin-top: 0.833rem;\n}\n\n[data-mode='compact'] h2 {\n  font-size: 1rem;\n  margin-top: 0.833rem;\n}\n\n[data-mode='compact'] hr {\n  margin-block: 0.5rem;\n}\n</style>\n<hr />","position":{"index":466,"start_char":9450,"end_char":10763},"metadata":{"content_hash":"910b0d17a470e8b0"},"created_at":"2026-01-14T02:20:40.542Z"}
{"chunk_id":"960212cac3b9b57c6f98273ae72f8f08","source_id":"fef6583912f6b18c","text":"<script setup lang=\"ts\">\n// Register middleware with page metadata\ndefinePageMeta({\n  middleware: [\n    function (to) {\n      return navigateTo(\n        {\n          path: `/monsters/${to.params.id}`,\n          query: {\n            mode: 'compact',\n          },\n        },\n        {\n          replace: true,\n          redirectCode: 301,\n        }\n      );\n    },\n  ],\n});\n</script>","position":{"index":467,"start_char":0,"end_char":380},"metadata":{"content_hash":"006c4fcc5e091d8c"},"created_at":"2026-01-14T02:20:41.221Z"}
{"chunk_id":"a41dc1cf5187eabfcc2fe32ea2f4bd83","source_id":"ed01b4a950054829","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Races</h1>\n    </div>\n    <api-results-table\n      endpoint=\"races\"\n      :api-endpoint=\"API_ENDPOINTS.races\"\n      :cols=\"['document__title', 'document__slug']\"\n    />\n  </section>\n</template>\n\n<script setup>\nimport ApiResultsTable from '~/components/ApiResultsTable.vue';\n</script>","position":{"index":468,"start_char":0,"end_char":411},"metadata":{"content_hash":"af1a74bf6ec75d1c"},"created_at":"2026-01-14T02:20:41.640Z"}
{"chunk_id":"f8302520b971bdc6d03c4deb6d0d6686","source_id":"c8b90bd59b01a823","text":"<template>\n  <section v-if=\"race\" class=\"docs-container container\">\n    <h1>{{ race.name }}</h1>\n    <md-viewer :text=\"race.desc\" />\n    <md-viewer :text=\"race['asi_desc']\" />\n    <md-viewer :text=\"race['speed_desc']\" />\n    <md-viewer :text=\"race.vision\" />\n    <md-viewer :text=\"race.age\" />\n    <md-viewer :text=\"race.alignment\" />\n    <md-viewer :text=\"race.size\" />\n    <md-viewer :text=\"race.languages\" />\n    <md-viewer :text=\"race.traits\" />\n    <p class=\"text-sm italic\">\n      Source:\n      <a target=\"NONE\" :href=\"race.document__url\">\n        <span>{{ race.document__title }}</span>\n        <Icon name=\"heroicons:arrow-top-right-on-square-20-solid\" />\n      </a>\n    </p>\n\n    <h2 v-if=\"subraceLength > 0\">Subraces</h2>\n    <div v-for=\"subrace in race.subraces\" :key=\"subrace.name\">\n      <h3 class=\"flex items-center\">\n        {{ subrace.name }}\n        <source-tag\n          v-show=\"race.document__slug\"\n          class=\"ml-4\"\n          :title=\"race.document__title\"\n          :text=\"race.document__slug\"\n        />\n      </h3>\n      <md-viewer :header-level=\"2\" :text=\"subrace.desc\" />\n      <md-viewer :text=\"subrace['asi_desc']\" />\n      <md-viewer :text=\"subrace.traits\" />\n      <p class=\"text-sm italic\">\n        Source:\n        <a target=\"NONE\" :href=\"subrace.document__url\">\n          {{ subrace.document__title }}\n          <Icon name=\"heroicons:arrow-top-right-on-square-20-solid\" />\n        </a>\n      </p>\n    </div>\n  </section>\n</template>\n\n<script setup>\nconst { data: rac","position":{"index":469,"start_char":0,"end_char":1500},"metadata":{"content_hash":"7541de21e40ec715"},"created_at":"2026-01-14T02:20:42.057Z"}
{"chunk_id":"40fd84f990856e49532c35a4c185b062","source_id":"c8b90bd59b01a823","text":"n name=\"heroicons:arrow-top-right-on-square-20-solid\" />\n        </a>\n      </p>\n    </div>\n  </section>\n</template>\n\n<script setup>\nconst { data: race } = useFindOne(API_ENDPOINTS.races, useRoute().params.id);\n</script>","position":{"index":470,"start_char":1350,"end_char":1570},"metadata":{"content_hash":"4d0c22a245f40f35"},"created_at":"2026-01-14T02:20:42.057Z"}
{"chunk_id":"e986ade39b449d638e5ba3857764f779","source_id":"9f62126d0980bd73","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Running a Game</h1>\n    </div>\n    <api-results-table\n      v-model=\"filter\"\n      endpoint=\"running\"\n      :api-endpoint=\"API_ENDPOINTS.sections\"\n      :cols=\"['document__title', 'document__slug']\"\n    />\n  </section>\n</template>\n\n<script setup>\nimport ApiResultsTable from '~/components/ApiResultsTable.vue';\n\nconst filter = ref({\n  parent__in: 'Rules',\n});\n</script>","position":{"index":471,"start_char":0,"end_char":497},"metadata":{"content_hash":"42e97a2a88db3726"},"created_at":"2026-01-14T02:20:42.511Z"}
{"chunk_id":"412d781ba24f40ffef51974d3ca5b398","source_id":"7fb8cf908a8994c7","text":"<template>\n  <section v-if=\"section\" class=\"docs-container container\">\n    <h1>{{ section.name }}</h1>\n    <md-viewer :text=\"section.desc\" />\n  </section>\n</template>\n\n<script setup>\nconst { data: section } = useFindOne(\n  API_ENDPOINTS.sections,\n  useRoute().params.id\n);\n</script>","position":{"index":472,"start_char":0,"end_char":282},"metadata":{"content_hash":"6bc1c689a2de804f"},"created_at":"2026-01-14T02:20:42.894Z"}
{"chunk_id":"6a8e4063fb83a08d6832b32e1deca879","source_id":"957140bccc793179","text":"<template>\n  <section class=\"docs-container container\">\n    <h1>Search</h1>\n    <hr class=\"mb-8\" />\n    <!-- Header -->\n    <p class=\"font-sans text-xl font-bold text-slate-400\">\n      <span v-if=\"!data\" class=\"h-8\">Searching Open5e...</span>\n      <span v-else-if=\"!searchText\">\n        <icon name=\"majesticons:search-line\" class=\"mr-2 h-8 w-8\" />\n        <span>Search for something to see results...</span>\n      </span>\n      <span v-else-if=\"results.inScope\">\n        <icon name=\"majesticons:scroll-line\" class=\"mr-2 h-8 w-8\" />\n        <span>{{ results.inScope.length }} results in your sources</span>\n        <span v-if=\"results.outScope.length > 0\" class=\"font-thin\">\n          ({{ results.outScope.length }} in other sources)\n        </span>\n      </span>\n    </p>\n\n    <!-- Result list -->\n    <ul v-if=\"results && results.inScope.length > 0\">\n      <search-result\n        v-for=\"item in results.inScope\"\n        :key=\"item.object_pk\"\n        :result=\"item\"\n        :query=\"searchText\"\n      />\n    </ul>\n\n    <div v-if=\"results && results.outScope.length > 0\" class=\"my-2 border-t\">\n      <button\n        class=\"mt-2 font-sans text-xl font-bold tracking-wide text-indigo-600 hover:text-blood hover:underline dark:text-indigo-200 dark:hover:text-red\"\n        @click=\"toggleOtherSources()\"\n      >\n        {{ isOtherSourcesExpanded ? `Showing ` : `Show ` }}\n        {{ results.outScope.length }} results from other sources\n      </button>\n    </div>\n\n    <!-- Out of scope results (hidden by ","position":{"index":473,"start_char":0,"end_char":1500},"metadata":{"content_hash":"b30fc6b4852cf1cf"},"created_at":"2026-01-14T02:20:43.219Z"}
{"chunk_id":"15f362e063415a0e29e00bb3fb160385","source_id":"957140bccc793179","text":" ` : `Show ` }}\n        {{ results.outScope.length }} results from other sources\n      </button>\n    </div>\n\n    <!-- Out of scope results (hidden by default) -->\n    <ul v-if=\"results && results.outScope.length > 0 && isOtherSourcesExpanded\">\n      <search-result\n        v-for=\"item in results.outScope\"\n        :key=\"item.object_pk\"\n        :result=\"item\"\n        :query=\"searchText\"\n      />\n    </ul>\n  </section>\n</template>\n\n<script setup>\nimport { computed } from 'vue';\nimport SearchResult from '~/components/SearchResult';\n\nconst searchText = useQueryParam('text');\nconst { data } = useSearch(searchText);\nconst { sources } = useSourcesList();\n\nconst results = computed(() => {\n  if (!data || !data.value) {\n    return;\n  }\n  // split result based on which from currently selected sources\n  const [inScope, outScope] = data.value.reduce(\n    ([inScope, outScope], item) =>\n      sources.value.includes(item.document.key)\n        ? [[...inScope, item], outScope]\n        : [inScope, [...outScope, item]],\n    [[], []]\n  );\n  return { inScope, outScope };\n});\n\n// state for expanding results from other sources\nconst isOtherSourcesExpanded = ref(false);\nconst toggleOtherSources = () => {\n  isOtherSourcesExpanded.value = !isOtherSourcesExpanded.value;\n};\n</script>","position":{"index":474,"start_char":1350,"end_char":2623},"metadata":{"content_hash":"a54cc994aa8905fa"},"created_at":"2026-01-14T02:20:43.219Z"}
{"chunk_id":"9441ab6bdcbb52869b9ca835b5a3730f","source_id":"78bbe5fa28792bca","text":"<template>\n  <!-- This route is not in active use and is only included to avoid  a 404 \n    -- error while the redirect middleware is fetching a section's parent -->\n  <p>Redirecting...</p>\n</template>","position":{"index":475,"start_char":0,"end_char":201},"metadata":{"content_hash":"45815891eda4a233"},"created_at":"2026-01-14T02:20:43.824Z"}
{"chunk_id":"3aab79e7c2fdaa6b43e88394576d0a06","source_id":"0005375af408d924","text":"<template>\n  <section class=\"docs-container container\">\n    <div class=\"filter-header-wrapper\">\n      <h1 class=\"filter-header\">Spell List</h1>\n    </div>\n    <api-results-table\n      endpoint=\"spells\"\n      :api-endpoint=\"API_ENDPOINTS.spells\"\n      :cols=\"['school', 'spell_level', 'components', 'dnd_class']\"\n    />\n  </section>\n</template>\n\n<script setup>\nimport ApiResultsTable from '~/components/ApiResultsTable.vue';\n</script>","position":{"index":476,"start_char":0,"end_char":433},"metadata":{"content_hash":"b1a155b67c595025"},"created_at":"2026-01-14T02:20:44.211Z"}
{"chunk_id":"6db64f2736e5315cb7954469e730ebb6","source_id":"e9ede7a510a55bc2","text":"<template>\n  <section v-if=\"spell\" class=\"docs-container container\">\n    <h1>{{ spell.name }}</h1>\n    <p>\n      <span class=\"italic\">{{ `${spell.level} ${spell.school}` }}</span>\n      <span v-if=\"spell.ritual === 'yes'\"> (ritual)</span>\n      <span> | {{ spell.dnd_class }} </span>\n      <source-tag\n        v-show=\"spell.document__slug\"\n        :title=\"spell.document__title\"\n        :text=\"spell.document__slug\"\n      />\n    </p>\n    <p><label class=\"font-bold\">Range:</label> {{ spell.range }}</p>\n    <p>\n      <label class=\"font-bold\">Casting Time:</label> {{ spell.casting_time }}\n    </p>\n    <p>\n      <label class=\"font-bold\">Duration: </label>\n      <span v-if=\"spell.concentration === 'yes'\">\n        Concentration, up to {{ spell.duration }}\n      </span>\n      <span v-else>{{ spell.duration }}</span>\n    </p>\n    <p>\n      <label class=\"font-bold\">Components: </label>\n      <span>{{ spell.components }}</span>\n      <span v-if=\"spell.material\" class=\"font-medium text-slate-600\">\n        ({{ spell.material.replace(/\\.$/, '') }})\n        <!-- Removes trailing preiod -->\n      </span>\n    </p>\n    <md-viewer :text=\"spell.desc\" :use-roller=\"true\" />\n    <p v-if=\"spell.higher_level\">\n      <label class=\"font-bold\">At higher levels:</label>\n      <md-viewer :text=\"spell.higher_level\" />\n    </p>\n    <p class=\"text-sm italic\">\n      Source:\n      <a target=\"NONE\" :href=\"spell.document__url\">\n        {{ spell.document__title }}\n        <Icon name=\"heroicons:arrow-top-right-on-squ","position":{"index":477,"start_char":0,"end_char":1500},"metadata":{"content_hash":"b671aff2d97917f3"},"created_at":"2026-01-14T02:20:44.612Z"}
{"chunk_id":"f2f12d52f3f54d124bcc45a71550d22a","source_id":"e9ede7a510a55bc2","text":"  Source:\n      <a target=\"NONE\" :href=\"spell.document__url\">\n        {{ spell.document__title }}\n        <Icon name=\"heroicons:arrow-top-right-on-square-20-solid\" />\n      </a>\n    </p>\n  </section>\n  <section v-else class=\"docs-container container\">Loading...</section>\n</template>\n\n<script setup>\nconst { data: spell } = useFindOne(API_ENDPOINTS.spells, useRoute().params.id);\n</script>","position":{"index":478,"start_char":1350,"end_char":1739},"metadata":{"content_hash":"ede68695cb6751b4"},"created_at":"2026-01-14T02:20:44.612Z"}
{"chunk_id":"c17bd57a6e3ac8443f238f139de38f15","source_id":"e8719506e8c741e4","text":"<template>\n  <main class=\"container\">\n    <h1>Spells by Class</h1>\n    <ul class=\"docs-toc\">\n      <li v-for=\"[name, slug] in available_classes\" :key=\"name\">\n        <nuxt-link tag=\"a\" :href=\"`/spells/by-class/${slug}`\">\n          {{ name }}\n        </nuxt-link>\n      </li>\n    </ul>\n  </main>\n</template>\n\n<script setup>\nconst available_classes = [\n  ['Bard', 'bard'],\n  ['Cleric', 'cleric'],\n  ['Sorcerer', 'sorcerer'],\n  ['Wizard', 'wizard'],\n  ['Druid', 'druid'],\n  ['Paladin', 'paladin'],\n  ['Warlock', 'warlock'],\n];\n</script>\n<style></style>","position":{"index":479,"start_char":0,"end_char":549},"metadata":{"content_hash":"840177578319a2d3"},"created_at":"2026-01-14T02:20:44.958Z"}
{"chunk_id":"25c803b77ac928f4d239a61fb7337aaf","source_id":"1884fcca38f5e84c","text":"<template>\n  <section class=\"container\">\n    <h1 class=\"filter-header\">\n      <span class=\"title-case\">{{ charclass }} spells</span>\n    </h1>\n    <div v-if=\"spellsByLevel\" :class=\"'three-column'\">\n      <p v-if=\"spellsByLevel.length == 0\">No results</p>\n\n      <ul\n        v-for=\"level in spellsByLevel\"\n        v-else\n        :key=\"level.lvl\"\n        class=\"list--items\"\n      >\n        <h3>{{ level.lvlText }}</h3>\n        <li v-for=\"spell in level.spells\" :key=\"spell.name\">\n          <nuxt-link\n            tag=\"a\"\n            :params=\"{ id: spell.slug }\"\n            :to=\"`/spells/${spell.slug}`\"\n          >\n            {{ spell.name }}\n          </nuxt-link>\n          <source-tag\n            v-if=\"spell.document__slug && spell.document__slug !== 'wotc-srd'\"\n            class=\"\"\n            :title=\"spell.document__title\"\n            :text=\"spell.document__slug\"\n          />\n        </li>\n      </ul>\n    </div>\n  </section>\n</template>\n\n<script setup>\nimport SourceTag from '~/components/SourceTag.vue';\n\nconst charclass = useRoute().params.charclass;\n\nconst { data: spellsByLevel } = useSpellsByClass(charclass, {\n  fields: [\n    'name',\n    'slug',\n    'level_int',\n    'document__slug',\n    'document__title',\n    'dnd_class',\n  ].join(),\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.table-link {\n  font-size: 0.5em;\n  text-decoration: underline;\n}\n\n.title-case {\n  text-transform: capitalize;\n}\n\n.class-selector {\n  font-size: 1rem;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-","position":{"index":480,"start_char":0,"end_char":1500},"metadata":{"content_hash":"34580fdb93513bba"},"created_at":"2026-01-14T02:20:45.553Z"}
{"chunk_id":"a5047c4d91565d73ef2a7fc21bc2650e","source_id":"1884fcca38f5e84c","text":"nderline;\n}\n\n.title-case {\n  text-transform: capitalize;\n}\n\n.class-selector {\n  font-size: 1rem;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: 400;\n  flex-grow: 1;\n  text-align: right;\n}\n</style>","position":{"index":481,"start_char":1350,"end_char":1560},"metadata":{"content_hash":"b1a0f37e34f911bc"},"created_at":"2026-01-14T02:20:45.553Z"}
{"chunk_id":"7baced160e00fc8fd1be676897b74cfa","source_id":"0ac95b24fca0d32e","text":"import { test, expect } from 'vitest';\nimport { mockNuxtImport, mountSuspended } from '@nuxt/test-utils/runtime';\nimport MonstersIndex from '~/pages/monsters/index.vue';\n\nconst page = await mountSuspended(MonstersIndex);\n\ntest('/monsters page can mount', async () => {\n  expect(page);\n});","position":{"index":482,"start_char":0,"end_char":288},"metadata":{"content_hash":"70ba7071256681b5"},"created_at":"2026-01-14T02:20:45.967Z"}
{"chunk_id":"6da864d6cb3e3262161b466061b3fe04","source_id":"fc64eb6c25a25526","text":"import { test, expect } from 'vitest';\nimport { mockNuxtImport, mountSuspended } from '@nuxt/test-utils/runtime';\nimport SpellsIndex from '~/pages/spells/index.vue';\n\nconst page = await mountSuspended(SpellsIndex);\n\ntest('/spells page can mount', async () => {\n  expect(page);\n});","position":{"index":483,"start_char":0,"end_char":280},"metadata":{"content_hash":"c96f9677cda5de4c"},"created_at":"2026-01-14T02:20:46.397Z"}
